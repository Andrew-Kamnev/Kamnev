function ObjectEventListener(e){this.objectToListen=e,this._eventsRouter={}}function _log(e){if(_canLog){var t=Array.prototype.slice.apply(arguments,[1]),i=new Date,n=i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()+"."+i.getMilliseconds();t[0]=n+" - "+t[0];try{switch(e){case"info":window.console.info.apply(window.console,t);break;case"warn":window.console.warn.apply(window.console,t);break;default:window.console.log.apply(window.console,t)}}catch(e){window.console||(_canLog=!1)}}}function logMsg(){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)}function createPopupCover(){var e=$("#cover-all");return e.length||(e=$('<div id="cover-all"></div>'),e.click(closeAllPopup).appendTo($("body"))),e.css({display:"block",width:"100%",height:$doc.height()+"px"}),e}function resizeCover(){var e=$("#cover-all");$doc.data("currentPopup")&&e.css({height:$doc.height()+"px"})}function showPopup(e,t,i,n){var a,s,o=$("string"==typeof e?"#"+e:e);$("#popup-content").removeAttr("style"),$doc.data("currentPopup")&&(hidePopup($doc.data("currentPopup")),$doc.removeData("currentPopup")),a=$doc.scrollTop()+($win.height()-o.height())/2,a=Math.max(a,$doc.scrollTop()+10),s=$doc.scrollLeft()+($win.width()-o.width())/2,s=Math.max(s,$doc.scrollLeft()+10),o.css({top:a,left:s}).show(),$doc.data("currentPopup",o[0]),t&&createPopupCover(),i&&(i.source&&i.destination&&$("#"+i.destination).val($("#"+i.source).val()),i.focus&&$("#"+i.focus).focus()),$doc.data("on_hide_popup",n||null)}function hidePopup(e){$("string"==typeof e?"#"+e:e).hide(),$("#cover-all").hide(),$doc.data("currentPopup")&&$doc.removeData("currentPopup"),$doc.data("on_hide_popup")&&($doc.data("on_hide_popup")(),$doc.removeData("on_hide_popup"))}function closeAllPopup(){if($(".ui-dialog-content").dialog("close"),$doc.data("currentPopup"))hidePopup($doc.data("currentPopup"));else{var e=["regions","login","auth","popup-container","password-reset","popup-treeview-container"];$.each(e,function(e,t){$("#"+t).hide()})}$("#cover-all").hide(),$(".ui-widget-overlay").hide(),$(".text-generator input").prop("disabled",!1)}function u_reRenderPopup(e,t,i,n){var a=$($doc.data("currentPopup")||"#popup-container"),s=$(t),o=a.offset(),r=$("#popup-content"),l=$(i||"#popup-inner"),c=$("#popup-close"),u=s.length?s.height():l.height(),d=n||l.width(),h=o.left-(d-r.width())/2,p=o.top-(u-r.height())/2;p=Math.max(p,$doc.scrollTop()+10),h=Math.max(h,$doc.scrollLeft()+10),a.animate({left:h,top:Math.max(p,0)},{duration:300},resizeCover()),r.animate({width:d,height:u},{duration:300},resizeCover()),0==c.css("opacity")&&c.fadeTo(300,1),null!=e&&c.toggle(e)}function u_showLoading(){var e=$("#popup-container");$doc.data("currentPopup")&&(hidePopup($doc.data("currentPopup")),$doc.removeData("currentPopup")),$("#popup-close").css("opacity",0),$("#popup-content").html('<div class="l"></div>').css({width:120,height:60}),e.css({top:$doc.scrollTop()+($win.height()-e.height())/2,left:$doc.scrollLeft()+($win.width()-e.width())/2}).show(),$doc.data("currentPopup",e[0]),createPopupCover()}function openStaticPopup(e){var t=$("#popup-content");t.find("."+e).length||t.html($("."+e).clone().show()),showPopup("popup-container",!0)}function showRegionSelector(e,t,i,n,a,s){$.get(e,{no_follow:i},function(e){$("#"+t).html(e);var i,o,r=$(a);n&&createPopupCover(),$doc.data("region_popup_"+t)||($doc.data("region_popup_"+t,$("#"+t)),$doc.data("region_popup_"+t).appendTo("body")),a?"center"==a?(i="string"==typeof t?$("#"+t):$(t),o=i.children("div"),i.show().css({top:$doc.scrollTop()+($win.height()-o.height())/2,left:$doc.scrollLeft()+($win.width()-o.width())/2}),$doc.data("currentPopup",i[0])):(a.blur(),$doc.data("region_popup_"+t).css({left:r.offset().left+~~s,top:r.offset().top+r.outerHeight()}).show()):$doc.data("region_popup_"+t).css({left:0,top:18}).show()})}function jShowRegions(e,t,i,n){t||(t="regions");var a,s,o=jShowRegions.arguments;if($doc.data("region_popup_"+t)||($doc.data("region_popup_"+t,$("#"+t)),$doc.data("region_popup_"+t).appendTo("body")),n&&createPopupCover(),e)if("center"==e)a="string"==typeof t?$("#"+t):$(t),s=a.children("div"),a.css({top:$doc.scrollTop()+($win.height()-393)/2,left:$doc.scrollLeft()+($win.width()-s.width())/2}).show(),$doc.data("currentPopup",a[0]);else{var r=$(e);if(isNaN(o[3]))e.blur(),$doc.data("region_popup_"+t).css({left:r.offset().left,top:r.offset().top+r.outerHeight()}).show();else{e.blur();var l=o[3];$doc.data("region_popup_"+t).css({left:r.offset().left+l,top:r.offset().top+r.outerHeight()}).show()}}else $doc.data("region_popup_"+t).css({left:0,top:18}).show();return!1}function hideRegions(e){$(".js-cover-all").hide(),$("#"+(e||"choose-region")).hide()}function selectCity(){$(".js-regions .cities a").click(function(){var e=$(this),t=e.attr("region_id"),i=e.text(),n=$(".js-regions .selected").index(),a=["\u0420\u041e\u0421\u0421\u0418\u042f","\u0423\u041a\u0420\u0410\u0418\u041d\u0410","\u041a\u0410\u0417\u0410\u0425\u0421\u0422\u0410\u041d","\u0411\u0415\u041b\u0410\u0420\u0423\u0421\u042c"],s=$(".js-psfc-option-country"),o=$(".js-psfc-option-city"),r=function(){$(".js-psfc-content").text($(".js-psfc-option:selected").text())},l=function(e){return!!e.filter(function(){return $(this).text()==i}).length};return e.is(".wholeregion")?(i=a[n],l(s)?$(".js-psfc-option-country:contains("+i+")").prop("selected",!0):($(".js-psfc-option-country:last").after("<option value="+t+' class="psfc-option js-psfc-option js-psfc-option-country">'+i+"</option>"),$(".js-psfc-option-country:last").prop("selected",!0)),r()):(l(o)?$(".js-psfc-option-city:contains("+i+")").prop("selected",!0):$(".js-psfc-option-city").length?($(".js-psfc-option-city:last").after("<option value="+t+'  class="psfc-option js-psfc-option js-psfc-option-city">'+i+"</option>"),$(".js-psfc-option-city:last").prop("selected",!0)):($(".js-psfc-option-country:last").after("<option value="+t+'  class="psfc-option js-psfc-option js-psfc-option-city">'+i+"</option>"),$(".js-psfc-option-city").prop("selected",!0)),r()),$("#popup-container, .js-cover-all").hide(),!1})}function checkTextareaLength(e,t,i,n){var a=$(e),s=a.val(),o=s.length,r=a.data("count-method")||"down";if("keydown"==n)o>i?a.val(s.substring(0,i)):(a.data("lengthBefore",s.length),a.data("text",s));else if("keyup"==n&&a.val().length>i){var l=parseInt(a.data("lengthBefore"));l+1<i?a.val(s.substring(0,i)):a.val(a.data("text"))}else"focusout"==n&&o>i&&a.val(s.substring(0,i));o=a.val().length,o="down"===r?i-o:o,$(t).html(o<i/4?'<span class="symbol-left">'+o+"</span>":o)}function autoResizeTextarea(e,t){var i,n=$(e),a=15,s=~~t;e.scrollHeight>e.offsetHeight?(i=e.scrollHeight+a,n.height(i)):e.offsetHeight>s&&(i=e.offsetHeight-2*a,n.height(i),e.scrollHeight>e.offsetHeight&&autoResizeTextarea(e),s>0&&e.offsetHeight<t&&n.height(t))}function autoResizeAndCheckLengthTextarea(e,t,i,n){var a=checkTextareaLength(e,t,i);return autoResizeTextarea(e,n),a}function urlencode(e){var t=encodeURIComponent(e),i=[[/!/g,"%21"],[/'/g,"%27"],[/\(/g,"%28"],[/\)/g,"%29"],[/\*/g,"%2A"],[/%20/g,"+"],[/~/g,"%7E"]];return $.each(i,function(){t=t.replace(this[0],this[1])}),t}function urldecode(e){return decodeURIComponent((e+"").replace(/\+/g,"%20"))}function getUrlParam(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i="[\\?&]"+t+"=([^&#]*)",n=new RegExp(i),a=n.exec(e);return null==a?"":urldecode(a[1])}function fromSearchEngine(){var e=document.referrer.match(/(google|yandex)/);return null!=e&&e[1]}function searchEngineQuery(){var e=fromSearchEngine();if(!e)return"";var t="";return"google"==e?t="q":"yandex"==e&&(t="text"),getUrlParam(document.referrer,t)||""}function AdFox_kph(e,t){$("#"+e).append('<div id="AF_kph'+t+'" class="rc-b" style="display:block"></div>')}function AdFox_c(e,t){$("#"+e).append('<div style="visibility:hidden;position:absolute"><iframe id="AF_c'+t+'" width=1 height=1 marginwidth=0 marginheight=0 scrolling=no frameborder=0></iframe></div>')}function AdFox_getCode(e,t,i){var n;if(e<10){try{n=document.getElementById("AF_c"+t).contentDocument}catch(e){}n?(n.write('<script>var AF_kphid="AF_kph'+t+'";</script>'),n.write('<script src="'+i+'"></script>')):setTimeout("AdFox_getCode("+ ++e+","+t+',"'+i+'")',100)}}function AdFox_write(e,t,i){if(void 0===n)var n=Math.floor(1e6*Math.random());"undefined"!=typeof document.referrer?"undefined"==typeof afReferrer&&(afReferrer=escape(document.referrer)):afReferrer="";var a=new Date;void 0===AF_cn?AF_cn=0:++AF_cn,++AF_cn,AdFox_kph(e,AF_cn),AdFox_c(e,AF_cn);var s={pp:"i",ps:"kas",p2:"ehns",puch:"a",pr:n,pt:"b",pd:a.getDate(),pw:a.getDay(),pv:a.getHours(),py:"a",prr:afReferrer},o=$.param($.extend({},s,t));document.adps=o,AdFox_getCode(1,AF_cn,"http://ads.adfox.ru/5376/prepareCode?"+o),"function"==typeof i&&i(AF_cn)}function pulscenSortable(e,t,i,n,a){var s,o="."+e+"_positions",r="prevValues",l=[],c=[];null!=n&&createArea(n,l),s=null!=i?$("."+e):$("#"+e),s.sortable({axis:"y",start:function(){var e=$(this).find(o).map(function(){return $(this).val()});$(this).data(r,$.makeArray(e))},update:function(){var e=$(this),i=e.data(r);e.removeData(r),a&&$(a).click(),i&&e.find(o).each(function(e,a){if($(a).val(i[e]),null!=n){createArea(n,c);var s=0;$.each(c,function(e){c[e]!=l[e]&&(s=1)}),1==s?$(t).prop("checked")||$(t).click():$(t).prop("checked")&&$(t).click()}})},items:"li:not(.js-notmove)"})}function create_sortable_images(){pulscenSortable("images","image_",{handles:$.makeArray($("#images .move"))})}function createArea(e,t){var i=0;$(e).each(function(){t[i]=$(this).attr("id"),i+=1})}function limitCheckbox(e,t,i){var n=$(i),a=$(t).length;$(e).parents(":eq(1)").find("label").toggleClass("checked"),3==a&&n.not(":checked").prop("disabled",!0),a<3&&n.prop("disabled",!1)}function checkLabel(e){var t,i=$(e),n=i.parents(":eq(2)").find("label.checked").length,a=i.parents(":eq(2)").find("input"),s=i.parents(":eq(1)").find("input");"checked"!=i.attr("class")&&3!=n?i.addClass("checked"):"checked"==i.attr("class")?i.removeClass("checked"):n=4,s.is(":checked")?s.prop("checked",!1):4!=n&&s.prop("checked",!0),t=i.parents(":eq(2)").find("input:checked").length,3==t&&a.not(":checked").prop("disabled",!0),t<3&&a.prop("disabled",!1)}function changeTab(e,t){var i=$(e).parent(),n=i.index(),a=i.parent().siblings("form");return i.addClass("selected").siblings().removeClass("selected"),a.hide().eq(n).show(),t&&u_reRenderPopup(),!1}function changeContent(e,t,i,n,a,s,o){var r=$(e),l=$("#"+t),c=$("#"+i).html();if(n){if(!$(n).length)return alert("\u041d\u0435 \u043e\u0442\u043c\u0435\u0447\u0435\u043d\u043e \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430"),!1;formSubmitter.disableButtons(r),$.getJSON(a,r.serialize(),function(e){var t=e.result;l.html(c),$(s).last().text(t).checkLength().autoResize(),$(".text-generator input").prop("disabled",!1),o&&u_reRenderPopup()})}else l.html(c),o&&u_reRenderPopup();return!1}function copyGeneratedText(e,t,i,n){var a=$(e).find("textarea").val();$(i).val(a).checkLength().trigger("input").trigger("propertychanged").trigger("keypress"),n||hidePopup("popup-container")}function beforeSelectLoading(e,t){var i=$("#"+t);i.length&&(i.find("select:first").prop("disabled",!0),i.parents(":eq(2)").addClass("loading"))}function completeSelectLoading(e,t){$("#"+t).parents(":eq(2)").removeClass("loading")}function declOfNum(e,t){var i=1,n=Math.abs(e),a=n%10,s=n%100;return 1==a&&11!=s?i=0:a>=2&&a<=4&&a%1==0&&(s<12||s>14)?i=1:(0==a||a>=5&&a<=9&&a%1==0||s>=11&&s<=14&&s%1==0)&&(i=2),t[i]}function createBookmarkLink(e,t){if(window.sidebar)window.sidebar.addPanel(t,e,"");else if(window.external)window.external.AddFavorite(e,t);else if(window.opera&&window.print)return!0}function flip_visible(e){var t=document.getElementById(e);if(t){if("visible"==t.className)return t.className="invisible",!1;if("invisible"==t.className)return t.className="visible",!1}return!0}function flipInnerHtml(e,t,i){var n=$("#"+e);n.length&&n.html(n.html()==t?i:t)}function toggleInfoMessage(e,t){$("#"+t).css({top:e.offsetHeight+2+e.offsetTop+"px",left:e.offsetWidth+e.offsetLeft-t.offsetWidth+95+"px"}).toggle()}function setSelection(e){var t,i;document.createRange?(t=document.createRange(),t.selectNode(e),i=window.getSelection(),i.removeAllRanges(),i.addRange(t)):(t=document.body.createTextRange(),t.moveToElementText(e),t.select())}function isEventCtrlPressed(e){return e.ctrlKey&&!e.altKey&&!e.shiftKey}function makeBigLetter(e){var t=$(e),i=t.val().replace(/^./,function(e){return e.toUpperCase()});t.val(i)}function hideFunctionSeo(e,t,i,n,a,s,o,r){var l,c=["href","target","title","onclick","rel","id","class"],u=[t,i,n,a,s,o,r],d=[],h=c.length;$(e).text();for(l=0;l<h;++l)u[l]&&u[l].length&&(d[l]=c[l]+'="'+u[l]+'"');$(e).wrap("<a "+d.join(" ")+"/>")}function showHideBox(e,t,i,n,a){var s=$(e),o=$(t);s.click(function(){s.toggleClass(a),o.toggle(),toggleText(n,i,s.text(),e)})}function showHideBox2(e,t,i,n,a){var s=$(e),o=t,r=i,l=n;s.each(function(){var e=$(this),t=e.parents(":eq(1)"),i=t.height()+5;t.find("ul").height()>i&&e.parent().show(),e.toggle(function(){var e=$(this);t.height("auto"),e.text(o),e.parent().addClass(l)},function(){var e=$(this);t.height(a),e.text(r),e.parent().removeClass(l)})})}function checkItAll(e,t,i,n){function a(e){e.parent().prepend(o),e.parent().find(".ugolok-img").css({display:"block",opacity:"0"}).animate({opacity:"1"},1e3).animate({opacity:"1"},2e3).animate({opacity:"0"},1e3,function(){$(this).remove()})}var s=$(e),o=n,r=$(t);s.prop("checked",!$(t).not(":checked").length),s.click(function(){i&&$(this).is(":checked")&&a($(this)),$(this).is(":checked")?(r.prop("checked",!0),s.prop("checked",!0)):(r.prop("checked",!1),s.prop("checked",!1))}),r.click(function(){i&&$(this).is(":checked")&&$(t+":checked").length<=2&&a($(this)),s.prop("checked",!$(t).not(":checked").length)})}function alertCheckWindow(e,t,i,n,a){function s(){return u.length?u.html(n):($("body").prepend(n),u=$(i),u.hide()),r=u.find("p strong.amount").text().replace(/N/,function(){return l+"&nbsp;"+declOfNum(l,["\u0442\u043e\u0432\u0430\u0440","\u0442\u043e\u0432\u0430\u0440\u0430","\u0442\u043e\u0432\u0430\u0440\u043e\u0432"])}),u.find("p strong.amount").html(r),$("#popup-content").html(u.html()),showPopup($("#popup-container"),!0),$(".return").attr("OnClick","hidePopup('popup-container'); return false;"),$(".continue").attr("href",o),!1}var o,r,l,c,u=$(i),d=a;return t?(c=e+":not("+t+")",$(c).click(function(){if(l=$(d+":checked").length)return o=$(this).attr("href"),s(),!1}),!1):(l=$(d+":checked").length,o=$(e).attr("href"),s(),!1)}function helpToClick(e,t){var i,n=$(e);return $(t+":checked").length?(i='<div id="alert-message"><div class="alert-message clearfix"><h1 class="rate-header">\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435!</h1><div class="blue-box"><p>\u0412\u044b \u0432\u044b\u0434\u0435\u043b\u0438\u043b\u0438 \u0434\u043b\u044f \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f <strong class="amount">N.</strong></p><p>\u041f\u0440\u0438 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0435 \u043d\u0430 \u0434\u0440\u0443\u0433\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0432\u0441\u0435 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u044b.</p><p><strong>\u0412\u044b \u0442\u043e\u0447\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0439\u0442\u0438 \u0441\u043e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b?</strong></p></div><div class="spisok"><ul><li>&larr;&nbsp;<a href="#" class="return" onclick = "hidePopup(\'popup-container\'); return false;" >\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044e</a></li><li class="last"><a href="#" class="continue">\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c</a>&nbsp;&rarr;</li></ul></div></div></div>',alertCheckWindow(n,"","#alert-message",i,".prod-cb input"),!1):location.href=n.attr("href")}function mySites(){$("#products-list input").prop("checked",!1)}function exitButton(e,t){var i=$(e),n=i.next().clone(),a=n.attr("href"),s=n.attr("class"),o=n.attr("id");$(t).click(function(){i.next().remove(),$(t+":checked").length?i.after("<a href="+a+" class="+s+" id="+o+">\u0412\u044b\u0445\u043e\u0434</a>"):i.after(n).next().text("\u0412\u044b\u0445\u043e\u0434")}),$(document).on("click",".js-toolbar-link-exit",function(){if($("#products-list input:checked").length){return alertCheckWindow("a","","#alert-message",'<div id="alert-message"><div class="alert-message clearfix"><h1 class="rate-header">\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435!</h1><div class="blue-box"><p>\u0412\u044b \u0432\u044b\u0434\u0435\u043b\u0438\u043b\u0438 \u0434\u043b\u044f \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f <strong class="amount">N.</strong></p><p>\u041f\u0440\u0438 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0435 \u043d\u0430 \u0434\u0440\u0443\u0433\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0432\u0441\u0435 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u044b.</p><p><strong>\u0412\u044b \u0442\u043e\u0447\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0439\u0442\u0438 \u0441\u043e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b?</strong></p></div><div class="spisok"><ul><li>&larr;&nbsp;<a href="#" class="return" onclick = "hidePopup(\'popup-container\'); return false;"  >\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044e</a></li><li class="last"><a href="#" class="continue">\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c</a>&nbsp;&rarr;</li></ul></div></div></div>',".prod-cb-edit input"),$(".return").parent().next().html(n).children().text("\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c").addClass("continue").after("&nbsp;&rarr;"),!1}})}function toggleDeleteCommonForm(e){var t="#"+e;return $("#popup-content").html($(t).html()),showPopup("popup-container",!0),!1}function textareaCheck(e,t){var i=$(t);$(e).click(function(){if("required"!=i.next().attr("class")&&i.after("<span class='required'></span>"),""==i.val())return i.next().text("\u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"),u_reRenderPopup(),!1})}function synhronyse(e,t,i){var n,a,s,o=[e,t];$.each(o,function(e,t){$(t).change(function(){n=$.inArray("#"+$(this).attr("id"),o),a=0!=n&&i?0:1,""==$(o[a]).attr("value")&&(s=$(o[n]+" option:selected").attr("value"),$(o[a]+" [value="+s+"]").prop("selected",!0))})})}function checkThisTo(e,t,i){var n=$(t),a=i;n.each(function(){$(this).click(function(){var e=$(this),t=e.val(),i=$.inArray(t,a);e.is(":checked")?-1==i&&a.push(t):a.splice(i,1)})}),$(e).click(function(){$(this).is(":checked")?n.each(function(){var e=$(this).val();-1==$.inArray(e,a)&&a.push(e)}):a.splice(0,a.length)})}function chooseOne(e){var t=$(e);t.click(function(){var e=$(this),i=t.index(e),n=e.parents(":eq(5)").next();n.show(),n.children().eq(i).siblings().hide(),n.children().eq(i).show()})}function closeGen(){$("#show-text-generator a").text("\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d\u044b \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0442\u043e\u0432\u0430\u0440\u0430"),$("#generate .text-generator").remove(),$(".button2").css("display","block"),u_reRenderPopup()}function pasteSearchExample(e,t){var i=$(e);return $(t).val(i.text()).focus(),!1}function makeStart(e){return e.setHomePage("http://www.pulscen.ru"),!1}function showAuthPopup(e,t){var i=$(e);i.length?(showPopup(i,!0,{focus:"session_email"}),_gaq.push(["_setCustomVar",1,"Member Type","Registered",2])):$.ajax({url:t,type:"post",dataType:"html",success:function(e){$("body").prepend($(e).html()),$(e).find("span[data-to]").length&&spanToLinks()},beforeSend:function(){u_showLoading()},complete:function(){showPopup($(e),!0,{focus:"session_email"})}})}function tableMessage(){$doc.on("click",".b-table-cell, .b-table-headCell",function(){var e=$(this).parents("tr").children().index($(this));0!=e&&(removeAllStyles(),makeNewStyles(e))})}function makeNewStyles(e){var t,i,n,a=[".js-table-firstCol",".js-table-secondCol",".js-table-thirdCol",".js-table-fourthCol",".js-table-fifthCol"];i=$(".js-packets div").eq(e-1).html(),n=a[e-1],t=$("tr:first-child "+n).html(),$(".js-table-thirdCol").removeClass("b-table_firstCell"),$(n).addClass("b-table_firstCell"),$("tr:last-child "+n).html('<div class="b-table-cellInsideCover"></div>'),$("tr:first-child "+n).html('<div class="b-table-cellInsideTopCover"><div class="b-table-cellInsideTop"><div class="b-table-cellInsideLeftTop"></div><div class="b-table-cellInsideRightTop"></div></div>'+t+"</div>"),$(".b-tableCover-message").html(i),$(".b-tableCover-message").toggleClass("b-tableCover_messageWithoutRBCorner",!$(this).is(":last-child"))}function removeAllStyles(){$(".b-table-cell, .b-table-headCell").removeClass("b-table_firstCell"),$(".b-table-cellInsideTopCover").parent().text($(".b-table-cellInsideTopCover").text().replace(/\s*/g,"")),$(".b-table-cellInsideTopCover, .b-table-cellInsideCover").remove()}function fixed(e){var t=$(".js-"+e),i=t.offset();parent;$win.scroll(function(){var n=t.width(),a=$(window).scrollTop();a>=t.offset().top-70&&(t.addClass(e+"-fixed").width(n),$.browser.msie&&$.browser.version<9&&$(".js-search-background-fixed").addClass("db")),a<=i.top-70&&(t.removeClass(e+"-fixed").width("auto"),$.browser.msie&&$.browser.version<9&&$(".js-search-background-fixed").removeClass("db"))}).resize(function(){if(t.length){var e=t.parent().width();t.width(e)}}),$(".js-psfssc-clear").click(function(){$(".js-psfss-input").val("").focus(),$(this).hide()}),$(".js-psfss-input").keypress(function(){$(".js-psfssc-clear").show()})}function changePopups(){var e=["enter","reg","reset"],t=["login","auth","password-reset"],i=["session_email","user_profile_attributes_name","password_email"];$.each(e,function(e,n){$doc.on("click","."+n+".dashedLink",function(){return closeAllPopup(),showPopup(t[e],!0,{focus:i[e]}),!1})})}function showToolbarPopups(e){var t=[".js-toolbar-link-registration",".js-toolbar-link-enter, #new_demand .dashed, .js-tryEnterLink, .js-enter-link"],i=["#auth","#login"],n=[["_trackPageview",e+"/form-registration"],["_setCustomVar",1,"Member Type","Registered",2]];$.each(t,function(t,a){$doc.on("click",a,function(){return showAuthPopup(i[t],"/ajax/auth_popup?return_to="+e),_gaq.push([n[t]]),!1})})}function toggleText(e,t,i,n){$selector=$(n),$selector.text(i==t?e:t)}function getFullDate(e){var t=new Date,i=t.getMonth(),n=t.getDate(),a=t.getFullYear(),s=["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"],o=s[i];$(e).text(n+" "+o+" "+a+" \u0433\u043e\u0434\u0430.")}function qtipMessageS(e,t,i){var n,a=$(e);switch(i){case"default":n={content:t,show:"focus",hide:"blur keypress",position:{corner:{target:"bottomRight",tooltip:"topLeft"}},style:{name:"light",width:{max:400},color:"#000",border:{color:"#c5c5c5",width:1},tip:{corner:"topLeft"}}};break;case"topRight":n={content:t,show:"focus",hide:"blur keypress",position:{corner:{target:"topRight",tooltip:"bottomLeft"}},style:{name:"light",width:{max:400},color:"#000",border:{color:"#c5c5c5",width:1},tip:{corner:"bottomLeft"}}};break;case"hover":n={content:t,show:"mouseover",hide:"mouseout keypress",position:{corner:{target:"bottomRight",tooltip:"topLeft"}},style:{name:"light",width:{max:400},color:"#000",border:{color:"#c5c5c5",width:1},tip:{corner:"topLeft"}}};break;case"bottomLeftHover":n={content:t,show:"mouseover",hide:"mouseout keypress",position:{corner:{target:"bottomLeft",tooltip:"topRight"}},style:{name:"light",width:{max:400},color:"#000",border:{color:"#c5c5c5",width:1},tip:{corner:"topRight"}}};break;case"topLeftHover":n={content:t,show:"mouseover",hide:"mouseout keypress",position:{corner:{target:"topLeft",tooltip:"bottomRight"}},style:{name:"light",width:{max:400},color:"#000",border:{color:"#c5c5c5",width:1},tip:{corner:"bottomRight"}}};break;case"topRightHover":n={content:t,show:"mouseover",hide:"mouseout keypress",position:{corner:{target:"topRight",tooltip:"bottomLeft"}},style:{name:"light",width:{max:400},color:"#000",border:{color:"#c5c5c5",width:1},tip:{corner:"bottomLeft"}}};break;case"showcaseFormFocus":n={content:t,show:"focus",hide:"blur keypress",position:{corner:{target:"leftMiddle",tooltip:"rightMiddle"}},style:{name:"light",width:{max:400},color:"#000",border:{color:"#c5c5c5",width:1},tip:{corner:"rightMiddle"}}};break;case"click":n={content:t,show:"click",hide:"mouseout",position:{corner:{target:"topLeft",tooltip:"bottomRight"}},style:{name:"light",width:{max:400},color:"#000",border:{color:"#c5c5c5",width:1},tip:{corner:"bottomRight"}}};break;case"click-6":n={content:t,show:"click",hide:"mouseleave",position:{corner:{target:"bottomLeft",tooltip:"topRight"}},style:{classes:{tooltip:"custom top-right-arrow"},width:250,padding:"15px 5px 5px",background:"#fff",border:{color:"#ccc",width:1},tip:{corner:"topRight",size:{x:10,y:10}},"font-size":11}};break;case"topRightClick":n={content:t,show:"click",hide:"mouseout",position:{corner:{target:"topRight",tooltip:"bottomLeft"}},style:{name:"light",width:{max:400},color:"#000",border:{color:"#c5c5c5",width:1},tip:{corner:"bottomLeft"}}};break;case"dnd":n={content:t,show:"mouseover",hide:"mousedown mouseleave click",position:{corner:{target:"bottomRight",tooltip:"topLeft"}},style:{name:"light",width:{max:400},color:"#000",border:{color:"#c5c5c5",width:1},tip:{corner:"topLeft"}}};break;case"bottomMiddleHover":n={content:t,show:"mouseover",hide:"mouseout keypress",position:{corner:{target:"bottomMiddle",tooltip:"topMiddle"},adjust:{x:-40}},style:{width:250,name:"light",color:"#000",border:{color:"#c5c5c5",width:1},tip:{corner:"topRight"}}};break;case"instantMenuError":n={content:t,show:{ready:!0},hide:!1,position:{corner:{target:"topRight",tooltip:"bottomLeft"},adjust:{y:-6}},style:{width:250,name:"light",color:"#000",border:{color:"#c5c5c5",width:1},tip:{corner:"bottomLeft"}},api:{onRender:function(){this.elements.tooltip.click(function(){$.cookie("instantMenuError","1",{path:"/"}),$(this).hide()})}}}}a.qtip(n),"click"===i&&$(a).click(function(){return!1})}function qtipMessage(e,t,i){qtipMessageS("#"+e,t,i)}function imgWidth(e,t,i,n,a,s,o,r){$.each(t,function(l,c){if(e>c){return imgHeight($.inArray(c,t),i,n,a,s,o,r),!1}})}function imgHeight(e,t,i,n,a,s,o){$.each(t,function(t,r){if(i>r&&t<=e)return s.attr("src",a[t]),setDimensionCookie(t,o),n="ready",!1}),"ready"!=n&&(s.attr("src",a[e]),setDimensionCookie(e,o))}function setDimensionCookie(e,t){$.cookie("dimension")!=t[e]&&$.cookie("dimension",t[e])}function inputLengthCheck(){$(document).on("keyup focusout keydown",".js-length-check",function(e){var t=$(this),i=t.data("counter");i&&checkTextareaLength(this,$("."+i),t.attr("maxlength")||t.data("maxlength")||255,e.type)}),$(".js-length-check").keyup()}function initFloatToolbar(){$win.one("scroll portalToolbar:load",function(){$(".js-main-toolbar").stick({top:0,zIndex:300,stickerClassName:"toolbar-fixed js-fixed-toolbar",wrapperClassName:"fixed-toolbar-dummy js-fixed-toolbar-dummy"})}).on("scroll portalToolbar:load",function(){var e=!!$(".js-timeout-menu").length&&$doc.scrollTop()>$(".js-timeout-menu").offset().top-90;$(".js-toolbar-logo").toggleClass("show-",e),$(".js-toolbar-user-section").toggleClass("highlight-",e)}),$doc.on("click",".js-toolbar-account-settings",function(e){var t=$(".toolbar-account-settings");t.hasClass("hidden")&&(t.show(),$doc.one("click.openAccountSettings",function(e){$(e.target).closest(".toolbar-account-settings").length||(t.hide(),$doc.off("click.openAccountSettings"))})),e.stopPropagation(),"#"===$(e.target).attr("href")&&e.preventDefault()}),$(".js-toolbar-stick")&&$(".js-toolbar-stick").stick({zIndex:499})}function spanToLinks(){var e=$("<a>");$("span[data-to]").each(function(){var t=e.clone(),i=($(this),this),n=i.attributes,a=i.parentNode,s=t[0];$(n).each(function(e){var i=n[e].nodeName,a=n[e].nodeValue;switch(i){case"data-alt":s.alt=a;break;case"data-title":s.title=a;break;case"data-to":s.href=a;break;case"data-target":s.target=a;break;case"data-text":s.innerHTML=a;break;default:t.attr(i,a)}}),this.innerHTML&&(s.innerHTML=this.innerHTML),a.replaceChild(s,this)})}function createLetter(e){var t="";e.find(".letter-").remove().end().each(function(){var e=$(this),i=$.trim(e.find("a").text());i.charAt(0)!==t&&(t=i.charAt(0),e.addClass("first-in-group").prepend($("<em>").text(t).addClass("letter-")))})}function Barmen(e){function t(e,t){return $.ajax({url:g.apiUrl+e,data:t,dataType:"jsonp"})}function i(){var e={wmode:"transparent"};$.each(y,function(t,i){var n=$("#"+i).data();swfobject.embedSWF(n.swf,i,n.width,n.height,"8.0.0",null,{link1:n.url.replace(/&/g,"%26")},e)}),y=[]}function n(e){return e+ +new Date+Math.floor(999999*Math.random())}function a(e,t){return $.each(e,function(e,i){var n=i.public_url;t=t.replace(new RegExp(n,"g"),s(n))}),t}function s(e){var t=$.param({rubric_id:f?0:p,region_id:h});return e+(/\?/.test(e)?"&":"?")+t}function o(){var e,t,i=$(this),n=$("<div>");n[0].innerHTML=i.data().html,t=n.find("script").remove(),e=this.contentWindow.document,e.open(),e.write(n.html()),t.each(function(t,i){i.src?e.write('<script type="text/javascript" src="'+i.src+'"></script>'):e.write('<script type="text/javascript">'+$(i).html()+"</script>")}),e.close(),i.contents().find("body").css({margin:0,overflow:"hidden"})}function r(e,t){switch(e.type){case"BannerShapes::Image":var i,r,l=e.banner_shape_link,c=e.banner_shape_image;if(!c)return;if(r=$("<img>").css({width:e.width+(e.percent_width?"%":""),height:e.height+(e.percent_height?"%":"")}).attr({src:c.public_url}),!l){i=r;break}i=$("<a>").attr({href:s(l.public_url),target:"_blank"}).addClass(g.className).append(r);break;case"BannerShapes::Html":if(!e.html)return;id=n("iframe-barmen-"),b.push(id),i=$iframe=$("<iframe>").addClass(g.className).attr({id:id}).css({width:e.width+(e.percent_width?"%":""),height:e.height+(e.percent_height?"%":"")}).data({html:a(e.banner_shape_links,e.html)}).one("load onreadystatechange",o).on("barmen:refresh",o);break;case"BannerShapes::Flash":if(!e.banner_shape_file)return;id=n("flash-barmen-"),y.push(id),i=$("<div>").addClass(g.className).attr({id:id}).data({width:e.width+(e.percent_width?"%":""),height:e.height+(e.percent_height?"%":""),url:e.banner_shape_link&&s(e.banner_shape_link.public_url),swf:e.banner_shape_file.public_url}).addClass("js-flash-barmen");break;case"BannerShapes::Showcase":var u="barmen_client/showcase"+(g.isMobile?"_mobile":"");e.url=s(e.banner_shape_link.public_url),i=HandlebarsTemplates[u](e)}return $("<div>").data({id:t}).append(i)}function l(e){for(var t,i,n=e.length;n;t=parseInt(Math.random()*n),i=e[--n],e[n]=e[t],e[t]=i);return!0}function c(){var e=$(g.statSelector);e.length&&t(m.SHARE.BANNERS_STAT,{"id[]":$.map(e,function(e){return $(e).data(g.dataStatUUIDName)}),region_id:h,rubric_id:p})}function u(e,t){t=t||0;var i=e.getBoundingClientRect().top<window.innerHeight+t,n=e.getBoundingClientRect().bottom>-t;return i&&n}function d(e,t){var i=$(e).data(),n=$(t).data();return e=i.order||0,t=n.order||0,e<t?-1:e>t?1:i.index<n.index?-1:i.index>n.index?1:0}var h,p,f,m={SHARE:{BANNERS:"/share/banners/",BANNERS_STAT:"/share/statistics/banners/views/"}},g={},v={className:"barmen",classEmpty:"barmen-empty",classLoaded:"js-barmen-loaded",autoStart:!0,dataName:"barmen",dataUUIDName:"uuid",dataStatUUIDName:"barmen-uuid",dataCount:"count",selector:"[data-barmen]",statSelector:"[data-barmen-uuid]",isMobile:!1},b=[],y=[],_={};this.getBanners=function(e){var t={uuids:[],slugs:{types:[],limits:{}}};return $(g.selector).each(function(){var i,n,a=$(this);!e&&a.hasClass(g.classLoaded)||(a.data(g.dataUUIDName)?t.uuids.push(a.data(g.dataName)):(i=parseInt(t.slugs.limits[a.data(g.dataName)])||0,n=parseInt(a.data(g.dataCount))||1,t.slugs.limits[a.data(g.dataName)]=i+n,t.slugs.types.push(a.data(g.dataName))))}),t},this.load=function(e){var n=this,a=$.Deferred(),s=$.Deferred(),o=n.getBanners(e)
;o.slugs.types.length?t(m.SHARE.BANNERS,$.extend(o.slugs,{placement:f||(p?"catalogue":"main_page"),"filters[rubric_id]":p,"filters[region_id]":h})).then(function(t){_=t,Object.keys(_).length?(n.replace(o.slugs,e),$doc.on("scroll",n.makeThrottleReplace(o.slugs,e,100))):$(g.selector).addClass(g.classEmpty),a.resolve()}):a.resolve(),o.uuids.length?t(m.SHARE.BANNERS,{uuids:o.uuids}).then(function(e){$.each(e,function(e,t){$("[data-"+g.dataName+'="'+t.uuid+'"]').html(r(t.banner_shape,t.uuid)).addClass(g.classLoaded)}),s.resolve()}):s.resolve(),$.when(a,s).done(function(){y.length&&i(),c(),$(document).trigger("Loaded:Barmen")})},this.loadOne=function(e,i){return t(m.SHARE.BANNERS+e).then(function(e){_[i]=e})},this.create=function(e,t){var i,n=_[e];return!!n&&(i=$("<div>"),$.isArray(n)?l(n):n=[n],$.each(n.splice(0,t||1),function(e,t){i.append(r(t.banner_shape,t.uuid))}),i.children())},this.makeThrottleReplace=function(e,t,i){var n,a=this;return function(){n||(n=!0,setTimeout(function(){n=!1},i),a.replace(e,t))}},this.replace=function(e,t){var i=this,n=$.makeArray($(g.selector).not("[data-"+g.dataUUIDName+"]"));$.each(n,function(e){$(this).data({index:e})}),$.each(n.sort(d),function(){var n=$(this),a=n.data(g.dataName),s=n.data(g.dataCount)||1,o=t||!n.hasClass(g.classLoaded),r=u(n[0],300);if((!~e.types.indexOf(a)||!_[a]||!_[a].length)&&o)return n.addClass(g.classEmpty),void $doc.trigger("InsertEmpty:Barmen");o&&r&&n.html(i.create(a,s)).addClass(g.classLoaded)})},this.initFlash=i,h=$('meta[name="barmen-region"]').attr("content"),p=$('meta[name="barmen-rubric"]').attr("content")||0,f=$('meta[name="barmen-placement"]').attr("content")||"",g=$.extend(!0,{},v,e),g.autoStart&&this.load()}function showDialogPopup(e,t,i,n,a){a=a||"",$(".ui-dialog-content").dialog("close"),t.dialog({resizable:!1,modal:!0,height:"auto",minHeight:"auto",width:"auto",dialogClass:"last-message dialog-popup "+a,position:{my:i,at:n,of:e}})}function paginateRender(e){$(".js-pagination-list").each(function(t){var i,n=$(this);n.attr("id",n.attr("id")+t),i=this.id.substr(19),Paginate.get(i,e).init({cur:n.data("current-page"),length:n.data("pages"),itemWidth:46})})}function naturalSort(e,t){e=e[0],t=t[0];var i,n,a=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,s=/(^[ ]*|[ ]*$)/g,o=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,r=/^0x[0-9a-f]+$/i,l=/^0/,c=function(e){return naturalSort.insensitive&&(""+e).toLowerCase()||""+e},u=c(e).replace(s,"")||"",d=c(t).replace(s,"")||"",h=u.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),p=d.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=parseInt(u.match(r))||1!=h.length&&u.match(o)&&Date.parse(u),m=parseInt(d.match(r))||f&&d.match(o)&&Date.parse(d)||null;if(m){if(f<m)return-1;if(f>m)return 1}for(var g=0,v=Math.max(h.length,p.length);g<v;g++){if(i=!(h[g]||"").match(l)&&parseFloat(h[g])||h[g]||0,n=!(p[g]||"").match(l)&&parseFloat(p[g])||p[g]||0,isNaN(i)!==isNaN(n))return isNaN(i)?1:-1;if(typeof i!=typeof n&&(i+="",n+=""),i<n)return-1;if(i>n)return 1}return 0}function addFloatingTip(){$(".js-showcases-teasers-list .js-showcase-link").each(function(){var e=$(this);e.floatingTip({position:"left",content:'<a class="add-showcase-promo" href="'+e.find("a").attr("href")+'">\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c</a>',delay:100,animation:300,tipBoxSelector:".js-float-tip-box"})})}!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function i(e){var t="length"in e&&e.length,i=ae.type(e);return"function"!==i&&!ae.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e))}function n(e,t,i){if(ae.isFunction(t))return ae.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return ae.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(he.test(t))return ae.filter(t,e,i);t=ae.filter(t,e)}return ae.grep(e,function(e){return ae.inArray(e,t)>=0!==i})}function a(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}function s(e){var t=ye[e]={};return ae.each(e.match(be)||[],function(e,i){t[i]=!0}),t}function o(){fe.addEventListener?(fe.removeEventListener("DOMContentLoaded",r,!1),e.removeEventListener("load",r,!1)):(fe.detachEvent("onreadystatechange",r),e.detachEvent("onload",r))}function r(){(fe.addEventListener||"load"===event.type||"complete"===fe.readyState)&&(o(),ae.ready())}function l(e,t,i){if(i===undefined&&1===e.nodeType){var n="data-"+t.replace(ke,"-$1").toLowerCase();if("string"==typeof(i=e.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:xe.test(i)?ae.parseJSON(i):i)}catch(e){}ae.data(e,t,i)}else i=undefined}return i}function c(e){var t;for(t in e)if(("data"!==t||!ae.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function u(e,t,i,n){if(ae.acceptData(e)){var a,s,o=ae.expando,r=e.nodeType,l=r?ae.cache:e,c=r?e[o]:e[o]&&o;if(c&&l[c]&&(n||l[c].data)||i!==undefined||"string"!=typeof t)return c||(c=r?e[o]=K.pop()||ae.guid++:o),l[c]||(l[c]=r?{}:{toJSON:ae.noop}),"object"!=typeof t&&"function"!=typeof t||(n?l[c]=ae.extend(l[c],t):l[c].data=ae.extend(l[c].data,t)),s=l[c],n||(s.data||(s.data={}),s=s.data),i!==undefined&&(s[ae.camelCase(t)]=i),"string"==typeof t?null==(a=s[t])&&(a=s[ae.camelCase(t)]):a=s,a}}function d(e,t,i){if(ae.acceptData(e)){var n,a,s=e.nodeType,o=s?ae.cache:e,r=s?e[ae.expando]:ae.expando;if(o[r]){if(t&&(n=i?o[r]:o[r].data)){ae.isArray(t)?t=t.concat(ae.map(t,ae.camelCase)):t in n?t=[t]:(t=ae.camelCase(t),t=t in n?[t]:t.split(" ")),a=t.length;for(;a--;)delete n[t[a]];if(i?!c(n):!ae.isEmptyObject(n))return}(i||(delete o[r].data,c(o[r])))&&(s?ae.cleanData([e],!0):ie.deleteExpando||o!=o.window?delete o[r]:o[r]=null)}}}function h(){return!0}function p(){return!1}function f(){try{return fe.activeElement}catch(e){}}function m(e){var t=Fe.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function g(e,t){var i,n,a=0,s=typeof e.getElementsByTagName!==$e?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==$e?e.querySelectorAll(t||"*"):undefined;if(!s)for(s=[],i=e.childNodes||e;null!=(n=i[a]);a++)!t||ae.nodeName(n,t)?s.push(n):ae.merge(s,g(n,t));return t===undefined||t&&ae.nodeName(e,t)?ae.merge([e],s):s}function v(e){Se.test(e.type)&&(e.defaultChecked=e.checked)}function b(e,t){return ae.nodeName(e,"table")&&ae.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function y(e){return e.type=(null!==ae.find.attr(e,"type"))+"/"+e.type,e}function _(e){var t=Ge.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function w(e,t){for(var i,n=0;null!=(i=e[n]);n++)ae._data(i,"globalEval",!t||ae._data(t[n],"globalEval"))}function $(e,t){if(1===t.nodeType&&ae.hasData(e)){var i,n,a,s=ae._data(e),o=ae._data(t,s),r=s.events;if(r){delete o.handle,o.events={};for(i in r)for(n=0,a=r[i].length;n<a;n++)ae.event.add(t,i,r[i][n])}o.data&&(o.data=ae.extend({},o.data))}}function x(e,t){var i,n,a;if(1===t.nodeType){if(i=t.nodeName.toLowerCase(),!ie.noCloneEvent&&t[ae.expando]){a=ae._data(t);for(n in a.events)ae.removeEvent(t,n,a.handle);t.removeAttribute(ae.expando)}"script"===i&&t.text!==e.text?(y(t).text=e.text,_(t)):"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),ie.html5Clone&&e.innerHTML&&!ae.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&Se.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.defaultSelected=t.selected=e.defaultSelected:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}}function k(t,i){var n,a=ae(i.createElement(t)).appendTo(i.body),s=e.getDefaultComputedStyle&&(n=e.getDefaultComputedStyle(a[0]))?n.display:ae.css(a[0],"display");return a.detach(),s}function C(e){var t=fe,i=Je[e];return i||(i=k(e,t),"none"!==i&&i||(Qe=(Qe||ae("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Qe[0].contentWindow||Qe[0].contentDocument).document,t.write(),t.close(),i=k(e,t),Qe.detach()),Je[e]=i),i}function P(e,t){return{get:function(){var i=e();if(null!=i)return i?void delete this.get:(this.get=t).apply(this,arguments)}}}function T(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,a=dt.length;a--;)if((t=dt[a]+i)in e)return t;return n}function D(e,t){for(var i,n,a,s=[],o=0,r=e.length;o<r;o++)n=e[o],n.style&&(s[o]=ae._data(n,"olddisplay"),i=n.style.display,t?(s[o]||"none"!==i||(n.style.display=""),""===n.style.display&&Te(n)&&(s[o]=ae._data(n,"olddisplay",C(n.nodeName)))):(a=Te(n),(i&&"none"!==i||!a)&&ae._data(n,"olddisplay",a?i:ae.css(n,"display"))));for(o=0;o<r;o++)n=e[o],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?s[o]||"":"none"));return e}function S(e,t,i){var n=rt.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function A(e,t,i,n,a){for(var s=i===(n?"border":"content")?4:"width"===t?1:0,o=0;s<4;s+=2)"margin"===i&&(o+=ae.css(e,i+Pe[s],!0,a)),n?("content"===i&&(o-=ae.css(e,"padding"+Pe[s],!0,a)),"margin"!==i&&(o-=ae.css(e,"border"+Pe[s]+"Width",!0,a))):(o+=ae.css(e,"padding"+Pe[s],!0,a),"padding"!==i&&(o+=ae.css(e,"border"+Pe[s]+"Width",!0,a)));return o}function j(e,t,i){var n=!0,a="width"===t?e.offsetWidth:e.offsetHeight,s=Ze(e),o=ie.boxSizing&&"border-box"===ae.css(e,"boxSizing",!1,s);if(a<=0||null==a){if(a=et(e,t,s),(a<0||null==a)&&(a=e.style[t]),it.test(a))return a;n=o&&(ie.boxSizingReliable()||a===e.style[t]),a=parseFloat(a)||0}return a+A(e,t,i||(o?"border":"content"),n,s)+"px"}function E(e,t,i,n,a){return new E.prototype.init(e,t,i,n,a)}function I(){return setTimeout(function(){ht=undefined}),ht=ae.now()}function N(e,t){var i,n={height:e},a=0;for(t=t?1:0;a<4;a+=2-t)i=Pe[a],n["margin"+i]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function F(e,t,i){for(var n,a=(bt[t]||[]).concat(bt["*"]),s=0,o=a.length;s<o;s++)if(n=a[s].call(i,t,e))return n}function M(e,t,i){var n,a,s,o,r,l,c,u=this,d={},h=e.style,p=e.nodeType&&Te(e),f=ae._data(e,"fxshow");i.queue||(r=ae._queueHooks(e,"fx"),null==r.unqueued&&(r.unqueued=0,l=r.empty.fire,r.empty.fire=function(){r.unqueued||l()}),r.unqueued++,u.always(function(){u.always(function(){r.unqueued--,ae.queue(e,"fx").length||r.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[h.overflow,h.overflowX,h.overflowY],c=ae.css(e,"display"),"inline"===("none"===c?ae._data(e,"olddisplay")||C(e.nodeName):c)&&"none"===ae.css(e,"float")&&(ie.inlineBlockNeedsLayout&&"inline"!==C(e.nodeName)?h.zoom=1:h.display="inline-block")),i.overflow&&(h.overflow="hidden",ie.shrinkWrapBlocks()||u.always(function(){h.overflow=i.overflow[0],h.overflowX=i.overflow[1],h.overflowY=i.overflow[2]}));for(n in t)if(a=t[n],ft.exec(a)){if(delete t[n],s=s||"toggle"===a,a===(p?"hide":"show")){if("show"!==a||!f||f[n]===undefined)continue;p=!0}d[n]=f&&f[n]||ae.style(e,n)}else c=undefined;if(ae.isEmptyObject(d))"inline"===("none"===c?C(e.nodeName):c)&&(h.display=c);else{f?"hidden"in f&&(p=f.hidden):f=ae._data(e,"fxshow",{}),s&&(f.hidden=!p),p?ae(e).show():u.done(function(){ae(e).hide()}),u.done(function(){var t;ae._removeData(e,"fxshow");for(t in d)ae.style(e,t,d[t])});for(n in d)o=F(p?f[n]:0,n,u),n in f||(f[n]=o.start,p&&(o.end=o.start,o.start="width"===n||"height"===n?1:0))}}function L(e,t){var i,n,a,s,o;for(i in e)if(n=ae.camelCase(i),a=t[n],s=e[i],ae.isArray(s)&&(a=s[1],s=e[i]=s[0]),i!==n&&(e[n]=s,delete e[i]),(o=ae.cssHooks[n])&&"expand"in o){s=o.expand(s),delete e[n];for(i in s)i in e||(e[i]=s[i],t[i]=a)}else t[n]=a}function R(e,t,i){var n,a,s=0,o=vt.length,r=ae.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=ht||I(),i=Math.max(0,c.startTime+c.duration-t),n=i/c.duration||0,s=1-n,o=0,l=c.tweens.length;o<l;o++)c.tweens[o].run(s);return r.notifyWith(e,[c,s,i]),s<1&&l?i:(r.resolveWith(e,[c]),!1)},c=r.promise({elem:e,props:ae.extend({},t),opts:ae.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:ht||I(),duration:i.duration,tweens:[],createTween:function(t,i){var n=ae.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(a)return this;for(a=!0;i<n;i++)c.tweens[i].run(1);return t?r.resolveWith(e,[c,t]):r.rejectWith(e,[c,t]),this}}),u=c.props;for(L(u,c.opts.specialEasing);s<o;s++)if(n=vt[s].call(c,e,u,c.opts))return n;return ae.map(u,F,c),ae.isFunction(c.opts.start)&&c.opts.start.call(e,c),ae.fx.timer(ae.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function O(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,a=0,s=t.toLowerCase().match(be)||[];if(ae.isFunction(i))for(;n=s[a++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function H(e,t,i,n){function a(r){var l;return s[r]=!0,ae.each(e[r]||[],function(e,r){var c=r(t,i,n);return"string"!=typeof c||o||s[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),a(c),!1)}),l}var s={},o=e===Bt;return a(t.dataTypes[0])||!s["*"]&&a("*")}function z(e,t){var i,n,a=ae.ajaxSettings.flatOptions||{};for(n in t)t[n]!==undefined&&((a[n]?e:i||(i={}))[n]=t[n]);return i&&ae.extend(!0,e,i),e}function B(e,t,i){for(var n,a,s,o,r=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),a===undefined&&(a=e.mimeType||t.getResponseHeader("Content-Type"));if(a)for(o in r)if(r[o]&&r[o].test(a)){l.unshift(o);break}if(l[0]in i)s=l[0];else{for(o in i){if(!l[0]||e.converters[o+" "+l[0]]){s=o;break}n||(n=o)}s=s||n}if(s)return s!==l[0]&&l.unshift(s),i[s]}function q(e,t,i,n){var a,s,o,r,l,c={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(s=u.shift();s;)if(e.responseFields[s]&&(i[e.responseFields[s]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=u.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(o=c[l+" "+s]||c["* "+s]))for(a in c)if(r=a.split(" "),r[1]===s&&(o=c[l+" "+r[0]]||c["* "+r[0]])){!0===o?o=c[a]:!0!==c[a]&&(s=r[0],u.unshift(r[1]));break}if(!0!==o)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}function U(e,t,i,n){var a;if(ae.isArray(t))ae.each(t,function(t,a){i||Wt.test(e)?n(e,a):U(e+"["+("object"==typeof a?t:"")+"]",a,i,n)});else if(i||"object"!==ae.type(t))n(e,t);else for(a in t)U(e+"["+a+"]",t[a],i,n)}function W(){try{return new e.XMLHttpRequest}catch(e){}}function G(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function V(e){return ae.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var K=[],Y=K.slice,X=K.concat,Q=K.push,J=K.indexOf,Z={},ee=Z.toString,te=Z.hasOwnProperty,ie={},ne="1.11.3",ae=function(e,t){return new ae.fn.init(e,t)},se=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,oe=/^-ms-/,re=/-([\da-z])/gi,le=function(e,t){return t.toUpperCase()};ae.fn=ae.prototype={jquery:ne,constructor:ae,selector:"",length:0,toArray:function(){return Y.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:Y.call(this)},pushStack:function(e){var t=ae.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ae.each(this,e,t)},map:function(e){return this.pushStack(ae.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(Y.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Q,sort:K.sort,splice:K.splice},ae.extend=ae.fn.extend=function(){var e,t,i,n,a,s,o=arguments[0]||{},r=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[r]||{},r++),"object"==typeof o||ae.isFunction(o)||(o={}),r===l&&(o=this,r--);r<l;r++)if(null!=(a=arguments[r]))for(n in a)e=o[n],i=a[n],o!==i&&(c&&i&&(ae.isPlainObject(i)||(t=ae.isArray(i)))?(t?(t=!1,s=e&&ae.isArray(e)?e:[]):s=e&&ae.isPlainObject(e)?e:{},o[n]=ae.extend(c,s,i)):i!==undefined&&(o[n]=i));return o},ae.extend({expando:"jQuery"+(ne+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ae.type(e)},isArray:Array.isArray||function(e){return"array"===ae.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!ae.isArray(e)&&e-parseFloat(e)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==ae.type(e)||e.nodeType||ae.isWindow(e))return!1;try{if(e.constructor&&!te.call(e,"constructor")&&!te.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(ie.ownLast)for(t in e)return te.call(e,t);for(t in e);return t===undefined||te.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Z[ee.call(e)]||"object":typeof e},globalEval:function(t){t&&ae.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(oe,"ms-").replace(re,le)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var a=0,s=e.length,o=i(e);if(n){if(o)for(;a<s&&!1!==t.apply(e[a],n);a++);else for(a in e)if(!1===t.apply(e[a],n))break}else if(o)for(;a<s&&!1!==t.call(e[a],a,e[a]);a++);else for(a in e)if(!1===t.call(e[a],a,e[a]))break;return e},trim:function(e){return null==e?"":(e+"").replace(se,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?ae.merge(n,"string"==typeof e?[e]:e):Q.call(n,e)),n},inArray:function(e,t,i){var n;if(t){if(J)return J.call(t,e,i);for(n=t.length,i=i?i<0?Math.max(0,n+i):i:0;i<n;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,t){for(var i=+t.length,n=0,a=e.length;n<i;)e[a++]=t[n++];if(i!==i)for(;t[n]!==undefined;)e[a++]=t[n++];return e.length=a,e},grep:function(e,t,i){for(var n=[],a=0,s=e.length,o=!i;a<s;a++)!t(e[a],a)!==o&&n.push(e[a]);return n},map:function(e,t,n){var a,s=0,o=e.length,r=i(e),l=[];if(r)for(;s<o;s++)null!=(a=t(e[s],s,n))&&l.push(a);else for(s in e)null!=(a=t(e[s],s,n))&&l.push(a);return X.apply([],l)},guid:1,proxy:function(e,t){var i,n,a;return"string"==typeof t&&(a=e[t],t=e,e=a),ae.isFunction(e)?(i=Y.call(arguments,2),n=function(){return e.apply(t||this,i.concat(Y.call(arguments)))},n.guid=e.guid=e.guid||ae.guid++,n):undefined},now:function(){return+new Date},support:ie}),ae.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()});var ce=function(e){function t(e,t,i,n){var a,s,o,r,l,c,d,p,f,m;if((t?t.ownerDocument||t:H)!==E&&j(t),t=t||E,i=i||[],r=t.nodeType,"string"!=typeof e||!e||1!==r&&9!==r&&11!==r)return i;if(!n&&N){if(11!==r&&(a=be.exec(e)))if(o=a[1]){if(9===r){if(!(s=t.getElementById(o))||!s.parentNode)return i;if(s.id===o)return i.push(s),i}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&R(t,s)&&s.id===o)return i.push(s),i}else{if(a[2])return J.apply(i,t.getElementsByTagName(e)),i;if((o=a[3])&&w.getElementsByClassName)return J.apply(i,t.getElementsByClassName(o)),i}if(w.qsa&&(!F||!F.test(e))){if(p=d=O,f=t,m=1!==r&&e,1===r&&"object"!==t.nodeName.toLowerCase()){for(c=C(e),(d=t.getAttribute("id"))?p=d.replace(_e,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+h(c[l]);f=ye.test(e)&&u(t.parentNode)||t,m=c.join(",")}if(m)try{return J.apply(i,f.querySelectorAll(m)),i}catch(e){}finally{d||t.removeAttribute("id")}}}return T(e.replace(le,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>$.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[O]=!0,e}function a(e){var t=E.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var i=e.split("|"),n=e.length;n--;)$.attrHandle[i[n]]=t}function o(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||V)-(~e.sourceIndex||V);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function r(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function l(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function c(e){return n(function(t){return t=+t,n(function(i,n){for(var a,s=e([],i.length,t),o=s.length;o--;)i[a=s[o]]&&(i[a]=!(n[a]=i[a]))})})}function u(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function h(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function p(e,t,i){var n=t.dir,a=i&&"parentNode"===n,s=B++;return t.first?function(t,i,s){for(;t=t[n];)if(1===t.nodeType||a)return e(t,i,s)}:function(t,i,o){var r,l,c=[z,s];if(o){for(;t=t[n];)if((1===t.nodeType||a)&&e(t,i,o))return!0}else for(;t=t[n];)if(1===t.nodeType||a){if(l=t[O]||(t[O]={}),(r=l[n])&&r[0]===z&&r[1]===s)return c[2]=r[2];if(l[n]=c,c[2]=e(t,i,o))return!0}}}function f(e){return e.length>1?function(t,i,n){for(var a=e.length;a--;)if(!e[a](t,i,n))return!1;return!0}:e[0]}function m(e,i,n){for(var a=0,s=i.length;a<s;a++)t(e,i[a],n);return n}function g(e,t,i,n,a){for(var s,o=[],r=0,l=e.length,c=null!=t;r<l;r++)(s=e[r])&&(i&&!i(s,n,a)||(o.push(s),c&&t.push(r)));return o}function v(e,t,i,a,s,o){return a&&!a[O]&&(a=v(a)),s&&!s[O]&&(s=v(s,o)),n(function(n,o,r,l){var c,u,d,h=[],p=[],f=o.length,v=n||m(t||"*",r.nodeType?[r]:r,[]),b=!e||!n&&t?v:g(v,h,e,r,l),y=i?s||(n?e:f||a)?[]:o:b;if(i&&i(b,y,r,l),a)for(c=g(y,p),a(c,[],r,l),u=c.length;u--;)(d=c[u])&&(y[p[u]]=!(b[p[u]]=d));if(n){if(s||e){if(s){for(c=[],u=y.length;u--;)(d=y[u])&&c.push(b[u]=d);s(null,y=[],c,l)}for(u=y.length;u--;)(d=y[u])&&(c=s?ee(n,d):h[u])>-1&&(n[c]=!(o[c]=d))}}else y=g(y===o?y.splice(f,y.length):y),s?s(null,o,y,l):J.apply(o,y)})}function b(e){for(var t,i,n,a=e.length,s=$.relative[e[0].type],o=s||$.relative[" "],r=s?1:0,l=p(function(e){return e===t},o,!0),c=p(function(e){return ee(t,e)>-1},o,!0),u=[function(e,i,n){var a=!s&&(n||i!==D)||((t=i).nodeType?l(e,i,n):c(e,i,n));return t=null,a}];r<a;r++)if(i=$.relative[e[r].type])u=[p(f(u),i)];else{if(i=$.filter[e[r].type].apply(null,e[r].matches),i[O]){for(n=++r;n<a&&!$.relative[e[n].type];n++);return v(r>1&&f(u),r>1&&h(e.slice(0,r-1).concat({value:" "===e[r-2].type?"*":""})).replace(le,"$1"),i,r<n&&b(e.slice(r,n)),n<a&&b(e=e.slice(n)),n<a&&h(e))}u.push(i)}return f(u)}function y(e,i){var a=i.length>0,s=e.length>0,o=function(n,o,r,l,c){var u,d,h,p=0,f="0",m=n&&[],v=[],b=D,y=n||s&&$.find.TAG("*",c),_=z+=null==b?1:Math.random()||.1,w=y.length;for(c&&(D=o!==E&&o);f!==w&&null!=(u=y[f]);f++){if(s&&u){for(d=0;h=e[d++];)if(h(u,o,r)){l.push(u);break}c&&(z=_)}a&&((u=!h&&u)&&p--,n&&m.push(u))}if(p+=f,a&&f!==p){for(d=0;h=i[d++];)h(m,v,o,r);if(n){if(p>0)for(;f--;)m[f]||v[f]||(v[f]=X.call(l));v=g(v)}J.apply(l,v),c&&!n&&v.length>0&&p+i.length>1&&t.uniqueSort(l)}return c&&(z=_,D=b),m};return a?n(o):o}var _,w,$,x,k,C,P,T,D,S,A,j,E,I,N,F,M,L,R,O="sizzle"+1*new Date,H=e.document,z=0,B=0,q=i(),U=i(),W=i(),G=function(e,t){return e===t&&(A=!0),0},V=1<<31,K={}.hasOwnProperty,Y=[],X=Y.pop,Q=Y.push,J=Y.push,Z=Y.slice,ee=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",ne="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ae=ne.replace("w","w#"),se="\\["+ie+"*("+ne+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ae+"))|)"+ie+"*\\]",oe=":("+ne+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+se+")*)|.*)\\)|)",re=new RegExp(ie+"+","g"),le=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),ce=new RegExp("^"+ie+"*,"+ie+"*"),ue=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),de=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),he=new RegExp(oe),pe=new RegExp("^"+ae+"$"),fe={ID:new RegExp("^#("+ne+")"),CLASS:new RegExp("^\\.("+ne+")"),TAG:new RegExp("^("+ne.replace("w","w*")+")"),ATTR:new RegExp("^"+se),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,be=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,_e=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),$e=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},xe=function(){j()};try{J.apply(Y=Z.call(H.childNodes),H.childNodes),Y[H.childNodes.length].nodeType}catch(e){J={apply:Y.length?function(e,t){Q.apply(e,Z.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}w=t.support={},k=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},j=t.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:H;return n!==E&&9===n.nodeType&&n.documentElement?(E=n,I=n.documentElement,i=n.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",xe,!1):i.attachEvent&&i.attachEvent("onunload",xe)),N=!k(n),w.attributes=a(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=a(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=ve.test(n.getElementsByClassName),w.getById=a(function(e){return I.appendChild(e).id=O,!n.getElementsByName||!n.getElementsByName(O).length}),w.getById?($.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&N){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},$.filter.ID=function(e){var t=e.replace(we,$e);return function(e){return e.getAttribute("id")===t}}):(delete $.find.ID,$.filter.ID=function(e){var t=e.replace(we,$e);return function(e){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}}),$.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],a=0,s=t.getElementsByTagName(e);if("*"===e){for(;i=s[a++];)1===i.nodeType&&n.push(i);return n}return s},$.find.CLASS=w.getElementsByClassName&&function(e,t){if(N)return t.getElementsByClassName(e)},M=[],F=[],(w.qsa=ve.test(n.querySelectorAll))&&(a(function(e){I.appendChild(e).innerHTML="<a id='"+O+"'></a><select id='"+O+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&F.push("[*^$]="+ie+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||F.push("\\["+ie+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+O+"-]").length||F.push("~="),e.querySelectorAll(":checked").length||F.push(":checked"),e.querySelectorAll("a#"+O+"+*").length||F.push(".#.+[+~]")}),a(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&F.push("name"+ie+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||F.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),F.push(",.*:")})),(w.matchesSelector=ve.test(L=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&a(function(e){w.disconnectedMatch=L.call(e,"div"),L.call(e,"[s!='']:x"),M.push("!=",oe)}),F=F.length&&new RegExp(F.join("|")),M=M.length&&new RegExp(M.join("|")),t=ve.test(I.compareDocumentPosition),R=t||ve.test(I.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=t?function(e,t){if(e===t)return A=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!w.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===H&&R(H,e)?-1:t===n||t.ownerDocument===H&&R(H,t)?1:S?ee(S,e)-ee(S,t):0:4&i?-1:1)}:function(e,t){if(e===t)return A=!0,0;var i,a=0,s=e.parentNode,r=t.parentNode,l=[e],c=[t];if(!s||!r)return e===n?-1:t===n?1:s?-1:r?1:S?ee(S,e)-ee(S,t):0;if(s===r)return o(e,t);for(i=e;i=i.parentNode;)l.unshift(i);for(i=t;i=i.parentNode;)c.unshift(i);for(;l[a]===c[a];)a++;return a?o(l[a],c[a]):l[a]===H?-1:c[a]===H?1:0},n):E},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==E&&j(e),i=i.replace(de,"='$1']"),w.matchesSelector&&N&&(!M||!M.test(i))&&(!F||!F.test(i)))try{var n=L.call(e,i);if(n||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return t(i,E,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==E&&j(e),R(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==E&&j(e);var i=$.attrHandle[t.toLowerCase()],n=i&&K.call($.attrHandle,t.toLowerCase())?i(e,t,!N):undefined;return n!==undefined?n:w.attributes||!N?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,a=0;if(A=!w.detectDuplicates,S=!w.sortStable&&e.slice(0),e.sort(G),A){for(;t=e[a++];)t===e[a]&&(n=i.push(a));for(;n--;)e.splice(i[n],1)}return S=null,e},x=t.getText=function(e){var t,i="",n=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=x(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[n++];)i+=x(t);return i},$=t.selectors={cacheLength:50,createPseudo:n,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,$e),e[3]=(e[3]||e[4]||e[5]||"").replace(we,$e),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&he.test(i)&&(t=C(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,$e).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=q[e+" "];return t||(t=new RegExp("(^|"+ie+")"+e+"("+ie+"|$)"))&&q(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(a){var s=t.attr(a,e);return null==s?"!="===i:!i||(s+="","="===i?s===n:"!="===i?s!==n:"^="===i?n&&0===s.indexOf(n):"*="===i?n&&s.indexOf(n)>-1:"$="===i?n&&s.slice(-n.length)===n:"~="===i?(" "+s.replace(re," ")+" ").indexOf(n)>-1:"|="===i&&(s===n||s.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,i,n,a){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),r="of-type"===t;return 1===n&&0===a?function(e){return!!e.parentNode}:function(t,i,l){var c,u,d,h,p,f,m=s!==o?"nextSibling":"previousSibling",g=t.parentNode,v=r&&t.nodeName.toLowerCase(),b=!l&&!r;if(g){if(s){for(;m;){for(d=t;d=d[m];)if(r?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&b){for(u=g[O]||(g[O]={}),c=u[e]||[],p=c[0]===z&&c[1],h=c[0]===z&&c[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(h=p=0)||f.pop();)if(1===d.nodeType&&++h&&d===t){u[e]=[z,p,h];break}}else if(b&&(c=(t[O]||(t[O]={}))[e])&&c[0]===z)h=c[1];else for(;(d=++p&&d&&d[m]||(h=p=0)||f.pop())&&((r?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++h||(b&&((d[O]||(d[O]={}))[e]=[z,h]),d!==t)););return(h-=a)===n||h%n==0&&h/n>=0}}},PSEUDO:function(e,i){var a,s=$.pseudos[e]||$.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return s[O]?s(i):s.length>1?(a=[e,e,"",i],$.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){
for(var n,a=s(e,i),o=a.length;o--;)n=ee(e,a[o]),e[n]=!(t[n]=a[o])}):function(e){return s(e,0,a)}):s}},pseudos:{not:n(function(e){var t=[],i=[],a=P(e.replace(le,"$1"));return a[O]?n(function(e,t,i,n){for(var s,o=a(e,null,n,[]),r=e.length;r--;)(s=o[r])&&(e[r]=!(t[r]=s))}):function(e,n,s){return t[0]=e,a(t,null,s,i),t[0]=null,!i.pop()}}),has:n(function(e){return function(i){return t(e,i).length>0}}),contains:n(function(e){return e=e.replace(we,$e),function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:n(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,$e).toLowerCase(),function(t){var i;do{if(i=N?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===I},focus:function(e){return e===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!$.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return me.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,i){return[i<0?i+t:i]}),even:c(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:c(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:c(function(e,t,i){for(var n=i<0?i+t:i;--n>=0;)e.push(n);return e}),gt:c(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}},$.pseudos.nth=$.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})$.pseudos[_]=r(_);for(_ in{submit:!0,reset:!0})$.pseudos[_]=l(_);return d.prototype=$.filters=$.pseudos,$.setFilters=new d,C=t.tokenize=function(e,i){var n,a,s,o,r,l,c,u=U[e+" "];if(u)return i?0:u.slice(0);for(r=e,l=[],c=$.preFilter;r;){n&&!(a=ce.exec(r))||(a&&(r=r.slice(a[0].length)||r),l.push(s=[])),n=!1,(a=ue.exec(r))&&(n=a.shift(),s.push({value:n,type:a[0].replace(le," ")}),r=r.slice(n.length));for(o in $.filter)!(a=fe[o].exec(r))||c[o]&&!(a=c[o](a))||(n=a.shift(),s.push({value:n,type:o,matches:a}),r=r.slice(n.length));if(!n)break}return i?r.length:r?t.error(e):U(e,l).slice(0)},P=t.compile=function(e,t){var i,n=[],a=[],s=W[e+" "];if(!s){for(t||(t=C(e)),i=t.length;i--;)s=b(t[i]),s[O]?n.push(s):a.push(s);s=W(e,y(a,n)),s.selector=e}return s},T=t.select=function(e,t,i,n){var a,s,o,r,l,c="function"==typeof e&&e,d=!n&&C(e=c.selector||e);if(i=i||[],1===d.length){if(s=d[0]=d[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&w.getById&&9===t.nodeType&&N&&$.relative[s[1].type]){if(!(t=($.find.ID(o.matches[0].replace(we,$e),t)||[])[0]))return i;c&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(a=fe.needsContext.test(e)?0:s.length;a--&&(o=s[a],!$.relative[r=o.type]);)if((l=$.find[r])&&(n=l(o.matches[0].replace(we,$e),ye.test(s[0].type)&&u(t.parentNode)||t))){if(s.splice(a,1),!(e=n.length&&h(s)))return J.apply(i,n),i;break}}return(c||P(e,d))(n,t,!N,i,ye.test(e)&&u(t.parentNode)||t),i},w.sortStable=O.split("").sort(G).join("")===O,w.detectDuplicates=!!A,j(),w.sortDetached=a(function(e){return 1&e.compareDocumentPosition(E.createElement("div"))}),a(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&a(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),a(function(e){return null==e.getAttribute("disabled")})||s(te,function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);ae.find=ce,ae.expr=ce.selectors,ae.expr[":"]=ae.expr.pseudos,ae.unique=ce.uniqueSort,ae.text=ce.getText,ae.isXMLDoc=ce.isXML,ae.contains=ce.contains;var ue=ae.expr.match.needsContext,de=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,he=/^.[^:#\[\.,]*$/;ae.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?ae.find.matchesSelector(n,e)?[n]:[]:ae.find.matches(e,ae.grep(t,function(e){return 1===e.nodeType}))},ae.fn.extend({find:function(e){var t,i=[],n=this,a=n.length;if("string"!=typeof e)return this.pushStack(ae(e).filter(function(){for(t=0;t<a;t++)if(ae.contains(n[t],this))return!0}));for(t=0;t<a;t++)ae.find(e,n[t],i);return i=this.pushStack(a>1?ae.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(n(this,e||[],!1))},not:function(e){return this.pushStack(n(this,e||[],!0))},is:function(e){return!!n(this,"string"==typeof e&&ue.test(e)?ae(e):e||[],!1).length}});var pe,fe=e.document,me=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(ae.fn.init=function(e,t){var i,n;if(!e)return this;if("string"==typeof e){if(!(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:me.exec(e))||!i[1]&&t)return!t||t.jquery?(t||pe).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof ae?t[0]:t,ae.merge(this,ae.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:fe,!0)),de.test(i[1])&&ae.isPlainObject(t))for(i in t)ae.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}if((n=fe.getElementById(i[2]))&&n.parentNode){if(n.id!==i[2])return pe.find(e);this.length=1,this[0]=n}return this.context=fe,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ae.isFunction(e)?"undefined"!=typeof pe.ready?pe.ready(e):e(ae):(e.selector!==undefined&&(this.selector=e.selector,this.context=e.context),ae.makeArray(e,this))}).prototype=ae.fn,pe=ae(fe);var ge=/^(?:parents|prev(?:Until|All))/,ve={children:!0,contents:!0,next:!0,prev:!0};ae.extend({dir:function(e,t,i){for(var n=[],a=e[t];a&&9!==a.nodeType&&(i===undefined||1!==a.nodeType||!ae(a).is(i));)1===a.nodeType&&n.push(a),a=a[t];return n},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}}),ae.fn.extend({has:function(e){var t,i=ae(e,this),n=i.length;return this.filter(function(){for(t=0;t<n;t++)if(ae.contains(this,i[t]))return!0})},closest:function(e,t){for(var i,n=0,a=this.length,s=[],o=ue.test(e)||"string"!=typeof e?ae(e,t||this.context):0;n<a;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&ae.find.matchesSelector(i,e))){s.push(i);break}return this.pushStack(s.length>1?ae.unique(s):s)},index:function(e){return e?"string"==typeof e?ae.inArray(this[0],ae(e)):ae.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ae.unique(ae.merge(this.get(),ae(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ae.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ae.dir(e,"parentNode")},parentsUntil:function(e,t,i){return ae.dir(e,"parentNode",i)},next:function(e){return a(e,"nextSibling")},prev:function(e){return a(e,"previousSibling")},nextAll:function(e){return ae.dir(e,"nextSibling")},prevAll:function(e){return ae.dir(e,"previousSibling")},nextUntil:function(e,t,i){return ae.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return ae.dir(e,"previousSibling",i)},siblings:function(e){return ae.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ae.sibling(e.firstChild)},contents:function(e){return ae.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ae.merge([],e.childNodes)}},function(e,t){ae.fn[e]=function(i,n){var a=ae.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(a=ae.filter(n,a)),this.length>1&&(ve[e]||(a=ae.unique(a)),ge.test(e)&&(a=a.reverse())),this.pushStack(a)}});var be=/\S+/g,ye={};ae.Callbacks=function(e){e="string"==typeof e?ye[e]||s(e):ae.extend({},e);var t,i,n,a,o,r,l=[],c=!e.once&&[],u=function(s){for(i=e.memory&&s,n=!0,o=r||0,r=0,a=l.length,t=!0;l&&o<a;o++)if(!1===l[o].apply(s[0],s[1])&&e.stopOnFalse){i=!1;break}t=!1,l&&(c?c.length&&u(c.shift()):i?l=[]:d.disable())},d={add:function(){if(l){var n=l.length;!function t(i){ae.each(i,function(i,n){var a=ae.type(n);"function"===a?e.unique&&d.has(n)||l.push(n):n&&n.length&&"string"!==a&&t(n)})}(arguments),t?a=l.length:i&&(r=n,u(i))}return this},remove:function(){return l&&ae.each(arguments,function(e,i){for(var n;(n=ae.inArray(i,l,n))>-1;)l.splice(n,1),t&&(n<=a&&a--,n<=o&&o--)}),this},has:function(e){return e?ae.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=c=i=undefined,this},disabled:function(){return!l},lock:function(){return c=undefined,i||d.disable(),this},locked:function(){return!c},fireWith:function(e,i){return!l||n&&!c||(i=i||[],i=[e,i.slice?i.slice():i],t?c.push(i):u(i)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},ae.extend({Deferred:function(e){var t=[["resolve","done",ae.Callbacks("once memory"),"resolved"],["reject","fail",ae.Callbacks("once memory"),"rejected"],["notify","progress",ae.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ae.Deferred(function(i){ae.each(t,function(t,s){var o=ae.isFunction(e[t])&&e[t];a[s[1]](function(){var e=o&&o.apply(this,arguments);e&&ae.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[s[0]+"With"](this===n?i.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ae.extend(e,n):n}},a={};return n.pipe=n.then,ae.each(t,function(e,s){var o=s[2],r=s[3];n[s[1]]=o.add,r&&o.add(function(){i=r},t[1^e][2].disable,t[2][2].lock),a[s[0]]=function(){return a[s[0]+"With"](this===a?n:this,arguments),this},a[s[0]+"With"]=o.fireWith}),n.promise(a),e&&e.call(a,a),a},when:function(e){var t,i,n,a=0,s=Y.call(arguments),o=s.length,r=1!==o||e&&ae.isFunction(e.promise)?o:0,l=1===r?e:ae.Deferred(),c=function(e,i,n){return function(a){i[e]=this,n[e]=arguments.length>1?Y.call(arguments):a,n===t?l.notifyWith(i,n):--r||l.resolveWith(i,n)}};if(o>1)for(t=new Array(o),i=new Array(o),n=new Array(o);a<o;a++)s[a]&&ae.isFunction(s[a].promise)?s[a].promise().done(c(a,n,s)).fail(l.reject).progress(c(a,i,t)):--r;return r||l.resolveWith(n,s),l.promise()}});var _e;ae.fn.ready=function(e){return ae.ready.promise().done(e),this},ae.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ae.readyWait++:ae.ready(!0)},ready:function(e){if(!0===e?!--ae.readyWait:!ae.isReady){if(!fe.body)return setTimeout(ae.ready);ae.isReady=!0,!0!==e&&--ae.readyWait>0||(_e.resolveWith(fe,[ae]),ae.fn.triggerHandler&&(ae(fe).triggerHandler("ready"),ae(fe).off("ready")))}}}),ae.ready.promise=function(t){if(!_e)if(_e=ae.Deferred(),"complete"===fe.readyState)setTimeout(ae.ready);else if(fe.addEventListener)fe.addEventListener("DOMContentLoaded",r,!1),e.addEventListener("load",r,!1);else{fe.attachEvent("onreadystatechange",r),e.attachEvent("onload",r);var i=!1;try{i=null==e.frameElement&&fe.documentElement}catch(e){}i&&i.doScroll&&function e(){if(!ae.isReady){try{i.doScroll("left")}catch(t){return setTimeout(e,50)}o(),ae.ready()}}()}return _e.promise(t)};var we,$e=typeof undefined;for(we in ae(ie))break;ie.ownLast="0"!==we,ie.inlineBlockNeedsLayout=!1,ae(function(){var e,t,i,n;(i=fe.getElementsByTagName("body")[0])&&i.style&&(t=fe.createElement("div"),n=fe.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(t),typeof t.style.zoom!==$e&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ie.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(i.style.zoom=1)),i.removeChild(n))}),function(){var e=fe.createElement("div");if(null==ie.deleteExpando){ie.deleteExpando=!0;try{delete e.test}catch(e){ie.deleteExpando=!1}}e=null}(),ae.acceptData=function(e){var t=ae.noData[(e.nodeName+" ").toLowerCase()],i=+e.nodeType||1;return(1===i||9===i)&&(!t||!0!==t&&e.getAttribute("classid")===t)};var xe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ke=/([A-Z])/g;ae.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?ae.cache[e[ae.expando]]:e[ae.expando])&&!c(e)},data:function(e,t,i){return u(e,t,i)},removeData:function(e,t){return d(e,t)},_data:function(e,t,i){return u(e,t,i,!0)},_removeData:function(e,t){return d(e,t,!0)}}),ae.fn.extend({data:function(e,t){var i,n,a,s=this[0],o=s&&s.attributes;if(e===undefined){if(this.length&&(a=ae.data(s),1===s.nodeType&&!ae._data(s,"parsedAttrs"))){for(i=o.length;i--;)o[i]&&(n=o[i].name,0===n.indexOf("data-")&&(n=ae.camelCase(n.slice(5)),l(s,n,a[n])));ae._data(s,"parsedAttrs",!0)}return a}return"object"==typeof e?this.each(function(){ae.data(this,e)}):arguments.length>1?this.each(function(){ae.data(this,e,t)}):s?l(s,e,ae.data(s,e)):undefined},removeData:function(e){return this.each(function(){ae.removeData(this,e)})}}),ae.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=ae._data(e,t),i&&(!n||ae.isArray(i)?n=ae._data(e,t,ae.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=ae.queue(e,t),n=i.length,a=i.shift(),s=ae._queueHooks(e,t),o=function(){ae.dequeue(e,t)};"inprogress"===a&&(a=i.shift(),n--),a&&("fx"===t&&i.unshift("inprogress"),delete s.stop,a.call(e,o,s)),!n&&s&&s.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return ae._data(e,i)||ae._data(e,i,{empty:ae.Callbacks("once memory").add(function(){ae._removeData(e,t+"queue"),ae._removeData(e,i)})})}}),ae.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?ae.queue(this[0],e):t===undefined?this:this.each(function(){var i=ae.queue(this,e,t);ae._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&ae.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ae.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,a=ae.Deferred(),s=this,o=this.length,r=function(){--n||a.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=undefined),e=e||"fx";o--;)(i=ae._data(s[o],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(r));return r(),a.promise(t)}});var Ce=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Pe=["Top","Right","Bottom","Left"],Te=function(e,t){return e=t||e,"none"===ae.css(e,"display")||!ae.contains(e.ownerDocument,e)},De=ae.access=function(e,t,i,n,a,s,o){var r=0,l=e.length,c=null==i;if("object"===ae.type(i)){a=!0;for(r in i)ae.access(e,t,r,i[r],!0,s,o)}else if(n!==undefined&&(a=!0,ae.isFunction(n)||(o=!0),c&&(o?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(ae(e),i)})),t))for(;r<l;r++)t(e[r],i,o?n:n.call(e[r],r,t(e[r],i)));return a?e:c?t.call(e):l?t(e[0],i):s},Se=/^(?:checkbox|radio)$/i;!function(){var e=fe.createElement("input"),t=fe.createElement("div"),i=fe.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ie.leadingWhitespace=3===t.firstChild.nodeType,ie.tbody=!t.getElementsByTagName("tbody").length,ie.htmlSerialize=!!t.getElementsByTagName("link").length,ie.html5Clone="<:nav></:nav>"!==fe.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,i.appendChild(e),ie.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,i.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",ie.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,ie.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){ie.noCloneEvent=!1}),t.cloneNode(!0).click()),null==ie.deleteExpando){ie.deleteExpando=!0;try{delete t.test}catch(e){ie.deleteExpando=!1}}}(),function(){var t,i,n=fe.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})i="on"+t,(ie[t+"Bubbles"]=i in e)||(n.setAttribute(i,"t"),ie[t+"Bubbles"]=!1===n.attributes[i].expando);n=null}();var Ae=/^(?:input|select|textarea)$/i,je=/^key/,Ee=/^(?:mouse|pointer|contextmenu)|click/,Ie=/^(?:focusinfocus|focusoutblur)$/,Ne=/^([^.]*)(?:\.(.+)|)$/;ae.event={global:{},add:function(e,t,i,n,a){var s,o,r,l,c,u,d,h,p,f,m,g=ae._data(e);if(g){for(i.handler&&(l=i,i=l.handler,a=l.selector),i.guid||(i.guid=ae.guid++),(o=g.events)||(o=g.events={}),(u=g.handle)||(u=g.handle=function(e){return typeof ae===$e||e&&ae.event.triggered===e.type?undefined:ae.event.dispatch.apply(u.elem,arguments)},u.elem=e),t=(t||"").match(be)||[""],r=t.length;r--;)s=Ne.exec(t[r])||[],p=m=s[1],f=(s[2]||"").split(".").sort(),p&&(c=ae.event.special[p]||{},p=(a?c.delegateType:c.bindType)||p,c=ae.event.special[p]||{},d=ae.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:a,needsContext:a&&ae.expr.match.needsContext.test(a),namespace:f.join(".")},l),(h=o[p])||(h=o[p]=[],h.delegateCount=0,c.setup&&!1!==c.setup.call(e,n,f,u)||(e.addEventListener?e.addEventListener(p,u,!1):e.attachEvent&&e.attachEvent("on"+p,u))),c.add&&(c.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),ae.event.global[p]=!0);e=null}},remove:function(e,t,i,n,a){var s,o,r,l,c,u,d,h,p,f,m,g=ae.hasData(e)&&ae._data(e);if(g&&(u=g.events)){for(t=(t||"").match(be)||[""],c=t.length;c--;)if(r=Ne.exec(t[c])||[],p=m=r[1],f=(r[2]||"").split(".").sort(),p){for(d=ae.event.special[p]||{},p=(n?d.delegateType:d.bindType)||p,h=u[p]||[],r=r[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=s=h.length;s--;)o=h[s],!a&&m!==o.origType||i&&i.guid!==o.guid||r&&!r.test(o.namespace)||n&&n!==o.selector&&("**"!==n||!o.selector)||(h.splice(s,1),o.selector&&h.delegateCount--,d.remove&&d.remove.call(e,o));l&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,f,g.handle)||ae.removeEvent(e,p,g.handle),delete u[p])}else for(p in u)ae.event.remove(e,p+t[c],i,n,!0);ae.isEmptyObject(u)&&(delete g.handle,ae._removeData(e,"events"))}},trigger:function(t,i,n,a){var s,o,r,l,c,u,d,h=[n||fe],p=te.call(t,"type")?t.type:t,f=te.call(t,"namespace")?t.namespace.split("."):[];if(r=u=n=n||fe,3!==n.nodeType&&8!==n.nodeType&&!Ie.test(p+ae.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),o=p.indexOf(":")<0&&"on"+p,t=t[ae.expando]?t:new ae.Event(p,"object"==typeof t&&t),t.isTrigger=a?2:3,t.namespace=f.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=n),i=null==i?[t]:ae.makeArray(i,[t]),c=ae.event.special[p]||{},a||!c.trigger||!1!==c.trigger.apply(n,i))){if(!a&&!c.noBubble&&!ae.isWindow(n)){for(l=c.delegateType||p,Ie.test(l+p)||(r=r.parentNode);r;r=r.parentNode)h.push(r),u=r;u===(n.ownerDocument||fe)&&h.push(u.defaultView||u.parentWindow||e)}for(d=0;(r=h[d++])&&!t.isPropagationStopped();)t.type=d>1?l:c.bindType||p,s=(ae._data(r,"events")||{})[t.type]&&ae._data(r,"handle"),s&&s.apply(r,i),(s=o&&r[o])&&s.apply&&ae.acceptData(r)&&(t.result=s.apply(r,i),!1===t.result&&t.preventDefault());if(t.type=p,!a&&!t.isDefaultPrevented()&&(!c._default||!1===c._default.apply(h.pop(),i))&&ae.acceptData(n)&&o&&n[p]&&!ae.isWindow(n)){u=n[o],u&&(n[o]=null),ae.event.triggered=p;try{n[p]()}catch(e){}ae.event.triggered=undefined,u&&(n[o]=u)}return t.result}},dispatch:function(e){e=ae.event.fix(e);var t,i,n,a,s,o=[],r=Y.call(arguments),l=(ae._data(this,"events")||{})[e.type]||[],c=ae.event.special[e.type]||{};if(r[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(o=ae.event.handlers.call(this,e,l),t=0;(a=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=a.elem,s=0;(n=a.handlers[s++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(n.namespace)||(e.handleObj=n,e.data=n.data,(i=((ae.event.special[n.origType]||{}).handle||n.handler).apply(a.elem,r))!==undefined&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,a,s,o=[],r=t.delegateCount,l=e.target;if(r&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(a=[],s=0;s<r;s++)n=t[s],i=n.selector+" ",a[i]===undefined&&(a[i]=n.needsContext?ae(i,this).index(l)>=0:ae.find(i,this,null,[l]).length),a[i]&&a.push(n);a.length&&o.push({elem:l,handlers:a})}return r<t.length&&o.push({elem:this,handlers:t.slice(r)}),o},fix:function(e){if(e[ae.expando])return e;var t,i,n,a=e.type,s=e,o=this.fixHooks[a];for(o||(this.fixHooks[a]=o=Ee.test(a)?this.mouseHooks:je.test(a)?this.keyHooks:{}),n=o.props?this.props.concat(o.props):this.props,e=new ae.Event(s),t=n.length;t--;)i=n[t],e[i]=s[i];return e.target||(e.target=s.srcElement||fe),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,a,s=t.button,o=t.fromElement;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||fe,a=n.documentElement,i=n.body,e.pageX=t.clientX+(a&&a.scrollLeft||i&&i.scrollLeft||0)-(a&&a.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(a&&a.scrollTop||i&&i.scrollTop||0)-(a&&a.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?t.toElement:o),e.which||s===undefined||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===f()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(ae.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return ae.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var a=ae.extend(new ae.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?ae.event.trigger(a,null,t):ae.event.dispatch.call(t,a),a.isDefaultPrevented()&&i.preventDefault()}},ae.removeEvent=fe.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var n="on"+t;e.detachEvent&&(typeof e[n]===$e&&(e[n]=null),e.detachEvent(n,i))},ae.Event=function(e,t){if(!(this instanceof ae.Event))return new ae.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&!1===e.returnValue?h:p):this.type=e,t&&ae.extend(this,t),this.timeStamp=e&&e.timeStamp||ae.now(),this[ae.expando]=!0},ae.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=h,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=h,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=h,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},ae.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ae.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,a=e.relatedTarget,s=e.handleObj;return a&&(a===n||ae.contains(n,a))||(e.type=s.origType,i=s.handler.apply(this,arguments),e.type=t),i}}}),ie.submitBubbles||(ae.event.special.submit={setup:function(){if(ae.nodeName(this,"form"))return!1;ae.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,i=ae.nodeName(t,"input")||ae.nodeName(t,"button")?t.form:undefined;i&&!ae._data(i,"submitBubbles")&&(ae.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),ae._data(i,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ae.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(ae.nodeName(this,"form"))return!1;ae.event.remove(this,"._submit")}}),ie.changeBubbles||(ae.event.special.change={setup:function(){if(Ae.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(ae.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ae.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ae.event.simulate("change",this,e,!0)})),!1;ae.event.add(this,"beforeactivate._change",function(e){var t=e.target;Ae.test(t.nodeName)&&!ae._data(t,"changeBubbles")&&(ae.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ae.event.simulate("change",this.parentNode,e,!0)}),ae._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return ae.event.remove(this,"._change"),!Ae.test(this.nodeName)}}),ie.focusinBubbles||ae.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){ae.event.simulate(t,e.target,ae.event.fix(e),!0)};ae.event.special[t]={setup:function(){var n=this.ownerDocument||this,a=ae._data(n,t);a||n.addEventListener(e,i,!0),ae._data(n,t,(a||0)+1)},teardown:function(){var n=this.ownerDocument||this,a=ae._data(n,t)-1;a?ae._data(n,t,a):(n.removeEventListener(e,i,!0),ae._removeData(n,t))}}}),ae.fn.extend({on:function(e,t,i,n,a){var s,o;if("object"==typeof e){"string"!=typeof t&&(i=i||t,t=undefined);for(s in e)this.on(s,t,i,e[s],a);return this}if(null==i&&null==n?(n=t,i=t=undefined):null==n&&("string"==typeof t?(n=i,i=undefined):(n=i,i=t,t=undefined)),!1===n)n=p;else if(!n)return this;return 1===a&&(o=n,n=function(e){return ae().off(e),o.apply(this,arguments)},n.guid=o.guid||(o.guid=ae.guid++)),this.each(function(){ae.event.add(this,e,n,i,t)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,t,i){var n,a;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,ae(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=undefined),!1===i&&(i=p),this.each(function(){ae.event.remove(this,e,i,t)})},trigger:function(e,t){return this.each(function(){ae.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return ae.event.trigger(e,t,i,!0)}});var Fe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Me=/ jQuery\d+="(?:null|\d+)"/g,Le=new RegExp("<(?:"+Fe+")[\\s/>]","i"),Re=/^\s+/,Oe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,He=/<([\w:]+)/,ze=/<tbody/i,Be=/<|&#?\w+;/,qe=/<(?:script|style|link)/i,Ue=/checked\s*(?:[^=]|=\s*.checked.)/i,We=/^$|\/(?:java|ecma)script/i,Ge=/^true\/(.*)/,Ve=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ke={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ie.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ye=m(fe),Xe=Ye.appendChild(fe.createElement("div"));Ke.optgroup=Ke.option,Ke.tbody=Ke.tfoot=Ke.colgroup=Ke.caption=Ke.thead,Ke.th=Ke.td,ae.extend({clone:function(e,t,i){var n,a,s,o,r,l=ae.contains(e.ownerDocument,e);if(ie.html5Clone||ae.isXMLDoc(e)||!Le.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Xe.innerHTML=e.outerHTML,Xe.removeChild(s=Xe.firstChild)),!(ie.noCloneEvent&&ie.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ae.isXMLDoc(e)))for(n=g(s),r=g(e),o=0;null!=(a=r[o]);++o)n[o]&&x(a,n[o]);if(t)if(i)for(r=r||g(e),n=n||g(s),o=0;null!=(a=r[o]);o++)$(a,n[o]);else $(e,s);return n=g(s,"script"),n.length>0&&w(n,!l&&g(e,"script")),n=r=a=null,s},buildFragment:function(e,t,i,n){for(var a,s,o,r,l,c,u,d=e.length,h=m(t),p=[],f=0;f<d;f++)if((s=e[f])||0===s)if("object"===ae.type(s))ae.merge(p,s.nodeType?[s]:s);else if(Be.test(s)){for(r=r||h.appendChild(t.createElement("div")),l=(He.exec(s)||["",""])[1].toLowerCase(),u=Ke[l]||Ke._default,r.innerHTML=u[1]+s.replace(Oe,"<$1></$2>")+u[2],a=u[0];a--;)r=r.lastChild;if(!ie.leadingWhitespace&&Re.test(s)&&p.push(t.createTextNode(Re.exec(s)[0])),!ie.tbody)for(s="table"!==l||ze.test(s)?"<table>"!==u[1]||ze.test(s)?0:r:r.firstChild,a=s&&s.childNodes.length;a--;)ae.nodeName(c=s.childNodes[a],"tbody")&&!c.childNodes.length&&s.removeChild(c);for(ae.merge(p,r.childNodes),r.textContent="";r.firstChild;)r.removeChild(r.firstChild);r=h.lastChild}else p.push(t.createTextNode(s));for(r&&h.removeChild(r),ie.appendChecked||ae.grep(g(p,"input"),v),f=0;s=p[f++];)if((!n||-1===ae.inArray(s,n))&&(o=ae.contains(s.ownerDocument,s),r=g(h.appendChild(s),"script"),o&&w(r),i))for(a=0;s=r[a++];)We.test(s.type||"")&&i.push(s);return r=null,h},cleanData:function(e,t){for(var i,n,a,s,o=0,r=ae.expando,l=ae.cache,c=ie.deleteExpando,u=ae.event.special;null!=(i=e[o]);o++)if((t||ae.acceptData(i))&&(a=i[r],s=a&&l[a])){if(s.events)for(n in s.events)u[n]?ae.event.remove(i,n):ae.removeEvent(i,n,s.handle);l[a]&&(delete l[a],c?delete i[r]:typeof i.removeAttribute!==$e?i.removeAttribute(r):i[r]=null,K.push(a))}}}),ae.fn.extend({text:function(e){return De(this,function(e){return e===undefined?ae.text(this):this.empty().append((this[0]&&this[0].ownerDocument||fe).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){b(this,e).appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=b(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=e?ae.filter(e,this):this,a=0;null!=(i=n[a]);a++)t||1!==i.nodeType||ae.cleanData(g(i)),i.parentNode&&(t&&ae.contains(i.ownerDocument,i)&&w(g(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ae.cleanData(g(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ae.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ae.clone(this,e,t)})},html:function(e){return De(this,function(e){var t=this[0]||{},i=0,n=this.length;if(e===undefined)return 1===t.nodeType?t.innerHTML.replace(Me,""):undefined;if("string"==typeof e&&!qe.test(e)&&(ie.htmlSerialize||!Le.test(e))&&(ie.leadingWhitespace||!Re.test(e))&&!Ke[(He.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Oe,"<$1></$2>");try{for(;i<n;i++)t=this[i]||{},1===t.nodeType&&(ae.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,ae.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=X.apply([],e);var i,n,a,s,o,r,l=0,c=this.length,u=this,d=c-1,h=e[0],p=ae.isFunction(h)
;if(p||c>1&&"string"==typeof h&&!ie.checkClone&&Ue.test(h))return this.each(function(i){var n=u.eq(i);p&&(e[0]=h.call(this,i,n.html())),n.domManip(e,t)});if(c&&(r=ae.buildFragment(e,this[0].ownerDocument,!1,this),i=r.firstChild,1===r.childNodes.length&&(r=i),i)){for(s=ae.map(g(r,"script"),y),a=s.length;l<c;l++)n=r,l!==d&&(n=ae.clone(n,!0,!0),a&&ae.merge(s,g(n,"script"))),t.call(this[l],n,l);if(a)for(o=s[s.length-1].ownerDocument,ae.map(s,_),l=0;l<a;l++)n=s[l],We.test(n.type||"")&&!ae._data(n,"globalEval")&&ae.contains(o,n)&&(n.src?ae._evalUrl&&ae._evalUrl(n.src):ae.globalEval((n.text||n.textContent||n.innerHTML||"").replace(Ve,"")));r=i=null}return this}}),ae.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ae.fn[e]=function(e){for(var i,n=0,a=[],s=ae(e),o=s.length-1;n<=o;n++)i=n===o?this:this.clone(!0),ae(s[n])[t](i),Q.apply(a,i.get());return this.pushStack(a)}});var Qe,Je={};!function(){var e;ie.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,i,n;return(i=fe.getElementsByTagName("body")[0])&&i.style?(t=fe.createElement("div"),n=fe.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(t),typeof t.style.zoom!==$e&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(fe.createElement("div")).style.width="5px",e=3!==t.offsetWidth),i.removeChild(n),e):void 0}}();var Ze,et,tt=/^margin/,it=new RegExp("^("+Ce+")(?!px)[a-z%]+$","i"),nt=/^(top|right|bottom|left)$/;e.getComputedStyle?(Ze=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)},et=function(e,t,i){var n,a,s,o,r=e.style;return i=i||Ze(e),o=i?i.getPropertyValue(t)||i[t]:undefined,i&&(""!==o||ae.contains(e.ownerDocument,e)||(o=ae.style(e,t)),it.test(o)&&tt.test(t)&&(n=r.width,a=r.minWidth,s=r.maxWidth,r.minWidth=r.maxWidth=r.width=o,o=i.width,r.width=n,r.minWidth=a,r.maxWidth=s)),o===undefined?o:o+""}):fe.documentElement.currentStyle&&(Ze=function(e){return e.currentStyle},et=function(e,t,i){var n,a,s,o,r=e.style;return i=i||Ze(e),o=i?i[t]:undefined,null==o&&r&&r[t]&&(o=r[t]),it.test(o)&&!nt.test(t)&&(n=r.left,a=e.runtimeStyle,s=a&&a.left,s&&(a.left=e.currentStyle.left),r.left="fontSize"===t?"1em":o,o=r.pixelLeft+"px",r.left=n,s&&(a.left=s)),o===undefined?o:o+""||"auto"}),function(){function t(){var t,i,n,a;(i=fe.getElementsByTagName("body")[0])&&i.style&&(t=fe.createElement("div"),n=fe.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s=o=!1,l=!0,e.getComputedStyle&&(s="1%"!==(e.getComputedStyle(t,null)||{}).top,o="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,a=t.appendChild(fe.createElement("div")),a.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",a.style.marginRight=a.style.width="0",t.style.width="1px",l=!parseFloat((e.getComputedStyle(a,null)||{}).marginRight),t.removeChild(a)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",a=t.getElementsByTagName("td"),a[0].style.cssText="margin:0;border:0;padding:0;display:none",r=0===a[0].offsetHeight,r&&(a[0].style.display="",a[1].style.display="none",r=0===a[0].offsetHeight),i.removeChild(n))}var i,n,a,s,o,r,l;i=fe.createElement("div"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=i.getElementsByTagName("a")[0],(n=a&&a.style)&&(n.cssText="float:left;opacity:.5",ie.opacity="0.5"===n.opacity,ie.cssFloat=!!n.cssFloat,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===i.style.backgroundClip,ie.boxSizing=""===n.boxSizing||""===n.MozBoxSizing||""===n.WebkitBoxSizing,ae.extend(ie,{reliableHiddenOffsets:function(){return null==r&&t(),r},boxSizingReliable:function(){return null==o&&t(),o},pixelPosition:function(){return null==s&&t(),s},reliableMarginRight:function(){return null==l&&t(),l}}))}(),ae.swap=function(e,t,i,n){var a,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];a=i.apply(e,n||[]);for(s in t)e.style[s]=o[s];return a};var at=/alpha\([^)]*\)/i,st=/opacity\s*=\s*([^)]*)/,ot=/^(none|table(?!-c[ea]).+)/,rt=new RegExp("^("+Ce+")(.*)$","i"),lt=new RegExp("^([+-])=("+Ce+")","i"),ct={position:"absolute",visibility:"hidden",display:"block"},ut={letterSpacing:"0",fontWeight:"400"},dt=["Webkit","O","Moz","ms"];ae.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=et(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ie.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,s,o,r=ae.camelCase(t),l=e.style;if(t=ae.cssProps[r]||(ae.cssProps[r]=T(l,r)),o=ae.cssHooks[t]||ae.cssHooks[r],i===undefined)return o&&"get"in o&&(a=o.get(e,!1,n))!==undefined?a:l[t];if(s=typeof i,"string"===s&&(a=lt.exec(i))&&(i=(a[1]+1)*a[2]+parseFloat(ae.css(e,t)),s="number"),null!=i&&i===i&&("number"!==s||ae.cssNumber[r]||(i+="px"),ie.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),!(o&&"set"in o&&(i=o.set(e,i,n))===undefined)))try{l[t]=i}catch(e){}}},css:function(e,t,i,n){var a,s,o,r=ae.camelCase(t);return t=ae.cssProps[r]||(ae.cssProps[r]=T(e.style,r)),o=ae.cssHooks[t]||ae.cssHooks[r],o&&"get"in o&&(s=o.get(e,!0,i)),s===undefined&&(s=et(e,t,n)),"normal"===s&&t in ut&&(s=ut[t]),""===i||i?(a=parseFloat(s),!0===i||ae.isNumeric(a)?a||0:s):s}}),ae.each(["height","width"],function(e,t){ae.cssHooks[t]={get:function(e,i,n){if(i)return ot.test(ae.css(e,"display"))&&0===e.offsetWidth?ae.swap(e,ct,function(){return j(e,t,n)}):j(e,t,n)},set:function(e,i,n){var a=n&&Ze(e);return S(e,i,n?A(e,t,n,ie.boxSizing&&"border-box"===ae.css(e,"boxSizing",!1,a),a):0)}}}),ie.opacity||(ae.cssHooks.opacity={get:function(e,t){return st.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,a=ae.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=n&&n.filter||i.filter||"";i.zoom=1,(t>=1||""===t)&&""===ae.trim(s.replace(at,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===t||n&&!n.filter)||(i.filter=at.test(s)?s.replace(at,a):s+" "+a)}}),ae.cssHooks.marginRight=P(ie.reliableMarginRight,function(e,t){if(t)return ae.swap(e,{display:"inline-block"},et,[e,"marginRight"])}),ae.each({margin:"",padding:"",border:"Width"},function(e,t){ae.cssHooks[e+t]={expand:function(i){for(var n=0,a={},s="string"==typeof i?i.split(" "):[i];n<4;n++)a[e+Pe[n]+t]=s[n]||s[n-2]||s[0];return a}},tt.test(e)||(ae.cssHooks[e+t].set=S)}),ae.fn.extend({css:function(e,t){return De(this,function(e,t,i){var n,a,s={},o=0;if(ae.isArray(t)){for(n=Ze(e),a=t.length;o<a;o++)s[t[o]]=ae.css(e,t[o],!1,n);return s}return i!==undefined?ae.style(e,t,i):ae.css(e,t)},e,t,arguments.length>1)},show:function(){return D(this,!0)},hide:function(){return D(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Te(this)?ae(this).show():ae(this).hide()})}}),ae.Tween=E,E.prototype={constructor:E,init:function(e,t,i,n,a,s){this.elem=e,this.prop=i,this.easing=a||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=s||(ae.cssNumber[i]?"":"px")},cur:function(){var e=E.propHooks[this.prop];return e&&e.get?e.get(this):E.propHooks._default.get(this)},run:function(e){var t,i=E.propHooks[this.prop];return this.options.duration?this.pos=t=ae.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):E.propHooks._default.set(this),this}},E.prototype.init.prototype=E.prototype,E.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ae.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ae.fx.step[e.prop]?ae.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ae.cssProps[e.prop]]||ae.cssHooks[e.prop])?ae.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},E.propHooks.scrollTop=E.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ae.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ae.fx=E.prototype.init,ae.fx.step={};var ht,pt,ft=/^(?:toggle|show|hide)$/,mt=new RegExp("^(?:([+-])=|)("+Ce+")([a-z%]*)$","i"),gt=/queueHooks$/,vt=[M],bt={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),a=mt.exec(t),s=a&&a[3]||(ae.cssNumber[e]?"":"px"),o=(ae.cssNumber[e]||"px"!==s&&+n)&&mt.exec(ae.css(i.elem,e)),r=1,l=20;if(o&&o[3]!==s){s=s||o[3],a=a||[],o=+n||1;do{r=r||".5",o/=r,ae.style(i.elem,e,o+s)}while(r!==(r=i.cur()/n)&&1!==r&&--l)}return a&&(o=i.start=+o||+n||0,i.unit=s,i.end=a[1]?o+(a[1]+1)*a[2]:+a[2]),i}]};ae.Animation=ae.extend(R,{tweener:function(e,t){ae.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,a=e.length;n<a;n++)i=e[n],bt[i]=bt[i]||[],bt[i].unshift(t)},prefilter:function(e,t){t?vt.unshift(e):vt.push(e)}}),ae.speed=function(e,t,i){var n=e&&"object"==typeof e?ae.extend({},e):{complete:i||!i&&t||ae.isFunction(e)&&e,duration:e,easing:i&&t||t&&!ae.isFunction(t)&&t};return n.duration=ae.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in ae.fx.speeds?ae.fx.speeds[n.duration]:ae.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){ae.isFunction(n.old)&&n.old.call(this),n.queue&&ae.dequeue(this,n.queue)},n},ae.fn.extend({fadeTo:function(e,t,i,n){return this.filter(Te).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var a=ae.isEmptyObject(e),s=ae.speed(t,i,n),o=function(){var t=R(this,ae.extend({},e),s);(a||ae._data(this,"finish"))&&t.stop(!0)};return o.finish=o,a||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=undefined),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,a=null!=e&&e+"queueHooks",s=ae.timers,o=ae._data(this);if(a)o[a]&&o[a].stop&&n(o[a]);else for(a in o)o[a]&&o[a].stop&&gt.test(a)&&n(o[a]);for(a=s.length;a--;)s[a].elem!==this||null!=e&&s[a].queue!==e||(s[a].anim.stop(i),t=!1,s.splice(a,1));!t&&i||ae.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,i=ae._data(this),n=i[e+"queue"],a=i[e+"queueHooks"],s=ae.timers,o=n?n.length:0;for(i.finish=!0,ae.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),ae.each(["toggle","show","hide"],function(e,t){var i=ae.fn[t];ae.fn[t]=function(e,n,a){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(N(t,!0),e,n,a)}}),ae.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ae.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),ae.timers=[],ae.fx.tick=function(){var e,t=ae.timers,i=0;for(ht=ae.now();i<t.length;i++)(e=t[i])()||t[i]!==e||t.splice(i--,1);t.length||ae.fx.stop(),ht=undefined},ae.fx.timer=function(e){ae.timers.push(e),e()?ae.fx.start():ae.timers.pop()},ae.fx.interval=13,ae.fx.start=function(){pt||(pt=setInterval(ae.fx.tick,ae.fx.interval))},ae.fx.stop=function(){clearInterval(pt),pt=null},ae.fx.speeds={slow:600,fast:200,_default:400},ae.fn.delay=function(e,t){return e=ae.fx?ae.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},function(){var e,t,i,n,a;t=fe.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=t.getElementsByTagName("a")[0],i=fe.createElement("select"),a=i.appendChild(fe.createElement("option")),e=t.getElementsByTagName("input")[0],n.style.cssText="top:1px",ie.getSetAttribute="t"!==t.className,ie.style=/top/.test(n.getAttribute("style")),ie.hrefNormalized="/a"===n.getAttribute("href"),ie.checkOn=!!e.value,ie.optSelected=a.selected,ie.enctype=!!fe.createElement("form").enctype,i.disabled=!0,ie.optDisabled=!a.disabled,e=fe.createElement("input"),e.setAttribute("value",""),ie.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),ie.radioValue="t"===e.value}();var yt=/\r/g;ae.fn.extend({val:function(e){var t,i,n,a=this[0];{if(arguments.length)return n=ae.isFunction(e),this.each(function(i){var a;1===this.nodeType&&(a=n?e.call(this,i,ae(this).val()):e,null==a?a="":"number"==typeof a?a+="":ae.isArray(a)&&(a=ae.map(a,function(e){return null==e?"":e+""})),(t=ae.valHooks[this.type]||ae.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&t.set(this,a,"value")!==undefined||(this.value=a))});if(a)return(t=ae.valHooks[a.type]||ae.valHooks[a.nodeName.toLowerCase()])&&"get"in t&&(i=t.get(a,"value"))!==undefined?i:(i=a.value,"string"==typeof i?i.replace(yt,""):null==i?"":i)}}}),ae.extend({valHooks:{option:{get:function(e){var t=ae.find.attr(e,"value");return null!=t?t:ae.trim(ae.text(e))}},select:{get:function(e){for(var t,i,n=e.options,a=e.selectedIndex,s="select-one"===e.type||a<0,o=s?null:[],r=s?a+1:n.length,l=a<0?r:s?a:0;l<r;l++)if(i=n[l],(i.selected||l===a)&&(ie.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!ae.nodeName(i.parentNode,"optgroup"))){if(t=ae(i).val(),s)return t;o.push(t)}return o},set:function(e,t){for(var i,n,a=e.options,s=ae.makeArray(t),o=a.length;o--;)if(n=a[o],ae.inArray(ae.valHooks.option.get(n),s)>=0)try{n.selected=i=!0}catch(e){n.scrollHeight}else n.selected=!1;return i||(e.selectedIndex=-1),a}}}}),ae.each(["radio","checkbox"],function(){ae.valHooks[this]={set:function(e,t){if(ae.isArray(t))return e.checked=ae.inArray(ae(e).val(),t)>=0}},ie.checkOn||(ae.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var _t,wt,$t=ae.expr.attrHandle,xt=/^(?:checked|selected)$/i,kt=ie.getSetAttribute,Ct=ie.input;ae.fn.extend({attr:function(e,t){return De(this,ae.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ae.removeAttr(this,e)})}}),ae.extend({attr:function(e,t,i){var n,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===$e?ae.prop(e,t,i):(1===s&&ae.isXMLDoc(e)||(t=t.toLowerCase(),n=ae.attrHooks[t]||(ae.expr.match.bool.test(t)?wt:_t)),i===undefined?n&&"get"in n&&null!==(a=n.get(e,t))?a:(a=ae.find.attr(e,t),null==a?undefined:a):null!==i?n&&"set"in n&&(a=n.set(e,i,t))!==undefined?a:(e.setAttribute(t,i+""),i):void ae.removeAttr(e,t))},removeAttr:function(e,t){var i,n,a=0,s=t&&t.match(be);if(s&&1===e.nodeType)for(;i=s[a++];)n=ae.propFix[i]||i,ae.expr.match.bool.test(i)?Ct&&kt||!xt.test(i)?e[n]=!1:e[ae.camelCase("default-"+i)]=e[n]=!1:ae.attr(e,i,""),e.removeAttribute(kt?i:n)},attrHooks:{type:{set:function(e,t){if(!ie.radioValue&&"radio"===t&&ae.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}}}),wt={set:function(e,t,i){return!1===t?ae.removeAttr(e,i):Ct&&kt||!xt.test(i)?e.setAttribute(!kt&&ae.propFix[i]||i,i):e[ae.camelCase("default-"+i)]=e[i]=!0,i}},ae.each(ae.expr.match.bool.source.match(/\w+/g),function(e,t){var i=$t[t]||ae.find.attr;$t[t]=Ct&&kt||!xt.test(t)?function(e,t,n){var a,s;return n||(s=$t[t],$t[t]=a,a=null!=i(e,t,n)?t.toLowerCase():null,$t[t]=s),a}:function(e,t,i){if(!i)return e[ae.camelCase("default-"+t)]?t.toLowerCase():null}}),Ct&&kt||(ae.attrHooks.value={set:function(e,t,i){if(!ae.nodeName(e,"input"))return _t&&_t.set(e,t,i);e.defaultValue=t}}),kt||(_t={set:function(e,t,i){var n=e.getAttributeNode(i);if(n||e.setAttributeNode(n=e.ownerDocument.createAttribute(i)),n.value=t+="","value"===i||t===e.getAttribute(i))return t}},$t.id=$t.name=$t.coords=function(e,t,i){var n;if(!i)return(n=e.getAttributeNode(t))&&""!==n.value?n.value:null},ae.valHooks.button={get:function(e,t){var i=e.getAttributeNode(t);if(i&&i.specified)return i.value},set:_t.set},ae.attrHooks.contenteditable={set:function(e,t,i){_t.set(e,""!==t&&t,i)}},ae.each(["width","height"],function(e,t){ae.attrHooks[t]={set:function(e,i){if(""===i)return e.setAttribute(t,"auto"),i}}})),ie.style||(ae.attrHooks.style={get:function(e){return e.style.cssText||undefined},set:function(e,t){return e.style.cssText=t+""}});var Pt=/^(?:input|select|textarea|button|object)$/i,Tt=/^(?:a|area)$/i;ae.fn.extend({prop:function(e,t){return De(this,ae.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ae.propFix[e]||e,this.each(function(){try{this[e]=undefined,delete this[e]}catch(e){}})}}),ae.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,i){var n,a,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return s=1!==o||!ae.isXMLDoc(e),s&&(t=ae.propFix[t]||t,a=ae.propHooks[t]),i!==undefined?a&&"set"in a&&(n=a.set(e,i,t))!==undefined?n:e[t]=i:a&&"get"in a&&null!==(n=a.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=ae.find.attr(e,"tabindex");return t?parseInt(t,10):Pt.test(e.nodeName)||Tt.test(e.nodeName)&&e.href?0:-1}}}}),ie.hrefNormalized||ae.each(["href","src"],function(e,t){ae.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ie.optSelected||(ae.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),ae.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ae.propFix[this.toLowerCase()]=this}),ie.enctype||(ae.propFix.enctype="encoding");var Dt=/[\t\r\n\f]/g;ae.fn.extend({addClass:function(e){var t,i,n,a,s,o,r=0,l=this.length,c="string"==typeof e&&e;if(ae.isFunction(e))return this.each(function(t){ae(this).addClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(be)||[];r<l;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Dt," "):" ")){for(s=0;a=t[s++];)n.indexOf(" "+a+" ")<0&&(n+=a+" ");o=ae.trim(n),i.className!==o&&(i.className=o)}return this},removeClass:function(e){var t,i,n,a,s,o,r=0,l=this.length,c=0===arguments.length||"string"==typeof e&&e;if(ae.isFunction(e))return this.each(function(t){ae(this).removeClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(be)||[];r<l;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Dt," "):"")){for(s=0;a=t[s++];)for(;n.indexOf(" "+a+" ")>=0;)n=n.replace(" "+a+" "," ");o=e?ae.trim(n):"",i.className!==o&&(i.className=o)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):ae.isFunction(e)?this.each(function(i){ae(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var t,n=0,a=ae(this),s=e.match(be)||[];t=s[n++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else i!==$e&&"boolean"!==i||(this.className&&ae._data(this,"__className__",this.className),this.className=this.className||!1===e?"":ae._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;i<n;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Dt," ").indexOf(t)>=0)return!0;return!1}}),ae.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ae.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),ae.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var St=ae.now(),At=/\?/,jt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ae.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var i,n=null,a=ae.trim(t+"");return a&&!ae.trim(a.replace(jt,function(e,t,a,s){return i&&t&&(n=0),0===n?e:(i=a||t,n+=!s-!a,"")}))?Function("return "+a)():ae.error("Invalid JSON: "+t)},ae.parseXML=function(t){var i,n;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(n=new DOMParser,i=n.parseFromString(t,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(t))}catch(e){i=undefined}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||ae.error("Invalid XML: "+t),i};var Et,It,Nt=/#.*$/,Ft=/([?&])_=[^&]*/,Mt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Lt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Rt=/^(?:GET|HEAD)$/,Ot=/^\/\//,Ht=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,zt={},Bt={},qt="*/".concat("*");try{It=location.href}catch(e){It=fe.createElement("a"),It.href="",It=It.href}Et=Ht.exec(It.toLowerCase())||[],ae.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:It,type:"GET",isLocal:Lt.test(Et[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ae.parseJSON,"text xml":ae.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?z(z(e,ae.ajaxSettings),t):z(ae.ajaxSettings,e)},ajaxPrefilter:O(zt),ajaxTransport:O(Bt),ajax:function(e,t){function i(e,t,i,n){var a,u,v,b,_,$=t;2!==y&&(y=2,r&&clearTimeout(r),c=undefined,o=n||"",w.readyState=e>0?4:0,a=e>=200&&e<300||304===e,i&&(b=B(d,w,i)),b=q(d,b,w,a),a?(d.ifModified&&(_=w.getResponseHeader("Last-Modified"),_&&(ae.lastModified[s]=_),(_=w.getResponseHeader("etag"))&&(ae.etag[s]=_)),204===e||"HEAD"===d.type?$="nocontent":304===e?$="notmodified":($=b.state,u=b.data,v=b.error,a=!v)):(v=$,!e&&$||($="error",e<0&&(e=0))),w.status=e,w.statusText=(t||$)+"",a?f.resolveWith(h,[u,$,w]):f.rejectWith(h,[w,$,v]),w.statusCode(g),g=undefined,l&&p.trigger(a?"ajaxSuccess":"ajaxError",[w,d,a?u:v]),m.fireWith(h,[w,$]),l&&(p.trigger("ajaxComplete",[w,d]),--ae.active||ae.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=undefined),t=t||{};var n,a,s,o,r,l,c,u,d=ae.ajaxSetup({},t),h=d.context||d,p=d.context&&(h.nodeType||h.jquery)?ae(h):ae.event,f=ae.Deferred(),m=ae.Callbacks("once memory"),g=d.statusCode||{},v={},b={},y=0,_="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!u)for(u={};t=Mt.exec(o);)u[t[1].toLowerCase()]=t[2];t=u[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?o:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return y||(e=b[i]=b[i]||e,v[e]=t),this},overrideMimeType:function(e){return y||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(y<2)for(t in e)g[t]=[g[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||_;return c&&c.abort(t),i(0,t),this}};if(f.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,d.url=((e||d.url||It)+"").replace(Nt,"").replace(Ot,Et[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=ae.trim(d.dataType||"*").toLowerCase().match(be)||[""],null==d.crossDomain&&(n=Ht.exec(d.url.toLowerCase()),d.crossDomain=!(!n||n[1]===Et[1]&&n[2]===Et[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Et[3]||("http:"===Et[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=ae.param(d.data,d.traditional)),H(zt,d,t,w),2===y)return w;l=ae.event&&d.global,l&&0==ae.active++&&ae.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Rt.test(d.type),s=d.url,d.hasContent||(d.data&&(s=d.url+=(At.test(s)?"&":"?")+d.data,delete d.data),!1===d.cache&&(d.url=Ft.test(s)?s.replace(Ft,"$1_="+St++):s+(At.test(s)?"&":"?")+"_="+St++)),d.ifModified&&(ae.lastModified[s]&&w.setRequestHeader("If-Modified-Since",ae.lastModified[s]),ae.etag[s]&&w.setRequestHeader("If-None-Match",ae.etag[s])),(d.data&&d.hasContent&&!1!==d.contentType||t.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+qt+"; q=0.01":""):d.accepts["*"]);for(a in d.headers)w.setRequestHeader(a,d.headers[a]);if(d.beforeSend&&(!1===d.beforeSend.call(h,w,d)||2===y))return w.abort();_="abort";for(a in{success:1,error:1,complete:1})w[a](d[a]);if(c=H(Bt,d,t,w)){w.readyState=1,l&&p.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(r=setTimeout(function(){w.abort("timeout")},d.timeout));try{y=1,c.send(v,i)}catch(e){if(!(y<2))throw e;i(-1,e)}}else i(-1,"No Transport");return w},getJSON:function(e,t,i){return ae.get(e,t,i,"json")},getScript:function(e,t){return ae.get(e,undefined,t,"script")}}),ae.each(["get","post"],function(e,t){ae[t]=function(e,i,n,a){return ae.isFunction(i)&&(a=a||n,n=i,i=undefined),ae.ajax({url:e,type:t,dataType:a,data:i,success:n})}}),ae._evalUrl=function(e){return ae.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ae.fn.extend({wrapAll:function(e){if(ae.isFunction(e))return this.each(function(t){ae(this).wrapAll(e.call(this,t))});if(this[0]){var t=ae(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return ae.isFunction(e)?this.each(function(t){ae(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ae(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=ae.isFunction(e);return this.each(function(i){ae(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){ae.nodeName(this,"body")||ae(this).replaceWith(this.childNodes)}).end()}}),ae.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ie.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||ae.css(e,"display"))},ae.expr.filters.visible=function(e){return!ae.expr.filters.hidden(e)};var Ut=/%20/g,Wt=/\[\]$/,Gt=/\r?\n/g,Vt=/^(?:submit|button|image|reset|file)$/i,Kt=/^(?:input|select|textarea|keygen)/i;ae.param=function(e,t){var i,n=[],a=function(e,t){t=ae.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===undefined&&(t=ae.ajaxSettings&&ae.ajaxSettings.traditional),ae.isArray(e)||e.jquery&&!ae.isPlainObject(e))ae.each(e,function(){a(this.name,this.value)});else for(i in e)U(i,e[i],t,a);return n.join("&").replace(Ut,"+")},ae.fn.extend({serialize:function(){return ae.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ae.prop(this,"elements");return e?ae.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ae(this).is(":disabled")&&Kt.test(this.nodeName)&&!Vt.test(e)&&(this.checked||!Se.test(e))}).map(function(e,t){var i=ae(this).val();return null==i?null:ae.isArray(i)?ae.map(i,function(e){return{name:t.name,value:e.replace(Gt,"\r\n")}}):{name:t.name,value:i.replace(Gt,"\r\n")}}).get()}}),ae.ajaxSettings.xhr=e.ActiveXObject!==undefined?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&W()||G()}:W;var Yt=0,Xt={},Qt=ae.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Xt)Xt[e](undefined,!0)}),ie.cors=!!Qt&&"withCredentials"in Qt,Qt=ie.ajax=!!Qt,Qt&&ae.ajaxTransport(function(e){if(!e.crossDomain||ie.cors){var t;return{send:function(i,n){var a,s=e.xhr(),o=++Yt;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)i[a]!==undefined&&s.setRequestHeader(a,i[a]+"");s.send(e.hasContent&&e.data||null),t=function(i,a){var r,l,c;if(t&&(a||4===s.readyState))if(delete Xt[o],t=undefined,s.onreadystatechange=ae.noop,a)4!==s.readyState&&s.abort();else{c={},r=s.status,"string"==typeof s.responseText&&(c.text=s.responseText);try{l=s.statusText}catch(e){l=""}r||!e.isLocal||e.crossDomain?1223===r&&(r=204):r=c.text?200:404}c&&n(r,l,c,s.getAllResponseHeaders())},e.async?4===s.readyState?setTimeout(t):s.onreadystatechange=Xt[o]=t:t()},abort:function(){t&&t(undefined,!0)}}}}),ae.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ae.globalEval(e),e}}}),ae.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ae.ajaxTransport("script",function(e){if(e.crossDomain){var t,i=fe.head||ae("head")[0]||fe.documentElement;return{send:function(n,a){t=fe.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,i){(i||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,i||a(200,"success"))},i.insertBefore(t,i.firstChild)},abort:function(){t&&t.onload(undefined,!0)}}}});var Jt=[],Zt=/(=)\?(?=&|$)|\?\?/;ae.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Jt.pop()||ae.expando+"_"+St++;return this[e]=!0,e}}),ae.ajaxPrefilter("json jsonp",function(t,i,n){var a,s,o,r=!1!==t.jsonp&&(Zt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Zt.test(t.data)&&"data");if(r||"jsonp"===t.dataTypes[0])return a=t.jsonpCallback=ae.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,r?t[r]=t[r].replace(Zt,"$1"+a):!1!==t.jsonp&&(t.url+=(At.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return o||ae.error(a+" was not called"),o[0]},t.dataTypes[0]="json",s=e[a],e[a]=function(){o=arguments},n.always(function(){e[a]=s,t[a]&&(t.jsonpCallback=i.jsonpCallback,Jt.push(a)),o&&ae.isFunction(s)&&s(o[0]),o=s=undefined}),"script"}),ae.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||fe;var n=de.exec(e),a=!i&&[];return n?[t.createElement(n[1])]:(n=ae.buildFragment([e],t,a),a&&a.length&&ae(a).remove(),ae.merge([],n.childNodes))};var ei=ae.fn.load;ae.fn.load=function(e,t,i){if("string"!=typeof e&&ei)return ei.apply(this,arguments);var n,a,s,o=this,r=e.indexOf(" ");return r>=0&&(n=ae.trim(e.slice(r,e.length)),e=e.slice(0,r)),ae.isFunction(t)?(i=t,t=undefined):t&&"object"==typeof t&&(s="POST"),o.length>0&&ae.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){a=arguments,o.html(n?ae("<div>").append(ae.parseHTML(e)).find(n):e)}).complete(i&&function(e,t){o.each(i,a||[e.responseText,t,e])}),this},ae.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ae.fn[t]=function(e){return this.on(t,e)}}),ae.expr.filters.animated=function(e){return ae.grep(ae.timers,function(t){return e===t.elem}).length};var ti=e.document.documentElement;ae.offset={setOffset:function(e,t,i){var n,a,s,o,r,l,c,u=ae.css(e,"position"),d=ae(e),h={};"static"===u&&(e.style.position="relative"),r=d.offset(),s=ae.css(e,"top"),l=ae.css(e,"left"),c=("absolute"===u||"fixed"===u)&&ae.inArray("auto",[s,l])>-1,c?(n=d.position(),o=n.top,a=n.left):(o=parseFloat(s)||0,a=parseFloat(l)||0),ae.isFunction(t)&&(t=t.call(e,i,r)),null!=t.top&&(h.top=t.top-r.top+o),null!=t.left&&(h.left=t.left-r.left+a),"using"in t?t.using.call(e,h):d.css(h)}},ae.fn.extend({offset:function(e){if(arguments.length)return e===undefined?this:this.each(function(t){ae.offset.setOffset(this,e,t)});var t,i,n={top:0,left:0},a=this[0],s=a&&a.ownerDocument;if(s)return t=s.documentElement,ae.contains(t,a)?(typeof a.getBoundingClientRect!==$e&&(n=a.getBoundingClientRect()),i=V(s),{top:n.top+(i.pageYOffset||t.scrollTop)-(t.clientTop||0),
left:n.left+(i.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):n},position:function(){if(this[0]){var e,t,i={top:0,left:0},n=this[0];return"fixed"===ae.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ae.nodeName(e[0],"html")||(i=e.offset()),i.top+=ae.css(e[0],"borderTopWidth",!0),i.left+=ae.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-ae.css(n,"marginTop",!0),left:t.left-i.left-ae.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||ti;e&&!ae.nodeName(e,"html")&&"static"===ae.css(e,"position");)e=e.offsetParent;return e||ti})}}),ae.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i=/Y/.test(t);ae.fn[e]=function(n){return De(this,function(e,n,a){var s=V(e);if(a===undefined)return s?t in s?s[t]:s.document.documentElement[n]:e[n];s?s.scrollTo(i?ae(s).scrollLeft():a,i?a:ae(s).scrollTop()):e[n]=a},e,n,arguments.length,null)}}),ae.each(["top","left"],function(e,t){ae.cssHooks[t]=P(ie.pixelPosition,function(e,i){if(i)return i=et(e,t),it.test(i)?ae(e).position()[t]+"px":i})}),ae.each({Height:"height",Width:"width"},function(e,t){ae.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){ae.fn[n]=function(n,a){var s=arguments.length&&(i||"boolean"!=typeof n),o=i||(!0===n||!0===a?"margin":"border");return De(this,function(t,i,n){var a;return ae.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):n===undefined?ae.css(t,i,o):ae.style(t,i,n,o)},t,s?n:undefined,s,null)}})}),ae.fn.size=function(){return this.length},ae.fn.andSelf=ae.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ae});var ii=e.jQuery,ni=e.$;return ae.noConflict=function(t){return e.$===ae&&(e.$=ni),t&&e.jQuery===ae&&(e.jQuery=ii),ae},typeof t===$e&&(e.jQuery=e.$=ae),ae}),function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Handlebars=t()}(this,function(){var e=function(){"use strict";function e(e){return l[e]}function t(e){for(var t=1;t<arguments.length;t++)for(var i in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],i)&&(e[i]=arguments[t][i]);return e}function i(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1}function n(t){return t&&t.toHTML?t.toHTML():null==t?"":t?(t=""+t,u.test(t)?t.replace(c,e):t):t+""}function a(e){return!e&&0!==e||!(!p(e)||0!==e.length)}function s(e,t){return e.path=t,e}function o(e,t){return(e?e+".":"")+t}var r={},l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/[&<>"'`]/g,u=/[&<>"'`]/;r.extend=t;var d=Object.prototype.toString;r.toString=d;var h=function(e){return"function"==typeof e};h(/x/)&&(h=function(e){return"function"==typeof e&&"[object Function]"===d.call(e)});var h;r.isFunction=h;var p=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===d.call(e)};return r.isArray=p,r.indexOf=i,r.escapeExpression=n,r.isEmpty=a,r.blockParams=s,r.appendContextPath=o,r}(),t=function(){"use strict";function e(e,i){var n,a,s=i&&i.loc;s&&(n=s.start.line,a=s.start.column,e+=" - "+n+":"+a);for(var o=Error.prototype.constructor.call(this,e),r=0;r<t.length;r++)this[t[r]]=o[t[r]];s&&(this.lineNumber=n,this.column=a)}var t=["description","fileName","lineNumber","message","name","number","stack"];return e.prototype=new Error,e}(),i=function(e,t){"use strict";function i(e,t){this.helpers=e||{},this.partials=t||{},n(this)}function n(e){e.registerHelper("helperMissing",function(){if(1===arguments.length)return undefined;throw new o("Missing helper: '"+arguments[arguments.length-1].name+"'")}),e.registerHelper("blockHelperMissing",function(t,i){var n=i.inverse,a=i.fn;if(!0===t)return a(this);if(!1===t||null==t)return n(this);if(l(t))return t.length>0?(i.ids&&(i.ids=[i.name]),e.helpers.each(t,i)):n(this);if(i.data&&i.ids){var o=f(i.data);o.contextPath=s.appendContextPath(i.data.contextPath,i.name),i={data:o}}return a(t,i)}),e.registerHelper("each",function(e,t){function i(t,i,o){n&&(n.key=t,n.index=i,n.first=0===i,n.last=!!o,a&&(n.contextPath=a+t)),h+=r(e[t],{data:n,blockParams:s.blockParams([e[t],t],[a+t,null])})}if(!t)throw new o("Must pass iterator to #each");var n,a,r=t.fn,u=t.inverse,d=0,h="";if(t.data&&t.ids&&(a=s.appendContextPath(t.data.contextPath,t.ids[0])+"."),c(e)&&(e=e.call(this)),t.data&&(n=f(t.data)),e&&"object"==typeof e)if(l(e))for(var p=e.length;d<p;d++)i(d,d,d===e.length-1);else{var m;for(var g in e)e.hasOwnProperty(g)&&(m&&i(m,d-1),m=g,d++);m&&i(m,d-1,!0)}return 0===d&&(h=u(this)),h}),e.registerHelper("if",function(e,t){return c(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||s.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,i){return e.helpers["if"].call(this,t,{fn:i.inverse,inverse:i.fn,hash:i.hash})}),e.registerHelper("with",function(e,t){c(e)&&(e=e.call(this));var i=t.fn;if(s.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var n=f(t.data);n.contextPath=s.appendContextPath(t.data.contextPath,t.ids[0]),t={data:n}}return i(e,t)}),e.registerHelper("log",function(t,i){var n=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;e.log(n,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}var a={},s=e,o=t;a.VERSION="3.0.0",a.COMPILER_REVISION=6;var r={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};a.REVISION_CHANGES=r;var l=s.isArray,c=s.isFunction,u=s.toString,d="[object Object]";a.HandlebarsEnvironment=i,i.prototype={constructor:i,logger:h,log:p,registerHelper:function(e,t){if(u.call(e)===d){if(t)throw new o("Arg not supported with multiple helpers");s.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(u.call(e)===d)s.extend(this.partials,e);else{if(void 0===t)throw new o("Attempting to register a partial as undefined");this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]}};var h={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(e,t){if("undefined"!=typeof console&&h.level<=e){var i=h.methodMap[e];(console[i]||console.log).call(console,t)}}};a.logger=h;var p=h.log;a.log=p;var f=function(e){var t=s.extend({},e);return t._parent=e,t};return a.createFrame=f,a}(e,t),n=function(){"use strict";function e(e){this.string=e}return e.prototype.toString=e.prototype.toHTML=function(){return""+this.string},e}(),a=function(e,t,i){"use strict";function n(e){var t=e&&e[0]||1,i=p;if(t!==i){if(t<i){var n=f[i],a=f[t];throw new h("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+a+").")}throw new h("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function a(e,t){if(!t)throw new h("No environment passed to template");if(!e||!e.main)throw new h("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var i=function(i,n,a){a.hash&&(n=d.extend({},n,a.hash)),i=t.VM.resolvePartial.call(this,i,n,a);var s=t.VM.invokePartial.call(this,i,n,a);if(null==s&&t.compile&&(a.partials[a.name]=t.compile(i,e.compilerOptions,t),s=a.partials[a.name](n,a)),null!=s){if(a.indent){for(var o=s.split("\n"),r=0,l=o.length;r<l&&(o[r]||r+1!==l);r++)o[r]=a.indent+o[r];s=o.join("\n")}return s}throw new h("The partial "+a.name+" could not be compiled when running in runtime-only mode")},n={strict:function(e,t){if(!(t in e))throw new h('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var i=e.length,n=0;n<i;n++)if(e[n]&&null!=e[n][t])return e[n][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:d.escapeExpression,invokePartial:i,fn:function(t){return e[t]},programs:[],program:function(e,t,i,n,a){var o=this.programs[e],r=this.fn(e);return t||a||n||i?o=s(this,e,r,t,i,n,a):o||(o=this.programs[e]=s(this,e,r)),o},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var i=e||t;return e&&t&&e!==t&&(i=d.extend({},t,e)),i},noop:t.VM.noop,compilerInfo:e.compiler},a=function(t,i){i=i||{};var s=i.data;a._setup(i),!i.partial&&e.useData&&(s=c(t,s));var o,r=e.useBlockParams?[]:undefined;return e.useDepths&&(o=i.depths?[t].concat(i.depths):[t]),e.main.call(n,t,n.helpers,n.partials,s,r,o)};return a.isTop=!0,a._setup=function(i){i.partial?(n.helpers=i.helpers,n.partials=i.partials):(n.helpers=n.merge(i.helpers,t.helpers),e.usePartial&&(n.partials=n.merge(i.partials,t.partials)))},a._child=function(t,i,a,o){if(e.useBlockParams&&!a)throw new h("must pass block params");if(e.useDepths&&!o)throw new h("must pass parent depths");return s(n,t,e[t],i,0,a,o)},a}function s(e,t,i,n,a,s,o){var r=function(t,a){return a=a||{},i.call(e,t,e.helpers,e.partials,a.data||n,s&&[a.blockParams].concat(s),o&&[t].concat(o))};return r.program=t,r.depth=o?o.length:0,r.blockParams=a||0,r}function o(e,t,i){return e?e.call||i.name||(i.name=e,e=i.partials[e]):e=i.partials[i.name],e}function r(e,t,i){if(i.partial=!0,e===undefined)throw new h("The partial "+i.name+" could not be found");if(e instanceof Function)return e(t,i)}function l(){return""}function c(e,t){return t&&"root"in t||(t=t?m(t):{},t.root=e),t}var u={},d=e,h=t,p=i.COMPILER_REVISION,f=i.REVISION_CHANGES,m=i.createFrame;return u.checkRevision=n,u.template=a,u.program=s,u.resolvePartial=o,u.invokePartial=r,u.noop=l,u}(e,t,i),s=function(e,t,i,n,a){"use strict";var s=e,o=t,r=i,l=n,c=a,u=function(){var e=new s.HandlebarsEnvironment;return l.extend(e,s),e.SafeString=o,e.Exception=r,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=c,e.template=function(t){return c.template(t,e)},e},d=u();d.create=u;var h="undefined"!=typeof global?global:window,p=h.Handlebars;return d.noConflict=function(){h.Handlebars===d&&(h.Handlebars=p)},d["default"]=d,d}(i,n,t,e,a),o=function(){"use strict";var e={Program:function(e,t,i,n){this.loc=n,this.type="Program",this.body=e,this.blockParams=t,this.strip=i},MustacheStatement:function(e,t,i,n,a,s){this.loc=s,this.type="MustacheStatement",this.path=e,this.params=t||[],this.hash=i,this.escaped=n,this.strip=a},BlockStatement:function(e,t,i,n,a,s,o,r,l){this.loc=l,this.type="BlockStatement",this.path=e,this.params=t||[],this.hash=i,this.program=n,this.inverse=a,this.openStrip=s,this.inverseStrip=o,this.closeStrip=r},PartialStatement:function(e,t,i,n,a){this.loc=a,this.type="PartialStatement",this.name=e,this.params=t||[],this.hash=i,this.indent="",this.strip=n},ContentStatement:function(e,t){this.loc=t,this.type="ContentStatement",this.original=this.value=e},CommentStatement:function(e,t,i){this.loc=i,this.type="CommentStatement",this.value=e,this.strip=t},SubExpression:function(e,t,i,n){this.loc=n,this.type="SubExpression",this.path=e,this.params=t||[],this.hash=i},PathExpression:function(e,t,i,n,a){this.loc=a,this.type="PathExpression",this.data=e,this.original=n,this.parts=i,this.depth=t},StringLiteral:function(e,t){this.loc=t,this.type="StringLiteral",this.original=this.value=e},NumberLiteral:function(e,t){this.loc=t,this.type="NumberLiteral",this.original=this.value=Number(e)},BooleanLiteral:function(e,t){this.loc=t,this.type="BooleanLiteral",this.original=this.value="true"===e},Hash:function(e,t){this.loc=t,this.type="Hash",this.pairs=e},HashPair:function(e,t,i){this.loc=i,this.type="HashPair",this.key=e,this.value=t},helpers:{helperExpression:function(e){return!("SubExpression"!==e.type&&!e.params.length&&!e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(t){return 1===t.parts.length&&!e.helpers.scopedId(t)&&!t.depth}}};return e}(),r=function(){"use strict";return function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,content:12,COMMENT:13,CONTENT:14,openRawBlock:15,END_RAW_BLOCK:16,OPEN_RAW_BLOCK:17,helperName:18,openRawBlock_repetition0:19,openRawBlock_option0:20,CLOSE_RAW_BLOCK:21,openBlock:22,block_option0:23,closeBlock:24,openInverse:25,block_option1:26,OPEN_BLOCK:27,openBlock_repetition0:28,openBlock_option0:29,openBlock_option1:30,CLOSE:31,OPEN_INVERSE:32,openInverse_repetition0:33,openInverse_option0:34,openInverse_option1:35,openInverseChain:36,OPEN_INVERSE_CHAIN:37,openInverseChain_repetition0:38,openInverseChain_option0:39,openInverseChain_option1:40,inverseAndProgram:41,INVERSE:42,inverseChain:43,inverseChain_option0:44,OPEN_ENDBLOCK:45,OPEN:46,mustache_repetition0:47,mustache_option0:48,OPEN_UNESCAPED:49,mustache_repetition1:50,mustache_option1:51,CLOSE_UNESCAPED:52,OPEN_PARTIAL:53,partialName:54,partial_repetition0:55,partial_option0:56,param:57,sexpr:58,OPEN_SEXPR:59,sexpr_repetition0:60,sexpr_option0:61,CLOSE_SEXPR:62,hash:63,hash_repetition_plus0:64,hashSegment:65,ID:66,EQUALS:67,blockParams:68,OPEN_BLOCK_PARAMS:69,blockParams_repetition_plus0:70,CLOSE_BLOCK_PARAMS:71,path:72,dataName:73,STRING:74,NUMBER:75,BOOLEAN:76,DATA:77,pathSegments:78,SEP:79,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",13:"COMMENT",14:"CONTENT",16:"END_RAW_BLOCK",17:"OPEN_RAW_BLOCK",21:"CLOSE_RAW_BLOCK",27:"OPEN_BLOCK",31:"CLOSE",32:"OPEN_INVERSE",37:"OPEN_INVERSE_CHAIN",42:"INVERSE",45:"OPEN_ENDBLOCK",46:"OPEN",49:"OPEN_UNESCAPED",52:"CLOSE_UNESCAPED",53:"OPEN_PARTIAL",59:"OPEN_SEXPR",62:"CLOSE_SEXPR",66:"ID",67:"EQUALS",69:"OPEN_BLOCK_PARAMS",71:"CLOSE_BLOCK_PARAMS",74:"STRING",75:"NUMBER",76:"BOOLEAN",77:"DATA",79:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[12,1],[10,3],[15,5],[9,4],[9,4],[22,6],[25,6],[36,6],[41,2],[43,3],[43,1],[24,3],[8,5],[8,5],[11,5],[57,1],[57,1],[58,5],[63,1],[65,3],[68,3],[18,1],[18,1],[18,1],[18,1],[18,1],[54,1],[54,1],[73,2],[72,1],[78,3],[78,1],[6,0],[6,2],[19,0],[19,2],[20,0],[20,1],[23,0],[23,1],[26,0],[26,1],[28,0],[28,2],[29,0],[29,1],[30,0],[30,1],[33,0],[33,2],[34,0],[34,1],[35,0],[35,1],[38,0],[38,2],[39,0],[39,1],[40,0],[40,1],[44,0],[44,1],[47,0],[47,2],[48,0],[48,1],[50,0],[50,2],[51,0],[51,1],[55,0],[55,2],[56,0],[56,1],[60,0],[60,2],[61,0],[61,1],[64,1],[64,2],[70,1],[70,2]],performAction:function(e,t,i,n,a,s){var o=s.length-1;switch(a){case 1:return s[o-1];case 2:this.$=new n.Program(s[o],null,{},n.locInfo(this._$));break;case 3:case 4:case 5:case 6:case 7:this.$=s[o];break;case 8:this.$=new n.CommentStatement(n.stripComment(s[o]),n.stripFlags(s[o],s[o]),n.locInfo(this._$));break;case 9:this.$=new n.ContentStatement(s[o],n.locInfo(this._$));break;case 10:this.$=n.prepareRawBlock(s[o-2],s[o-1],s[o],this._$);break;case 11:this.$={path:s[o-3],params:s[o-2],hash:s[o-1]};break;case 12:this.$=n.prepareBlock(s[o-3],s[o-2],s[o-1],s[o],!1,this._$);break;case 13:this.$=n.prepareBlock(s[o-3],s[o-2],s[o-1],s[o],!0,this._$);break;case 14:case 15:case 16:this.$={path:s[o-4],params:s[o-3],hash:s[o-2],blockParams:s[o-1],strip:n.stripFlags(s[o-5],s[o])};break;case 17:this.$={strip:n.stripFlags(s[o-1],s[o-1]),program:s[o]};break;case 18:var r=n.prepareBlock(s[o-2],s[o-1],s[o],s[o],!1,this._$),l=new n.Program([r],null,{},n.locInfo(this._$));l.chained=!0,this.$={strip:s[o-2].strip,program:l,chain:!0};break;case 19:this.$=s[o];break;case 20:this.$={path:s[o-1],strip:n.stripFlags(s[o-2],s[o])};break;case 21:case 22:this.$=n.prepareMustache(s[o-3],s[o-2],s[o-1],s[o-4],n.stripFlags(s[o-4],s[o]),this._$);break;case 23:this.$=new n.PartialStatement(s[o-3],s[o-2],s[o-1],n.stripFlags(s[o-4],s[o]),n.locInfo(this._$));break;case 24:case 25:this.$=s[o];break;case 26:this.$=new n.SubExpression(s[o-3],s[o-2],s[o-1],n.locInfo(this._$));break;case 27:this.$=new n.Hash(s[o],n.locInfo(this._$));break;case 28:this.$=new n.HashPair(s[o-2],s[o],n.locInfo(this._$));break;case 29:this.$=s[o-1];break;case 30:case 31:this.$=s[o];break;case 32:this.$=new n.StringLiteral(s[o],n.locInfo(this._$));break;case 33:this.$=new n.NumberLiteral(s[o],n.locInfo(this._$));break;case 34:this.$=new n.BooleanLiteral(s[o],n.locInfo(this._$));break;case 35:case 36:this.$=s[o];break;case 37:this.$=n.preparePath(!0,s[o],this._$);break;case 38:this.$=n.preparePath(!1,s[o],this._$);break;case 39:s[o-2].push({part:s[o],separator:s[o-1]}),this.$=s[o-2];break;case 40:this.$=[{part:s[o]}];break;case 41:this.$=[];break;case 42:s[o-1].push(s[o]);break;case 43:this.$=[];break;case 44:s[o-1].push(s[o]);break;case 51:this.$=[];break;case 52:s[o-1].push(s[o]);break;case 57:this.$=[];break;case 58:s[o-1].push(s[o]);break;case 63:this.$=[];break;case 64:s[o-1].push(s[o]);break;case 71:this.$=[];break;case 72:s[o-1].push(s[o]);break;case 75:this.$=[];break;case 76:s[o-1].push(s[o]);break;case 79:this.$=[];break;case 80:s[o-1].push(s[o]);break;case 83:this.$=[];break;case 84:s[o-1].push(s[o]);break;case 87:this.$=[s[o]];break;case 88:s[o-1].push(s[o]);break;case 89:this.$=[s[o]];break;case 90:s[o-1].push(s[o])}},table:[{3:1,4:2,5:[2,41],6:3,13:[2,41],14:[2,41],17:[2,41],27:[2,41],32:[2,41],46:[2,41],49:[2,41],53:[2,41]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:[1,11],14:[1,18],15:16,17:[1,21],22:14,25:15,27:[1,19],32:[1,20],37:[2,2],42:[2,2],45:[2,2],46:[1,12],49:[1,13],53:[1,17]},{1:[2,1]},{5:[2,42],13:[2,42],14:[2,42],17:[2,42],27:[2,42],32:[2,42],37:[2,42],42:[2,42],45:[2,42],46:[2,42],49:[2,42],53:[2,42]},{5:[2,3],13:[2,3],14:[2,3],17:[2,3],27:[2,3],32:[2,3],37:[2,3],42:[2,3],45:[2,3],46:[2,3],49:[2,3],53:[2,3]},{5:[2,4],13:[2,4],14:[2,4],17:[2,4],27:[2,4],32:[2,4],37:[2,4],42:[2,4],45:[2,4],46:[2,4],49:[2,4],53:[2,4]},{5:[2,5],13:[2,5],14:[2,5],17:[2,5],27:[2,5],32:[2,5],37:[2,5],42:[2,5],45:[2,5],46:[2,5],49:[2,5],53:[2,5]},{5:[2,6],13:[2,6],14:[2,6],17:[2,6],27:[2,6],32:[2,6],37:[2,6],42:[2,6],45:[2,6],46:[2,6],49:[2,6],53:[2,6]},{5:[2,7],13:[2,7],14:[2,7],17:[2,7],27:[2,7],32:[2,7],37:[2,7],42:[2,7],45:[2,7],46:[2,7],49:[2,7],53:[2,7]},{5:[2,8],13:[2,8],14:[2,8],17:[2,8],27:[2,8],32:[2,8],37:[2,8],42:[2,8],45:[2,8],46:[2,8],49:[2,8],53:[2,8]},{18:22,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{18:31,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{4:32,6:3,13:[2,41],14:[2,41],17:[2,41],27:[2,41],32:[2,41],37:[2,41],42:[2,41],45:[2,41],46:[2,41],49:[2,41],53:[2,41]},{4:33,6:3,13:[2,41],14:[2,41],17:[2,41],27:[2,41],32:[2,41],42:[2,41],45:[2,41],46:[2,41],49:[2,41],53:[2,41]},{12:34,14:[1,18]},{18:36,54:35,58:37,59:[1,38],66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{5:[2,9],13:[2,9],14:[2,9],16:[2,9],17:[2,9],27:[2,9],32:[2,9],37:[2,9],42:[2,9],45:[2,9],46:[2,9],49:[2,9],53:[2,9]},{18:39,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{18:40,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{18:41,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{31:[2,71],47:42,59:[2,71],66:[2,71],74:[2,71],75:[2,71],76:[2,71],77:[2,71]},{21:[2,30],31:[2,30],52:[2,30],59:[2,30],62:[2,30],66:[2,30],69:[2,30],74:[2,30],75:[2,30],76:[2,30],77:[2,30]},{21:[2,31],31:[2,31],52:[2,31],59:[2,31],62:[2,31],66:[2,31],69:[2,31],74:[2,31],75:[2,31],76:[2,31],77:[2,31]},{21:[2,32],31:[2,32],52:[2,32],59:[2,32],62:[2,32],66:[2,32],69:[2,32],74:[2,32],75:[2,32],76:[2,32],77:[2,32]},{21:[2,33],31:[2,33],52:[2,33],59:[2,33],62:[2,33],66:[2,33],69:[2,33],74:[2,33],75:[2,33],76:[2,33],77:[2,33]},{21:[2,34],31:[2,34],52:[2,34],59:[2,34],62:[2,34],66:[2,34],69:[2,34],74:[2,34],75:[2,34],76:[2,34],77:[2,34]},{21:[2,38],31:[2,38],52:[2,38],59:[2,38],62:[2,38],66:[2,38],69:[2,38],74:[2,38],75:[2,38],76:[2,38],77:[2,38],79:[1,43]},{66:[1,30],78:44},{21:[2,40],31:[2,40],52:[2,40],59:[2,40],62:[2,40],66:[2,40],69:[2,40],74:[2,40],75:[2,40],76:[2,40],77:[2,40],79:[2,40]},{50:45,52:[2,75],59:[2,75],66:[2,75],74:[2,75],75:[2,75],76:[2,75],77:[2,75]},{23:46,36:48,37:[1,50],41:49,42:[1,51],43:47,45:[2,47]},{26:52,41:53,42:[1,51],45:[2,49]},{16:[1,54]},{31:[2,79],55:55,59:[2,79],66:[2,79],74:[2,79],75:[2,79],76:[2,79],77:[2,79]},{31:[2,35],59:[2,35],66:[2,35],74:[2,35],75:[2,35],76:[2,35],77:[2,35]},{31:[2,36],59:[2,36],66:[2,36],74:[2,36],75:[2,36],76:[2,36],77:[2,36]},{18:56,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{28:57,31:[2,51],59:[2,51],66:[2,51],69:[2,51],74:[2,51],75:[2,51],76:[2,51],77:[2,51]},{31:[2,57],33:58,59:[2,57],66:[2,57],69:[2,57],74:[2,57],75:[2,57],76:[2,57],77:[2,57]},{19:59,21:[2,43],59:[2,43],66:[2,43],74:[2,43],75:[2,43],76:[2,43],77:[2,43]},{18:63,31:[2,73],48:60,57:61,58:64,59:[1,38],63:62,64:65,65:66,66:[1,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{66:[1,68]},{21:[2,37],31:[2,37],52:[2,37],59:[2,37],62:[2,37],66:[2,37],69:[2,37],74:[2,37],75:[2,37],76:[2,37],77:[2,37],79:[1,43]},{18:63,51:69,52:[2,77],57:70,58:64,59:[1,38],63:71,64:65,65:66,66:[1,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{24:72,45:[1,73]},{45:[2,48]},{4:74,6:3,13:[2,41],14:[2,41],17:[2,41],27:[2,41],32:[2,41],37:[2,41],42:[2,41],45:[2,41],46:[2,41],49:[2,41],53:[2,41]},{45:[2,19]},{18:75,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{4:76,6:3,13:[2,41],14:[2,41],17:[2,41],27:[2,41],32:[2,41],45:[2,41],46:[2,41],49:[2,41],53:[2,41]},{24:77,45:[1,73]},{45:[2,50]},{5:[2,10],13:[2,10],14:[2,10],17:[2,10],27:[2,10],32:[2,10],37:[2,10],42:[2,10],45:[2,10],46:[2,10],49:[2,10],53:[2,10]},{18:63,31:[2,81],56:78,57:79,58:64,59:[1,38],63:80,64:65,65:66,66:[1,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{59:[2,83],60:81,62:[2,83],66:[2,83],74:[2,83],75:[2,83],76:[2,83],77:[2,83]},{18:63,29:82,31:[2,53],57:83,58:64,59:[1,38],63:84,64:65,65:66,66:[1,67],69:[2,53],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{18:63,31:[2,59],34:85,57:86,58:64,59:[1,38],63:87,64:65,65:66,66:[1,67],69:[2,59],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{18:63,20:88,21:[2,45],57:89,58:64,59:[1,38],63:90,64:65,65:66,66:[1,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{31:[1,91]},{31:[2,72],59:[2,72],66:[2,72],74:[2,72],75:[2,72],76:[2,72],77:[2,72]},{31:[2,74]},{21:[2,24],31:[2,24],52:[2,24],59:[2,24],62:[2,24],66:[2,24],69:[2,24],74:[2,24],75:[2,24],76:[2,24],77:[2,24]},{21:[2,25],31:[2,25],52:[2,25],59:[2,25],62:[2,25],66:[2,25],69:[2,25],74:[2,25],75:[2,25],76:[2,25],77:[2,25]},{21:[2,27],31:[2,27],52:[2,27],62:[2,27],65:92,66:[1,93],69:[2,27]},{21:[2,87],31:[2,87],52:[2,87],62:[2,87],66:[2,87],69:[2,87]},{21:[2,40],31:[2,40],52:[2,40],59:[2,40],62:[2,40],66:[2,40],67:[1,94],69:[2,40],74:[2,40],75:[2,40],76:[2,40],77:[2,40],79:[2,40]},{21:[2,39],31:[2,39],52:[2,39],59:[2,39],62:[2,39],66:[2,39],69:[2,39],74:[2,39],75:[2,39],76:[2,39],77:[2,39],79:[2,39]},{52:[1,95]},{52:[2,76],59:[2,76],66:[2,76],74:[2,76],75:[2,76],76:[2,76],77:[2,76]},{52:[2,78]},{5:[2,12],13:[2,12],14:[2,12],17:[2,12],27:[2,12],32:[2,12],37:[2,12],42:[2,12],45:[2,12],46:[2,12],49:[2,12],53:[2,12]},{18:96,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{36:48,37:[1,50],41:49,42:[1,51],43:98,44:97,45:[2,69]},{31:[2,63],38:99,59:[2,63],66:[2,63],69:[2,63],74:[2,63],75:[2,63],76:[2,63],77:[2,63]},{45:[2,17]},{5:[2,13],13:[2,13],14:[2,13],17:[2,13],27:[2,13],32:[2,13],37:[2,13],42:[2,13],45:[2,13],46:[2,13],49:[2,13],53:[2,13]},{31:[1,100]},{31:[2,80],59:[2,80],66:[2,80],74:[2,80],75:[2,80],76:[2,80],77:[2,80]},{31:[2,82]},{18:63,57:102,58:64,59:[1,38],61:101,62:[2,85],63:103,64:65,65:66,66:[1,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{30:104,31:[2,55],68:105,69:[1,106]},{31:[2,52],59:[2,52],66:[2,52],69:[2,52],74:[2,52],75:[2,52],76:[2,52],77:[2,52]},{31:[2,54],69:[2,54]},{31:[2,61],35:107,68:108,69:[1,106]},{31:[2,58],59:[2,58],66:[2,58],69:[2,58],74:[2,58],75:[2,58],76:[2,58],77:[2,58]},{31:[2,60],69:[2,60]},{21:[1,109]},{21:[2,44],59:[2,44],66:[2,44],74:[2,44],75:[2,44],76:[2,44],77:[2,44]},{21:[2,46]},{5:[2,21],13:[2,21],14:[2,21],17:[2,21],27:[2,21],32:[2,21],37:[2,21],42:[2,21],45:[2,21],46:[2,21],49:[2,21],53:[2,21]},{21:[2,88],31:[2,88],52:[2,88],62:[2,88],66:[2,88],69:[2,88]},{67:[1,94]},{18:63,57:110,58:64,59:[1,38],66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{5:[2,22],13:[2,22],14:[2,22],17:[2,22],27:[2,22],32:[2,22],37:[2,22],42:[2,22],45:[2,22],46:[2,22],49:[2,22],53:[2,22]},{31:[1,111]},{45:[2,18]},{45:[2,70]},{18:63,31:[2,65],39:112,57:113,58:64,59:[1,38],63:114,64:65,65:66,66:[1,67],69:[2,65],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{5:[2,23],13:[2,23],14:[2,23],17:[2,23],27:[2,23],32:[2,23],37:[2,23],42:[2,23],45:[2,23],46:[2,23],49:[2,23],53:[2,23]},{62:[1,115]},{59:[2,84],62:[2,84],66:[2,84],74:[2,84],75:[2,84],76:[2,84],77:[2,84]},{62:[2,86]},{31:[1,116]},{31:[2,56]},{66:[1,118],70:117},{31:[1,119]},{31:[2,62]},{14:[2,11]},{21:[2,28],31:[2,28],52:[2,28],62:[2,28],66:[2,28],69:[2,28]},{5:[2,20],13:[2,20],14:[2,20],17:[2,20],27:[2,20],32:[2,20],37:[2,20],42:[2,20],45:[2,20],46:[2,20],49:[2,20],53:[2,20]},{31:[2,67],40:120,68:121,69:[1,106]},{31:[2,64],59:[2,64],66:[2,64],69:[2,64],74:[2,64],75:[2,64],76:[2,64],77:[2,64]},{31:[2,66],69:[2,66]},{21:[2,26],31:[2,26],52:[2,26],59:[2,26],62:[2,26],66:[2,26],69:[2,26],74:[2,26],75:[2,26],76:[2,26],77:[2,26]},{13:[2,14],14:[2,14],17:[2,14],27:[2,14],32:[2,14],37:[2,14],42:[2,14],45:[2,14],46:[2,14],49:[2,14],53:[2,14]},{66:[1,123],71:[1,122]},{66:[2,89],71:[2,89]},{13:[2,15],14:[2,15],17:[2,15],27:[2,15],32:[2,15],42:[2,15],45:[2,15],46:[2,15],49:[2,15],53:[2,15]},{31:[1,124]},{31:[2,68]},{31:[2,29]},{66:[2,90],71:[2,90]},{13:[2,16],14:[2,16],17:[2,16],27:[2,16],32:[2,16],37:[2,16],42:[2,16],45:[2,16],46:[2,16],49:[2,16],53:[2,16]}],defaultActions:{4:[2,1],47:[2,48],49:[2,19],53:[2,50],62:[2,74],71:[2,78],76:[2,17],80:[2,82],90:[2,46],97:[2,18],98:[2,70],103:[2,86],105:[2,56],108:[2,62],109:[2,11],121:[2,68],122:[2,29]},parseError:function(e){throw new Error(e)},parse:function(e){function t(){var e;return e=i.lexer.lex()||1,"number"!=typeof e&&(e=i.symbols_[e]||e),e}var i=this,n=[0],a=[null],s=[],o=this.table,r="",l=0,c=0,u=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var d=this.lexer.yylloc;s.push(d);var h=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,m,g,v,b,y,_,w,$={};;){if(m=n[n.length-1],this.defaultActions[m]?g=this.defaultActions[m]:(null!==p&&void 0!==p||(p=t()),g=o[m]&&o[m][p]),void 0===g||!g.length||!g[0]){var x="";if(!u){w=[];for(b in o[m])this.terminals_[b]&&b>2&&w.push("'"+this.terminals_[b]+"'");x=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:d,expected:w})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);switch(g[0]){case 1:n.push(p),a.push(this.lexer.yytext),s.push(this.lexer.yylloc),n.push(g[1]),p=null,f?(p=f,f=null):(c=this.lexer.yyleng,r=this.lexer.yytext,l=this.lexer.yylineno,d=this.lexer.yylloc,u>0&&u--);break;case 2:if(y=this.productions_[g[1]][1],$.$=a[a.length-y],$._$={first_line:s[s.length-(y||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(y||1)].first_column,last_column:s[s.length-1].last_column},h&&($._$.range=[s[s.length-(y||1)].range[0],s[s.length-1].range[1]]),void 0!==(v=this.performAction.call($,r,c,l,this.yy,g[1],a,s)))return v;y&&(n=n.slice(0,-1*y*2),a=a.slice(0,-1*y),s=s.slice(0,-1*y)),n.push(this.productions_[g[1]][0]),a.push($.$),s.push($._$),_=o[n[n.length-2]][n[n.length-1]],n.push(_);break;case 3:return!0}}return!0}},i=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,i=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var a=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[a[0],a[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,i,n,a;this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),o=0;o<s.length&&(!(i=this._input.match(this.rules[s[o]]))||t&&!(i[0].length>t[0].length)||(t=i,n=o,this.options.flex));o++);return t?(a=t[0].match(/(?:\r\n?|\n).*/g),a&&(this.yylineno+=a.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:a?a[a.length-1].length-a[a.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,s[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,i){function n(e,i){return t.yytext=t.yytext.substr(e,t.yyleng-i)}switch(i){case 0:if("\\\\"===t.yytext.slice(-2)?(n(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(n(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return t.yytext=t.yytext.substr(5,t.yyleng-9),this.popState(),16;case 4:return 14;case 5:return this.popState(),13;case 6:return 59;case 7:return 62;case 8:return 17;case 9:return this.popState(),this.begin("raw"),21;case 10:return 53;case 11:return 27;case 12:return 45;case 13:case 14:return this.popState(),42;case 15:return 32;case 16:return 37;case 17:return 49;case 18:return 46;case 19:this.unput(t.yytext),this.popState(),this.begin("com");break;case 20:return this.popState(),13;case 21:return 46;case 22:return 67;case 23:case 24:return 66;case 25:return 79;case 26:break;case 27:return this.popState(),52;case 28:return this.popState(),31;case 29:return t.yytext=n(1,2).replace(/\\"/g,'"'),74;case 30:return t.yytext=n(1,2).replace(/\\'/g,"'"),74;case 31:return 77;case 32:case 33:return 76;case 34:return 75;case 35:return 69;case 36:return 71;case 37:return 66;case 38:return t.yytext=n(1,2),66;case 39:return"INVALID";case 40:
return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,40],inclusive:!0}},e}();return t.lexer=i,e.prototype=t,t.Parser=e,new e}()}(),l=function(e,t){"use strict";function i(){this.parents=[]}var n=e,a=t;return i.prototype={constructor:i,mutating:!1,acceptKey:function(e,t){var i=this.accept(e[t]);if(this.mutating){if(i&&(!i.type||!a[i.type]))throw new n('Unexpected node type "'+i.type+'" found when accepting '+t+" on "+e.type);e[t]=i}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new n(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,i=e.length;t<i;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,i--)},accept:function(e){if(e){this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:!1!==t?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")},BlockStatement:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash"),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")},PartialStatement:function(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")},PartialExpression:function(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")},PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},i}(t,o),c=function(e){"use strict";function t(){}function i(e,t,i){t===undefined&&(t=e.length);var n=e[t-1],a=e[t-2];return n?"ContentStatement"===n.type?(a||!i?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:i}function n(e,t,i){t===undefined&&(t=-1);var n=e[t+1],a=e[t+2];return n?"ContentStatement"===n.type?(a||!i?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:i}function a(e,t,i){var n=e[null==t?0:t+1];if(n&&"ContentStatement"===n.type&&(i||!n.rightStripped)){var a=n.value;n.value=n.value.replace(i?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.value!==a}}function s(e,t,i){var n=e[null==t?e.length-1:t-1];if(n&&"ContentStatement"===n.type&&(i||!n.leftStripped)){var a=n.value;return n.value=n.value.replace(i?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.value!==a,n.leftStripped}}var o=e;return t.prototype=new o,t.prototype.Program=function(e){var t=!this.isRootSeen;this.isRootSeen=!0;for(var o=e.body,r=0,l=o.length;r<l;r++){var c=o[r],u=this.accept(c);if(u){var d=i(o,r,t),h=n(o,r,t),p=u.openStandalone&&d,f=u.closeStandalone&&h,m=u.inlineStandalone&&d&&h;u.close&&a(o,r,!0),u.open&&s(o,r,!0),m&&(a(o,r),s(o,r)&&"PartialStatement"===c.type&&(c.indent=/([ \t]+$)/.exec(o[r-1].original)[1])),p&&(a((c.program||c.inverse).body),s(o,r)),f&&(a(o,r),s((c.inverse||c.program).body))}}return e},t.prototype.BlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,o=e.program&&e.inverse,r=o,l=o;if(o&&o.chained)for(r=o.body[0].program;l.chained;)l=l.body[l.body.length-1].program;var c={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:n(t.body),closeStandalone:i((r||t).body)};if(e.openStrip.close&&a(t.body,null,!0),o){var u=e.inverseStrip;u.open&&s(t.body,null,!0),u.close&&a(r.body,null,!0),e.closeStrip.open&&s(l.body,null,!0),i(t.body)&&n(r.body)&&(s(t.body),a(r.body))}else e.closeStrip.open&&s(t.body,null,!0);return c},t.prototype.MustacheStatement=function(e){return e.strip},t.prototype.PartialStatement=t.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},t}(l),u=function(e){"use strict";function t(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}}function i(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}}function n(e){return e.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function a(e,t,i){i=this.locInfo(i);for(var n=e?"@":"",a=[],s=0,o="",r=0,l=t.length;r<l;r++){var u=t[r].part;if(n+=(t[r].separator||"")+u,".."===u||"."===u||"this"===u){if(a.length>0)throw new c("Invalid path: "+n,{loc:i});".."===u&&(s++,o+="../")}else a.push(u)}return new this.PathExpression(e,s,a,n,i)}function s(e,t,i,n,a,s){var o=n.charAt(3)||n.charAt(2),r="{"!==o&&"&"!==o;return new this.MustacheStatement(e,t,i,r,a,this.locInfo(s))}function o(e,t,i,n){if(e.path.original!==i){var a={loc:e.path.loc};throw new c(e.path.original+" doesn't match "+i,a)}n=this.locInfo(n);var s=new this.Program([t],null,{},n);return new this.BlockStatement(e.path,e.params,e.hash,s,undefined,{},{},{},n)}function r(e,t,i,n,a,s){if(n&&n.path&&e.path.original!==n.path.original){var o={loc:e.path.loc};throw new c(e.path.original+" doesn't match "+n.path.original,o)}t.blockParams=e.blockParams;var r,l;return i&&(i.chain&&(i.program.body[0].closeStrip=n.strip),l=i.strip,r=i.program),a&&(a=r,r=t,t=a),new this.BlockStatement(e.path,e.params,e.hash,t,r,e.strip,l,n&&n.strip,this.locInfo(s))}var l={},c=e;return l.SourceLocation=t,l.stripFlags=i,l.stripComment=n,l.preparePath=a,l.prepareMustache=s,l.prepareRawBlock=o,l.prepareBlock=r,l}(t),d=function(e,t,i,n,a){"use strict";function s(e,t){return"Program"===e.type?e:(r.yy=h,h.locInfo=function(e){return new h.SourceLocation(t&&t.srcName,e)},(new c).accept(r.parse(e)))}var o={},r=e,l=t,c=i,u=n,d=a.extend;o.parser=r;var h={};return d(h,u,l),o.parse=s,o}(r,o,c,u,e),h=function(e,t,i){"use strict";function n(){}function a(e,t,i){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new c("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var n=i.parse(e,t),a=(new i.Compiler).compile(n,t);return(new i.JavaScriptCompiler).compile(a,t)}function s(e,t,i){function n(){var n=i.parse(e,t),a=(new i.Compiler).compile(n,t),s=(new i.JavaScriptCompiler).compile(a,t,undefined,!0);return i.template(s)}if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new c("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var a,s=function(e,t){return a||(a=n()),a.call(this,e,t)};return s._setup=function(e){return a||(a=n()),a._setup(e)},s._child=function(e,t,i,s){return a||(a=n()),a._child(e,t,i,s)},s}function o(e,t){if(e===t)return!0;if(u(e)&&u(t)&&e.length===t.length){for(var i=0;i<e.length;i++)if(!o(e[i],t[i]))return!1;return!0}}function r(e){if(!e.path.parts){var t=e.path;e.path=new h.PathExpression(!1,0,[t.original+""],t.original+"",t.log)}}var l={},c=e,u=t.isArray,d=t.indexOf,h=i,p=[].slice;return l.Compiler=n,n.prototype={compiler:n,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var i=0;i<t;i++){var n=this.opcodes[i],a=e.opcodes[i];if(n.opcode!==a.opcode||!o(n.args,a.args))return!1}for(t=this.children.length,i=0;i<t;i++)if(!this.children[i].equals(e.children[i]))return!1;return!0},guid:0,compile:function(e,t){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[];var i=t.knownHelpers;if(t.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},i)for(var n in i)t.knownHelpers[n]=i[n];return this.accept(e)},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),i=this.guid++;return this.usePartial=this.usePartial||t.usePartial,this.children[i]=t,this.useDepths=this.useDepths||t.useDepths,i},accept:function(e){this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,i=0,n=t.length;i<n;i++)this.accept(t[i]);return this.options.blockParams.shift(),this.isSimple=1===n,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){r(e);var t=e.program,i=e.inverse;t=t&&this.compileProgram(t),i=i&&this.compileProgram(i);var n=this.classifySexpr(e);"helper"===n?this.helperSexpr(e,t,i):"simple"===n?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,i),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},PartialStatement:function(e){this.usePartial=!0;var t=e.params;if(t.length>1)throw new c("Unsupported number of partial arguments: "+t.length,e);t.length||t.push({type:"PathExpression",parts:[],depth:0});var i=e.name.original,n="SubExpression"===e.name.type;n&&this.accept(e.name),this.setupFullMustacheParams(e,undefined,undefined,!0);var a=e.indent||"";this.options.preventIndent&&a&&(this.opcode("appendContent",a),a=""),this.opcode("invokePartial",n,i,a),this.opcode("append")},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){r(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,i){var n=e.path,a=n.parts[0],s=null!=t||null!=i;this.opcode("getContext",n.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.accept(n),this.opcode("invokeAmbiguous",a,s)},simpleSexpr:function(e){this.accept(e.path),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,i){var n=this.setupFullMustacheParams(e,t,i),a=e.path,s=a.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",n.length,s);else{if(this.options.knownHelpersOnly)throw new c("You specified knownHelpersOnly, but used the unknown helper "+s,e);a.falsy=!0,this.accept(a),this.opcode("invokeHelper",n.length,a.original,h.helpers.simpleId(a))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],i=h.helpers.scopedId(e),n=!e.depth&&!i&&this.blockParamIndex(t);n?this.opcode("lookupBlockParam",n,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts)):this.opcode("lookupOnContext",e.parts,e.falsy,i):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},Hash:function(e){var t,i,n=e.pairs;for(this.opcode("pushHash"),t=0,i=n.length;t<i;t++)this.pushParam(n[t].value);for(;t--;)this.opcode("assignToHash",n[t].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:p.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=h.helpers.simpleId(e.path),i=t&&!!this.blockParamIndex(e.path.parts[0]),n=!i&&h.helpers.helperExpression(e),a=!i&&(n||t),s=this.options;if(a&&!n){var o=e.path.parts[0];s.knownHelpers[o]?n=!0:s.knownHelpersOnly&&(a=!1)}return n?"helper":a?"ambiguous":"simple"},pushParams:function(e){for(var t=0,i=e.length;t<i;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var i;if(!e.parts||h.helpers.scopedId(e)||e.depth||(i=this.blockParamIndex(e.parts[0])),i){var n=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",i,n)}else t=e.original||t,t.replace&&(t=t.replace(/^\.\//g,"").replace(/^\.$/g,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,i,n){var a=e.params;return this.pushParams(a),this.opcode("pushProgram",t),this.opcode("pushProgram",i),e.hash?this.accept(e.hash):this.opcode("emptyHash",n),a},blockParamIndex:function(e){for(var t=0,i=this.options.blockParams.length;t<i;t++){var n=this.options.blockParams[t],a=n&&d(n,e);if(n&&a>=0)return[t,a]}}},l.precompile=a,l.compile=s,l}(t,e,o),p=function(e){"use strict";function t(e,t,i){if(n(e)){for(var a=[],s=0,o=e.length;s<o;s++)a.push(t.wrap(e[s],i));return a}return"boolean"==typeof e||"number"==typeof e?e+"":e}function i(e){this.srcFile=e,this.source=[]}var n=e.isArray;try{var a=require("source-map"),s=a.SourceNode}catch(e){s=function(e,t,i,n){this.src="",n&&this.add(n)},s.prototype={add:function(e){n(e)&&(e=e.join("")),this.src+=e},prepend:function(e){n(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}}return i.prototype={prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each(function(t){e.add(["  ",t,"\n"])}),e},each:function(e){for(var t=0,i=this.source.length;t<i;t++)e(this.source[t])},empty:function(e){return e=e||this.currentLocation||{start:{}},new s(e.start.line,e.start.column,this.srcFile)},wrap:function(e,i){return e instanceof s?e:(i=i||this.currentLocation||{start:{}},e=t(e,this,i),new s(i.start.line,i.start.column,this.srcFile,e))},functionCall:function(e,t,i){return i=this.generateList(i),this.wrap([e,t?"."+t+"(":"(",i,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var i=[];for(var n in e)if(e.hasOwnProperty(n)){var a=t(e[n],this);"undefined"!==a&&i.push([this.quotedString(n),":",a])}var s=this.generateList(i);return s.prepend("{"),s.add("}"),s},generateList:function(e,i){for(var n=this.empty(i),a=0,s=e.length;a<s;a++)a&&n.add(","),n.add(t(e[a],this,i));return n},generateArray:function(e,t){var i=this.generateList(e,t);return i.prepend("["),i.add("]"),i}},i}(e),f=function(e,t,i,n){"use strict";function a(e){this.value=e}function s(){}function o(e,t,i,n){var a=t.popStack(),s=0,o=i.length;for(e&&o--;s<o;s++)a=t.nameLookup(a,i[s],n);return e?[t.aliasable("this.strict"),"(",a,", ",t.quotedString(i[s]),")"]:a}var r=e.COMPILER_REVISION,l=e.REVISION_CHANGES,c=t,u=i.isArray,d=n;s.prototype={nameLookup:function(e,t){return s.isValidJavaScriptVariableName(t)?[e,".",t]:[e,"['",t,"']"]},depthedLookup:function(e){return[this.aliasable("this.lookup"),'(depths, "',e,'")']},compilerInfo:function(){var e=r;return[e,l[e]]},appendToBuffer:function(e,t,i){return u(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:i?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},compile:function(e,t,i,n){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var a,s,o,r,l=e.opcodes;for(o=0,r=l.length;o<r;o++)a=l[o],this.source.currentLocation=a.loc,s=s||a.loc,this[a.opcode].apply(this,a.args);if(this.source.currentLocation=s,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new c("Compile completed with content left on stack");var u=this.createFunctionContext(n);if(this.isChild)return u;var d={compiler:this.compilerInfo(),main:u},h=this.context.programs;for(o=0,r=h.length;o<r;o++)h[o]&&(d[o]=h[o]);return this.environment.usePartial&&(d.usePartial=!0),this.options.data&&(d.useData=!0),this.useDepths&&(d.useDepths=!0),this.useBlockParams&&(d.useBlockParams=!0),this.options.compat&&(d.compat=!0),n?d.compilerOptions=this.options:(d.compiler=JSON.stringify(d.compiler),this.source.currentLocation={start:{line:1,column:0}},d=this.objectLiteral(d),t.srcName?(d=d.toStringWithSourceMap({file:t.destName}),d.map=d.map&&d.map.toString()):d=d.toString()),d},preamble:function(){this.lastContext=0,this.source=new d(this.options.srcName)},createFunctionContext:function(e){var t="",i=this.stackVars.concat(this.registers.list);i.length>0&&(t+=", "+i.join(", "));var n=0;for(var a in this.aliases){var s=this.aliases[a];this.aliases.hasOwnProperty(a)&&s.children&&s.referenceCount>1&&(t+=", alias"+ ++n+"="+a,s.children[0]="alias"+n)}var o=["depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&o.push("blockParams"),this.useDepths&&o.push("depths");var r=this.mergeSource(t);return e?(o.push(r),Function.apply(this,o)):this.source.wrap(["function(",o.join(","),") {\n  ",r,"}"])},mergeSource:function(e){var t,i,n,a,s=this.environment.isSimple,o=!this.forceBuffer;return this.source.each(function(e){e.appendToBuffer?(n?e.prepend("  + "):n=e,a=e):(n&&(i?n.prepend("buffer += "):t=!0,a.add(";"),n=a=undefined),i=!0,s||(o=!1))}),o?n?(n.prepend("return "),a.add(";")):i||this.source.push('return "";'):(e+=", buffer = "+(t?"":this.initializeBuffer()),n?(n.prepend("return buffer + "),a.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(t?"":";\n")),this.source.merge()},blockValue:function(e){var t=this.aliasable("helpers.blockHelperMissing"),i=[this.contextName(0)];this.setupHelperArgs(e,0,i);var n=this.popStack();i.splice(1,0,n),this.push(this.source.functionCall(t,"call",i))},ambiguousBlockValue:function(){var e=this.aliasable("helpers.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var i=this.topStack();t.splice(1,0,i),this.pushSource(["if (!",this.lastHelper,") { ",i," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,undefined,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",undefined,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("this.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,i){var n=0;i||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[n++])),this.resolvePath("context",e,n,t)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t){e?this.pushStackLiteral("this.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0)},resolvePath:function(e,t,i,n){if(this.options.strict||this.options.assumeObjects)return void this.push(o(this.options.strict,this,t,e));for(var a=t.length;i<a;i++)this.replaceStack(function(a){var s=this.nameLookup(a,t[i],e);return n?[" && ",s]:[" != null ? ",s," : ",a]})},resolvePossibleLambda:function(){this.push([this.aliasable("this.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t,i){var n=this.popStack(),a=this.setupHelper(e,t),s=i?[a.name," || "]:"",o=["("].concat(s,n);this.options.strict||o.push(" || ",this.aliasable("helpers.helperMissing")),o.push(")"),this.push(this.source.functionCall(o,"call",a.callParams))},invokeKnownHelper:function(e,t){var i=this.setupHelper(e,t);this.push(this.source.functionCall(i.name,"call",i.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var i=this.popStack();this.emptyHash();var n=this.setupHelper(0,e,t),a=this.lastHelper=this.nameLookup("helpers",e,"helper"),s=["(","(helper = ",a," || ",i,")"];this.options.strict||(s[0]="(helper = ",s.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",s,n.paramsInit?["),(",n.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",n.callParams)," : helper))"])},invokePartial:function(e,t,i){var n=[],a=this.setupParams(t,1,n,!1);e&&(t=this.popStack(),delete a.name),i&&(a.indent=JSON.stringify(i)),a.helpers="helpers",a.partials="partials",e?n.unshift(t):n.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(a.depths="depths"),a=this.objectLiteral(a),n.push(a),this.push(this.source.functionCall("this.invokePartial","",n))},assignToHash:function(e){var t,i,n,a=this.popStack();this.trackIds&&(n=this.popStack()),this.stringParams&&(i=this.popStack(),t=this.popStack());var s=this.hash;t&&(s.contexts[e]=t),i&&(s.types[e]=i),n&&(s.ids[e]=n),s.values[e]=a},pushId:function(e,t,i){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(i?" + "+JSON.stringify("."+i):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:s,compileChildren:function(e,t){for(var i,n,a=e.children,s=0,o=a.length;s<o;s++){i=a[s],n=new this.compiler;var r=this.matchExistingProgram(i);null==r?(this.context.programs.push(""),r=this.context.programs.length,i.index=r,i.name="program"+r,this.context.programs[r]=n.compile(i,t,this.context,!this.precompile),this.context.environments[r]=i,this.useDepths=this.useDepths||n.useDepths,this.useBlockParams=this.useBlockParams||n.useBlockParams):(i.index=r,i.name="program"+r,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams)}},matchExistingProgram:function(e){for(var t=0,i=this.context.environments.length;t<i;t++){var n=this.context.environments[t];if(n&&n.equals(e))return t}},programExpression:function(e){var t=this.environment.children[e],i=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&i.push("blockParams"),this.useDepths&&i.push("depths"),"this.program("+i.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof a||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new a(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=undefined),e&&this.source.push(e)},replaceStack:function(e){var t,i,n,s=["("];if(!this.isInline())throw new c("replaceStack on non-inline");var o=this.popStack(!0);if(o instanceof a)t=[o.value],s=["(",t],n=!0;else{i=!0;var r=this.incrStack();s=["((",this.push(r)," = ",o,")"],t=this.topStack()}var l=e.call(this,t);n||this.popStack(),i&&this.stackSlot--,this.push(s.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,i=e.length;t<i;t++){var n=e[t];if(n instanceof a)this.compileStack.push(n);else{var s=this.incrStack();this.pushSource([s," = ",n,";"]),this.compileStack.push(s)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),i=(t?this.inlineStack:this.compileStack).pop();if(!e&&i instanceof a)return i.value;if(!t){if(!this.stackSlot)throw new c("Invalid stack pop");this.stackSlot--}return i},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof a?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):(t=this.aliases[e]=this.source.wrap(e),t.aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,i){var n=[];return{params:n,paramsInit:this.setupHelperArgs(t,e,n,i),name:this.nameLookup("helpers",t,"helper"),callParams:[this.contextName(0)].concat(n)}},setupParams:function(e,t,i){var n,a={},s=[],o=[],r=[];a.name=this.quotedString(e),a.hash=this.popStack(),this.trackIds&&(a.hashIds=this.popStack()),this.stringParams&&(a.hashTypes=this.popStack(),a.hashContexts=this.popStack());var l=this.popStack(),c=this.popStack();(c||l)&&(a.fn=c||"this.noop",a.inverse=l||"this.noop");for(var u=t;u--;)n=this.popStack(),i[u]=n,this.trackIds&&(r[u]=this.popStack()),this.stringParams&&(o[u]=this.popStack(),s[u]=this.popStack());return this.trackIds&&(a.ids=this.source.generateArray(r)),this.stringParams&&(a.types=this.source.generateArray(o),a.contexts=this.source.generateArray(s)),this.options.data&&(a.data="data"),this.useBlockParams&&(a.blockParams="blockParams"),a},setupHelperArgs:function(e,t,i,n){var a=this.setupParams(e,t,i,!0);return a=this.objectLiteral(a),n?(this.useRegister("options"),i.push("options"),["options=",a]):(i.push(a),"")}};for(var h="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),p=s.RESERVED_WORDS={},f=0,m=h.length;f<m;f++)p[h[f]]=!0;return s.isValidJavaScriptVariableName=function(e){return!s.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},s}(i,t,e,p);return function(e,t,i,n,a){"use strict";var s=e,o=t,r=i.parser,l=i.parse,c=n.Compiler,u=n.compile,d=n.precompile,h=a,p=s.create,f=function(){var e=p();return e.compile=function(t,i){return u(t,i,e)},e.precompile=function(t,i){return d(t,i,e)},e.AST=o,e.Compiler=c,e.JavaScriptCompiler=h,e.Parser=r,e.parse=l,e};s=f(),s.create=f;var m="undefined"!=typeof global?global:window,g=m.Handlebars;return s.noConflict=function(){m.Handlebars===s&&(m.Handlebars=g)},s["default"]=s,s}(s,o,d,h,f)}),$.browser={mozilla:/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),webkit:/webkit/.test(navigator.userAgent.toLowerCase()),opera:/opera/.test(navigator.userAgent.toLowerCase()),msie:/msie/.test(navigator.userAgent.toLowerCase())},function(e){function t(e){throw new RangeError(A[e])}function i(e,t){for(var i=e.length,n=[];i--;)n[i]=t(e[i]);return n}function n(e,t){var n=e.split("@"),a="";return n.length>1&&(a=n[0]+"@",e=n[1]),e=e.replace(S,"."),a+i(e.split("."),t).join(".")}function a(e){for(var t,i,n=[],a=0,s=e.length;a<s;)t=e.charCodeAt(a++),t>=55296&&t<=56319&&a<s?(i=e.charCodeAt(a++),56320==(64512&i)?n.push(((1023&t)<<10)+(1023&i)+65536):(n.push(t),a--)):n.push(t);return n}function s(e){return i(e,function(e){var t="";return e>65535&&(e-=65536,t+=I(e>>>10&1023|55296),e=56320|1023&e),t+=I(e)}).join("")}function o(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:y}function r(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function l(e,t,i){var n=0;for(e=i?E(e/x):e>>1,e+=E(e/t);e>j*w>>1;n+=y)e=E(e/j);return E(n+(j+1)*e/(e+$))}function c(e){var i,n,a,r,c,u,d,h,p,f,m=[],g=e.length,v=0,$=C,x=k;for(n=e.lastIndexOf(P),n<0&&(n=0),a=0;a<n;++a)e.charCodeAt(a)>=128&&t("not-basic"),m.push(e.charCodeAt(a));for(r=n>0?n+1:0;r<g;){for(c=v,u=1,d=y;r>=g&&t("invalid-input"),h=o(e.charCodeAt(r++)),(h>=y||h>E((b-v)/u))&&t("overflow"),v+=h*u,p=d<=x?_:d>=x+w?w:d-x,!(h<p);d+=y)f=y-p,u>E(b/f)&&t("overflow"),u*=f;i=m.length+1,x=l(v-c,i,0==c),E(v/i)>b-$&&t("overflow"),$+=E(v/i),v%=i,m.splice(v++,0,$)}return s(m)}function u(e){var i,n,s,o,c,u,d,h,p,f,m,g,v,$,x,T=[];for(e=a(e),g=e.length,i=C,n=0,c=k,u=0;u<g;++u)(m=e[u])<128&&T.push(I(m));for(s=o=T.length,o&&T.push(P);s<g;){for(d=b,u=0;u<g;++u)(m=e[u])>=i&&m<d&&(d=m);for(v=s+1,d-i>E((b-n)/v)&&t("overflow"),n+=(d-i)*v,i=d,u=0;u<g;++u)if(m=e[u],m<i&&++n>b&&t("overflow"),m==i){for(h=n,p=y;f=p<=c?_:p>=c+w?w:p-c,!(h<f);p+=y)x=h-f,$=y-f,T.push(I(r(f+x%$,0))),h=E(x/$);T.push(I(r(h,0))),c=l(n,v,s==o),n=0,++s}++n,++i}return T.join("")}function d(e){return n(e,function(e){return T.test(e)?c(e.slice(4).toLowerCase()):e})}function h(e){return n(e,function(e){return D.test(e)?"xn--"+u(e):e})}var p="object"==typeof exports&&exports&&!exports.nodeType&&exports,f="object"==typeof module&&module&&!module.nodeType&&module,m="object"==typeof global&&global;m.global!==m&&m.window!==m&&m.self!==m||(e=m);var g,v,b=2147483647,y=36,_=1,w=26,$=38,x=700,k=72,C=128,P="-",T=/^xn--/,D=/[^\x20-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},j=y-_,E=Math.floor,I=String.fromCharCode;if(g={version:"1.4.1",ucs2:{decode:a,encode:s},decode:c,encode:u,toASCII:h,toUnicode:d},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return g});else if(p&&f)if(module.exports==p)f.exports=g;else for(v in g)g.hasOwnProperty(v)&&(p[v]=g[v]);else e.punycode=g}(this),app.modules.project=function(e){function t(){var e=$.Deferred();return $doc.trigger("register:authComponent",[e,{withSID:!0,crossDomainAuth:app.config.crossDomainAuth}]),e}function i(){$doc.on("click",".rp-close, .cover-all",function(){if(!$.cookie("root_region")){var e=document.domain;$.cookie("root_region",1,{domain:e.substring(e.search(/\./)),expires:366,path:"/"})}return closePortalPopup(),!1}).on("click","a[data-popup-url]",function(e){var t=$(this);e.preventDefault(),t.hasClass("js-blank-popup")?$.ajax({url:t.data("popup-url"),type:t.data("ajax-type")||"POST",success:function(e){$(t.data("selector-dialog")||"<div>").html(e).dialog({resizable:!1,modal:!0,height:"auto",width:"auto",minHeight:80,dialogClass:t.data("ext-class-dialog")||""})},error:function(e,t,i){window.console&&console.log(e,t,i)},complete:function(){t.trigger("popup-ajax-complete")}}):$.ajax({url:t.data("popup-url"),
type:t.data("ajax-type")||"POST",success:function(e){$("#"+(t.data("target")||"popup-content")).html(e).show()},error:function(e,t,i){window.console&&console.log(e,t,i)},beforeSend:function(){u_showLoading()},complete:function(){u_reRenderPopup(),t.trigger("popup-ajax-complete")}})}).on("focus","[placeholder]",function(){var e=$(this);e.data("placeholderTmp",e.attr("placeholder")),e.attr("placeholder","")}).on("blur","[placeholder]",function(){var e=$(this);e.attr("placeholder",e.data("placeholderTmp"))}).on("click",".js-pseudo-link",function(e){$(e.target).is("a")?e.stopPropagation():$("<a>").attr({href:$(this).data("href"),target:"_blank"}).appendTo("body")[0].click()}).on("click",".js-filter-top .reset-filter",function(e){e.stopPropagation()}).on("click","#select-region-link, #page-header-popup-link",function(e){$doc.trigger("openPopup:selectRegion"),e.preventDefault()}).on("click",".js-scroll-to",function(e){var t=$(this),i=$(t.attr("href")).offset().top-(t.data("scroll-indent")||0);$("html, body").stop().animate({scrollTop:i},700),e.preventDefault()}).on("click",".js-orders-cart-counter-container",function(e){if(!app.config.isUserSigned){var i=$(this).attr("href");t().then(function(){location.href=i}),e.preventDefault()}}).on("initSliders",n)}function n(){$(".js-content-slider").each(function(){var e=$(this),t=e.data();e.removeClass("js-content-slider").contentslider({classBlock:t["class"],countView:t.count,countSlide:t.slide,showScroll:t.scroll})})}return e.load=function(){i(),n()},e}(app.modules.project||{}),function(e){var t=window.location,i="www"===t.hostname.split(".")[0]?"ekb":t.hostname.split(".")[0];window[e]=(i.length?"/"+i:"")+t.pathname+("/"===t.pathname?"":"/")}("sz"),app.modules.crossPlatform=function(e){function t(e,t,i){i.crossDomain&&(i.xhrFields={withCredentials:!i.declineCredentials},t.setRequestHeader("X-Requested-With","XMLHttpRequest"))}function i(){$doc.ajaxSend(t)}return e.load=function(){i()},e}(app.modules.crossPlatform||{}),function(e){var t={},i=[],n=[],a={interval:5e3,showPager:!1,stopHover:!0},s=function(e,i){var n=e.children("a"),a=n.children("img");t.typeRotation,n.attr({href:i.href,alt:i.alt,title:i.title}),a.attr({src:i.src,alt:i.alt,title:i.title})},o=function(e){clearInterval(n[e])},r=function(e){n[e]=setInterval(function(){p(e)},t.interval)},l=function(e){o(e),r(e)},c=function(){e.each(n,function(e){o(e)})},u=function(){e.each(n,function(e){r(e)})},d=function(e){p(e),l(e)},h=function(e){p(e,-1),l(e)},p=function(e,n,a){var n=n||1,o=i[e].imgs,r=i[e].activeImg+n,c=i[e].container,u=c.parent();a!=undefined&&(r=a,l(e)),r>=o.length&&(r=0),r<0&&(r=o.length-1),t.showPager&&(u.find("li a").removeClass(t.pagerActiveClass),u.find("li:eq("+r+") a").addClass(t.pagerActiveClass)),s(c,o[r]),i[e].activeImg=r},f=function(n){var a,s,l,c,u,f,m=n.data("id");c=n.append("<a href='#' alt='' title='' class = '"+(t.classAnchor||"")+"'><img src='' alt='' title=''></a>"),t.stopHover&&c.hover(function(){o(m)},function(){r(m)}),t.showPager&&(a=e('<div class="'+t.classPagerContainer+'"></div>'),s=e('<div class="'+t.classPagerPosition+'"></div>'),u=e('<a href="#" class="'+t.classLeftArrow+'"></a>').click(function(){return h(m),!1}),f=e('<a href="#" class="'+t.classRightArrow+'"></a>').click(function(){return d(m),!1}),s.append(u,f),l=e("<ul>").addClass(t.pagerClass),e(i[m].imgs).each(function(e){l.append('<li><a href="#" data-id="'+e+'">'+(e+1)+"</a></li>")}),l.children("li").children("a").click(function(){return p(m,1,parseInt(e(this).data("id"))),!1}),s.append(l),a.append(s),n.parent().append(a)),p(m),r(m)},m=function(t){t.each(function(){var n,a=[],s=e(this);s.find("img").each(function(t){var i=e(this),n=i.parent().attr("href");a[t]=new Image,a[t]={src:i.attr("src"),alt:i.attr("alt"),title:i.attr("title"),href:n}}),t.empty(),n=i.push({imgs:a,activeImg:-1,container:s})-1,s.data("id",n).show(),f(s)})},g={init:function(i){e.extend(t,a,i),m(this)},stop:function(e){o(e)},stopAll:function(){c()},start:function(e){r(e)},start:function(){u()}};e.fn.actum=function(t){return g[t]?g[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("\u041c\u0435\u0442\u043e\u0434 "+t+" \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 jQuery.actum"):g.init.apply(this,arguments)}}(jQuery),function(e){var t={},i=[],n=[],a={interval:5e3,showPager:!1,stopHover:!0,showClose:!0,pagerActiveClass:"active",sliderContentClass:"",classPagerContainer:"js-actum-pager",sliderWrapClass:"js-actum-wrap",stopOnSelect:!1,cookiesPrefix:"disable-hint-",cookiesExpires:null,stopOnEnd:!1},s=function(e,t){e.data("options");e.find(".js-actum-content").html(t.body)},o=function(e){clearInterval(n[e])},r=function(e){var t=i[e].container.data("options");i[e].content.length>1&&(void 0===i[e].container.data("selected")||!t.stopOnSelect)&&t.interval&&(n[e]=setInterval(function(){b(e)},t.interval))},l=function(e){o(e),r(e)},c=function(){e.each(n,function(e){o(e)})},u=function(){e.each(n,function(e){r(e)})},d=function(e){b(e),l(e)},h=function(e){b(e,-1),l(e)},p=function(t){var n,a,s,r,l=t.data("id"),c=t.data("options");t.find("."+c.classPagerContainer).remove(),c.showPager&&i[l].content.length>1&&(n=e('<div class="'+c.classPagerContainer+'"></div>'),c.classLeftArrow&&c.classRightArrow&&(s=e('<a href="#" class="'+c.classLeftArrow+'"></a>').click(function(){return h(l),!1}),r=e('<a href="#" class="'+c.classRightArrow+'"></a>').click(function(){return d(l),!1})),n.append(s,r),a=e("<ul>").addClass(c.pagerClass),e(i[l].content).each(function(e){a.append("<li class="+c.pagerClass+'-item data-id="'+e+'">'+(e+1)+"</li>")}),a.children("li").click(function(){var i=parseInt(e(this).data("id"));return b(l,1,i),t.data("selected",i),c.stopOnSelect&&o(l),!1}),n.append(a),t.append(n))},f=function(){var t=e.cookie("disabledHints");return t?t.split(","):[]},m=function(e){var t=f();return~t.indexOf(e)||t.push(e),t.join(",")},g=function(t){var n=i[t].active,a=i[t].container.data("options");e.cookie("disabledHints",m(i[t].content[n].id),{expires:a.cookiesExpires,path:"/"}),i[t].content.splice(i[t].active,1),i[t].content.length?(p(i[t].container),b(t,1,n),a.stopHover||l(t)):i[t].content.length?(c(),i[t].container.remove()):e("."+a.sliderWrapClass).hide()},v=function(t){var i=t.data("id"),n=t.data("options"),a=e('<div class="js-actum-close-btn '+n.classCloseBtn+'"></div>');a.click(function(){g(i)}),t.append(a)},b=function(e,t,n){var t=t!==undefined?t:1,a=i[e].content,r=i[e].active+t,c=i[e].container,u=c.data("options");n!=undefined&&(r=n,u.stopHover||l(e)),r>=a.length&&(r=0),r<0&&(r=a.length-1),u.showPager&&(c.find("."+u.classPagerContainer+" li").removeClass(u.pagerActiveClass),c.find("."+u.classPagerContainer+" li:eq("+r+")").addClass(u.pagerActiveClass)),s(c,a[r]),i[e].active=r,u.stopOnEnd&&a.length-1===r&&o(e)},y=function(e){var t=e.data("id"),n=e.data("options"),a=e.append("<div class='js-actum-content "+n.sliderContentClass+"'>");e.show(),n.stopHover&&a.hover(function(){o(t)},function(){r(t)}),p(e),i[t].content.length?(n.showClose&&v(e),b(t),r(t)):e.remove()},_=function(n){f();n.each(function(){var a,s=0,o=[],r=e(this);r.children("div, li").each(function(){var t=e(this);o[s++]={id:t.attr("id"),body:t.html()}}),n.empty(),a=i.push({content:o,active:-1,container:r})-1,r.data({id:a,options:t}).show(),y(r)})},w={init:function(i){t={},e.extend(t,a,i),_(this)},stop:function(e){o(e)},stopAll:function(){c()},start:function(e){r(e)},startAll:function(){u()},swipeleft:function(e){d(e)},swiperight:function(e){h(e)},setActive:function(e,t,i){b(e,t,i)},clearAll:function(){t.length=0,i.length=0,n.length=0}};e.fn.actumEx=function(t){return"object"!=typeof t&&t?w[t]?w[t].apply(this,Array.prototype.slice.call(arguments,1)):void e.error("\u041c\u0435\u0442\u043e\u0434 "+t+" \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 jQuery.actumEx"):w.init.apply(this,arguments)}}(jQuery),function(e,t,i){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(t||i)}(function(e){"use strict";var t=function(t,i,n){var a={invalid:[],getCaret:function(){try{var e,i=0,n=t.get(0),s=document.selection,o=n.selectionStart;return s&&-1===navigator.appVersion.indexOf("MSIE 10")?(e=s.createRange(),e.moveStart("character",-a.val().length),i=e.text.length):(o||"0"===o)&&(i=o),i}catch(e){}},setCaret:function(e){try{if(t.is(":focus")){var i,n=t.get(0);n.setSelectionRange?n.setSelectionRange(e,e):(i=n.createTextRange(),i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",e),i.select())}}catch(e){}},events:function(){t.on("keydown.mask",function(e){t.data("mask-keycode",e.keyCode||e.which),t.data("mask-previus-value",t.val()),t.data("mask-previus-caret-pos",a.getCaret()),a.maskDigitPosMapOld=a.maskDigitPosMap}).on(e.jMaskGlobals.useInput?"input.mask":"keyup.mask",a.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){t.keydown().keyup()},100)}).on("change.mask",function(){t.data("changed",!0)}).on("blur.mask",function(){r===a.val()||t.data("changed")||t.trigger("change"),t.data("changed",!1)}).on("blur.mask",function(){r=a.val()}).on("focus.mask",function(t){!0===n.selectOnFocus&&e(t.target).select()}).on("focusout.mask",function(){n.clearIfNotMatch&&!s.test(a.val())&&a.val("")})},getRegexMask:function(){for(var e,t,n,a,s,r,l=[],c=0;c<i.length;c++)e=o.translation[i.charAt(c)],e?(t=e.pattern.toString().replace(/.{1}$|^.{1}/g,""),n=e.optional,a=e.recursive,a?(l.push(i.charAt(c)),s={digit:i.charAt(c),pattern:t}):l.push(n||a?t+"?":t)):l.push(i.charAt(c).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return r=l.join(""),s&&(r=r.replace(new RegExp("("+s.digit+"(.*"+s.digit+")?)"),"($1)?").replace(new RegExp(s.digit,"g"),s.pattern)),new RegExp(r)},destroyEvents:function(){t.off(["input","keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(e){var i,n=t.is("input"),a=n?"val":"text";return arguments.length>0?(t[a]()!==e&&t[a](e),i=t):i=t[a](),i},calculateCaretPosition:function(){var e=t.data("mask-previus-value")||"",i=a.getMasked(),n=a.getCaret();if(e!==i){var s=t.data("mask-previus-caret-pos")||0,o=i.length,r=e.length,l=0,c=0,u=0,d=0,h=0;for(h=n;h<o&&a.maskDigitPosMap[h];h++)c++;for(h=n-1;h>=0&&a.maskDigitPosMap[h];h--)l++;for(h=n-1;h>=0;h--)a.maskDigitPosMap[h]&&u++;for(h=s-1;h>=0;h--)a.maskDigitPosMapOld[h]&&d++;if(n>r)n=10*o;else if(s>=n&&s!==r){if(!a.maskDigitPosMapOld[n]){var p=n;n-=d-u,n-=l,a.maskDigitPosMap[n]&&(n=p)}}else n>s&&(n+=u-d,n+=c)}return n},behaviour:function(i){i=i||window.event,a.invalid=[];var n=t.data("mask-keycode");if(-1===e.inArray(n,o.byPassKeys)){var s=a.getMasked(),r=a.getCaret();return setTimeout(function(){a.setCaret(a.calculateCaretPosition())},e.jMaskGlobals.keyStrokeCompensation),a.val(s),a.setCaret(r),a.callbacks(i)}},getMasked:function(e,t){var s,r,l=[],c=t===undefined?a.val():t+"",u=0,d=i.length,h=0,p=c.length,f=1,m="push",g=-1,v=0,b=[];n.reverse?(m="unshift",f=-1,s=0,u=d-1,h=p-1,r=function(){return u>-1&&h>-1}):(s=d-1,r=function(){return u<d&&h<p});for(var y;r();){var _=i.charAt(u),w=c.charAt(h),$=o.translation[_];$?(w.match($.pattern)?(l[m](w),$.recursive&&(-1===g?g=u:u===s&&u!==g&&(u=g-f),s===g&&(u-=f)),u+=f):w===y?(v--,y=undefined):$.optional?(u+=f,h-=f):$.fallback?(l[m]($.fallback),u+=f,h-=f):a.invalid.push({p:h,v:w,e:$.pattern}),h+=f):(e||l[m](_),w===_?(b.push(h),h+=f):(y=_,b.push(h+v),v++),u+=f)}var x=i.charAt(s);d!==p+1||o.translation[x]||l.push(x);var k=l.join("");return a.mapMaskdigitPositions(k,b,p),k},mapMaskdigitPositions:function(e,t,i){var s=n.reverse?e.length-i:0;a.maskDigitPosMap={};for(var o=0;o<t.length;o++)a.maskDigitPosMap[t[o]+s]=1},callbacks:function(e){var s=a.val(),o=s!==r,l=[s,e,t,n],c=function(e,t,i){"function"==typeof n[e]&&t&&n[e].apply(this,i)};c("onChange",!0===o,l),c("onKeyPress",!0===o,l),c("onComplete",s.length===i.length,l),c("onInvalid",a.invalid.length>0,[s,e,t,a.invalid,n])}};t=e(t);var s,o=this,r=a.val();i="function"==typeof i?i(a.val(),undefined,t,n):i,o.mask=i,o.options=n,o.remove=function(){var e=a.getCaret();return o.options.placeholder&&t.removeAttr("placeholder"),t.data("mask-maxlength")&&t.removeAttr("maxlength"),a.destroyEvents(),a.val(o.getCleanVal()),a.setCaret(e),t},o.getCleanVal=function(){return a.getMasked(!0)},o.getMaskedVal=function(e){return a.getMasked(!1,e)},o.init=function(r){if(r=r||!1,n=n||{},o.clearIfNotMatch=e.jMaskGlobals.clearIfNotMatch,o.byPassKeys=e.jMaskGlobals.byPassKeys,o.translation=e.extend({},e.jMaskGlobals.translation,n.translation),o=e.extend(!0,{},o,n),s=a.getRegexMask(),r)a.events(),a.val(a.getMasked());else{n.placeholder&&t.attr("placeholder",n.placeholder),t.data("mask")&&t.attr("autocomplete","off");for(var l=0,c=!0;l<i.length;l++){var u=o.translation[i.charAt(l)];if(u&&u.recursive){c=!1;break}}c&&t.attr("maxlength",i.length).data("mask-maxlength",!0),a.destroyEvents(),a.events();var d=a.getCaret();a.val(a.getMasked()),a.setCaret(d)}},o.init(!t.is("input"))};e.maskWatchers={};var i=function(){var i=e(this),a={},s="data-mask-",o=i.attr("data-mask");if(i.attr(s+"reverse")&&(a.reverse=!0),i.attr(s+"clearifnotmatch")&&(a.clearIfNotMatch=!0),"true"===i.attr(s+"selectonfocus")&&(a.selectOnFocus=!0),n(i,o,a))return i.data("mask",new t(this,o,a))},n=function(t,i,n){n=n||{};var a=e(t).data("mask"),s=JSON.stringify,o=e(t).val()||e(t).text();try{return"function"==typeof i&&(i=i(o)),"object"!=typeof a||s(a.options)!==s(n)||a.mask!==i}catch(e){}},a=function(e){var t,i=document.createElement("div");return e="on"+e,t=e in i,t||(i.setAttribute(e,"return;"),t="function"==typeof i[e]),i=null,t};e.fn.mask=function(i,a){a=a||{};var s=this.selector,o=e.jMaskGlobals,r=o.watchInterval,l=a.watchInputs||o.watchInputs,c=function(){if(n(this,i,a))return e(this).data("mask",new t(this,i,a))};return e(this).each(c),s&&""!==s&&l&&(clearInterval(e.maskWatchers[s]),e.maskWatchers[s]=setInterval(function(){e(document).find(s).each(c)},r)),this},e.fn.masked=function(e){return this.data("mask").getMaskedVal(e)},e.fn.unmask=function(){return clearInterval(e.maskWatchers[this.selector]),delete e.maskWatchers[this.selector],this.each(function(){var t=e(this).data("mask");t&&t.remove().removeData("mask")})},e.fn.cleanVal=function(){return this.data("mask").getCleanVal()},e.applyDataMask=function(t){t=t||e.jMaskGlobals.maskElements,(t instanceof e?t:e(t)).filter(e.jMaskGlobals.dataMaskAttr).each(i)};var s={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,keyStrokeCompensation:10,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&a("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};e.jMaskGlobals=e.jMaskGlobals||{},s=e.jMaskGlobals=e.extend(!0,{},s,e.jMaskGlobals),s.dataMask&&e.applyDataMask(),setInterval(function(){e.jMaskGlobals.watchDataMask&&e.applyDataMask()},s.watchInterval)},window.jQuery,window.Zepto),function(e){var t={init:function(t){return this.each(function(){var i,n=e(this),a=e.extend({},e.fn.checkLength.defaults,t),s=n.data("counter"),o=n.attr("maxlength")||a.maxLength,r=n.data("lower-bound")||a.lowerBound,l=n.data("count-method")||a.countMethod,c=n.data("counter-text")||a.counterText,u=n.data("counter-id");s||(u?s=e("#"+u):(i=e("<span>").addClass(a.counterClassName).text(c).insertAfter(n),s=e("<b>").appendTo(i)),n.data("counter",s).on("keydown keyup paste focusout",function(){var e,t=n.val(),i=r||o/4;t.length>o&&(t=t.substring(0,o),n.val(t)),e="down"===l?o-t.length:t.length,s.html(e<=i?"<span>"+e+"</span>":e)})),n.keyup()}),this}};e.fn.checkLength=function(i){return i&&"object"!=typeof i?t[i]?t[i].apply(this,Array.prototype.slice.call(arguments,1)):void e.error(i+" is not a method of jQuery.checkLength"):t.init.apply(this,arguments)},e.fn.checkLength.defaults={counterClassName:"uf-c counter-",counterText:"\u043e\u0441\u0442\u0430\u043b\u043e\u0441\u044c \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432: ",countMethod:"down",maxlength:255}}(jQuery),function(e){function t(t){f=p.data("item-selector")||".js-timeout-menu-item",m=p.data("sub-selector")||"*",g=p.data("direction")||"right",v=p.data("tolerance")||75,b=p.data("mouse-out")||!0,y=p.data("activation-delay")||110,_=p.data("delay")||300,w=e.extend({enter:e.noop,exit:e.noop,delegatedRow:e.noop,exitMenu:e.noop},t)}function i(e){k.push({x:e.pageX,y:e.pageY}),k.length>$&&k.shift()}function n(){P&&clearTimeout(P),(w.exitMenu(this)||b)&&(x&&w.delegatedRow(x),x=null)}function a(){P&&clearTimeout(P),w.enter(this),l(this)}function s(){T&&clearTimeout(T),P&&clearTimeout(P),w.exit(this)}function o(t){if(t!==x)return e(t).is(m)?void(y>0?(T&&clearTimeout(T),T=setTimeout(function(){r(t)},y)):r(t)):void(x=null)}function r(e){x&&w.delegatedRow(x),w.delegatedRow(e),x=e}function l(t){var i=u();x&&e(x).is(m)||(i=0),i?P=setTimeout(function(){l(t)},i):o(t)}function c(e,t){return(t.y-e.y)/(t.x-e.x)}function u(){var e,t,i=p.offset(),n=k[k.length-1],a=k[0],s={x:i.left,y:i.top},o={x:i.left+p.outerWidth(),y:s.y},r={x:i.left,y:i.top+p.outerHeight()},l={x:i.left+p.outerWidth(),y:r.y};return n?(a||(a=n),"right"===g&&(o.y-=v,l.y+=v),"left"===g&&(s.y-=v,r.y+=v),"above"===g&&(s.x-=v,o.x+=v),"below"===g&&(r.x-=v,l.x+=v),a.x<i.left||a.x>l.x||a.y<i.top||a.y>l.y?0:C&&n.x===C.x&&n.y===C.y?0:(e=o,t=l,"left"===g&&(e=r,t=s),"below"===g&&(e=l,t=r),"above"===g&&(e=s,t=o),c(n,e)<c(a,e)&&c(n,t)>c(a,t)?(C=n,_):(C=null,0))):0}function d(t){var i=e(t.target);i.is(f)&&i.mouseenter(a).mouseleave(s).click(o(this))}function h(){p.mouseleave(n).find(f).mouseenter(a).mouseleave(s).click(o(this)).bind("DOMNodeInserted",d),e(document).mousemove(i)}var p,f,m,g,v,b,y,_,w,$=3,x=null,k=[],C=null,P=null,T=null;e.fn.menuAim=function(e){return p=this,t.call(this,e),h(),this}}(jQuery),function(e,t){function i(t,i){var a,s,o,r=t.nodeName.toLowerCase();return"area"===r?(a=t.parentNode,s=a.name,!(!t.href||!s||"map"!==a.nodeName.toLowerCase())&&(!!(o=e("img[usemap=#"+s+"]")[0])&&n(o))):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var a=0,s=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,a,s=e(this[0]);s.length&&s[0]!==document;){if(("absolute"===(n=s.css("position"))||"relative"===n||"fixed"===n)&&(a=parseInt(s.css("zIndex"),10),!isNaN(a)&&0!==a))return a;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})},removeUniqueId:function(){return this.each(function(){s.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),a=isNaN(n);return(a||n>=0)&&i(t,!a)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function a(t,i,n,a){return e.each(s,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var s="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?r["inner"+n].call(this):this.each(function(){e(this).css(o,a(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?r["outer"+n].call(this,t):this.each(function(){e(this).css(o,a(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var a,s=e.ui[t].prototype;for(a in n)s.plugins[a]=s.plugins[a]||[],s.plugins[a].push([i,n[a]])},call:function(e,t,i){var n,a=e.plugins[t];if(a&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;n<a.length;n++)e.options[a[n][0]]&&a[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",a=!1;return t[n]>0||(t[n]=1,a=t[n]>0,t[n]=0,a)}})}(jQuery),function(e,t){var i=0,n=Array.prototype.slice,a=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(e){}a(t)},e.widget=function(t,i,n){var a,s,o,r,l={},c=t.split(".")[0];t=t.split(".")[1],a=c+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[c]=e[c]||{},s=e[c][t],o=e[c][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(n,function(t,n){if(!e.isFunction(n))return void(l[t]=n);l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},a=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,s=this._superApply;return this._super=e,this._superApply=a,t=n.apply(this,arguments),this._super=i,this._superApply=s,t}}()}),o.prototype=e.widget.extend(r,{widgetEventPrefix:s?r.widgetEventPrefix||t:t},l,{constructor:o,namespace:c,widgetName:t,widgetFullName:a}),s?(e.each(s._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,o,i._proto)}),delete s._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(i){for(var a,s,o=n.call(arguments,1),r=0,l=o.length;r<l;r++)for(a in o[r])s=o[r][a],o[r].hasOwnProperty(a)&&s!==t&&(e.isPlainObject(s)?i[a]=e.isPlainObject(i[a])?e.widget.extend({},i[a],s):e.widget.extend({},s):i[a]=s);return i},e.widget.bridge=function(i,a){var s=a.prototype.widgetFullName||i;e.fn[i]=function(o){var r="string"==typeof o,l=n.call(arguments,1),c=this;return o=!r&&l.length?e.widget.extend.apply(null,[o].concat(l)):o,r?this.each(function(){var n,a=e.data(this,s);return a?e.isFunction(a[o])&&"_"!==o.charAt(0)?(n=a[o].apply(a,l),n!==a&&n!==t?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+o+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+o+"'")}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new a(o,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var a,s,o,r=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(r={},a=i.split("."),i=a.shift(),a.length){for(s=r[i]=e.widget.extend({},this.options[i]),o=0;o<a.length-1;o++)s[a[o]]=s[a[o]]||{},s=s[a[o]];if(i=a.pop(),1===arguments.length)return s[i]===t?null:s[i];s[i]=n}else{if(1===arguments.length)return this.options[i]===t?null:this.options[i];r[i]=n}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var a,s=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=a=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,a=this.widget()),e.each(n,function(n,o){function r(){if(t||!0!==s.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof o?s[o]:o).apply(s,arguments)}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+s.eventNamespace,u=l[2];u?a.delegate(u,c,r):i.bind(c,r)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var a,s,o=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(a in s)a in i||(i[a]=s[a]);return this.element.trigger(i,n),!(e.isFunction(o)&&!1===o.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,a,s){"string"==typeof a&&(a={effect:a});var o,r=a?!0===a||"number"==typeof a?i:a.effect||i:t;a=a||{},"number"==typeof a&&(a={duration:a}),o=!e.isEmptyObject(a),a.complete=s,a.delay&&n.delay(a.delay),o&&e.effects&&e.effects.effect[r]?n[t](a):r!==t&&n[r]?n[r](a.duration,a.easing,s):n.queue(function(i){e(this)[t](),s&&s.call(n[0]),i()})}})}(jQuery),function(e){var t,i="ui-button ui-widget ui-state-default ui-corner-all",n="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",a=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},s=function(t){var i=t.name,n=t.form,a=e([]);return i&&(i=i.replace(/'/g,"\\'"),a=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),a};e.widget("ui.button",{version:"1.10.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,a),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var n=this,o=this.options,r="checkbox"===this.type||"radio"===this.type,l=r?"":"ui-state-active";null===o.label&&(o.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(i).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){o.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){o.disabled||e(this).removeClass(l)}).bind("click"+this.eventNamespace,function(e){o.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),r&&this.element.bind("change"+this.eventNamespace,function(){n.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(o.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(o.disabled)return!1;e(this).addClass("ui-state-active"),n.buttonElement.attr("aria-pressed","true");var t=n.element[0];s(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(o.disabled)return!1;e(this).addClass("ui-state-active"),t=this,n.document.one("mouseup",function(){t=null})}).bind("mouseup"+this.eventNamespace,function(){if(o.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(o.disabled)return!1;t.keyCode!==e.ui.keyCode.SPACE&&t.keyCode!==e.ui.keyCode.ENTER||e(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",o.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(i+" ui-state-active "+n).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){if(this._super(e,t),"disabled"===e)return this.element.prop("disabled",!!t),void(t&&this.buttonElement.removeClass("ui-state-focus"));this._resetButton()},refresh:function(){
var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?s(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(n),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),a=this.options.icons,s=a.primary&&a.secondary,o=[];a.primary||a.secondary?(this.options.text&&o.push("ui-button-text-icon"+(s?"s":a.primary?"-primary":"-secondary")),a.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+a.primary+"'></span>"),a.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+a.secondary+"'></span>"),this.options.text||(o.push(s?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):o.push("ui-button-text-only"),t.addClass(o.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,n){var a=i.attr(n);a!==undefined&&a.length&&(t[n]=a)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){if(this.cancelBlur)return void delete this.cancelBlur;this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){this.element[0]===this.document[0].activeElement||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),!1!==this._start(t)&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(e(t.currentTarget).hasClass("ui-state-active"))return!1!==this._start(t)&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,i.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return!(!this.spinning&&!1===this._trigger("start",e))&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",t,{value:i})||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;return t=null!==n.min?n.min:0,i=e-t,i=Math.round(i/n.step)*n.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==n.max&&e>n.max?n.max:null!==n.min&&e<n.min?n.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(i))}"max"!==e&&"min"!==e&&"step"!==e||"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var i;""!==e&&null!==(i=this._parse(e))&&(t||(i=this._adjustValue(i)),e=this._format(i)),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());t(this._value).call(this,e)},widget:function(){return this.uiSpinner}})}(jQuery),$.widget("custom.extendedSpinner",$.ui.spinner,{_create:function(){return this._on(this.element,{blur:this._onBlur,input:this._onInput}),this._super()},_onBlur:function(){this.options.min&&this.element.val()<this.options.min&&this.element.val(this.options.min)},_onInput:function(){var e=this.element.val();this.options.max&&Math.floor(e)>this.options.max&&this.element.val(e.substring(0,this.options.max.toString().length))}}),function(){Handlebars.registerPartial("application/_selectric",Handlebars.template({1:function(){return"in-row"},3:function(e,t,i,n,a,s){var o;return null!=(o=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=s[1]?s[1].value:s[1],"===",null!=e?e.id:e,{name:"ifCond",hash:{},fn:this.program(4,n,0,a,s),inverse:this.program(6,n,0,a,s),data:n}))?o:""},4:function(e){return"    <option selected value='"+this.escapeExpression(this.lambda(null!=e?e.id:e,e))+"'>"+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"</option>\n"},6:function(e){return"    <option value='"+this.escapeExpression(this.lambda(null!=e?e.id:e,e))+"'>"+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"</option>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n,a,s){var o,r;return"<div class='apress-selectric "+(null!=(o=t["if"].call(e,null!=e?e.rowType:e,{name:"if",hash:{},fn:this.program(1,n,0,a,s),inverse:this.noop,data:n}))?o:"")+"'>\n  <select class='"+this.escapeExpression((r=null!=(r=t.className||(null!=e?e.className:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{name:"className",hash:{},data:n}):r))+'\' data-selectric-options=\'{"maxHeight":"'+this.escapeExpression((r=null!=(r=t.maxHeight||(null!=e?e.maxHeight:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{name:"maxHeight",hash:{},data:n}):r))+'","id":"'+this.escapeExpression((r=null!=(r=t.itemID||(null!=e?e.itemID:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{name:"itemID",hash:{},data:n}):r))+"\"}'>\n"+(null!=(o=t.each.call(e,null!=e?e.options:e,{name:"each",hash:{},fn:this.program(3,n,0,a,s),inverse:this.noop,data:n}))?o:"")+"  </select>\n</div>"},useData:!0,useDepths:!0}))}.call(this),function(){Handlebars.registerPartial("application/_spinner",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='apress-ui-spinner'>\n  <input class='"+this.escapeExpression((a=null!=(a=t.className||(null!=e?e.className:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"className",hash:{},data:n}):a))+'\' data-spinner-options=\'{"min":"'+this.escapeExpression((a=null!=(a=t.min||(null!=e?e.min:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"min",hash:{},data:n}):a))+'","max":"'+this.escapeExpression((a=null!=(a=t.max||(null!=e?e.max:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"max",hash:{},data:n}):a))+'","id":"'+this.escapeExpression((a=null!=(a=t.itemID||(null!=e?e.itemID:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"itemID",hash:{},data:n}):a))+"\"}' value='"+this.escapeExpression((a=null!=(a=t.value||(null!=e?e.value:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"value",hash:{},data:n}):a))+"'>\n</div>"},useData:!0}))}.call(this),ObjectEventListener.prototype={_setObjectValueByPath:function(e,t){var i=e.split("."),n=this;i.shift(),i.reduce(function(e,a,s){return s===i.length-1&&(n.objectToListen[a]=t),n.objectToListen[a]},n.objectToListen)},_getValueFromObjectByPath:function(e,t){var i=e.split(".");return i.shift(),i.reduce(function(e,t){return e?e[t]:null},t)},_createProxy:function(e,t){var i=this;return new Proxy(e,{set:function(e,n,a){e[n]=a,i._eventsRouter[t].handlers.forEach(function(t){t.apply(null,[e,n,a])})}})},set:function(e,t){var i=e.split("."),n=i.pop(),a=this._eventsRouter[i.join(".")];return a&&a.handlers.length?(this._setObjectValueByPath(e,t),a.proxy[n]=t,this):this},addEventListener:function(e,t){var i=this._eventsRouter;i[e]||(i[e]={handlers:[],proxy:this._createProxy(this._getValueFromObjectByPath(e,this.objectToListen),e)}),i[e].handlers.push(t)},removeEventListener:function(e){var t=this._eventsRouter;t[e]&&(t[e].handlers=[])}};var appEL=window.Proxy?new ObjectEventListener(app):null;!function(){function e(e){var t=function(){for(var t in app.modules)if(app.modules[t][e])try{app.modules[t][e]()}catch(e){console.trace(e)}};setTimeout(t,10)}function t(){var t=app.config.crossDomainAuth&&app.modules.crossDomainAuthBridge?app.modules.crossDomainAuthBridge.authorizeUser():$.Deferred().resolve();t.always(e.bind(null,"load")),setTimeout(function(){t.resolve()},1e3)}function i(){$(document).ready(e.bind(null,"ready")),$(window).load(t)}app.modules&&i()}(),app.modules.applicationUtils=function(e){function t(e){return i(0!==arguments.length,"Argument should be passed into isPlainObject method"),"object"==typeof e&&!Array.isArray(e)&&null!==e}function i(e,t){var i,n;if(!t)throw new Error("message argument is required");if(!e)throw i=Array.prototype.slice.call(arguments,2),n=0,i.length&&(t=t.replace(/%s/g,function(){return i[n++]})),new Error(t)}function n(){var e=function(e){return t(Math.random()*(1<<(e<<2))^Date.now()).slice(-e)},t=function(e){return(0|e).toString(16)};return[e(4)+e(4),e(4),"4"+e(3),t(8|4*Math.random())+e(3),Date.now().toString(16).slice(-10)+e(2)].join("-")}function a(e,t){return t=t||500,clearTimeout(f),f=setTimeout(function(){e(),e=function(){}},t),function(){clearTimeout(f),e()}}function s(e,t){function i(e){var i=[].slice.call(arguments,1),n=0;return e||(e=t[0]),e.replace(/%{count}/g,function(){return i[n++]})}function n(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}if(!e)return i(t[3],e);switch(n(e)){case 0:return i(t[0],e);case 1:return i(t[1],e);default:return i(t[2],e)}}function o(e){i(t(e),"params should be a plain object, instead %s was passed",e)}function r(e){o(e),i("string"==typeof e.url,"params.url should be a string, instead %s was passed",e.url),i(!e.pid||"string"==typeof e.pid||"number"==typeof e.pid,"params.pid should be a string or number, instead %s was passed",e.pid)}function l(e){r(e);var t=$.Deferred(),i=e.fequency||1e3,n=e.url;return e.pid&&(n+="/"+e.pid),function a(){$.ajax({url:n}).then(function(n){if(n.failed||n.succeeded)return n.failed?t.reject(e.rejectWith||n.error||{}):t.resolve(e.resolveWith||n.payload||{});setTimeout(a,i)}).fail(function(e){t.reject(e)})}(),t}function c(e){location.href=e}function u(e,n){return i(t(e),"obj should be a plain object, instead %s was passed",e),i($.isFunction(n),"callback should be a function, instead %s was passed",n),Object.keys(e).reduce(function(t,i){return n(e,i)&&(t[i]=e[i]),t},{})}function d(e,n){return i("string"==typeof e,"path should be a string, instead %s was passed",e),i(t(n),"sourceObject should be a plain object, instead %s was passed",n),e.split(".").reduce(function(e,t){return e?e[t]:null},n)}function h(e,n){return i(t(e),"data argument should be the plain object"),i(t(n),"schema argument should be the plain object"),Object.keys(e).reduce(function(t,i){var a=n[i];return t[a||i]=e[i],t},{})}function p(e,t){return i("string"==typeof e,"argument item should be a string, instead got %s",e),i(Array.isArray(t),"argument array should be an array, instead got %s",t),!!~t.indexOf(e)}var f;return $.extend(e,{setLocationHref:c,invariant:i,isPlainObject:t,generateUUID:n,delayCall:a,pluralize:s,listenProcess:l,validateOnObjectType:o,mapAccordingToSchema:h,getFromObjectByPath:d,filterObject:u,isInArray:p})}(app.modules.applicationUtils||{}),app.modules.applicationDataStore=function(e){function t(e){return $.when.apply(null,Array.isArray(e)?e.map(function(e){return n(e)}):[n(e)])}function i(e){return app.config.api[app.config.dataStoreURLMappings[e]]}function n(e){var t=l(e);return s(t,e)?r(i(e)).then(c.bind(null,e)):a(t,e)}function a(e,t){var i={};return i[t]=e.value,i}function s(e,t){return i(t)&&(!e||o(e,t))}function o(e){return+new Date>=e.expireTime}function r(e){return $.get(e)}function l(e){var t=localStorage[g];return t&&e?JSON.parse(t)[e]:t&&JSON.parse(t)}function c(e,t){return localStorage[g]=JSON.stringify($.extend(l(),u(e,t))),t}function u(e,t){var i={};return i[e]={value:t[e],expireTime:d()},i}function d(){var e=new Date;return e.setMinutes(e.getMinutes()+v)}function h(e){var t=Array.prototype.slice.call(e);return t.shift(),t}function p(e){var t=h(arguments);return e.reduce(function(e,i,n){return $.extend(e,t[n])},{})}function f(e,i,n){t(n).then(p.bind(null,n)).done(i.resolve).fail(i.reject)}function m(){$doc.on("get:applicationDataStore",f)}var g="dataStore",v=30;return e.load=function(){app.config.dataStoreURLMappings&&m()},e}(app.modules.applicationDataStore||{}),app.modules.applicationHandlebarsHelpers=function(e){function t(){Handlebars.registerHelper({ifCond:function(e,t,i,n){var a,s={"&amp;&amp;":"&&","&lt;":"<","&gt;":">","&lt;=":"<=","&gt;=":">="};switch(s[t]||t){case"!==":a=e!==i;break;case"===":a=e===i;break;case"<":a=e<i;break;case"<=":a=e<=i;break;case">":a=e>i;break;case">=":a=e>=i;break;case"&&":a=e&&i;break;case"||":a=e||i}return a?n.fn(this):n.inverse(this)},pluralize:function(e){var t=JSON.parse(e.hash.data),i=[];for(var n in t)i.push(t[n]);return app.modules.applicationUtils.pluralize(e.hash.count,i)},toJSON:function(e){return JSON.stringify(e)},slice:function(e,t){var i="",n=parseInt(t.hash.offset)||0,a=parseInt(t.hash.limit)||5,s=n<e.length?n:0,o=a+n<e.length?a+n:e.length;for(o;s<o;s++)e[s].last=s===o-1,i+=t.fn(e[s]);return i}})}return e.load=function(){t()},e}(app.modules.applicationHandlebarsHelpers||{}),app.modules.initPhoneMask=function(e){function t(e,t,i){var n,s,r=i.data("allow-national");~e.indexOf(a)?n="defaultPattern":(s=e.match(/\d/),n=r&&s&&"8"===s[0]?"nationalPattern":"simplePattern"),i.mask(o.onlyDefaultCode?o.defaultPattern.replace("+0",a):o[n],o.params)}function i(e){$(e||".js-phone-mask").each(function(){var e=$(this);$.extend(o,s,e.data("phoneMaskOptions")),t(e.val()||e.text(),null,e)})}function n(){$doc.on("init:phoneMask",function(e){i(e.target!==document&&e.target)})}var a="+7",s={defaultPattern:"+0 (000) 000-00-00",simplePattern:"+000000000000000",nationalPattern:"000000000000000",params:{placeholder:a+" (___) ___-__-__",onKeyPress:function(){o.onlyDefaultCode||t.apply(null,arguments)}}},o={};return e.load=function(){i(),n()},e}(app.modules.initPhoneMask||{}),function(e,t,i){!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):jQuery&&!jQuery.fn.qtip2&&e(jQuery)}(function(n){"use strict";function a(e,t,i,a){this.id=i,this.target=e,this.tooltip=j,this.elements={target:e},this._id=U+"-"+i,this.timers={img:{}},this.options=t,this.plugins={},this.cache={event:{},target:n(),disabled:A,attr:a,onTooltip:A,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=A}function s(e){return e===j||"object"!==n.type(e)}function o(e){return!(n.isFunction(e)||e&&e.attr||e.length||"object"===n.type(e)&&(e.jquery||e.then))}function r(e){var t,i,a,r;return s(e)?A:(s(e.metadata)&&(e.metadata={type:e.metadata}),"content"in e&&(t=e.content,s(t)||t.jquery||t.done?t=e.content={text:i=o(t)?A:t}:i=t.text,"ajax"in t&&(a=t.ajax,r=a&&a.once!==A,delete t.ajax,t.text=function(e,t){var s=i||n(this).attr(t.options.content.attr)||"Loading...",o=n.ajax(n.extend({},a,{context:t})).then(a.success,j,a.error).then(function(e){return e&&r&&t.set("content.text",e),e},function(e,i,n){t.destroyed||0===e.status||t.set("content.text",i+": "+n)});return r?s:(t.set("content.text",s),o)}),"title"in t&&(n.isPlainObject(t.title)&&(t.button=t.title.button,t.title=t.title.text),o(t.title||A)&&(t.title=A))),"position"in e&&s(e.position)&&(e.position={my:e.position,at:e.position}),"show"in e&&s(e.show)&&(e.show=e.show.jquery?{target:e.show}:e.show===S?{ready:S}:{event:e.show}),"hide"in e&&s(e.hide)&&(e.hide=e.hide.jquery?{target:e.hide}:{event:e.hide}),"style"in e&&s(e.style)&&(e.style={classes:e.style}),n.each(q,function(){this.sanitize&&this.sanitize(e)}),e)}function l(e,t){for(var i,n=0,a=e,s=t.split(".");a=a[s[n++]];)n<s.length&&(i=a);return[i||e,s.pop()]}function c(e,t){var i,n,a;for(i in this.checks)for(n in this.checks[i])(a=new RegExp(n,"i").exec(e))&&(t.push(a),("builtin"===i||this.plugins[i])&&this.checks[i][n].apply(this.plugins[i]||this,t))}function u(e){return V.concat("").join(e?"-"+e+" ":" ")}function d(e,t){if(t>0)return setTimeout(n.proxy(e,this),t);e.call(this)}function h(e){this.tooltip.hasClass(ee)||(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this.timers.show=d.call(this,function(){this.toggle(S,e)},this.options.show.delay))}function p(e){if(!this.tooltip.hasClass(ee)&&!this.destroyed){var t=n(e.relatedTarget),i=t.closest(K)[0]===this.tooltip[0],a=t[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==t[0]&&"mouse"===this.options.position.target&&i||this.options.hide.fixed&&/mouse(out|leave|move)/.test(e.type)&&(i||a))try{e.preventDefault(),e.stopImmediatePropagation()}catch(e){}else this.timers.hide=d.call(this,function(){this.toggle(A,e)},this.options.hide.delay,this)}}function f(e){!this.tooltip.hasClass(ee)&&this.options.hide.inactive&&(clearTimeout(this.timers.inactive),this.timers.inactive=d.call(this,function(){this.hide(e)},this.options.hide.inactive))}function m(e){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(e)}function g(e,i,a){n(t.body).delegate(e,(i.split?i:i.join("."+U+" "))+"."+U,function(){var e=k.api[n.attr(this,G)];e&&!e.disabled&&a.apply(e,arguments)})}function v(e,i,s){var o,l,c,u,d,h=n(t.body),p=e[0]===t?h:e,f=e.metadata?e.metadata(s.metadata):j,m="html5"===s.metadata.type&&f?f[s.metadata.name]:j,g=e.data(s.metadata.name||"qtipopts");try{g="string"==typeof g?n.parseJSON(g):g}catch(e){}if(u=n.extend(S,{},k.defaults,s,"object"==typeof g?r(g):j,r(m||f)),l=u.position,u.id=i,"boolean"==typeof u.content.text){if(c=e.attr(u.content.attr),u.content.attr===A||!c)return A;u.content.text=c}if(l.container.length||(l.container=h),l.target===A&&(l.target=p),u.show.target===A&&(u.show.target=p),u.show.solo===S&&(u.show.solo=l.container.closest("body")),u.hide.target===A&&(u.hide.target=p),u.position.viewport===S&&(u.position.viewport=l.container),l.container=l.container.eq(0),l.at=new P(l.at,S),l.my=new P(l.my),e.data(U))if(u.overwrite)e.qtip2("destroy",!0);else if(u.overwrite===A)return A;return e.attr(W,i),u.suppress&&(d=e.attr("title"))&&e.removeAttr("title").attr(ie,d).attr("title",""),o=new a(e,u,i,!!c),e.data(U,o),o}function b(e){return e.charAt(0).toUpperCase()+e.slice(1)}function y(e,t){var n,a,s=t.charAt(0).toUpperCase()+t.slice(1),o=(t+" "+ve.join(s+" ")+s).split(" "),r=0;if(ge[t])return e.css(ge[t]);for(;n=o[r++];)if((a=e.css(n))!==i)return ge[t]=n,a}function _(e,t){return Math.ceil(parseFloat(y(e,t)))}function w(e,t){this._ns="tip",this.options=t,this.offset=t.offset,this.size=[t.width,t.height],this.init(this.qtip=e)}function $(e,t){this.options=t,this._ns="-modal",this.init(this.qtip=e)}function x(e){this._ns="ie6",this.init(this.qtip=e)}var k,C,P,T,D,S=!0,A=!1,j=null,E="x",I="y",N="width",F="height",M="top",L="left",R="bottom",O="right",H="center",z="flipinvert",B="shift",q={},U="qtip",W="data-hasqtip",G="data-qtip-id",V=["ui-widget","ui-tooltip"],K="."+U,Y="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),X=U+"-fixed",Q=U+"-default",J=U+"-focus",Z=U+"-hover",ee=U+"-disabled",te="_replacedByqTip",ie="oldtitle",ne={ie:function(){for(var e=4,i=t.createElement("div");(i.innerHTML="<!--[if gt IE "+e+"]><i></i><![endif]-->")&&i.getElementsByTagName("i")[0];e+=1);return e>4?e:NaN}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||A};C=a.prototype,C._when=function(e){return n.when.apply(n,e)},C.render=function(e){if(this.rendered||this.destroyed)return this;var t=this,i=this.options,a=this.cache,s=this.elements,o=i.content.text,r=i.content.title,l=i.content.button,c=i.position,u=(this._id,[]);return n.attr(this.target[0],"aria-describedby",this._id),a.posClass=this._createPosClass((this.position={my:c.my,at:c.at}).my),this.tooltip=s.tooltip=n("<div/>",{id:this._id,"class":[U,Q,i.style.classes,a.posClass].join(" "),width:i.style.width||"",height:i.style.height||"",tracking:"mouse"===c.target&&c.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":A,"aria-describedby":this._id+"-content","aria-hidden":S}).toggleClass(ee,this.disabled).attr(G,this.id).data(U,this).appendTo(c.container).append(s.content=n("<div />",{"class":U+"-content",id:this._id+"-content","aria-atomic":S})),this.rendered=-1,this.positioning=S,r&&(this._createTitle(),n.isFunction(r)||u.push(this._updateTitle(r,A))),l&&this._createButton(),n.isFunction(o)||u.push(this._updateContent(o,A)),this.rendered=S,this._setWidget(),n.each(q,function(e){var i;"render"===this.initialize&&(i=this(t))&&(t.plugins[e]=i)}),this._unassignEvents(),this._assignEvents(),this._when(u).then(function(){t._trigger("render"),t.positioning=A,t.hiddenDuringWait||!i.show.ready&&!e||t.toggle(S,a.event,A),t.hiddenDuringWait=A}),k.api[this.id]=this,this},C.destroy=function(e){function t(){if(!this.destroyed){this.destroyed=S;var e,t=this.target,i=t.attr(ie);this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),n.each(this.plugins,function(){this.destroy&&this.destroy()});for(e in this.timers)clearTimeout(this.timers[e]);t.removeData(U).removeAttr(G).removeAttr(W).removeAttr("aria-describedby"),this.options.suppress&&i&&t.attr("title",i).removeAttr(ie),this._unassignEvents(),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=j,delete k.api[this.id]}}return this.destroyed?this.target:(e===S&&"hide"!==this.triggering||!this.rendered?t.call(this):(this.tooltip.one("tooltiphidden",n.proxy(t,this)),!this.triggering&&this.hide()),this.target)},T=C.checks={builtin:{"^id$":function(e,t,i,a){var s=i===S?k.nextid:i,o=U+"-"+s;s!==A&&s.length>0&&!n("#"+o).length?(this._id=o,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):e[t]=a},"^prerender":function(e,t,i){i&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(e,t,i){this._updateContent(i)},"^content.attr$":function(e,t,i,n){this.options.content.text===this.target.attr(n)&&this._updateContent(this.target.attr(i))},"^content.title$":function(e,t,i){if(!i)return this._removeTitle();i&&!this.elements.title&&this._createTitle(),this._updateTitle(i)},"^content.button$":function(e,t,i){this._updateButton(i)},"^content.title.(text|button)$":function(e,t,i){this.set("content."+t,i)},"^position.(my|at)$":function(e,t,i){"string"==typeof i&&(this.position[t]=e[t]=new P(i,"at"===t))},"^position.container$":function(e,t,i){this.rendered&&this.tooltip.appendTo(i)},"^show.ready$":function(e,t,i){i&&(!this.rendered&&this.render(S)||this.toggle(S))},"^style.classes$":function(e,t,i,n){this.rendered&&this.tooltip.removeClass(n).addClass(i)},"^style.(width|height)":function(e,t,i){this.rendered&&this.tooltip.css(t,i)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(e,t,i){this.rendered&&this.tooltip.toggleClass(Q,!!i)},"^events.(render|show|move|hide|focus|blur)$":function(e,t,i){this.rendered&&this.tooltip[(n.isFunction(i)?"":"un")+"bind"]("tooltip"+t,i)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var e=this.options.position;this.tooltip.attr("tracking","mouse"===e.target&&e.adjust.mouse),this._unassignEvents(),this._assignEvents()}}}},C.get=function(e){if(this.destroyed)return this;var t=l(this.options,e.toLowerCase()),i=t[0][t[1]];return i.precedance?i.string():i};var ae=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,se=/^prerender|show\.ready/i;C.set=function(e,t){if(this.destroyed)return this;var i,a=this.rendered,s=A,o=this.options;this.checks;return"string"==typeof e?(i=e,e={},e[i]=t):e=n.extend({},e),n.each(e,function(t,i){if(a&&se.test(t))return void delete e[t];var r,c=l(o,t.toLowerCase());r=c[0][c[1]],c[0][c[1]]=i&&i.nodeType?n(i):i,s=ae.test(t)||s,e[t]=[c[0],c[1],i,r]}),r(o),this.positioning=S,n.each(e,n.proxy(c,this)),this.positioning=A,this.rendered&&this.tooltip[0].offsetWidth>0&&s&&this.reposition("mouse"===o.position.target?j:this.cache.event),this},C._update=function(e,t){var i=this,a=this.cache;return this.rendered&&e?(n.isFunction(e)&&(e=e.call(this.elements.target,a.event,this)||""),n.isFunction(e.then)?(a.waiting=S,e.then(function(e){return a.waiting=A,i._update(e,t)},j,function(e){return i._update(e,t)})):e===A||!e&&""!==e?A:(e.jquery&&e.length>0?t.empty().append(e.css({display:"block",visibility:"visible"})):t.html(e),this._waitForContent(t).then(function(e){i.rendered&&i.tooltip[0].offsetWidth>0&&i.reposition(a.event,!e.length)}))):A},C._waitForContent=function(e){var t=this.cache;return t.waiting=S,(n.fn.imagesLoaded?e.imagesLoaded():n.Deferred().resolve([])).done(function(){t.waiting=A}).promise()},C._updateContent=function(e,t){this._update(e,this.elements.content,t)},C._updateTitle=function(e,t){this._update(e,this.elements.title,t)===A&&this._removeTitle(A)},C._createTitle=function(){var e=this.elements,t=this._id+"-title";e.titlebar&&this._removeTitle(),e.titlebar=n("<div />",{"class":U+"-titlebar "+(this.options.style.widget?u("header"):"")}).append(e.title=n("<div />",{id:t,"class":U+"-title","aria-atomic":S})).insertBefore(e.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(e){n(this).toggleClass("ui-state-active ui-state-focus","down"===e.type.substr(-4))}).delegate(".qtip-close","mouseover mouseout",function(e){n(this).toggleClass("ui-state-hover","mouseover"===e.type)}),this.options.content.button&&this._createButton()},C._removeTitle=function(e){var t=this.elements;t.title&&(t.titlebar.remove(),t.titlebar=t.title=t.button=j,e!==A&&this.reposition())},C._createPosClass=function(e){return U+"-pos-"+(e||this.options.position.my).abbrev()},C.reposition=function(i,a){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=S;var s,o,r,l,c=this.cache,u=this.tooltip,d=this.options.position,h=d.target,p=d.my,f=d.at,m=d.viewport,g=d.container,v=d.adjust,b=v.method.split(" "),y=u.outerWidth(A),_=u.outerHeight(A),w=0,$=0,x=u.css("position"),k={left:0,top:0},C=u[0].offsetWidth>0,P=i&&"scroll"===i.type,T=n(e),D=g[0].ownerDocument,j=this.mouse;if(n.isArray(h)&&2===h.length)f={x:L,y:M},k={left:h[0],top:h[1]};else if("mouse"===h)f={x:L,y:M},(!v.mouse||this.options.hide.distance)&&c.origin&&c.origin.pageX?i=c.origin:!i||i&&("resize"===i.type||"scroll"===i.type)?i=c.event:j&&j.pageX&&(i=j),"static"!==x&&(k=g.offset()),D.body.offsetWidth!==(e.innerWidth||D.documentElement.clientWidth)&&(o=n(t.body).offset()),k={left:i.pageX-k.left+(o&&o.left||0),top:i.pageY-k.top+(o&&o.top||0)},v.mouse&&P&&j&&(k.left-=(j.scrollX||0)-T.scrollLeft(),k.top-=(j.scrollY||0)-T.scrollTop());else{if("event"===h?i&&i.target&&"scroll"!==i.type&&"resize"!==i.type?c.target=n(i.target):i.target||(c.target=this.elements.target):"event"!==h&&(c.target=n(h.jquery?h:this.elements.target)),h=c.target,h=n(h).eq(0),0===h.length)return this;h[0]===t||h[0]===e?(w=ne.iOS?e.innerWidth:h.width(),$=ne.iOS?e.innerHeight:h.height(),h[0]===e&&(k={top:(m||h).scrollTop(),left:(m||h).scrollLeft()
})):q.imagemap&&h.is("area")?s=q.imagemap(this,h,f,q.viewport?b:A):q.svg&&h&&h[0].ownerSVGElement?s=q.svg(this,h,f,q.viewport?b:A):(w=h.outerWidth(A),$=h.outerHeight(A),k=h.offset()),s&&(w=s.width,$=s.height,o=s.offset,k=s.position),k=this.reposition.offset(h,k,g),(ne.iOS>3.1&&ne.iOS<4.1||ne.iOS>=4.3&&ne.iOS<4.33||!ne.iOS&&"fixed"===x)&&(k.left-=T.scrollLeft(),k.top-=T.scrollTop()),(!s||s&&s.adjustable!==A)&&(k.left+=f.x===O?w:f.x===H?w/2:0,k.top+=f.y===R?$:f.y===H?$/2:0)}return k.left+=v.x+(p.x===O?-y:p.x===H?-y/2:0),k.top+=v.y+(p.y===R?-_:p.y===H?-_/2:0),q.viewport?(r=k.adjusted=q.viewport(this,k,d,w,$,y,_),o&&r.left&&(k.left+=o.left),o&&r.top&&(k.top+=o.top),r.my&&(this.position.my=r.my)):k.adjusted={left:0,top:0},c.posClass!==(l=this._createPosClass(this.position.my))&&u.removeClass(c.posClass).addClass(c.posClass=l),this._trigger("move",[k,m.elem||m],i)?(delete k.adjusted,a===A||!C||isNaN(k.left)||isNaN(k.top)||"mouse"===h||!n.isFunction(d.effect)?u.css(k):n.isFunction(d.effect)&&(d.effect.call(u,this,n.extend({},k)),u.queue(function(e){n(this).css({opacity:"",height:""}),ne.ie&&this.style.removeAttribute("filter"),e()})),this.positioning=A,this):this},C.reposition.offset=function(e,i,a){function s(e,t){i.left+=t*e.scrollLeft(),i.top+=t*e.scrollTop()}if(!a[0])return i;var o,r,l,c,u=n(e[0].ownerDocument),d=!!ne.ie&&"CSS1Compat"!==t.compatMode,h=a[0];do{"static"!==(r=n.css(h,"position"))&&("fixed"===r?(l=h.getBoundingClientRect(),s(u,-1)):(l=n(h).position(),l.left+=parseFloat(n.css(h,"borderLeftWidth"))||0,l.top+=parseFloat(n.css(h,"borderTopWidth"))||0),i.left-=l.left+(parseFloat(n.css(h,"marginLeft"))||0),i.top-=l.top+(parseFloat(n.css(h,"marginTop"))||0),o||"hidden"===(c=n.css(h,"overflow"))||"visible"===c||(o=n(h)))}while(h=h.offsetParent);return o&&(o[0]!==u[0]||d)&&s(o,1),i};var oe=(P=C.reposition.Corner=function(e,t){e=(""+e).replace(/([A-Z])/," $1").replace(/middle/gi,H).toLowerCase(),this.x=(e.match(/left|right/i)||e.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(e.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!t;var i=e.charAt(0);this.precedance="t"===i||"b"===i?I:E}).prototype;oe.invert=function(e,t){this[e]=this[e]===L?O:this[e]===O?L:t||this[e]},oe.string=function(e){var t=this.x,i=this.y,n=t!==i?"center"===t||"center"!==i&&(this.precedance===I||this.forceY)?[i,t]:[t,i]:[t];return!1!==e?n.join(" "):n},oe.abbrev=function(){var e=this.string(!1);return e[0].charAt(0)+(e[1]&&e[1].charAt(0)||"")},oe.clone=function(){return new P(this.string(),this.forceY)},C.toggle=function(e,i){var a=this.cache,s=this.options,o=this.tooltip;if(i){if(/over|enter/.test(i.type)&&a.event&&/out|leave/.test(a.event.type)&&s.show.target.add(i.target).length===s.show.target.length&&o.has(i.relatedTarget).length)return this;a.event=n.event.fix(i)}if(this.waiting&&!e&&(this.hiddenDuringWait=S),!this.rendered)return e?this.render(1):this;if(this.destroyed||this.disabled)return this;var r,l,c,u=e?"show":"hide",d=this.options[u],h=(this.options[e?"hide":"show"],this.options.position),p=this.options.content,f=this.tooltip.css("width"),m=this.tooltip.is(":visible"),g=e||1===d.target.length,v=!i||d.target.length<2||a.target[0]===i.target;return(typeof e).search("boolean|number")&&(e=!m),r=!o.is(":animated")&&m===e&&v,l=r?j:!!this._trigger(u,[90]),this.destroyed?this:(l!==A&&e&&this.focus(i),!l||r?this:(n.attr(o[0],"aria-hidden",!e),e?(this.mouse&&(a.origin=n.event.fix(this.mouse)),n.isFunction(p.text)&&this._updateContent(p.text,A),n.isFunction(p.title)&&this._updateTitle(p.title,A),!D&&"mouse"===h.target&&h.adjust.mouse&&(n(t).bind("mousemove."+U,this._storeMouse),D=S),f||o.css("width",o.outerWidth(A)),this.reposition(i,arguments[2]),f||o.css("width",""),d.solo&&("string"==typeof d.solo?n(d.solo):n(K,d.solo)).not(o).not(d.target).qtip2("hide",n.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete a.origin,D&&!n(K+'[tracking="true"]:visible',d.solo).not(o).length&&(n(t).unbind("mousemove."+U),D=A),this.blur(i)),c=n.proxy(function(){e?(ne.ie&&o[0].style.removeAttribute("filter"),o.css("overflow",""),"string"==typeof d.autofocus&&n(this.options.show.autofocus,o).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):o.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(e?"visible":"hidden")},this),d.effect===A||g===A?(o[u](),c()):n.isFunction(d.effect)?(o.stop(1,1),d.effect.call(o,this),o.queue("fx",function(e){c(),e()})):o.fadeTo(90,e?1:0,c),e&&d.target.trigger("qtip-"+this.id+"-inactive"),this))},C.show=function(e){return this.toggle(S,e)},C.hide=function(e){return this.toggle(A,e)},C.focus=function(e){if(!this.rendered||this.destroyed)return this;var t=n(K),i=this.tooltip,a=parseInt(i[0].style.zIndex,10),s=k.zindex+t.length;return i.hasClass(J)||this._trigger("focus",[s],e)&&(a!==s&&(t.each(function(){this.style.zIndex>a&&(this.style.zIndex=this.style.zIndex-1)}),t.filter("."+J).qtip2("blur",e)),i.addClass(J)[0].style.zIndex=s),this},C.blur=function(e){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass(J),this._trigger("blur",[this.tooltip.css("zIndex")],e),this)},C.disable=function(e){return this.destroyed?this:("toggle"===e?e=!(this.rendered?this.tooltip.hasClass(ee):this.disabled):"boolean"!=typeof e&&(e=S),this.rendered&&this.tooltip.toggleClass(ee,e).attr("aria-disabled",e),this.disabled=!!e,this)},C.enable=function(){return this.disable(A)},C._createButton=function(){var e=this,t=this.elements,i=t.tooltip,a=this.options.content.button,s="string"==typeof a,o=s?a:"Close tooltip";t.button&&t.button.remove(),a.jquery?t.button=a:t.button=n("<a />",{"class":"qtip-close "+(this.options.style.widget?"":U+"-icon"),title:o,"aria-label":o}).prepend(n("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),t.button.appendTo(t.titlebar||i).attr("role","button").click(function(t){return i.hasClass(ee)||e.hide(t),A})},C._updateButton=function(e){if(!this.rendered)return A;var t=this.elements.button;e?this._createButton():t.remove()},C._setWidget=function(){var e=this.options.style.widget,t=this.elements,i=t.tooltip,n=i.hasClass(ee);i.removeClass(ee),ee=e?"ui-state-disabled":"qtip-disabled",i.toggleClass(ee,n),i.toggleClass("ui-helper-reset "+u(),e).toggleClass(Q,this.options.style.def&&!e),t.content&&t.content.toggleClass(u("content"),e),t.titlebar&&t.titlebar.toggleClass(u("header"),e),t.button&&t.button.toggleClass(U+"-icon",!e)},C._storeMouse=function(e){return(this.mouse=n.event.fix(e)).type="mousemove",this},C._bind=function(e,t,i,a,s){if(e&&i&&t.length){var o="."+this._id+(a?"-"+a:"");return n(e).bind((t.split?t:t.join(o+" "))+o,n.proxy(i,s||this)),this}},C._unbind=function(e,t){return e&&n(e).unbind("."+this._id+(t?"-"+t:"")),this},C._trigger=function(e,t,i){var a=n.Event("tooltip"+e);return a.originalEvent=i&&n.extend({},i)||this.cache.event||j,this.triggering=e,this.tooltip.trigger(a,[this].concat(t||[])),this.triggering=A,!a.isDefaultPrevented()},C._bindEvents=function(e,t,i,a,s,o){var r=i.filter(a).add(a.filter(i)),l=[];r.length&&(n.each(t,function(t,i){var a=n.inArray(i,e);a>-1&&l.push(e.splice(a,1)[0])}),l.length&&(this._bind(r,l,function(e){(!!this.rendered&&this.tooltip[0].offsetWidth>0?o:s).call(this,e)}),i=i.not(r),a=a.not(r))),this._bind(i,e,s),this._bind(a,t,o)},C._assignInitialEvents=function(e){function t(e){if(this.disabled||this.destroyed)return A;this.cache.event=e&&n.event.fix(e),this.cache.target=e&&n(e.target),clearTimeout(this.timers.show),this.timers.show=d.call(this,function(){this.render("object"==typeof e||i.show.ready)},i.prerender?0:i.show.delay)}var i=this.options,a=i.show.target,s=i.hide.target,o=i.show.event?n.trim(""+i.show.event).split(" "):[],r=i.hide.event?n.trim(""+i.hide.event).split(" "):[];this._bind(this.elements.target,["remove","removeqtip"],function(){this.destroy(!0)},"destroy"),/mouse(over|enter)/i.test(i.show.event)&&!/mouse(out|leave)/i.test(i.hide.event)&&r.push("mouseleave"),this._bind(a,"mousemove",function(e){this._storeMouse(e),this.cache.onTarget=S}),this._bindEvents(o,r,a,s,t,function(){if(!this.timers)return A;clearTimeout(this.timers.show)}),(i.show.ready||i.prerender)&&t.call(this,e)},C._assignEvents=function(){var i=this,a=this.options,s=a.position,o=this.tooltip,r=a.show.target,l=a.hide.target,c=s.container,u=s.viewport,d=n(t),g=(n(t.body),n(e)),v=a.show.event?n.trim(""+a.show.event).split(" "):[],b=a.hide.event?n.trim(""+a.hide.event).split(" "):[];n.each(a.events,function(e,t){i._bind(o,"toggle"===e?["tooltipshow","tooltiphide"]:["tooltip"+e],t,null,o)}),/mouse(out|leave)/i.test(a.hide.event)&&"window"===a.hide.leave&&this._bind(d,["mouseout","blur"],function(e){/select|option/.test(e.target.nodeName)||e.relatedTarget||this.hide(e)}),a.hide.fixed?l=l.add(o.addClass(X)):/mouse(over|enter)/i.test(a.show.event)&&this._bind(l,"mouseleave",function(){clearTimeout(this.timers.show)}),(""+a.hide.event).indexOf("unfocus")>-1&&this._bind(c.closest("html"),["mousedown","touchstart"],function(e){var t=n(e.target),i=this.rendered&&!this.tooltip.hasClass(ee)&&this.tooltip[0].offsetWidth>0,a=t.parents(K).filter(this.tooltip[0]).length>0;t[0]===this.target[0]||t[0]===this.tooltip[0]||a||this.target.has(t[0]).length||!i||this.hide(e)}),"number"==typeof a.hide.inactive&&(this._bind(r,"qtip-"+this.id+"-inactive",f,"inactive"),this._bind(l.add(o),k.inactiveEvents,f)),this._bindEvents(v,b,r,l,h,p),this._bind(r.add(o),"mousemove",function(e){if("number"==typeof a.hide.distance){var t=this.cache.origin||{},i=this.options.hide.distance,n=Math.abs;(n(e.pageX-t.pageX)>=i||n(e.pageY-t.pageY)>=i)&&this.hide(e)}this._storeMouse(e)}),"mouse"===s.target&&s.adjust.mouse&&(a.hide.event&&this._bind(r,["mouseenter","mouseleave"],function(e){if(!this.cache)return A;this.cache.onTarget="mouseenter"===e.type}),this._bind(d,"mousemove",function(e){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(ee)&&this.tooltip[0].offsetWidth>0&&this.reposition(e)})),(s.adjust.resize||u.length)&&this._bind(n.event.special.resize?u:g,"resize",m),s.adjust.scroll&&this._bind(g.add(s.container),"scroll",m)},C._unassignEvents=function(){var i=this.options,a=i.show.target,s=i.hide.target,o=n.grep([this.elements.target[0],this.rendered&&this.tooltip[0],i.position.container[0],i.position.viewport[0],i.position.container.closest("html")[0],e,t],function(e){return"object"==typeof e});a&&a.toArray&&(o=o.concat(a.toArray())),s&&s.toArray&&(o=o.concat(s.toArray())),this._unbind(o)._unbind(o,"destroy")._unbind(o,"inactive")},n(function(){g(K,["mouseenter","mouseleave"],function(e){var t="mouseenter"===e.type,i=n(e.currentTarget),a=n(e.relatedTarget||e.target),s=this.options;t?(this.focus(e),i.hasClass(X)&&!i.hasClass(ee)&&clearTimeout(this.timers.hide)):"mouse"===s.position.target&&s.position.adjust.mouse&&s.hide.event&&s.show.target&&!a.closest(s.show.target[0]).length&&this.hide(e),i.toggleClass(Z,t)}),g("["+G+"]",Y,f)}),k=n.fn.qtip2=function(e,t,a){var s=(""+e).toLowerCase(),o=j,l=n.makeArray(arguments).slice(1),c=l[l.length-1],u=this[0]?n.data(this[0],U):j;return!arguments.length&&u||"api"===s?u:"string"==typeof e?(this.each(function(){var e=n.data(this,U);if(!e)return S;if(c&&c.timeStamp&&(e.cache.event=c),!t||"option"!==s&&"options"!==s)e[s]&&e[s].apply(e,l);else{if(a===i&&!n.isPlainObject(t))return o=e.get(t),A;e.set(t,a)}}),o!==j?o:this):"object"!=typeof e&&arguments.length?void 0:(u=r(n.extend(S,{},e)),this.each(function(e){var t,i;if(i=n.isArray(u.id)?u.id[e]:u.id,i=!i||i===A||i.length<1||k.api[i]?k.nextid++:i,(t=v(n(this),i,u))===A)return S;k.api[i]=t,n.each(q,function(){"initialize"===this.initialize&&this(t)}),t._assignInitialEvents(c)}))},n.qtip2=a,k.api={},n.each({attr:function(e,t){if(this.length){var i=this[0],a="title",s=n.data(i,"qtip");if(e===a&&s&&"object"==typeof s&&s.options.suppress)return arguments.length<2?n.attr(i,ie):(s&&s.options.content.attr===a&&s.cache.attr&&s.set("content.text",t),this.attr(ie,t))}return n.fn["attr"+te].apply(this,arguments)},clone:function(e){var t=(n([]),n.fn["clone"+te].apply(this,arguments));return e||t.filter("["+ie+"]").attr("title",function(){return n.attr(this,ie)}).removeAttr(ie),t}},function(e,t){if(!t||n.fn[e+te])return S;var i=n.fn[e+te]=n.fn[e];n.fn[e]=function(){return t.apply(this,arguments)||i.apply(this,arguments)}}),n.ui||(n["cleanData"+te]=n.cleanData,n.cleanData=function(e){for(var t,i=0;(t=n(e[i])).length;i++)if(t.attr(W))try{t.triggerHandler("removeqtip")}catch(e){}n["cleanData"+te].apply(this,arguments)}),k.version="2.2.1",k.nextid=0,k.inactiveEvents=Y,k.zindex=15e3,k.defaults={prerender:A,id:A,overwrite:S,suppress:S,content:{text:S,attr:"title",title:A,button:A},position:{my:"top left",at:"bottom right",target:A,container:A,viewport:A,adjust:{x:0,y:0,mouse:S,scroll:S,resize:S,method:"flipinvert flipinvert"},effect:function(e,t){n(this).animate(t,{duration:200,queue:A})}},show:{target:A,event:"mouseenter",effect:S,delay:90,solo:A,ready:A,autofocus:A},hide:{target:A,event:"mouseleave",effect:S,delay:0,fixed:A,inactive:A,leave:"window",distance:A},style:{classes:"",widget:A,width:A,height:A,def:S},events:{render:j,move:j,show:j,hide:j,toggle:j,visible:j,hidden:j,focus:j,blur:j}};var re,le="margin",ce="border",ue="color",de="background-color",he="transparent",pe=" !important",fe=!!t.createElement("canvas").getContext,me=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,ge={},ve=["Webkit","O","Moz","ms"];if(fe)var be=e.devicePixelRatio||1,ye=function(){var e=t.createElement("canvas").getContext("2d");return e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||1}(),_e=be/ye;else var we=function(e,t,i){return"<qtipvml:"+e+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(t||"")+' style="behavior: url(#default#VML); '+(i||"")+'" />'};n.extend(w.prototype,{init:function(e){var t,i;i=this.element=e.elements.tip=n("<div />",{"class":U+"-tip"}).prependTo(e.tooltip),fe?(t=n("<canvas />").appendTo(this.element)[0].getContext("2d"),t.lineJoin="miter",t.miterLimit=1e5,t.save()):(t=we("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(t+t),e._bind(n("*",i).add(i),["click","mousedown"],function(e){e.stopPropagation()},this._ns)),e._bind(e.tooltip,"tooltipmove",this.reposition,this._ns,this),this.create()},_swapDimensions:function(){this.size[0]=this.options.height,this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width,this.size[1]=this.options.height},_useTitle:function(e){var t=this.qtip.elements.titlebar;return t&&(e.y===M||e.y===H&&this.element.position().top+this.size[1]/2+this.options.offset<t.outerHeight(S))},_parseCorner:function(e){var t=this.qtip.options.position.my;return e===A||t===A?e=A:e===S?e=new P(t.string()):e.string||(e=new P(e),e.fixed=S),e},_parseWidth:function(e,t,i){var n=this.qtip.elements,a=ce+b(t)+"Width";return(i?_(i,a):_(n.content,a)||_(this._useTitle(e)&&n.titlebar||n.content,a)||_(n.tooltip,a))||0},_parseRadius:function(e){var t=this.qtip.elements,i=ce+b(e.y)+b(e.x)+"Radius";return ne.ie<9?0:_(this._useTitle(e)&&t.titlebar||t.content,i)||_(t.tooltip,i)||0},_invalidColour:function(e,t,i){var n=e.css(t);return!n||i&&n===e.css(i)||me.test(n)?A:n},_parseColours:function(e){var t=this.qtip.elements,i=this.element.css("cssText",""),a=ce+b(e[e.precedance])+b(ue),s=this._useTitle(e)&&t.titlebar||t.content,o=this._invalidColour,r=[];return r[0]=o(i,de)||o(s,de)||o(t.content,de)||o(t.tooltip,de)||i.css(de),r[1]=o(i,a,ue)||o(s,a,ue)||o(t.content,a,ue)||o(t.tooltip,a,ue)||t.tooltip.css(a),n("*",i).add(i).css("cssText",de+":"+he+pe+";"+ce+":0"+pe+";"),r},_calculateSize:function(e){var t,i,n,a=e.precedance===I,s=this.options.width,o=this.options.height,r="c"===e.abbrev(),l=(a?s:o)*(r?.5:1),c=Math.pow,u=Math.round,d=Math.sqrt(c(l,2)+c(o,2)),h=[this.border/l*d,this.border/o*d];return h[2]=Math.sqrt(c(h[0],2)-c(this.border,2)),h[3]=Math.sqrt(c(h[1],2)-c(this.border,2)),t=d+h[2]+h[3]+(r?0:h[0]),i=t/d,n=[u(i*s),u(i*o)],a?n:n.reverse()},_calculateTip:function(e,t,i){i=i||1,t=t||this.size;var n=t[0]*i,a=t[1]*i,s=Math.ceil(n/2),o=Math.ceil(a/2),r={br:[0,0,n,a,n,0],bl:[0,0,n,0,0,a],tr:[0,a,n,0,n,a],tl:[0,0,0,a,n,a],tc:[0,a,s,0,n,a],bc:[0,0,n,0,s,a],rc:[0,0,n,o,0,a],lc:[n,0,n,a,0,o]};return r.lt=r.br,r.rt=r.bl,r.lb=r.tr,r.rb=r.tl,r[e.abbrev()]},_drawCoords:function(e,t){e.beginPath(),e.moveTo(t[0],t[1]),e.lineTo(t[2],t[3]),e.lineTo(t[4],t[5]),e.closePath()},create:function(){var e=this.corner=(fe||ne.ie)&&this._parseCorner(this.options.corner);return(this.enabled=!!this.corner&&"c"!==this.corner.abbrev())&&(this.qtip.cache.corner=e.clone(),this.update()),this.element.toggle(this.enabled),this.corner},update:function(t,i){if(!this.enabled)return this;var a,s,o,r,l,c,u,d,h=this.qtip.elements,p=this.element,f=p.children(),m=this.options,g=this.size,v=m.mimic,b=Math.round;t||(t=this.qtip.cache.corner||this.corner),v===A?v=t:(v=new P(v),v.precedance=t.precedance,"inherit"===v.x?v.x=t.x:"inherit"===v.y?v.y=t.y:v.x===v.y&&(v[t.precedance]=t[t.precedance])),s=v.precedance,t.precedance===E?this._swapDimensions():this._resetDimensions(),a=this.color=this._parseColours(t),a[1]!==he?(d=this.border=this._parseWidth(t,t[t.precedance]),m.border&&d<1&&!me.test(a[1])&&(a[0]=a[1]),this.border=d=m.border!==S?m.border:d):this.border=d=0,u=this.size=this._calculateSize(t),p.css({width:u[0],height:u[1],lineHeight:u[1]+"px"}),c=t.precedance===I?[b(v.x===L?d:v.x===O?u[0]-g[0]-d:(u[0]-g[0])/2),b(v.y===M?u[1]-g[1]:0)]:[b(v.x===L?u[0]-g[0]:0),b(v.y===M?d:v.y===R?u[1]-g[1]-d:(u[1]-g[1])/2)],fe?(o=f[0].getContext("2d"),o.restore(),o.save(),o.clearRect(0,0,6e3,6e3),r=this._calculateTip(v,g,_e),l=this._calculateTip(v,this.size,_e),f.attr(N,u[0]*_e).attr(F,u[1]*_e),f.css(N,u[0]).css(F,u[1]),this._drawCoords(o,l),o.fillStyle=a[1],o.fill(),o.translate(c[0]*_e,c[1]*_e),this._drawCoords(o,r),o.fillStyle=a[0],o.fill()):(r=this._calculateTip(v),r="m"+r[0]+","+r[1]+" l"+r[2]+","+r[3]+" "+r[4]+","+r[5]+" xe",c[2]=d&&/^(r|b)/i.test(t.string())?8===ne.ie?2:1:0,f.css({coordsize:u[0]+d+" "+(u[1]+d),antialias:""+(v.string().indexOf(H)>-1),left:c[0]-c[2]*Number(s===E),top:c[1]-c[2]*Number(s===I),width:u[0]+d,height:u[1]+d}).each(function(e){var t=n(this);t[t.prop?"prop":"attr"]({coordsize:u[0]+d+" "+(u[1]+d),path:r,fillcolor:a[0],filled:!!e,stroked:!e}).toggle(!(!d&&!e)),!e&&t.html(we("stroke",'weight="'+2*d+'px" color="'+a[1]+'" miterlimit="1000" joinstyle="miter"'))})),e.opera&&setTimeout(function(){h.tip.css({display:"inline-block",visibility:"visible"})},1),i!==A&&this.calculate(t,u)},calculate:function(e,t){if(!this.enabled)return A;var i,a,s=this,o=this.qtip.elements,r=this.element,l=this.options.offset,c=(o.tooltip.hasClass("ui-widget"),{});return e=e||this.corner,i=e.precedance,t=t||this._calculateSize(e),a=[e.x,e.y],i===E&&a.reverse(),n.each(a,function(n,a){var r,u,d;a===H?(r=i===I?L:M,c[r]="50%",c[le+"-"+r]=-Math.round(t[i===I?0:1]/2)+l):(r=s._parseWidth(e,a,o.tooltip),u=s._parseWidth(e,a,o.content),d=s._parseRadius(e),c[a]=Math.max(-s.border,n?u:l+(d>r?d:-r)))}),c[e[i]]-=t[i===E?0:1],r.css({margin:"",top:"",bottom:"",left:"",right:""}).css(c),c},reposition:function(e,t,n){function a(e,t,i,n,a){e===B&&c.precedance===t&&u[n]&&c[i]!==H?c.precedance=c.precedance===E?I:E:e!==B&&u[n]&&(c[t]=c[t]===H?u[n]>0?n:a:c[t]===n?a:n)}function s(e,t,a){c[e]===H?m[le+"-"+t]=f[e]=o[le+"-"+t]-u[t]:(r=o[a]!==i?[u[t],-o[t]]:[-u[t],o[t]],(f[e]=Math.max(r[0],r[1]))>r[0]&&(n[t]-=u[t],f[t]=A),m[o[a]!==i?a:t]=f[e])}if(this.enabled){var o,r,l=t.cache,c=this.corner.clone(),u=n.adjusted,d=t.options.position.adjust.method.split(" "),h=d[0],p=d[1]||d[0],f={left:A,top:A,x:0,y:0},m={};this.corner.fixed!==S&&(a(h,E,I,L,O),a(p,I,E,M,R),c.string()===l.corner.string()&&l.cornerTop===u.top&&l.cornerLeft===u.left||this.update(c,A)),o=this.calculate(c),o.right!==i&&(o.left=-o.right),o.bottom!==i&&(o.top=-o.bottom),o.user=this.offset,(f.left=h===B&&!!u.left)&&s(E,L,O),(f.top=p===B&&!!u.top)&&s(I,M,R),this.element.css(m).toggle(!(f.x&&f.y||c.x===H&&f.y||c.y===H&&f.x)),n.left-=o.left.charAt?o.user:h!==B||f.top||!f.left&&!f.top?o.left+this.border:0,n.top-=o.top.charAt?o.user:p!==B||f.left||!f.left&&!f.top?o.top+this.border:0,l.cornerLeft=u.left,l.cornerTop=u.top,l.corner=c.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns),this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}}),re=q.tip=function(e){return new w(e,e.options.style.tip)},re.initialize="render",re.sanitize=function(e){if(e.style&&"tip"in e.style){var t=e.style.tip;"object"!=typeof t&&(t=e.style.tip={corner:t}),/string|boolean/i.test(typeof t.corner)||(t.corner=S)}},T.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create(),this.qtip.reposition()},"^style.tip.(height|width)$":function(e){this.size=[e.width,e.height],this.update(),this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}},n.extend(S,k.defaults,{style:{tip:{corner:S,mimic:A,width:6,height:6,border:S,offset:0}}}),q.viewport=function(i,n,a,s,o,r,l){function c(e,t,i,a,s,o,r,l,c){var u=n[s],b=_[e],y=w[e],$=i===B,x=b===s?c:b===o?-c:-c/2,k=y===s?l:y===o?-l:-l/2,C=g[s]+v[s]-(p?0:h[s]),P=C-u,T=u+c-(r===N?f:m)-C,D=x-(_.precedance===e||b===_[t]?k:0)-(y===H?l/2:0);return $?(D=(b===s?1:-1)*x,n[s]+=P>0?P:T>0?-T:0,n[s]=Math.max(-h[s]+v[s],u-D,Math.min(Math.max(-h[s]+v[s]+(r===N?f:m),u+D),n[s],"center"===b?u-x:1e9))):(a*=i===z?2:0,P>0&&(b!==s||T>0)?(n[s]-=D+a,d.invert(e,s)):T>0&&(b!==o||P>0)&&(n[s]-=(b===H?-D:D)+a,d.invert(e,o)),n[s]<g&&-n[s]>T&&(n[s]=u,d=_.clone())),n[s]-u}var u,d,h,p,f,m,g,v,b=a.target,y=i.elements.tooltip,_=a.my,w=a.at,$=a.adjust,x=$.method.split(" "),k=x[0],C=x[1]||x[0],P=a.viewport,T=a.container,D=(i.cache,{left:0,top:0});return P.jquery&&b[0]!==e&&b[0]!==t.body&&"none"!==$.method?(h=T.offset()||D,p="static"===T.css("position"),u="fixed"===y.css("position"),f=P[0]===e?P.width():P.outerWidth(A),m=P[0]===e?P.height():P.outerHeight(A),g={left:u?0:P.scrollLeft(),top:u?0:P.scrollTop()},v=P.offset()||D,"shift"===k&&"shift"===C||(d=_.clone()),D={left:"none"!==k?c(E,I,k,$.x,L,O,N,s,r):0,top:"none"!==C?c(I,E,C,$.y,M,R,F,o,l):0,my:d}):D},q.polys={polygon:function(e,t){var i,n,a,s={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:A},o=0,r=[],l=1,c=1,u=0,d=0;for(o=e.length;o--;)i=[parseInt(e[--o],10),parseInt(e[o+1],10)],i[0]>s.position.right&&(s.position.right=i[0]),i[0]<s.position.left&&(s.position.left=i[0]),i[1]>s.position.bottom&&(s.position.bottom=i[1]),i[1]<s.position.top&&(s.position.top=i[1]),r.push(i);if(n=s.width=Math.abs(s.position.right-s.position.left),a=s.height=Math.abs(s.position.bottom-s.position.top),"c"===t.abbrev())s.position={left:s.position.left+s.width/2,top:s.position.top+s.height/2};else{for(;n>0&&a>0&&l>0&&c>0;)for(n=Math.floor(n/2),a=Math.floor(a/2),t.x===L?l=n:t.x===O?l=s.width-n:l+=Math.floor(n/2),t.y===M?c=a:t.y===R?c=s.height-a:c+=Math.floor(a/2),o=r.length;o--&&!(r.length<2);)u=r[o][0]-s.position.left,d=r[o][1]-s.position.top,(t.x===L&&u>=l||t.x===O&&u<=l||t.x===H&&(u<l||u>s.width-l)||t.y===M&&d>=c||t.y===R&&d<=c||t.y===H&&(d<c||d>s.height-c))&&r.splice(o,1);s.position={left:r[0][0],top:r[0][1]}}return s},rect:function(e,t,i,n){return{width:Math.abs(i-e),height:Math.abs(n-t),position:{left:Math.min(e,i),top:Math.min(t,n)}}},_angles:{tc:1.5,tr:7/4,tl:5/4,bc:.5,br:.25,bl:.75,rc:2,lc:1,c:0},ellipse:function(e,t,i,n,a){var s=q.polys._angles[a.abbrev()],o=0===s?0:i*Math.cos(s*Math.PI),r=n*Math.sin(s*Math.PI);return{width:2*i-Math.abs(o),height:2*n-Math.abs(r),position:{left:e+o,top:t+r},adjustable:A}},circle:function(e,t,i,n){return q.polys.ellipse(e,t,i,i,n)}},q.imagemap=function(e,t,i){t.jquery||(t=n(t));var a,s,o,r,l,c=(t.attr("shape")||"rect").toLowerCase().replace("poly","polygon"),u=n('img[usemap="#'+t.parent("map").attr("name")+'"]'),d=n.trim(t.attr("coords")),h=d.replace(/,$/,"").split(",");if(!u.length)return A;if("polygon"===c)r=q.polys.polygon(h,i);else{if(!q.polys[c])return A;for(o=-1,l=h.length,s=[];++o<l;)s.push(parseInt(h[o],10));r=q.polys[c].apply(this,s.concat(i))}return a=u.offset(),a.left+=Math.ceil((u.outerWidth(A)-u.width())/2),a.top+=Math.ceil((u.outerHeight(A)-u.height())/2),r.position.left+=a.left,r.position.top+=a.top,r},q.svg=function(e,i,a){for(var s,o,r,l,c,u,d,h,p,f=(n(t),i[0]),m=n(f.ownerSVGElement),g=f.ownerDocument,v=(parseInt(i.css("stroke-width"),10)||0)/2;!f.getBBox;)f=f.parentNode;if(!f.getBBox||!f.parentNode)return A;switch(f.nodeName){case"ellipse":case"circle":h=q.polys.ellipse(f.cx.baseVal.value,f.cy.baseVal.value,(f.rx||f.r).baseVal.value+v,(f.ry||f.r).baseVal.value+v,a);break;case"line":case"polygon":case"polyline":for(d=f.points||[{x:f.x1.baseVal.value,y:f.y1.baseVal.value},{x:f.x2.baseVal.value,y:f.y2.baseVal.value}],h=[],u=-1,l=d.numberOfItems||d.length;++u<l;)c=d.getItem?d.getItem(u):d[u],h.push.apply(h,[c.x,c.y]);h=q.polys.polygon(h,a);break;default:h=f.getBBox(),h={width:h.width,height:h.height,position:{left:h.x,top:h.y}}}return p=h.position,m=m[0],m.createSVGPoint&&(o=f.getScreenCTM(),d=m.createSVGPoint(),d.x=p.left,d.y=p.top,r=d.matrixTransform(o),p.left=r.x,p.top=r.y),g!==t&&"mouse"!==e.position.target&&(s=n((g.defaultView||g.parentWindow).frameElement).offset())&&(p.left+=s.left,p.top+=s.top),g=n(g),p.left+=g.scrollLeft(),p.top+=g.scrollTop(),h};var $e,xe,ke="qtip-modal",Ce="."+ke;xe=function(){function e(e){if(n.expr[":"].focusable)return n.expr[":"].focusable;var t,i,a,s=!isNaN(n.attr(e,"tabindex")),o=e.nodeName&&e.nodeName.toLowerCase();return"area"===o?(t=e.parentNode,i=t.name,!(!e.href||!i||"map"!==t.nodeName.toLowerCase())&&(!!(a=n("img[usemap=#"+i+"]")[0])&&a.is(":visible"))):/input|select|textarea|button|object/.test(o)?!e.disabled:"a"===o?e.href||s:s}function i(e){u.length<1&&e.length?e.not("body").blur():u.first().focus()}function a(e){if(l.is(":visible")){var t,a=n(e.target),r=s.tooltip,c=a.closest(K);t=c.length<1?A:parseInt(c[0].style.zIndex,10)>parseInt(r[0].style.zIndex,10),t||a.closest(K)[0]===r[0]||i(a),o=e.target===u[u.length-1]}}var s,o,r,l,c=this,u={};n.extend(c,{init:function(){return l=c.elem=n("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return A}}).hide(),n(t.body).bind("focusin"+Ce,a),n(t).bind("keydown"+Ce,function(e){s&&s.options.show.modal.escape&&27===e.keyCode&&s.hide(e)}),l.bind("click"+Ce,function(e){s&&s.options.show.modal.blur&&s.hide(e)}),c},update:function(t){s=t,u=t.options.show.modal.stealfocus!==A?t.tooltip.find("*").filter(function(){return e(this)}):[]},toggle:function(e,a,o){var u=(n(t.body),e.tooltip),d=e.options.show.modal,h=d.effect,p=a?"show":"hide",f=l.is(":visible"),m=n(Ce).filter(":visible:not(:animated)").not(u);return c.update(e),a&&d.stealfocus!==A&&i(n(":focus")),l.toggleClass("blurs",d.blur),a&&l.appendTo(t.body),l.is(":animated")&&f===a&&r!==A||!a&&m.length?c:(l.stop(S,A),n.isFunction(h)?h.call(l,a):h===A?l[p]():l.fadeTo(parseInt(o,10)||90,a?1:0,function(){a||l.hide()}),a||l.queue(function(e){l.css({left:"",top:""}),n(Ce).length||l.detach(),e()}),r=a,s.destroyed&&(s=j),c)}}),c.init()},xe=new xe,n.extend($.prototype,{init:function(e){var t=e.tooltip;if(!this.options.on)return this;e.elements.overlay=xe.elem,t.addClass(ke).css("z-index",k.modal_zindex+n(Ce).length),e._bind(t,["tooltipshow","tooltiphide"],function(e,i,a){var s=e.originalEvent;if(e.target===t[0])if(s&&"tooltiphide"===e.type&&/mouse(leave|enter)/.test(s.type)&&n(s.relatedTarget).closest(xe.elem[0]).length)try{e.preventDefault()}catch(e){}else(!s||s&&"tooltipsolo"!==s.type)&&this.toggle(e,"tooltipshow"===e.type,a)},this._ns,this),e._bind(t,"tooltipfocus",function(e,i){if(!e.isDefaultPrevented()&&e.target===t[0]){var a=n(Ce),s=k.modal_zindex+a.length,o=parseInt(t[0].style.zIndex,10);xe.elem[0].style.zIndex=s-1,a.each(function(){this.style.zIndex>o&&(this.style.zIndex-=1)}),a.filter("."+J).qtip2("blur",e.originalEvent),t.addClass(J)[0].style.zIndex=s,xe.update(i);try{e.preventDefault()}catch(e){}}},this._ns,this),e._bind(t,"tooltiphide",function(e){e.target===t[0]&&n(Ce).filter(":visible").not(t).last().qtip2("focus",e)},this._ns,this)},toggle:function(e,t,i){if(e&&e.isDefaultPrevented())return this;xe.toggle(this.qtip,!!t,i)},destroy:function(){this.qtip.tooltip.removeClass(ke),this.qtip._unbind(this.qtip.tooltip,this._ns),xe.toggle(this.qtip,A),delete this.qtip.elements.overlay}}),$e=q.modal=function(e){return new $(e,e.options.show.modal)},$e.sanitize=function(e){e.show&&("object"!=typeof e.show.modal?e.show.modal={on:!!e.show.modal}:"undefined"==typeof e.show.modal.on&&(e.show.modal.on=S))},k.modal_zindex=k.zindex-200,$e.initialize="render",T.modal={"^show.modal.(on|blur)$":function(){this.destroy(),this.init(),this.qtip.elems.overlay.toggle(this.qtip.tooltip[0].offsetWidth>0)}},n.extend(S,k.defaults,{show:{modal:{on:A,effect:S,blur:S,stealfocus:S,escape:S}}});var Pe;n.extend(x.prototype,{_scroll:function(){var t=this.qtip.elements.overlay;t&&(t[0].style.top=n(e).scrollTop()+"px")},init:function(i){var a=i.tooltip;n("select, object").length<1&&(this.bgiframe=i.elements.bgiframe=n('<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>').appendTo(a),i._bind(a,"tooltipmove",this.adjustBGIFrame,this._ns,this)),this.redrawContainer=n("<div/>",{id:U+"-rcontainer"}).appendTo(t.body),i.elements.overlay&&i.elements.overlay.addClass("qtipmodal-ie6fix")&&(i._bind(e,["scroll","resize"],this._scroll,this._ns,this),i._bind(a,["tooltipshow"],this._scroll,this._ns,this)),this.redraw()},adjustBGIFrame:function(){var e,t,i=this.qtip.tooltip,n={height:i.outerHeight(A),width:i.outerWidth(A)},a=this.qtip.plugins.tip,s=this.qtip.elements.tip;t=parseInt(i.css("borderLeftWidth"),10)||0,t={left:-t,top:-t},a&&s&&(e="x"===a.corner.precedance?[N,L]:[F,M],t[e[1]]-=s[e[0]]()),this.bgiframe.css(t).css(n)},redraw:function(){if(this.qtip.rendered<1||this.drawing)return this;var e,t,i,n,a=this.qtip.tooltip,s=this.qtip.options.style,o=this.qtip.options.position.container;return this.qtip.drawing=1,s.height&&a.css(F,s.height),s.width?a.css(N,s.width):(a.css(N,"").appendTo(this.redrawContainer),t=a.width(),t%2<1&&(t+=1),i=a.css("maxWidth")||"",n=a.css("minWidth")||"",e=(i+n).indexOf("%")>-1?o.width()/100:0,i=(i.indexOf("%")>-1?e:1)*parseInt(i,10)||t,n=(n.indexOf("%")>-1?e:1)*parseInt(n,10)||0,t=i+n?Math.min(Math.max(t,n),i):t,a.css(N,Math.round(t)).appendTo(o)),this.drawing=0,this},destroy:function(){this.bgiframe&&this.bgiframe.remove(),this.qtip._unbind([e,this.qtip.tooltip],this._ns)}}),Pe=q.ie6=function(e){return 6===ne.ie?new x(e):A},Pe.initialize="render",T.ie6={"^content|style$":function(){this.redraw()}}})}(window,document),app.modules.initQtip=function(e){function t(e){$(e||".js-qtip-icon").each(function(){var e=$(this);e.qtip2(e.data("qtipOptions")||e.data())})}function i(){$doc.on("init:initQtip",function(e){t(e.target!==document&&$(e.target).filter(".js-qtip-icon")[0])})}return e.load=function(){t(),i()},e}(app.modules.initQtip||{});var IStorage=function(){function e(e){s()?n(e):t(function(){n(e)})}function t(e){k||(k=r(o())),k.on("load",function(){$(this).data({isLoaded:!0}),e()})}function i(e,t){e.postMessage(JSON.stringify(t),"*")}function n(e){i(a(),e)}function a(){return k[0].contentWindow}function s(){return k&&k.data("isLoaded")}function o(){return $("<iframe>").attr({src:app.config.istorageIframeURL}).addClass(C.iframe)}function r(e){return e.appendTo("body")}function l(e,t){S[e]&&S[e].forEach(function(e){e(t)})}function c(e,t){var n=t.payload;switch(t.type){case P.getRequest:i(e,{type:P.getResponse,payload:{value:localStorage.getItem(n.key),requestID:n.requestID}});break;case P.setRequest:localStorage.setItem(n.key,n.value),i(e,{type:P.setResponse,payload:{key:n.key,value:n.value,requestID:n.requestID}});break;case P.setResponse:v(n.requestID,{key:n.key,value:n.value,source:e});break;case P.getResponse:v(n.requestID,n.value,e);break;case P.triggerRequest:localStorage.setItem(n.eventName,JSON.stringify({data:n.data,requestID:n.requestID})),localStorage.removeItem(n.eventName);break;case P.triggerResponse:l(n.eventName,n.data),v(n.requestID)}}function u(e){var t;try{t=JSON.parse(e)}catch(e){return}return t}function d(e){var t=u(e.data);t&&c(e.source,t)}function h(e){if(e.newValue){var t=u(e.newValue);i(window.parent,{type:P.triggerResponse,payload:{eventName:e.key,data:t&&t.data,requestID:t&&t.requestID}})}}function p(e){D[++T]=e}function f(t){p(t.callback),e({type:t.type,payload:$.extend({},t.payload,{requestID:T})})}function m(e,t){f({type:P.getRequest,callback:t,payload:{key:e}})}
function g(e,t,i){f({type:P.setRequest,callback:i,payload:{key:e,value:t}})}function v(e,t,i){D[e]&&D[e](t,i),delete D[e]}function b(e,t,i){f({type:P.triggerRequest,callback:i,payload:{eventName:e,data:t}})}function y(e,t){S[e]?S[e].push(t):S[e]=[t]}function _(e){delete S[e]}function w(){window.addEventListener("storage",h)}function x(){window.addEventListener("message",d)}var k,C={iframe:"istorage js-istorage"},P={getRequest:"getRequest",getResponse:"getResponse",setRequest:"setRequest",setResponse:"setResponse",triggerRequest:"triggerRequest",triggerResponse:"triggerResponse"},T=0,D={},S={};return x(),{get:m,set:g,trigger:b,on:y,removeEventListeners:_,listenIframeWindow:w}}();app.modules.userUtils=function(e){function t(e){app.modules.applicationUtils.invariant("string"==typeof e,"providerName should be a string, instead %s was passed.",e),app.modules.applicationUtils.invariant(~app.config.socialNetworkProviders.indexOf(e),"providerName should be in this range: "+app.config.socialNetworkProviders.join(", ")+" instead %s was given",e)}function i(t){return e.validateProviderName(t),app.config.currentUser[t+"UID"]}function n(){return"sid"===app.config.currentUser.primaryProvider}function a(e,t){return t=t||app.config.currentUser,Array.isArray(e)?e.reduce(function(t,i,n){return"string"==typeof t?t:n===e.length-1?t[i]||null:t[i]||t},t):t[e]||null}function s(e){return a(["primaryProvider","primary_provider"],e)}function o(e){appEL.set("app.config.currentUser.id",e.id).set("app.config.currentUser.sid",a("sid",e)).set("app.config.currentUser.email",a("email",e)).set("app.config.currentUser.phone",a("phone",e)).set("app.config.currentUser.primaryProvider",s(e))}function r(e){$.extend(!0,app.config,{currentUser:{id:e.id,sid:a("sid",e),email:a("email",e),phone:a("phone",e),primaryProvider:s(e)}})}function l(e,t){app.config.isUserSigned=!!e.id,appEL&&"simple"!==t?o(e):r(e)}function c(e,t){return app.modules.userAPI["sign"+e](t).then(function(e){return l(e.user),e})}return $.extend(e,{getCurrentUserSocialNetworkUID:i,validateProviderName:t,isSignedBySID:n,setConfigData:l,getUserAttribute:a,signUp:c.bind(null,"Up"),signIn:c.bind(null,"In")})}(app.modules.userUtils||{}),app.modules.userAPI=function(e){function t(e,t){var i=new FormData,n="in"===e?"session":"user";return t.withSID&&$.extend(t,{sid:d.generateUUID()}),t.type&&i.append("type",t.type),function e(t,n){Object.keys(t).forEach(function(a){if("type"!==a){var s=n+"["+a+"]";"object"==typeof t[a]?e(t[a],s):i.append(s,t[a])}})}(t,n),i.__test__=t,i}function i(e,t){var i=Object.keys(t)[0];return e.replace("_"+i+"_",t[i])}function n(e){return"in"===e?app.config.usersSessionURL:app.config.usersRegistrationURL}function a(e,i){return $.ajax({url:n(e),method:"POST",data:t(e,i),processData:!1,contentType:!1})}function s(e){return $.ajax({url:app.config.api.mergesURL,method:"POST",data:e})}function o(e,t){return $.ajax({url:app.config.api.updateUserURL.replace("_id_",e),method:"PUT",data:t})}function r(e){return app.modules.userUtils.validateProviderName(e),$.ajax({url:i(app.config.api.userSocialProviderURL,{provider:e}),method:"DELETE"})}function l(e){return d.invariant("string"==typeof e,"url should be a string, instead %s was passed",e),app.modules.applicationUtils.listenProcess({url:e})}function c(e){return d.validateOnObjectType(e),a("in",e)}function u(e){return d.validateOnObjectType(e),a("up",e)}var d=app.modules.applicationUtils;return $.extend(e,{deleteSocialProvider:r,listenSocialRegistrationProcess:l,signIn:c,signUp:u,updateUser:o,mergeUsers:s})}(app.modules.userAPI||{}),app.modules.clearanceConfigChangesHandler=function(e){function t(e){app.config.disableSessionsSynchronization||app.config.currentUser.id===e.id||location.reload(!0)}function i(e){!app.config.disableSessionsSynchronization&&IStorage.trigger(a,e)}function n(){appEL&&appEL.addEventListener(a,i),IStorage.on(a,t)}var a="app.config.currentUser";return e.load=function(){n(),i(app.config.currentUser)},e}(app.modules.clearanceConfigChangesHandler||{}),function(){function e(e){t(e,"Need schema to initialize Validation Service"),t("object"==typeof e&&Object.keys(e).length,"Need schema to be an object with keys"),this._schema=e}var t=app.modules.applicationUtils.invariant;e.prototype={_prepareDataToSendRequest:function(e,t,i){var n={};return n[t]=e,$.extend({},n,i)},_validateDataWithAPI:function(e,t){return $.ajax({url:e,data:t})},_validateDataWithRegExp:function(e,t){var i=!!this._schema[t]&&this._schema[t].test(e);return $.Deferred().resolve({valid:i})},_isURL:function(e){return/^http/.test(e)},validate:function(e,i,n){return t(null!=e,"value argument is required"),t(null!=i,"type argument is required"),t("string"==typeof i,"type argument should be a string"),t(n===undefined||"object"==typeof n&&Object.keys(n).length,"additionalData argument should be an object with data"),this._isURL(this._schema[i])?this._validateDataWithAPI(this._schema[i],this._prepareDataToSendRequest(e,i,n)):this._validateDataWithRegExp(e,i)}},app.ValidationService=e}(),app.modules.userValidationService=function(e){function t(e){return Object.keys(e).reduce(function(t,i){return t[i]=new RegExp(e[i],"i"),t},{})}function i(){return $.extend({},n(),{phone:app.config.api.validationURL})}function n(){return t({email:app.config.validation.user.emailRegExpTemplate,name:app.config.validation.user.nameRegExpTemplate,nameWithAllowedSymbols:app.config.validation.user.nameWithAllowedSymbolsRegExpTemplate,nameWithDisallowedSymbols:app.config.validation.user.nameWithDisallowedSymbolsRegExpTemplate,password:app.config.validation.user.passwordRegExpTemplate})}return e.load=function(){app.config.validation.user&&(app.modules.userValidationService=new app.ValidationService(i()))},e}(app.modules.userValidationService||{}),function(){Handlebars.registerPartial("clearance/social_networks_auth_component/_container",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class=\'social-networks-auth-component-container loading js-social-networks-auth-component-container\' data-providers=\'{"vkontakte":{"locales":{"text":"\u0421\u0432\u044f\u0437\u0430\u0442\u044c \u0441 \u0412\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435","title":"\u041e\u0442\u0432\u044f\u0437\u0430\u0442\u044c \u043e\u0442 \u0412\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435"}},"odnoklassniki":{"locales":{"text":"\u0421\u0432\u044f\u0437\u0430\u0442\u044c \u0441 \u041e\u0434\u043d\u043e\u043a\u043b\u0430\u0441\u0441\u043d\u0438\u043a\u0438","title":"\u041e\u0442\u0432\u044f\u0437\u0430\u0442\u044c \u043e\u0442 \u041e\u0434\u043d\u043e\u043a\u043b\u0430\u0441\u0441\u043d\u0438\u043a\u0438"}},"facebook":{"locales":{"text":"\u0421\u0432\u044f\u0437\u0430\u0442\u044c \u0441 Facebook","title":"\u041e\u0442\u0432\u044f\u0437\u0430\u0442\u044c \u043e\u0442 Facebook"}}}\'></div>'},useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/social_networks_auth_component/_provider_items",Handlebars.template({1:function(e,t,i,n,a){var s;return null!=(s=t.each.call(e,null!=e?e.providers:e,{name:"each",hash:{},fn:this.program(2,n,1,a),inverse:this.noop,data:n,blockParams:a}))?s:""},2:function(e,t,i,n,a){var s;return null!=(s=this.invokePartial(i["clearance/social_networks_auth_component/provider_item/_simple"],a[0][0],{name:"clearance/social_networks_auth_component/provider_item/_simple",data:n,blockParams:a,helpers:t,partials:i}))?s:""},4:function(e,t,i,n,a){var s;return null!=(s=t.each.call(e,null!=e?e.providers:e,{name:"each",hash:{},fn:this.program(5,n,1,a),inverse:this.noop,data:n,blockParams:a}))?s:""},5:function(e,t,i,n,a){var s;return null!=(s=this.invokePartial(i["clearance/social_networks_auth_component/provider_item/_extended"],a[0][0],{name:"clearance/social_networks_auth_component/provider_item/_extended",data:n,blockParams:a,helpers:t,partials:i}))?s:""},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n,a){var s;return null!=(s=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=e?e.type:e,"===","simple",{name:"ifCond",hash:{},fn:this.program(1,n,0,a),inverse:this.program(4,n,0,a),data:n,blockParams:a}))?s:""},usePartial:!0,useData:!0,useBlockParams:!0}))}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["clearance/social_networks_auth_component/body"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a,s;return"<div class='js-social-networks-auth-component social-networks-auth-component social-networks-auth-component-"+this.escapeExpression((s=null!=(s=t.type||(null!=e?e.type:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"type",hash:{},data:n}):s))+"'>\n  <div class='social-networks-auth-component-flash-message'>\n    <div class='apress-flash-message with-icon js-social-networks-auth-component-flash-message-body'></div>\n  </div>\n"+(null!=(a=this.invokePartial(i["clearance/social_networks_auth_component/_provider_items"],e,{name:"clearance/social_networks_auth_component/_provider_items",data:n,indent:"  ",helpers:t,partials:i}))?a:"")+"</div>"},usePartial:!0,useData:!0}),this.HandlebarsTemplates["clearance/social_networks_auth_component/body"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["clearance/social_networks_auth_component/provider_item"]=Handlebars.template({1:function(e,t,i,n){var a;return null!=(a=this.invokePartial(i["clearance/social_networks_auth_component/provider_item/_simple"],null!=e?e.providerData:e,{name:"clearance/social_networks_auth_component/provider_item/_simple",data:n,helpers:t,partials:i}))?a:""},3:function(e,t,i,n){var a;return null!=(a=this.invokePartial(i["clearance/social_networks_auth_component/provider_item/_extended"],null!=e?e.providerData:e,{name:"clearance/social_networks_auth_component/provider_item/_extended",data:n,helpers:t,partials:i}))?a:""},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return null!=(a=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=e?e.type:e,"===","simple",{name:"ifCond",hash:{},fn:this.program(1,n,0),inverse:this.program(3,n,0),data:n}))?a:""},usePartial:!0,useData:!0}),this.HandlebarsTemplates["clearance/social_networks_auth_component/provider_item"]}.call(this),function(){Handlebars.registerPartial("clearance/social_networks_auth_component/provider_item/_extended",Handlebars.template({1:function(e){var t;return"  <i class='social-networks-auth-component-item-icon "+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"'></i>\n  <span class='social-networks-auth-component-item-user-info'>\n    "+this.escapeExpression(this.lambda(null!=e?e.currentUserSocialNetworkUID:e,e))+"\n  </span>\n  <i class='social-networks-auth-component-item-delete-item js-delete-provider-item' title='"+this.escapeExpression(this.lambda(null!=(t=null!=e?e.locales:e)?t.title:t,e))+"'></i>\n"},3:function(e){var t;return"  <a class='social-networks-auth-component-item-link js-provider-item-link' href='"+this.escapeExpression(this.lambda(null!=e?e.omniauthAuthorizeURL:e,e))+"'>\n    <i class='disabled social-networks-auth-component-item-icon "+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"'></i>\n    "+this.escapeExpression(this.lambda(null!=(t=null!=e?e.locales:e)?t.text:t,e))+"\n  </a>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='js-provider-item social-networks-auth-component-item "+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"' data-provider-name='"+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"'>\n"+(null!=(a=t["if"].call(e,null!=e?e.currentUserSocialNetworkUID:e,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.program(3,n,0),data:n}))?a:"")+"</div>"},useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/social_networks_auth_component/provider_item/_simple",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e){return"<div class='social-networks-auth-component-item js-provider-item'>\n  <a class='js-provider-item-link' href='"+this.escapeExpression(this.lambda(null!=e?e.omniauthAuthorizeURL:e,e))+"'>\n    <i class='social-networks-auth-component-item-icon "+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"'></i>\n  </a>\n</div>"},useData:!0}))}.call(this),app.modules.socialNetworksAuthComponent=function(e){function t(e){return H+"/"+e}function i(e,i){return $(HandlebarsTemplates[t(e)](i))}function n(e){return{providerData:s(e)}}function a(e){return e.data(z)}function s(e){return F.providers.filter(function(t){return t.name===e})[0]}function o(e,t){return $.extend(!0,{},q,e,t,{providers:r(e.providers,t)})}function r(e,t){var i=t&&t.newSchema?app.config.newOmniauthAuthorizeURL:app.config.omniauthAuthorizeURL;return app.config.socialNetworkProviders.map(function(t){var n=t.replace("_oauth2","");return{name:n,omniauthAuthorizeURL:i.replace("_provider_",t),currentUserSocialNetworkUID:app.modules.userUtils.getCurrentUserSocialNetworkUID(t),locales:e&&e[n]&&e[n].locales}})}function l(e){F=e}function c(e,t){F.providers=F.providers.map(function(i){return i.name===e?$.extend(!0,{},i,t):i})}function u(e){return e.html(i(O.body,F)).find(L.component).data({props:F})}function d(e,t){return e.replaceWith(i(O.providerItem,t))}function h(){return B.listenProcess({url:app.config.jobStatusURL,pid:app.config.socialNetworksAuth.mergeUsersJobID})}function p(e){return e.removeClass(R.loading)}function f(e){M=window.open(e)}function m(){return I=app.modules.applicationUtils.generateUUID()}function g(e){return e+"?oauth_id="+m()}function v(e){var t=a(e);c(t,{currentUserSocialNetworkUID:null}),d(e,n(t))}function b(){var e=$(this).closest(L.providerItem);e.addClass(R.deletionInProcess),app.modules.userAPI.deleteSocialProvider(a(e)).then(v.bind(null,e))}function y(e){F.newSchema&&(e.preventDefault(),M&&(A(),M.close()),f(g($(this).attr("href"))),S(x))}function _(e){var t=!!e;$(L.flashMessageBody).toggle(t).toggleClass("with-error",t).html($("<span>").text(e))}function w(){return h().then(T)}function x(){app.modules.userAPI.listenSocialRegistrationProcess(app.config.api.oauthStateURL.replace("_oauth_id_",I)).then(k,C)}function k(e){app.modules.userUtils.signIn({perishable_token:e.user.perishable_token}).then(function(){_(),F.onSuccess(e)})}function C(e){"not_found"!==e.message&&_(e.message),F.onError(e)}function P(){B.setLocationHref(app.config.socialNetworksAuth.redirectURL)}function T(e){return app.modules.userUtils.signIn(e).then(P)}function D(e,t){var i=$(e.target);l(o(i.data(),t)),j(u(p(i)))}function S(e){N=setInterval(function(){M.closed&&(e(),A())},1e3)}function A(){clearInterval(N)}function j(e){e.on("click",L.providerItemLink,y).on("click",L.deleteProviderItem,b)}function E(){$doc.on("render:socialNetworksAuthComponent",D)}var I,N,F,M,L={component:".js-social-networks-auth-component",providerItem:".js-provider-item",providerItemLink:".js-provider-item-link",deleteProviderItem:".js-delete-provider-item",flashMessageBody:".js-social-networks-auth-component-flash-message-body"},R={deletionInProcess:"social-networks-auth-component-provider-item-deletion",loading:"loading"},O={body:"body",providerItem:"provider_item"},H="clearance/social_networks_auth_component",z="providerName",B=app.modules.applicationUtils,q={type:"extended",onSuccess:function(){},onError:function(){},newSchema:!1};return $.extend(e,{load:E,listenUsersMerge:w,reset:function(){clearInterval(N),I=null,F=null,M=null}})}(app.modules.socialNetworksAuthComponent||{}),app.modules.authComponentHandlebarsHelpers=function(e){function t(){Handlebars.registerHelper({isRequired:function(e,t){return~t.data.root.fields.required.indexOf(e)&&t.fn(this)},renderComponent:function(e,t){return"clearance/auth_component/"+t.data.root.platform+"/orientation/_"+e},renderField:function(e,t){if(t.data.root.fields.set[e])return"clearance/auth_component/"+t.data.root.platform+"/fields/_"+t.data.root.fields.set[e]},renderFieldsWrapper:function(e){return"clearance/auth_component/"+e.data.root.platform+"/fields/_wrapper"},isHiddenByDefault:function(e,t){return~t.data.root.fields.hiddenByDefault.indexOf(e)&&t.fn(this)},fromCamelToDash:function(e){if(e)return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}})}return e.load=function(){t()},e}(app.modules.authComponentHandlebarsHelpers||{}),app.modules.authComponentUtils=function(){function e(e){return t.invariant("string"==typeof e||Array.isArray(e),"Argument dataType should be a string or an array, instead got %s",e),t.invariant(app.config.currentUser,"currentUser config should be declared"),Array.isArray(e)?e.reduce(function(e,t){return e&&!!app.config.currentUser[t]},!0):!!app.config.currentUser[e]}var t=app.modules.applicationUtils;return{doesCurrentUserHaveData:e}}(app.modules.authComponentUtils),function(){Handlebars.registerPartial("clearance/auth_component/desktop/_body",Handlebars.template({1:function(e,t,i,n){var a;return"<div class='auth-component-section auth-component-section-social-networks-auth-component' data-divider-content='\u0438\u043b\u0438'>\n"+(null!=(a=this.invokePartial(i["clearance/social_networks_auth_component/_container"],e,{name:"clearance/social_networks_auth_component/_container",data:n,indent:"  ",helpers:t,partials:i}))?a:"")+"</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<input class='js-input-user-auth' type='hidden'>\n"+(null!=(a=this.invokePartial(i["clearance/auth_component/desktop/_title"],e,{name:"clearance/auth_component/desktop/_title",data:n,helpers:t,partials:i}))?a:"")+(null!=(a=t["if"].call(e,null!=e?e.withSocialRegistration:e,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"<div class='auth-component-section auth-component-section-flash-message'>\n  <div class='apress-flash-message with-icon js-flash-message'></div>\n</div>\n<div class='auth-component-section auth-component-section-body'>\n"+(null!=(a=this.invokePartial((t.renderComponent||e&&e.renderComponent||t.helperMissing).call(e,null!=e?e.orientation:e,{name:"renderComponent",hash:{},data:n}),e,{data:n,indent:"  ",helpers:t,partials:i}))?a:"")+"</div>"},usePartial:!0,useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/desktop/_button",Handlebars.template({1:function(e,t,i,n){return"  <div class='auth-component-button-content "+this.escapeExpression((t.fromCamelToDash||e&&e.fromCamelToDash||t.helperMissing).call(e,n&&n.key,{name:"fromCamelToDash",hash:{},data:n}))+"'>\n    "+this.escapeExpression(this.lambda(null!=e?e.buttonText:e,e))+"\n  </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<button class='"+this.escapeExpression(this.lambda(null!=e?e.buttonClass:e,e))+" js-button-submit'>\n"+(null!=(a=t.each.call(e,null!=e?e.content:e,{name:"each",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"</button>"},useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/desktop/_footer",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='auth-component-section auth-component-section-footer'>\n  <div class='auth-component-button-cell'>"+(null!=(a=this.invokePartial(i["clearance/auth_component/desktop/_button"],e,{name:"clearance/auth_component/desktop/_button",data:n,helpers:t,partials:i}))?a:"")+"</div>\n  <div class='auth-component-tip'>"+(null!=(a=this.invokePartial(i["clearance/auth_component/desktop/_tip"],e,{name:"clearance/auth_component/desktop/_tip",data:n,helpers:t,partials:i}))?a:"")+"</div>\n</div>"},usePartial:!0,useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/desktop/_icons_holder",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return"<div class='icons-holder'>\n  <div class='icons-holder-cell'>\n    <i class='icon icon-toggle-password js-icon-toggle-password'></i>\n  </div>\n  <div class='icons-holder-cell'>\n    <i class='icon icon-clear js-icon-clear-field'></i>\n  </div>\n</div>"},useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/desktop/_restore_code_links",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return"<span class='password-link dn js-restore-password-auth'>\n  \u0412\u0441\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c\n</span>\n<span class='password-link dn js-get-code-auth'>\n  \u0412\u044b\u0441\u043b\u0430\u0442\u044c \u043a\u043e\u0434 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438\n</span>"},useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/desktop/_tip",Handlebars.template({1:function(e,t,i,n){var a;return"<div class='auth-component-tip-content "+this.escapeExpression((t.fromCamelToDash||e&&e.fromCamelToDash||t.helperMissing).call(e,n&&n.key,{name:"fromCamelToDash",hash:{},data:n}))+"'>\n  "+(null!=(a=this.lambda(null!=e?e.tip:e,e))?a:"")+"\n</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return null!=(a=t.each.call(e,null!=e?e.content:e,{name:"each",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:""},useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/desktop/_title",Handlebars.template({1:function(e,t,i,n){var a;return"  <div class='auth-component-section-header-content "+this.escapeExpression((t.fromCamelToDash||e&&e.fromCamelToDash||t.helperMissing).call(e,n&&n.key,{name:"fromCamelToDash",hash:{},data:n}))+"'>\n    "+(null!=(a=this.lambda(null!=e?e.title:e,e))?a:"")+"\n  </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='auth-component-section auth-component-section-header'>\n"+(null!=(a=t.each.call(e,null!=e?e.content:e,{name:"each",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"</div>"},useData:!0}))}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["clearance/auth_component/desktop/existing_users"]=Handlebars.template({1:function(e,t,i,n){var a;return"    <li class='radio'>\n      <input class='js-user-exist-radio-auth' data-email='"+this.escapeExpression(this.lambda(null!=e?e.email:e,e))+"' data-id='"+this.escapeExpression(this.lambda(null!=e?e.id:e,e))+"' data-phone='"+this.escapeExpression(this.lambda(null!=e?e.phone:e,e))+"' id='user-"+this.escapeExpression(this.lambda(null!=e?e.id:e,e))+"' name='users_exists' type='radio'>\n      <label for='user-"+this.escapeExpression(this.lambda(null!=e?e.id:e,e))+"'>\n"+(null!=(a=t["if"].call(e,null!=e?e.email:e,{name:"if",hash:{},fn:this.program(2,n,0),inverse:this.program(4,n,0),data:n}))?a:"")+"      </label>\n    </li>\n"},2:function(e){return"        "+this.escapeExpression(this.lambda(null!=e?e.email:e,e))+"\n"},4:function(e){return"        "+this.escapeExpression(this.lambda(null!=e?e.phone:e,e))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='form-group existing-users'>\n  <p>\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c \u043d\u043e\u043c\u0435\u0440\u043e\u043c \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d. \u042d\u0442\u043e \u0432\u044b?</p>\n  <ul>\n"+(null!=(a=t.each.call(e,null!=e?e.users:e,{name:"each",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"  </ul>\n  <button class='apress-button ab-default secondary js-button-no-users-exists' type='button'>\n    \u041d\u0435\u0442\n  </button>\n  <button class='apress-button ab-default js-button-yes-users-exists' disabled type='button'>\n    \u0414\u0430\n  </button>\n</div>"},useData:!0}),this.HandlebarsTemplates["clearance/auth_component/desktop/existing_users"]}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/desktop/fields/_code",Handlebars.template({1:function(){return"inline"},3:function(){return"dn"},5:function(){return"  <div class='label'>\n    <label class='required'>\u041a\u043e\u0434 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438:</label>\n  </div>\n"},7:function(){return"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='form-group dn js-group-code-auth "+(null!=(a=t["if"].call(e,null!=(a=null!=e?e.fields:e)?a.inline:a,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+" "+(null!=(a=(t.isHiddenByDefault||e&&e.isHiddenByDefault||t.helperMissing).call(e,"code",{name:"isHiddenByDefault",hash:{},fn:this.program(3,n,0),inverse:this.noop,data:n}))?a:"")+"' data-required-data-message='\u041d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c' data-success-message='\u0412\u0430\u043c \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u0441\u043c\u0441 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441 \u043a\u043e\u0434\u043e\u043c \u0434\u043e\u0441\u0442\u0443\u043f\u0430.' data-type='code'>\n"+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.fields:e)?a.withoutLabels:a,{name:"unless",hash:{},fn:this.program(5,n,0),inverse:this.noop,data:n}))?a:"")+"  <div class='text-field-wrapper'>\n"+(null!=(a=this.invokePartial(i["clearance/auth_component/desktop/_icons_holder"],e,{name:"clearance/auth_component/desktop/_icons_holder",data:n,indent:"    ",helpers:t,partials:i}))?a:"")+"    <input autocomplete='"+this.escapeExpression(this.lambda(null!=(a=null!=e?e.fields:e)?a.autocomplete:a,e))+"' class='text-field js-input-code-auth' disabled name='code' placeholder='"+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.fields:e)?a.withoutPlaceholder:a,{name:"unless",hash:{},fn:this.program(7,n,0),inverse:this.noop,data:n}))?a:"")+"' type='text' value='"+this.escapeExpression(this.lambda(null!=(a=null!=(a=null!=e?e.fields:e)?a.values:a)?a.auth_code:a,e))+"'>\n  </div>\n  <div class='success-block js-success-message'></div>\n  <div class='error-block js-error-message'></div>\n</div>"},usePartial:!0,useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/desktop/fields/_email",Handlebars.template({1:function(){return"inline"},3:function(e,t,i,n){var a;return"  <div class='label'>\n    <label class='"+(null!=(a=(t.isRequired||e&&e.isRequired||t.helperMissing).call(e,"email",{name:"isRequired",hash:{},fn:this.program(4,n,0),inverse:this.noop,data:n}))?a:"")+"'>\n      E-mail\n    </label>\n  </div>\n"},4:function(){return"required"},6:function(){return"\u0412\u0430\u0448 email"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='form-group form-group-self-cleared js-group-email-auth "+(null!=(a=t["if"].call(e,null!=(a=null!=e?e.fields:e)?a.inline:a,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"' data-invalid-data-message='\u0410\u0434\u0440\u0435\u0441 \u0438\u043c\u0435\u0435\u0442 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442' data-required-data-message='\u041d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c' data-type='email'>\n"+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.fields:e)?a.withoutLabels:a,{name:"unless",hash:{},fn:this.program(3,n,0),inverse:this.noop,data:n}))?a:"")+"  <div class='text-field-wrapper'>\n"+(null!=(a=this.invokePartial(i["clearance/auth_component/desktop/_icons_holder"],e,{name:"clearance/auth_component/desktop/_icons_holder",data:n,indent:"    ",helpers:t,partials:i}))?a:"")+"    <input autocomplete='"+this.escapeExpression(this.lambda(null!=(a=null!=e?e.fields:e)?a.autocomplete:a,e))+"' class='text-field js-input-email-auth' name='email' placeholder='"+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.fields:e)?a.withoutPlaceholder:a,{name:"unless",hash:{},fn:this.program(6,n,0),inverse:this.noop,data:n}))?a:"")+"' type='email' value='"+this.escapeExpression(this.lambda(null!=(a=null!=(a=null!=e?e.fields:e)?a.values:a)?a.email:a,e))+"'>\n  </div>\n  <div class='error-block js-error-message'></div>\n</div>"},usePartial:!0,useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/desktop/fields/_multiple",Handlebars.template({1:function(e,t,i,n){var a;return"  <div class='label'>\n    <label class='"+(null!=(a=(t.isRequired||e&&e.isRequired||t.helperMissing).call(e,"multiple",{name:"isRequired",hash:{},fn:this.program(2,n,0),inverse:this.noop,data:n}))?a:"")+"'>\n      \u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u043b\u0438 e-mail\n    </label>\n  </div>\n"},2:function(){return"required"},4:function(){return"Email \u0438\u043b\u0438 \u0442\u0435\u043b\u0435\u0444\u043e\u043d"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='form-group js-group-multiple-auth' data-invalid-data-message='\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442' data-required-data-message='\u041d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c' data-type='multiple'>\n"+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.fields:e)?a.withoutLabels:a,{name:"unless",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"  <div class='text-field-wrapper'>\n"+(null!=(a=this.invokePartial(i["clearance/auth_component/desktop/_icons_holder"],e,{name:"clearance/auth_component/desktop/_icons_holder",data:n,indent:"    ",helpers:t,partials:i}))?a:"")+"    <input autocomplete='"+this.escapeExpression(this.lambda(null!=(a=null!=e?e.fields:e)?a.autocomplete:a,e))+"' class='text-field js-input-multiple-auth' name='email_or_phone' placeholder='"+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.fields:e)?a.withoutPlaceholder:a,{name:"unless",hash:{},fn:this.program(4,n,0),inverse:this.noop,data:n}))?a:"")+"' type='text' value='"+this.escapeExpression(this.lambda(null!=(a=null!=(a=null!=e?e.fields:e)?a.values:a)?a.multiple:a,e))+"'>\n  </div>\n  <div class='error-block js-error-message'></div>\n</div>\n<div class='js-existing-users-container'></div>"},usePartial:!0,useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/desktop/fields/_name",Handlebars.template({1:function(){return"inline"},3:function(){return"dn"},5:function(e,t,i,n){var a;return"  <div class='label'>\n    <label class='"+(null!=(a=(t.isRequired||e&&e.isRequired||t.helperMissing).call(e,"name",{name:"isRequired",hash:{},fn:this.program(6,n,0),inverse:this.noop,data:n}))?a:"")+"'>\n      \u0412\u0430\u0448\u0435 \u0438\u043c\u044f\n    </label>\n  </div>\n"},6:function(){return"required"},8:function(){return"\u0412\u0430\u0448\u0438 \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u0438 \u0438\u043c\u044f"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='form-group js-group-name-auth "+(null!=(a=t["if"].call(e,null!=(a=null!=e?e.fields:e)?a.inline:a,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+" "+(null!=(a=(t.isHiddenByDefault||e&&e.isHiddenByDefault||t.helperMissing).call(e,"name",{name:"isHiddenByDefault",hash:{},fn:this.program(3,n,0),inverse:this.noop,data:n}))?a:"")+"' data-invalid-data-message='\u0424\u0418\u041e \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b, \u0442\u043e\u0447\u043a\u0438 \u0438 \u0434\u0435\u0444\u0438\u0441\u044b' data-required-data-message='\u041d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c' data-type='name'>\n"+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.fields:e)?a.withoutLabels:a,{name:"unless",hash:{},fn:this.program(5,n,0),inverse:this.noop,data:n}))?a:"")+"  <div class='text-field-wrapper'>\n"+(null!=(a=this.invokePartial(i["clearance/auth_component/desktop/_icons_holder"],e,{name:"clearance/auth_component/desktop/_icons_holder",data:n,indent:"    ",helpers:t,partials:i}))?a:"")+"    <input autocomplete='"+this.escapeExpression(this.lambda(null!=(a=null!=e?e.fields:e)?a.autocomplete:a,e))+"' class='text-field js-input-name-auth' data-type='name' maxlength='"+this.escapeExpression(this.lambda(null!=(a=null!=(a=null!=e?e.fields:e)?a.maxlength:a)?a.name:a,e))+"' name='name' placeholder='"+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.fields:e)?a.withoutPlaceholder:a,{name:"unless",hash:{},fn:this.program(8,n,0),inverse:this.noop,data:n
}))?a:"")+"' type='text' value='"+this.escapeExpression(this.lambda(null!=(a=null!=(a=null!=(a=null!=e?e.fields:e)?a.values:a)?a.profile_attributes:a)?a.name:a,e))+"'>\n  </div>\n  <div class='error-block js-error-message'></div>\n</div>"},usePartial:!0,useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/desktop/fields/_password",Handlebars.template({1:function(){return"inline"},3:function(){return"dn"},5:function(e,t,i,n){var a;return"  <div class='label'>\n    <label class='required'>\u041f\u0430\u0440\u043e\u043b\u044c</label>\n"+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.fields:e)?a.inline:a,{name:"unless",hash:{},fn:this.program(6,n,0),inverse:this.noop,data:n}))?a:"")+"  </div>\n"},6:function(e,t,i,n){var a;return null!=(a=this.invokePartial(i["clearance/auth_component/desktop/_restore_code_links"],e,{name:"clearance/auth_component/desktop/_restore_code_links",data:n,indent:"    ",helpers:t,partials:i}))?a:""},8:function(){return"\u0412\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c"},10:function(e,t,i,n){var a;return null!=(a=this.invokePartial(i["clearance/auth_component/desktop/_restore_code_links"],e,{name:"clearance/auth_component/desktop/_restore_code_links",data:n,indent:"  ",helpers:t,partials:i}))?a:""},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='form-group form-group-password js-group-password-auth "+(null!=(a=t["if"].call(e,null!=(a=null!=e?e.fields:e)?a.inline:a,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+" "+(null!=(a=(t.isHiddenByDefault||e&&e.isHiddenByDefault||t.helperMissing).call(e,"password",{name:"isHiddenByDefault",hash:{},fn:this.program(3,n,0),inverse:this.noop,data:n}))?a:"")+"' data-invalid-data-message='"+this.escapeExpression(this.lambda(null!=(a=null!=(a=null!=e?e.data:e)?a.messages:a)?a.invalidPasswordErrorMessage:a,e))+"' data-required-data-message='\u041d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c' data-success-message='\u0412\u0430\u043c \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u043f\u0438\u0441\u044c\u043c\u043e \u0441 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\u043c\u0438 \u043f\u043e \u0441\u043c\u0435\u043d\u0435 \u043f\u0430\u0440\u043e\u043b\u044f.' data-type='password'>\n"+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.fields:e)?a.withoutLabels:a,{name:"unless",hash:{},fn:this.program(5,n,0),inverse:this.noop,data:n}))?a:"")+"  <div class='text-field-wrapper'>\n"+(null!=(a=this.invokePartial(i["clearance/auth_component/desktop/_icons_holder"],e,{name:"clearance/auth_component/desktop/_icons_holder",data:n,indent:"    ",helpers:t,partials:i}))?a:"")+"    <input autocomplete='"+this.escapeExpression(this.lambda(null!=(a=null!=e?e.fields:e)?a.autocomplete:a,e))+"' class='text-field js-input-password-auth' name='password' placeholder='"+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.fields:e)?a.withoutPlaceholder:a,{name:"unless",hash:{},fn:this.program(8,n,0),inverse:this.noop,data:n}))?a:"")+"' type='password' value='"+this.escapeExpression(this.lambda(null!=(a=null!=(a=null!=e?e.fields:e)?a.values:a)?a.password:a,e))+"'>\n  </div>\n"+(null!=(a=t["if"].call(e,null!=(a=null!=e?e.fields:e)?a.inline:a,{name:"if",hash:{},fn:this.program(10,n,0),inverse:this.noop,data:n}))?a:"")+"  <div class='success-block js-success-message'></div>\n  <div class='error-block js-error-message'></div>\n</div>"},usePartial:!0,useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/desktop/fields/_phone",Handlebars.template({1:function(){return"inline"},3:function(e,t,i,n){var a;return"  <div class='label'>\n    <label class='"+(null!=(a=(t.isRequired||e&&e.isRequired||t.helperMissing).call(e,"phone",{name:"isRequired",hash:{},fn:this.program(4,n,0),inverse:this.noop,data:n}))?a:"")+"'>\n      \u0422\u0435\u043b\u0435\u0444\u043e\u043d\n"+(null!=(a=t["if"].call(e,null!=(a=null!=(a=null!=e?e.fields:e)?a.hints:a)?a.phone:a,{name:"if",hash:{},fn:this.program(6,n,0),inverse:this.noop,data:n}))?a:"")+"    </label>\n  </div>\n"},4:function(){return"required"},6:function(e,t,i,n){var a;return"      <span class='hint js-qtip-icon' data-qtip-options='"+this.escapeExpression((t.toJSON||e&&e.toJSON||t.helperMissing).call(e,null!=(a=null!=(a=null!=e?e.fields:e)?a.hints:a)?a.phone:a,{name:"toJSON",hash:{},data:n}))+"'></span>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='form-group js-group-phone-auth "+(null!=(a=t["if"].call(e,null!=(a=null!=e?e.fields:e)?a.inline:a,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"' data-invalid-data-message='\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u043c\u0435\u0435\u0442 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442' data-required-data-message='\u041d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c' data-type='phone' data-unique-data-message='\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043e\u043c \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d \u043d\u0430 \u0434\u0440\u0443\u0433\u043e\u0439 email. \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0440\u0443\u0433\u043e\u0439 \u0442\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u043b\u0438 email.'>\n"+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.fields:e)?a.withoutLabels:a,{name:"unless",hash:{},fn:this.program(3,n,0),inverse:this.noop,data:n}))?a:"")+"  <div class='text-field-wrapper'>\n"+(null!=(a=this.invokePartial(i["clearance/auth_component/desktop/_icons_holder"],e,{name:"clearance/auth_component/desktop/_icons_holder",data:n,indent:"    ",helpers:t,partials:i}))?a:"")+"    <input autocomplete='"+this.escapeExpression(this.lambda(null!=(a=null!=e?e.fields:e)?a.autocomplete:a,e))+"' class='text-field js-input-phone-auth' name='phone' type='tel' value='"+this.escapeExpression(this.lambda(null!=(a=null!=(a=null!=e?e.fields:e)?a.values:a)?a.phone:a,e))+"'>\n  </div>\n  <div class='error-block js-error-message'></div>\n</div>\n<div class='js-existing-users-container'></div>"},usePartial:!0,useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/desktop/fields/_wrapper",Handlebars.template({1:function(e,t,i,n){var a;return null!=(a=this.invokePartial((t.renderField||e&&e.renderField||t.helperMissing).call(e,null!=e?e.index:e,{name:"renderField",hash:{},data:n}),e,{data:n,helpers:t,partials:i}))?a:""},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return null!=(a=t["if"].call(e,(t.renderField||e&&e.renderField||t.helperMissing).call(e,null!=e?e.index:e,{name:"renderField",hash:{},data:n}),{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:""},usePartial:!0,useData:!0}))}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["clearance/auth_component/desktop/form"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a,s;return"<form class='"+this.escapeExpression((s=null!=(s=t.formClass||(null!=e?e.formClass:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"formClass",hash:{},data:n}):s))+" auth-component js-auth-component "+this.escapeExpression((t.fromCamelToDash||e&&e.fromCamelToDash||t.helperMissing).call(e,null!=e?e.contentType:e,{name:"fromCamelToDash",hash:{},data:n}))+"' novalidate='true'>\n"+(null!=(a=this.invokePartial(i["clearance/auth_component/desktop/_body"],e,{name:"clearance/auth_component/desktop/_body",data:n,indent:"  ",helpers:t,partials:i}))?a:"")+(null!=(a=this.invokePartial(i["clearance/auth_component/desktop/_footer"],e,{name:"clearance/auth_component/desktop/_footer",data:n,indent:"  ",helpers:t,partials:i}))?a:"")+"</form>"},usePartial:!0,useData:!0}),this.HandlebarsTemplates["clearance/auth_component/desktop/form"]}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/desktop/orientation/_horizontal",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='grid-row'>\n  <div class='grid-col-uv-11'>\n"+(null!=(a=this.invokePartial((t.renderFieldsWrapper||e&&e.renderFieldsWrapper||t.helperMissing).call(e,{name:"renderFieldsWrapper",hash:{},data:n}),e,{hash:{index:0},data:n,indent:"    ",helpers:t,partials:i}))?a:"")+"  </div>\n  <div class='grid-col-uv-11 grid-col-uv-offset-2'>\n"+(null!=(a=this.invokePartial((t.renderFieldsWrapper||e&&e.renderFieldsWrapper||t.helperMissing).call(e,{name:"renderFieldsWrapper",hash:{},data:n}),e,{hash:{index:1},data:n,indent:"    ",helpers:t,partials:i}))?a:"")+"  </div>\n</div>\n<div class='grid-row'>\n  <div class='grid-col-uv-11'>\n"+(null!=(a=this.invokePartial((t.renderFieldsWrapper||e&&e.renderFieldsWrapper||t.helperMissing).call(e,{name:"renderFieldsWrapper",hash:{},data:n}),e,{hash:{index:2},data:n,indent:"    ",helpers:t,partials:i}))?a:"")+"  </div>\n  <div class='grid-col-uv-11 grid-col-uv-offset-2'>\n"+(null!=(a=this.invokePartial((t.renderFieldsWrapper||e&&e.renderFieldsWrapper||t.helperMissing).call(e,{name:"renderFieldsWrapper",hash:{},data:n}),e,{hash:{index:3},data:n,indent:"    ",helpers:t,partials:i}))?a:"")+(null!=(a=this.invokePartial((t.renderFieldsWrapper||e&&e.renderFieldsWrapper||t.helperMissing).call(e,{name:"renderFieldsWrapper",hash:{},data:n}),e,{hash:{index:4},data:n,indent:"    ",helpers:t,partials:i}))?a:"")+"  </div>\n</div>"},usePartial:!0,useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/desktop/orientation/_vertical",Handlebars.template({1:function(e,t,i,n,a,s){var o;return null!=(o=this.invokePartial((t.renderField||e&&e.renderField||t.helperMissing).call(e,n&&n.index,{name:"renderField",hash:{},data:n}),e,{hash:{data:null!=s[1]?s[1].data:s[1],fields:null!=s[1]?s[1].fields:s[1]},data:n,helpers:t,partials:i}))?o:""},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n,a,s){var o;return null!=(o=t.each.call(e,null!=(o=null!=e?e.fields:e)?o.set:o,{name:"each",hash:{},fn:this.program(1,n,0,a,s),inverse:this.noop,data:n}))?o:""},usePartial:!0,useData:!0,useDepths:!0}))}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["clearance/auth_component/desktop/simple"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='auth-component clearfix js-auth-component "+this.escapeExpression((t.fromCamelToDash||e&&e.fromCamelToDash||t.helperMissing).call(e,null!=e?e.contentType:e,{name:"fromCamelToDash",hash:{},data:n}))+"'>\n"+(null!=(a=this.invokePartial(i["clearance/auth_component/desktop/_body"],e,{name:"clearance/auth_component/desktop/_body",data:n,indent:"  ",helpers:t,partials:i}))?a:"")+"</div>"},usePartial:!0,useData:!0}),this.HandlebarsTemplates["clearance/auth_component/desktop/simple"]}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/mobile/_body",Handlebars.template({1:function(e,t,i,n){var a;return"<div class='auth-component-section auth-component-section-social-networks-auth-component' data-divider-content='\u0438\u043b\u0438'>\n"+(null!=(a=this.invokePartial(i["clearance/social_networks_auth_component/_container"],e,{name:"clearance/social_networks_auth_component/_container",data:n,indent:"  ",helpers:t,partials:i}))?a:"")+"</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<input class='js-input-user-auth' type='hidden'>\n"+(null!=(a=this.invokePartial(i["clearance/auth_component/mobile/_title"],e,{name:"clearance/auth_component/mobile/_title",data:n,helpers:t,partials:i}))?a:"")+(null!=(a=t["if"].call(e,null!=e?e.withSocialRegistration:e,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"<div class='auth-component-section'>\n  <div class='apress-flash-message with-icon js-flash-message'></div>\n</div>\n<div class='auth-component-section auth-component-section-body'>"+(null!=(a=this.invokePartial((t.renderComponent||e&&e.renderComponent||t.helperMissing).call(e,null!=e?e.orientation:e,{name:"renderComponent",hash:{},data:n}),e,{data:n,helpers:t,partials:i}))?a:"")+"</div>"},usePartial:!0,useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/mobile/_button",Handlebars.template({1:function(e,t,i,n){return"  <div class='auth-component-button-content "+this.escapeExpression((t.fromCamelToDash||e&&e.fromCamelToDash||t.helperMissing).call(e,n&&n.key,{name:"fromCamelToDash",hash:{},data:n}))+"'>\n    "+this.escapeExpression(this.lambda(null!=e?e.buttonText:e,e))+"\n  </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<button class='"+this.escapeExpression(this.lambda(null!=e?e.buttonClass:e,e))+" js-button-submit'>\n"+(null!=(a=t.each.call(e,null!=e?e.content:e,{name:"each",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"</button>"},useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/mobile/_footer",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='auth-component-section auth-component-section-footer'>\n  <div class='auth-component-button-cell'>"+(null!=(a=this.invokePartial(i["clearance/auth_component/mobile/_button"],e,{name:"clearance/auth_component/mobile/_button",data:n,helpers:t,partials:i}))?a:"")+"</div>\n  <div class='auth-component-tip'>"+(null!=(a=this.invokePartial(i["clearance/auth_component/mobile/_tip"],e,{name:"clearance/auth_component/mobile/_tip",data:n,helpers:t,partials:i}))?a:"")+"</div>\n</div>"},usePartial:!0,useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/mobile/_icons_holder",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return"<div class='icons-holder'>\n  <div class='icons-holder-cell'>\n    <i class='icon icon-toggle-password js-icon-toggle-password'></i>\n  </div>\n  <div class='icons-holder-cell'>\n    <i class='icon icon-clear js-icon-clear-field'></i>\n  </div>\n</div>"},useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/mobile/_tip",Handlebars.template({1:function(e,t,i,n){var a;return"<div class='auth-component-tip-content "+this.escapeExpression((t.fromCamelToDash||e&&e.fromCamelToDash||t.helperMissing).call(e,n&&n.key,{name:"fromCamelToDash",hash:{},data:n}))+"'>\n  "+(null!=(a=this.lambda(null!=e?e.tip:e,e))?a:"")+"\n</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return null!=(a=t.each.call(e,null!=e?e.content:e,{name:"each",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:""},useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/mobile/_title",Handlebars.template({1:function(e,t,i,n){var a;return"  <div class='auth-component-section-header-content "+this.escapeExpression((t.fromCamelToDash||e&&e.fromCamelToDash||t.helperMissing).call(e,n&&n.key,{name:"fromCamelToDash",hash:{},data:n}))+"'>\n    "+(null!=(a=this.lambda(null!=e?e.title:e,e))?a:"")+"\n  </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<h2 class='auth-component-section auth-component-section-header'>\n"+(null!=(a=t.each.call(e,null!=e?e.content:e,{name:"each",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"</h2>"},useData:!0}))}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["clearance/auth_component/mobile/existing_users"]=Handlebars.template({1:function(e,t,i,n){var a;return"    <li>\n      <div class='radio'>\n        <input class='js-user-exist-radio-auth' data-email='"+this.escapeExpression(this.lambda(null!=e?e.email:e,e))+"' data-id='"+this.escapeExpression(this.lambda(null!=e?e.id:e,e))+"' data-phone='"+this.escapeExpression(this.lambda(null!=e?e.phone:e,e))+"' id='user-"+this.escapeExpression(this.lambda(null!=e?e.id:e,e))+"' name='users_exists' type='radio'>\n        <label for='user-"+this.escapeExpression(this.lambda(null!=e?e.id:e,e))+"'>\n"+(null!=(a=t["if"].call(e,null!=e?e.email:e,{name:"if",hash:{},fn:this.program(2,n,0),inverse:this.program(4,n,0),data:n}))?a:"")+"        </label>\n      </div>\n    </li>\n"},2:function(e){return"          "+this.escapeExpression(this.lambda(null!=e?e.email:e,e))+"\n"},4:function(e){return"          "+this.escapeExpression(this.lambda(null!=e?e.phone:e,e))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='form-group existing-users'>\n  <p>\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c \u043d\u043e\u043c\u0435\u0440\u043e\u043c \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d. \u042d\u0442\u043e \u0432\u044b?</p>\n  <ul>\n"+(null!=(a=t.each.call(e,null!=e?e.users:e,{name:"each",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"  </ul>\n  <button class='apress-button ab-default js-button-yes-users-exists' disabled type='button'>\n    \u0414\u0430\n  </button>\n  <button class='apress-button ab-default secondary js-button-no-users-exists' type='button'>\n    \u041d\u0435\u0442\n  </button>\n</div>"},useData:!0}),this.HandlebarsTemplates["clearance/auth_component/mobile/existing_users"]}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/mobile/fields/_code",Handlebars.template({1:function(){return"dn"},3:function(){return"  <div class='label'>\n    <label class='required'>\u041a\u043e\u0434 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438:</label>\n  </div>\n"},5:function(){return"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='form-group js-group-code-auth "+(null!=(a=(t.isHiddenByDefault||e&&e.isHiddenByDefault||t.helperMissing).call(e,"code",{name:"isHiddenByDefault",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"' data-required-data-message='\u041d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c' data-success-message='\u0412\u0430\u043c \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u0441\u043c\u0441 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441 \u043a\u043e\u0434\u043e\u043c \u0434\u043e\u0441\u0442\u0443\u043f\u0430.' data-type='code'>\n"+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.fields:e)?a.withoutLabels:a,{name:"unless",hash:{},fn:this.program(3,n,0),inverse:this.noop,data:n}))?a:"")+"  <div class='text-field-wrapper'>\n"+(null!=(a=this.invokePartial(i["clearance/auth_component/mobile/_icons_holder"],e,{name:"clearance/auth_component/mobile/_icons_holder",data:n,indent:"    ",helpers:t,partials:i}))?a:"")+"    <input autocomplete='"+this.escapeExpression(this.lambda(null!=(a=null!=e?e.fields:e)?a.autocomplete:a,e))+"' class='text-field js-input-code-auth' disabled name='code' placeholder='"+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.fields:e)?a.withoutPlaceholder:a,{name:"unless",hash:{},fn:this.program(5,n,0),inverse:this.noop,data:n}))?a:"")+"' type='text' value='"+this.escapeExpression(this.lambda(null!=(a=null!=(a=null!=e?e.fields:e)?a.values:a)?a.auth_code:a,e))+"'>\n  </div>\n  <div class='success-block js-success-message'></div>\n  <div class='error-block js-error-message'></div>\n</div>"},usePartial:!0,useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/mobile/fields/_email",Handlebars.template({1:function(e,t,i,n){var a;return"  <div class='label'>\n    <label class='"+(null!=(a=(t.isRequired||e&&e.isRequired||t.helperMissing).call(e,"email",{name:"isRequired",hash:{},fn:this.program(2,n,0),inverse:this.noop,data:n}))?a:"")+"'>\n      E-mail\n    </label>\n  </div>\n"},2:function(){return"required"},4:function(){return"\u0412\u0430\u0448 e-mail"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='form-group js-group-email-auth' data-invalid-data-message='\u0410\u0434\u0440\u0435\u0441 \u0438\u043c\u0435\u0435\u0442 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442' data-required-data-message='\u041d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c' data-type='email'>\n"+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.fields:e)?a.withoutLabels:a,{name:"unless",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"  <div class='text-field-wrapper'>\n"+(null!=(a=this.invokePartial(i["clearance/auth_component/mobile/_icons_holder"],e,{name:"clearance/auth_component/mobile/_icons_holder",data:n,indent:"    ",helpers:t,partials:i}))?a:"")+"    <input autocomplete='"+this.escapeExpression(this.lambda(null!=(a=null!=e?e.fields:e)?a.autocomplete:a,e))+"' class='text-field js-input-email-auth' name='email' placeholder='"+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.fields:e)?a.withoutPlaceholder:a,{name:"unless",hash:{},fn:this.program(4,n,0),inverse:this.noop,data:n}))?a:"")+"' type='email' value='"+this.escapeExpression(this.lambda(null!=(a=null!=(a=null!=e?e.fields:e)?a.values:a)?a.email:a,e))+"'>\n  </div>\n  <div class='error-block js-error-message'></div>\n</div>"},usePartial:!0,useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/mobile/fields/_multiple",Handlebars.template({1:function(e,t,i,n){var a;return"  <div class='label'>\n    <label class='"+(null!=(a=(t.isRequired||e&&e.isRequired||t.helperMissing).call(e,"multiple",{name:"isRequired",hash:{},fn:this.program(2,n,0),inverse:this.noop,data:n}))?a:"")+"'>\n      \u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u043b\u0438 e-mail\n    </label>\n  </div>\n"},2:function(){return"required"},4:function(){return"Email \u0438\u043b\u0438 \u0442\u0435\u043b\u0435\u0444\u043e\u043d"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='form-group js-group-multiple-auth' data-invalid-data-message='\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442' data-required-data-message='\u041d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c' data-type='multiple'>\n"+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.fields:e)?a.withoutLabels:a,{name:"unless",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"  <div class='text-field-wrapper'>\n"+(null!=(a=this.invokePartial(i["clearance/auth_component/mobile/_icons_holder"],e,{name:"clearance/auth_component/mobile/_icons_holder",data:n,indent:"    ",helpers:t,partials:i}))?a:"")+"    <input autocomplete='"+this.escapeExpression(this.lambda(null!=(a=null!=e?e.fields:e)?a.autocomplete:a,e))+"' class='text-field js-input-multiple-auth' name='email_or_phone' placeholder='"+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.fields:e)?a.withoutPlaceholder:a,{name:"unless",hash:{},fn:this.program(4,n,0),inverse:this.noop,data:n}))?a:"")+"' type='text' value='"+this.escapeExpression(this.lambda(null!=(a=null!=(a=null!=e?e.fields:e)?a.values:a)?a.multiple:a,e))+"'>\n  </div>\n  <div class='error-block js-error-message'></div>\n</div>\n<div class='js-existing-users-container'></div>"},usePartial:!0,useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/mobile/fields/_name",Handlebars.template({1:function(){return"dn"},3:function(e,t,i,n){var a;return"  <div class='label'>\n    <label class='"+(null!=(a=(t.isRequired||e&&e.isRequired||t.helperMissing).call(e,"name",{name:"isRequired",hash:{},fn:this.program(4,n,0),inverse:this.noop,data:n}))?a:"")+"'>\n      \u0412\u0430\u0448\u0435 \u0438\u043c\u044f\n    </label>\n  </div>\n"},4:function(){return"required"},6:function(){return"\u0412\u0430\u0448\u0438 \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u0438 \u0438\u043c\u044f"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='form-group js-group-name-auth "+(null!=(a=(t.isHiddenByDefault||e&&e.isHiddenByDefault||t.helperMissing).call(e,"name",{name:"isHiddenByDefault",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"' data-invalid-data-message='\u0424\u0418\u041e \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b, \u0442\u043e\u0447\u043a\u0438 \u0438 \u0434\u0435\u0444\u0438\u0441\u044b' data-required-data-message='\u041d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c' data-type='name'>\n"+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.fields:e)?a.withoutLabels:a,{name:"unless",hash:{},fn:this.program(3,n,0),inverse:this.noop,data:n}))?a:"")+"  <div class='text-field-wrapper'>\n"+(null!=(a=this.invokePartial(i["clearance/auth_component/mobile/_icons_holder"],e,{name:"clearance/auth_component/mobile/_icons_holder",data:n,indent:"    ",helpers:t,partials:i}))?a:"")+"    <input autocomplete='"+this.escapeExpression(this.lambda(null!=(a=null!=e?e.fields:e)?a.autocomplete:a,e))+"' class='text-field js-input-name-auth' maxlength='"+this.escapeExpression(this.lambda(null!=(a=null!=(a=null!=e?e.fields:e)?a.maxlength:a)?a.name:a,e))+"' name='name' placeholder='"+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.fields:e)?a.withoutPlaceholder:a,{name:"unless",hash:{},fn:this.program(6,n,0),inverse:this.noop,data:n}))?a:"")+"' type='text' value='"+this.escapeExpression(this.lambda(null!=(a=null!=(a=null!=(a=null!=e?e.fields:e)?a.values:a)?a.profile_attributes:a)?a.name:a,e))+"'>\n  </div>\n  <div class='error-block js-error-message'></div>\n</div>"},usePartial:!0,useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/mobile/fields/_password",Handlebars.template({1:function(){return"dn"},3:function(){return"  <div class='label'>\n    <label class='required'>\u041f\u0430\u0440\u043e\u043b\u044c</label>\n  </div>\n"},5:function(){return"\u041f\u0430\u0440\u043e\u043b\u044c - \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 4 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='form-group js-group-password-auth "+(null!=(a=(t.isHiddenByDefault||e&&e.isHiddenByDefault||t.helperMissing).call(e,"password",{name:"isHiddenByDefault",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"' data-invalid-data-message='"+this.escapeExpression(this.lambda(null!=(a=null!=(a=null!=e?e.data:e)?a.messages:a)?a.invalidPasswordErrorMessage:a,e))+"' data-required-data-message='\u041d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c' data-success-message='\u0412\u0430\u043c \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u043f\u0438\u0441\u044c\u043c\u043e \u0441 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\u043c\u0438 \u043f\u043e \u0441\u043c\u0435\u043d\u0435 \u043f\u0430\u0440\u043e\u043b\u044f.' data-type='password'>\n"+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.fields:e)?a.withoutLabels:a,{name:"unless",hash:{},fn:this.program(3,n,0),inverse:this.noop,data:n}))?a:"")+"  <div class='text-field-wrapper'>\n"+(null!=(a=this.invokePartial(i["clearance/auth_component/mobile/_icons_holder"],e,{name:"clearance/auth_component/mobile/_icons_holder",data:n,indent:"    ",helpers:t,partials:i}))?a:"")+"    <input autocomplete='"+this.escapeExpression(this.lambda(null!=(a=null!=e?e.fields:e)?a.autocomplete:a,e))+"' class='text-field js-input-password-auth' name='password' placeholder='"+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.fields:e)?a.withoutPlaceholder:a,{name:"unless",hash:{},fn:this.program(5,n,0),inverse:this.noop,data:n}))?a:"")+"' type='password' value='"+this.escapeExpression(this.lambda(null!=(a=null!=(a=null!=e?e.fields:e)?a.values:a)?a.password:a,e))+"'>\n  </div>\n  <span class='password-link dn js-restore-password-auth'>\n    \u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c\n  </span>\n  <span class='password-link dn js-get-code-auth'>\n    \u0412\u044b\u0441\u043b\u0430\u0442\u044c \u043a\u043e\u0434 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438\n  </span>\n  <div class='success-block js-success-message'></div>\n  <div class='error-block js-error-message'></div>\n</div>"},usePartial:!0,useData:!0}))}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/mobile/fields/_phone",Handlebars.template({1:function(e,t,i,n){var a;return"  <div class='label'>\n    <label class='"+(null!=(a=(t.isRequired||e&&e.isRequired||t.helperMissing).call(e,"phone",{name:"isRequired",hash:{},fn:this.program(2,n,0),inverse:this.noop,data:n}))?a:"")+"'>\n      \u0422\u0435\u043b\u0435\u0444\u043e\u043d\n    </label>\n  </div>\n"},2:function(){return"required"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='form-group js-group-phone-auth' data-invalid-data-message='\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u043c\u0435\u0435\u0442 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442' data-required-data-message='\u041d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c' data-type='phone' data-unique-data-message='\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043e\u043c \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d \u043d\u0430 \u0434\u0440\u0443\u0433\u043e\u0439 email. \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0440\u0443\u0433\u043e\u0439 \u0442\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u043b\u0438 email.'>\n"+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.fields:e)?a.withoutLabels:a,{name:"unless",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"  <div class='text-field-wrapper'>\n"+(null!=(a=this.invokePartial(i["clearance/auth_component/desktop/_icons_holder"],e,{name:"clearance/auth_component/desktop/_icons_holder",data:n,indent:"    ",helpers:t,partials:i}))?a:"")+"    <input autocomplete='"+this.escapeExpression(this.lambda(null!=(a=null!=e?e.fields:e)?a.autocomplete:a,e))+"' class='text-field js-input-phone-auth' name='phone' type='tel' value='"+this.escapeExpression(this.lambda(null!=(a=null!=(a=null!=e?e.fields:e)?a.values:a)?a.phone:a,e))+"'>\n  </div>\n  <div class='error-block js-error-message'></div>\n</div>\n<div class='js-existing-users-container'></div>"},usePartial:!0,useData:!0}))}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["clearance/auth_component/mobile/form"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a,s;return"<form class='"+this.escapeExpression((s=null!=(s=t.formClass||(null!=e?e.formClass:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"formClass",hash:{},data:n}):s))+" auth-component js-auth-component "+this.escapeExpression((t.fromCamelToDash||e&&e.fromCamelToDash||t.helperMissing).call(e,null!=e?e.contentType:e,{name:"fromCamelToDash",hash:{},data:n}))+"' novalidate='true'>\n"+(null!=(a=this.invokePartial(i["clearance/auth_component/mobile/_body"],e,{name:"clearance/auth_component/mobile/_body",data:n,indent:"  ",helpers:t,partials:i}))?a:"")+(null!=(a=this.invokePartial(i["clearance/auth_component/mobile/_footer"],e,{name:"clearance/auth_component/mobile/_footer",data:n,indent:"  ",helpers:t,partials:i}))?a:"")+"</form>"},usePartial:!0,useData:!0}),this.HandlebarsTemplates["clearance/auth_component/mobile/form"]}.call(this),function(){Handlebars.registerPartial("clearance/auth_component/mobile/orientation/_vertical",Handlebars.template({1:function(e,t,i,n,a,s){var o;return null!=(o=this.invokePartial((t.renderField||e&&e.renderField||t.helperMissing).call(e,n&&n.index,{name:"renderField",hash:{},data:n}),e,{hash:{data:null!=s[1]?s[1].data:s[1],fields:null!=s[1]?s[1].fields:s[1]},data:n,helpers:t,partials:i}))?o:""},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n,a,s){var o;return null!=(o=t.each.call(e,null!=(o=null!=e?e.fields:e)?o.set:o,{
name:"each",hash:{},fn:this.program(1,n,0,a,s),inverse:this.noop,data:n}))?o:""},usePartial:!0,useData:!0,useDepths:!0}))}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["clearance/auth_component/mobile/simple"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='auth-component clearfix js-auth-component "+this.escapeExpression((t.fromCamelToDash||e&&e.fromCamelToDash||t.helperMissing).call(e,null!=e?e.contentType:e,{name:"fromCamelToDash",hash:{},data:n}))+"'>\n"+(null!=(a=this.invokePartial(i["clearance/auth_component/mobile/_body"],e,{name:"clearance/auth_component/mobile/_body",data:n,indent:"  ",helpers:t,partials:i}))?a:"")+"</div>"},usePartial:!0,useData:!0}),this.HandlebarsTemplates["clearance/auth_component/mobile/simple"]}.call(this),app.modules.authComponent=function(e){function t(e,t){return t=t||app.config.currentUser,!!pn.getUserAttribute(e,t)}function i(e){return e.charAt(0).toUpperCase()+e.substring(1)}function n(e,t,n){return t=t||"field",e.split(",").map(function(e){return $.trim(e)+i(t)+(n?"":":not(:disabled)")}).join(",")}function a(e,t){return n(mt("fields."+e).join(","),t||"field")}function s(e){return d(n(e))}function o(e,t){return u(n(e,t,!0)).map(function(e){return e.replace(/\./,"")}).join(" ")}function r(e,t){return d(a(e,t))}function l(e){var t=":",i=e.split(t);return{name:i[0],state:i.filter(function(e,t){return t}).map(function(e){return t+e}).join("")}}function c(e){var t=l(e);return qi[t.name]+t.state}function u(e){return e.split(",").map(function(e){return c($.trim(e))})}function d(e){return u(e).join(",")}function h(e){return Mi?Mi.find(d(e)):$()}function p(e){return $.extend({beforeSend:function(){$doc.trigger("getProcess:authComponent")},complete:function(){$doc.trigger("getComplete:authComponent")}},e)}function f(e){return $.ajax(p(e))}function m(e){h("existingUsersContainer").html(HandlebarsTemplates[Wi+"/"+X()+"/existing_users"]({users:e}))}function g(e){Mi.data({valid:!!e}).toggleClass("invalid-auth",!e)}function v(){h("existingUsersContainer").empty()}function b(e,t){var i=he(e),n=i.data({valid:!!t}).data();t?qe(i):He(Ne({errorAttribute:n.type,message:n.invalidDataMessage}))}function y(){qe(),Me(),P("phoneField, emailField",!1),v(),oi().prop({readonly:!1}),w(!0)}function _(e){t("email")?(he(h("emailField").val(e.email)).data({valid:!0}),he(h("phoneField").prop({readonly:e.exists})).data({valid:!0})):(he(h("phoneField").val(e.phone)).data({valid:!0}),he(h("emailField").prop({readonly:e.exists})).data({valid:!0}))}function w(e,t,i){mt("withoutSpinner")||(i?Se(i):Mi).toggleClass(t||Ui.loading,!!e)}function x(e,t){t=!!t,h("passwordGroup").toggleClass("dn",!e||t),h("codeGroup").toggleClass("dn",e||t),P(["codeField",e||t],["passwordField",!e||t])}function k(e){var i=t("email",e);h("restorePasswordLink").toggleClass("dn",!e||!i),h("sendCodeLink").toggleClass("dn",!e||i)}function C(e){e[0].split(",").forEach(function(t){h($.trim(t)).prop({disabled:e[1]})})}function P(){var e=arguments;Array.isArray(e[0])?Array.prototype.slice.call(e).forEach(C):C(e)}function T(){return Object.keys(an).map(function(e){return an[e]}).join(" ")}function D(e){return e?an.signIn:an.signUp}function S(){return(app.config.isUserSigned&&!t("sid")||mt("simpleRegistration"))&&!Fi}function A(e){return e||app.config.isUserSigned&&!pn.isSignedBySID()}function j(e){F(D(A(e)))}function E(){return Mi.removeClass(T())}function I(e){return!e.filter(function(e){return"email"===e.errorAttribute||"phone"===e.errorAttribute}).length}function N(){F(mt("contentType"))}function F(e){E().addClass(e)}function M(e){h(a("visibleIfDataCorrect","group")).removeClass("dn"),x(!0,S()),k(e),P("nameField",!!e),h(a("visibleForNewUsers","group")).toggleClass("dn",!!e),h("userField").val(e?e.id:""),P("userField",!e),mt("toggleContent")&&j(e)}function L(e){e.forEach(function(e){Ti(h(e+"Field"))})}function R(e,t){Fi=e,w(!1),g(e),We({invalid:"toCheckFormat"}).always(function(t){t&&!I(t)||M(e)}),t&&t(e)}function O(e,t){return $.extend(Object.keys(e).reduce(function(t,i){return t[i]=$.trim(e[i]),t},{}),{all:!t})}function H(e,t){return f({url:app.config.api.usersURL,data:O({phone:e,email:t})})}function z(e){return f({url:app.config.api.usersURL,data:O({email:e})})}function B(e,t){return f({url:app.config.api.usersURL,data:t?O({contacts:e},!0):O({phone:e})})}function q(e){var t=$.Deferred();return z(e).then(function(e){var i=e.users&&e.users[0];t.resolve({type:i?Zi.foundByEmail:Zi.notFound,user:i})}),t}function U(e){var t=$.Deferred();return B(e).then(function(i){i.users.length?t.resolve({type:Zi.foundInUsers,user:i.users[0]}):B(e,!0).then(function(e){t.resolve({type:e.users.length?Zi.foundInContacts:Zi.notFound,users:e.users})})}),t}function W(e,t){var i=$.Deferred();return H(e,t).then(function(n){n.users.length?i.resolve({type:Zi.foundByPhoneAndEmail,user:n.users[0]}):z(t).then(function(t){var n=t.users;n.length?B(e).then(function(e){e.users.length?i.resolve({type:Zi.foundByEmailAndAlsoByPhone,user:n[0]}):i.resolve({type:Zi.foundByEmailButNotByPhone,user:n[0]})}):i.resolve({type:Zi.notFound,phone:e})})}),i}function G(e){switch(e.type){case Zi.foundByEmailButNotByPhone:case Zi.foundByPhoneAndEmail:R(e.user,function(t){Jt(Ji.search,{type:e.type===Zi.foundByEmailButNotByPhone?en.emailButNotPhone:en.emailAndPhone,user:t}),P("phoneField",!Y("phone")&&t&&t.phone)});break;case Zi.foundByEmailAndAlsoByPhone:R(e.user,function(){He(Ne({errorAttribute:"phone",message:h("phoneGroup").data("unique-data-message")})),h(a("visibleIfDataCorrect","group")).addClass("dn"),g()});break;case Zi.notFound:return U(e.phone).then(V)}}function V(e){switch(e.type){case Zi.foundInUsers:R(e.user,function(){Jt(Ji.search,{type:en.phoneInUsers,user:e.user}),P("emailField",t("email",e.user))});break;case Zi.foundInContacts:R(null,function(){Jt(Ji.search,{type:en.phoneInContacts,users:e.users}),m(e.users)});break;case Zi.notFound:R(null,function(){Jt(Ji.search,{type:en.phone,user:null}),g(!0)})}}function K(e){switch(e.type){case Zi.foundByEmail:case Zi.notFound:R(e.user,function(e){Jt(Ji.search,{type:en.email,user:e||null}),P("phoneField",!Y("phone")&&e&&e.phone),g(!0)})}}function Y(e){return~mt("fields.required").indexOf(e)}function X(){return app.config.isMobile?"mobile":"desktop"}function Q(){var e=$.trim(h("phoneField").val()),t=$.trim(h("emailField").val());return e&&t?W(e,t).then(G):e?U(e).then(V):t?q(t).then(K):(R(null,J),$.Deferred().resolve())}function J(){var e=mt("fields.hiddenByDefault");e.length&&Z(e),N()}function Z(e){e.forEach(function(e){var t=e.split(":");ee(t[0],t[1])})}function ee(e,i){i&&!t(i)||h(n(e,"group")).addClass("dn")}function te(e){return/@/.test(e.val())?on[1]:on[0]}function ie(e){return e=e||on.join(","),{fieldClassName:o(e),groupClassName:o(e,"group")}}function ne(e){var t=ie();he(e.removeClass(t.fieldClassName)).data({type:"multiple"}).removeClass(t.groupClassName)}function ae(e,t){he(e).data({type:t})}function se(e,t){e.attr({name:t})}function oe(e,t){var i=ie(t);he(e.addClass(i.fieldClassName)).addClass(i.groupClassName)}function re(e){var t=te(e);ae(e,t),se(e,t),oe(e,t)}function le(e){return e=e||h("multipleField"),ne(e),re(e),e}function ce(e){var t,i=$.trim(e.val()),n=$.Deferred();return i?(t=he(e).data("type"),app.modules.userValidationService.validate(i,t,"phone"===t?{type:"mobile"}:undefined).then(function(t){return t.valid?n.resolve(e):n.reject(e)},function(){return n.reject(e)})):n.resolve(e)}function ue(e){b(e),R(null,function(){h(a("visibleIfDataCorrect","group")).addClass("dn")})}function de(e){var t=$(this);return Mi=t.closest(qi.component),e(t)}function he(e){return e.closest('[class*="js-group-"]')}function pe(e){return he(e).is(qi.multipleGroup)?le(e):e}function fe(e){return Jt(Ji.processFieldData,e),Wt(e)?Gt(e).then(Q):Gt(e)}function me(){Jt(Ji.afterFieldDataProcessed)}function ge(e){fe(e).then(me)}function ve(e){de.call(this,function(t){be(t)&&clearTimeout(Hi),"change"===e.type?ge(t):Hi=setTimeout(function(){ge(t)},500)})}function be(e){if(e&&Li)return e[0]===Li[0]}function ye(){de.call(this,Te)}function _e(){de.call(this,function(){P("userExistsButton",!1)})}function we(){de.call(this,function(){g(!0),v(),$doc.trigger("denyUser:authComponent")})}function $e(){de.call(this,function(){var e=h("userExistRadio:checked").data();e.exists=!0,R(e,function(e){_(e),v()}),$doc.trigger("confirmUser:authComponent")})}function xe(e){return $.post(e,{user_id:h("userField").val()})}function ke(){Oi=!h("passwordField").val()}function Ce(e){return!Oi&&e.is(qi.passwordField)}function Pe(e){Ce(e)&&ke()}function Te(e){Li=pe(e),Pe(e)}function De(){de.call(this,function(e){var t=e.addClass("dn").is(qi.restorePasswordLink);qe(h("passwordGroup, codeGroup")),xe(t?app.config.api.passwordURL:app.config.api.authCodeURL).then(function(){var e=h((t?"password":"code")+"Group");x(t),Be(e,e.data("success-message"),"success")}).always(function(){$doc.trigger("generateCodeComplete:authComponent")})})}function Se(e){var t=e.find(qi.component);return Mi=t}function Ae(e){var t=h(e+"Field");return~mt("fields.toSynchronize").indexOf(e)&&t.not("[readonly], [disabled]")&&!t.data("no_synchronization")}function je(e){$.each(e,function(e,t){t&&Ae(e)&&fe(h(e+"Field").val(t))})}function Ee(){de.call(this,function(e){e.data({no_synchronization:!0})})}function Ie(e,t){return t.map(function(t,i){var n,a=$(i),s=he(a).data();switch(e){case"invalid":n=$.trim(a.val())&&!s.valid&&Ne({message:s.invalidDataMessage,errorAttribute:s.type});break;case"required":n=!$.trim(a.val())&&Ne({message:s.requiredDataMessage,errorAttribute:s.type})}return n}).get().filter(function(e){return e})}function Ne(e){return{status:422,message:e.message,errorAttribute:e.errorAttribute,name:"ValidationError"}}function Fe(){return mt("selectors.flashMessage")?$(mt("selectors.flashMessage")):h("flashMessage")}function Me(e,t){e?Fe().show().addClass(t?"with-success":"with-error").empty().append($("<span>").text(e)):Fe().hide().removeClass("with-success, with-error").empty()}function Le(e){try{return JSON.parse(e)}catch(e){throw e}}function Re(e){if(e)return Array.isArray(e)?e.filter(function(e){return e.base}).map(function(e){return e.base}).join("<br>"):e.base}function Oe(e){if(e)return"string"==typeof e&&(e=Le(e)),Re(e.errors)}function He(e){Array.isArray(e)?e.forEach(ze):ze(e)}function ze(e){"ValidationError"===e.name?Be(h(e.errorAttribute+"Group"),e.message):Me(Oe(e.responseText)||app.config.api.errorMessages[e.status]||mt("error")||app.config.api.errorMessages["default"])}function Be(e,t,i){i=i||"error",e.addClass("with-"+i).find(".js-"+i+"-message").empty().append($("<span>").text(t))}function qe(e){(e||Mi.find('[class*="js-group-"]:hidden')).removeClass("with-succes, with-error").find(".js-error-message, .js-success-message").empty()}function Ue(e){return Object.keys(e).reduce(function(t,i){return t.concat(Ie(i,h(a(e[i]))))},[])}function We(e){var t=$.Deferred(),i=Ue(e);return Mi.data("valid")&&!i.length?t.resolve():t.reject(i)}function Ge(e){return e.split(":")[0]}function Ve(e,t,i){return i?t.reduce(function(e,t){var n=t.split("."),a=n[0],s=n[1];return e[a][s]=e[a][s].filter(function(e){return e&&!~i.indexOf(Ge(e))}),e},e):e}function Ke(e){switch(e){case"name":return t("withName");default:return t(e)}}function Ye(){return Ki.filter(function(e){return Ke(e)})}function Xe(e){return e.reduce(function(e,t){return e.concat("password"===t?["password","code"]:t)},[])}function Qe(e,t){var i=e.fields;return e.fields=Object.keys(i).reduce(function(e,n){var a=i[n];return e[n]=Array.isArray(a)&&!dn.isInArray(n,t)?Xe(a):a,e},{}),e}function Je(e){return["set","required"].forEach(function(t){!~e.fields[t].indexOf("password")&&e.fields[t].push("password")}),e}function Ze(e,t){return!Array.isArray(e)||e.length<=t.length}function et(e,t){return e.map(function(e,i){return t[i]?t[i]:null})}function tt(e){var t=e.fields||{};return e.fields=Object.keys(t).reduce(function(e,i){var n=Bi.fields[i],a=t[i];return e[i]=Ze(n,a)?a:et(n,a),e},{}),e}function it(e){return e.fields=Object.keys(e.fields).reduce(function(t,i){return t[i]=Array.isArray(e.fields[i])?e.fields[i].filter(function(e){return!!e}):e.fields[i],t},{}),e}function nt(e){return"email"!==e?e:"multiple"}function at(e){return"phone"!==e}function st(e){return e.withMultipleField?(e.fields=Object.keys(e.fields).reduce(function(t,i){return t[i]=Array.isArray(e.fields[i])?e.fields[i].map(nt).filter(at):e.fields[i],t},{}),e):e}function ot(e,t){return st(Ve(Qe(Je(it($.extend(!0,{},Bi,e&&tt(e),t))),ln),["fields.toSynchronize","fields.toCheckFormat","fields.required","fields.visibleForNewUsers","fields.hiddenByDefault","fields.set"],Ye()))}function rt(e,t){t.fields.hints&&Mi.find(".js-qtip-icon").trigger("init:initQtip"),h("phoneField").trigger("init:phoneMask"),t.popup&&e.dialog($.extend({modal:!0,dialogClass:"auth-component-popup",resizable:!1},dn.mapAccordingToSchema(t.popup,Vi)))}function lt(e,t){return e.find(".js-social-networks-auth-component-container").trigger("render:socialNetworksAuthComponent",[{type:"simple",onSuccess:function(){t[Ji.completed](),mi()},onError:t[Ji.error],newSchema:t.newSocialRegistrationSchema}]).end()}function ct(e,t){return t.withSocialRegistration?lt(e,t):e}function ut(e,t){t=ot(t,e.data(Gi)),Se(ct(e.html($(HandlebarsTemplates[Wi+"/"+X()+"/"+t.type](ft(t))).data({options:t})),t)),Jt(Ji.mount),w(!0,Ui.initialLoading),rt(e,t),setTimeout(function(){Xt(),Vt().then(Qt.bind(null,e))},400)}function dt(e,i,n){t("email")||(ht(n),ut($(e.target),i))}function ht(e){e&&(un=e)}function pt(e){for(var t in e.content)e.content[t].tip&&(e.content[t].tip=e.content[t].tip.replace("%buttonText%",e.content[t].buttonText));return e}function ft(e){return pt($.extend({},$.extend(!0,{},app.config.authComponent||{},e),{platform:X()},un.data("authComponent")))}function mt(e){return Mi?e.split(".").reduce(function(e,t){return e[t]},Mi.data("options")):null}function gt(e,t){return!!e[t]}function vt(){return dn.filterObject($.extend(Fi?{id:Fi.id}:{id:pn.getUserAttribute("id"),email:h("emailField:not(:disabled)").val(),phone:h("phoneField:not(:disabled)").val(),name:h("nameField:not(:disabled)").val()},bt(),mt("getAdditionalUserData")(Mt())),gt)}function bt(){return{password:h("passwordField:not(:disabled)").val(),auth_code:h("codeField:not(:disabled)").val()}}function yt(e){return mt("simpleRegistration")&&(e.type=sn.simple),e}function _t(){var e=vt();return!Fi&&$doc.trigger("increaseRegistrationLevel:authComponent",[Mi]),Fi?hn.mergeUsers(e):hn.updateUser(pn.getUserAttribute("id"),e)}function wt(e){return hn.signUp(yt(Ot(e,!0)))}function $t(e){return hn.signIn(e).done(Pt)}function xt(e){return e?app.modules.crossDomainAuthBridge.authorizeUser():$.Deferred().resolve()}function kt(e){return e?$t(Ot()):wt()}function Ct(){return Jt(Ji.processUserData,Mi),We({invalid:"toCheckFormat",required:"required"}).then(Tt)}function Pt(){xt(mt("crossDomainAuth"))}function Tt(){return app.config.isUserSigned?Fi?Fi.id!==pn.getUserAttribute("id")?_t().then(Dt).then(St):$.Deferred().resolve({user:Fi}):_t():kt(!!Fi)}function Dt(e){var t,i=document.createElement("a");return i.href=e.url,t=$.extend({},e,{url:i.pathname}),At(t),It(t)}function St(e){return Et(),$t({perishable_token:e.perishable_token}).then(function(e){return $doc.trigger("userMergeComplete:authComponent"),e})}function At(e){IStorage.set("authComponent[mergeUserData]",JSON.stringify(e))}function jt(){var e=$.Deferred();return IStorage.get("authComponent[mergeUserData]",function(t){t?e.resolve(JSON.parse(t)):e.reject()}),e}function Et(){IStorage.set("authComponent[mergeUserData]","")}function It(e){return dn.listenProcess({url:location.protocol+"//"+location.host+e.url,pid:e.pid,rejectWith:"mergeUsersJobFailed"}).fail(Et)}function Nt(){return zi&&Fi?Xi.merge:zi?Xi.increase:null}function Ft(){return Fi?Qi.signIn:zi?null:Qi.signUp}function Mt(e){return{prepareUserProcessType:Nt(),resultProcessType:Ft(),user:e||null}}function Lt(e){return h(e+"Field:not(:disabled)").val()}function Rt(){return{id:Lt("user"),email:Lt("email"),phone:Lt("phone"),password:Lt("password"),auth_code:Lt("code"),profile_attributes:Lt("name")&&{name:Lt("name")}}}function Ot(e,t){return e=e||{},dn.filterObject($.extend(!0,{},e.withSID?e:Rt(),!e.withSID&&t&&mt("getAdditionalUserData")(Mt())),function(e,t){return e[t]})}function Ht(){un.data("authComponent",{user:Ot()})}function zt(){return d("userField, nameField, emailField, phoneField, passwordField, codeField")}function Bt(e){return e.val().length}function qt(e){b(e,!0)}function Ut(){return $.when.apply(null,Array.prototype.slice.call(arguments).map(function(e){var t=h(e);return t.length&&Bt(t)&&Gt(t)}))}function Wt(e){return!~Yi.indexOf(he(e).data("type"))}function Gt(e){return Wt(e)?(y(),ce(pe(e)).done(qt).fail(ue)):ce(e).done(qt).fail(b)}function Vt(){var e=$.Deferred();return Ut("nameField","passwordField").always(function(){Ut("phoneField","emailField").then(Q).always(e.resolve)}),e}function Kt(e){return e.data({initialized:!0})}function Yt(){var e=mt("fields.selfCleared");e&&L(e)}function Xt(){mt("withMultipleField")&&le(),N(),Jt("onBeforeProcessDataOnRender")}function Qt(e){w(!1,Ui.initialLoading,e),Yt(),Ri=Ei(e),ke(),Jt(Ji.render,Kt(Se(e)))}function Jt(e){mt(e)&&mt(e).apply(null,Array.prototype.slice.call(arguments,1))}function Zt(e,t){pn.setConfigData(t.user),Me(),un.data(t.user),Ri(),w(),Jt(Ji.completed,Mt(t.user),Mi),e&&e.resolve()}function ei(e,t){qe(h("passwordGroup, codeGroup")),He(t),x(!0,S()),k(Fi),P("submitButton",!1),w(),Jt(Ji.error,t,Mi),e&&e.reject(t)}function ti(e,t){Se($(this)),fi(t)}function ii(e,t){Se($(this)),je(t),Ht()}function ni(e,t,i){i=i||{},wt(i.data?$.extend({withSID:i.withSID},i.data):i).done(function(e){ai(e,t,i)}).fail(t.reject)}function ai(e,t,i){pn.setConfigData(e.user),xt(i.crossDomainAuth).done(function(){t&&t.resolve()}).fail(function(e){t&&t.reject(e)})}function si(e){e.remove(),$(this).off("processUserData:authComponent synchronizeFields:authComponent unmount:authComponent")}function oi(){return h(a("toCheckFormat"))}function ri(e){return oi().is(e)}function li(){return Li&&ri(Li)?fe(Li):$.Deferred().resolve()}function ci(e){return"string"==typeof e?{act:e}:e}function ui(e){return Object.keys(e).reduce(function(t,i){var n=e[i].split("=");return t[i]={name:$.trim(n[0]),url:$.trim(n[1])||null},t},{})}function di(e){return"string"==typeof e?nn.act:Fi?nn.signIn:nn.signUp}function hi(e){var t=ui(ci(e)),i=di(e);switch(t[i].name){case tn.reload:return location.reload(!0);case tn.redirect:return dn.setLocationHref(t[i].url)}}function pi(e,t){e.done(gi.bind(t)).fail(vi.bind(t))}function fi(e){w(!0),zi=app.config.isUserSigned,li().always(function(){Ct().done(Zt.bind(null,e)).fail(ei.bind(null,e))})}function mi(){var e=mt("actionOnSuccess");e&&hi(e)}function gi(){$(this).trigger("afterAuthorizeWithSuccess:authComponent"),mi()}function vi(e){$(this).trigger("afterAuthorizeWithError:authComponent",[e])}function bi(){var e=$.Deferred();fi(e),pi(e,$(this))}function yi(e){e.preventDefault(),P("submitButton",!0),Jt("onSubmit"),bi.call(this)}function _i(){mt("popup")&&$(this).dialog("close")}function wi(){Ti($(this))}function $i(){Oi&&Di($(this))}function xi(){Si($(this))}function ki(){var e=h(n(he($(this)).data("type")));Ci(e),Pe(e)}function Ci(e){e.val("").trigger("input").focus()}function Pi(e,t){he(e).toggleClass(t,!!e.val())}function Ti(e){Pi(e,Ui.selfClearedFormGroup)}function Di(e){Pi(e,Ui.withToggledPasswordFormGroup)}function Si(){var e=h("passwordField");h("passwordField").attr({type:"text"===e.attr("type")?"password":"text"})}function Ai(e){return e&&(dn.invariant(e instanceof jQuery,cn.notJQueryObject,e),dn.invariant(ji(e),cn.notAuthComponent)),!!(e||Se($(this))).data("initialized")}function ji(e){return e.is(qi.component)}function Ei(e){return Mi.on("input change",r("toCheckFormat"),ve).on("blur",r("toSynchronize"),Ee).on("input",r("set"),ye).on("input",zt(),Ht).on("click",d("sendCodeLink, restorePasswordLink"),De).on("change",qi.userExistRadio,_e).on("click",qi.userDoesntExistButton,we).on("click",qi.userExistsButton,$e).on("submit",yi.bind(e)),mt("fields.selfCleared")&&Mi.on("click",qi.clearFieldIcon,ki).on(rn.join(" "),r("selfCleared"),wi),mt("withToggledPassword")&&Mi.on("click",qi.togglePasswordIcon,xi).on(rn.join(" "),qi.passwordField,$i),e.on("processUserData:authComponent",ti).on("synchronizeFields:authComponent",ii).on("subscribeOnFieldValue:authComponent",function(e,t,i){Mi.on("blur",s(t),i)}).on("unsubscribeFromFieldValue:authComponent",function(e,t,i){Mi.off("blur",s(t),i)}).on("close:authComponent",_i),un.on("processUserData:authComponent",ti.bind(e)).on("synchronizeFields:authComponent",ii.bind(e)).on("unmount:authComponent",si.bind(un,e)),function(){Se(e.addClass("processed-with-success")).off()}}function Ii(){jt().then(It).then(St)}function Ni(){$doc.on("render:authComponent",dt).on("register:authComponent",ni)}var Fi,Mi,Li,Ri,Oi,Hi,zi,Bi={type:"simple",fields:{set:["name","email","phone"],required:["name","email","phone"],toSynchronize:["name","email","phone"],toCheckFormat:["name","email","phone","password"],selfCleared:["email","phone"],maxlength:{name:200},autocomplete:"on",hiddenByDefault:[],visibleForNewUsers:["name"],visibleIfDataCorrect:[],hints:null,withoutLabels:!1,withoutPlaceholder:!1,inline:!1},formClass:"apress-form clearfix",buttonClass:"apress-button ab-default",orientation:"horizontal",selectors:{flashMessage:null},crossDomainAuth:!1,contentType:null,toggleContent:!1,withMultipleField:!1,withToggledPassword:!0,actionOnSuccess:null,popup:null,error:null,title:null,buttonText:null,simpleRegistration:!1,withoutSpinner:!1,getAdditionalUserData:function(){},withSocialRegistration:!1,newSocialRegistrationSchema:!1,onMount:function(){},onRender:function(){},onSearch:function(){},onCompleted:function(){},onProcessUserData:function(){},onProcessFieldData:function(){},onAfterFieldDataProcessed:function(){},onBeforeProcessDataOnRender:function(){},onSubmit:function(){},onError:function(){}},qi={component:".js-auth-component",userField:".js-input-user-auth",nameField:".js-input-name-auth",emailField:".js-input-email-auth",phoneField:".js-input-phone-auth",passwordField:".js-input-password-auth",codeField:".js-input-code-auth",multipleField:".js-input-multiple-auth",nameGroup:".js-group-name-auth",phoneGroup:".js-group-phone-auth",emailGroup:".js-group-email-auth",codeGroup:".js-group-code-auth",passwordGroup:".js-group-password-auth",multipleGroup:".js-group-multiple-auth",restorePasswordLink:".js-restore-password-auth",sendCodeLink:".js-get-code-auth",existingUsersContainer:".js-existing-users-container",userExistRadio:".js-user-exist-radio-auth",userExistsButton:".js-button-yes-users-exists",userDoesntExistButton:".js-button-no-users-exists",submitButton:".js-button-submit",flashMessage:".js-flash-message",clearFieldIcon:".js-icon-clear-field",togglePasswordIcon:".js-icon-toggle-password"},Ui={loading:"auth-component-loading",initialLoading:"auth-component-initial-loading",selfClearedFormGroup:"form-group-self-cleared",withToggledPasswordFormGroup:"form-group-with-toggled-password"},Wi="clearance/auth_component",Gi="auth-component",Vi={onClose:"close",className:"dialogClass"},Ki=["name","email","phone","password"],Yi=["name","password"],Xi={merge:"merge",increase:"increase"},Qi={signIn:"signIn",signUp:"signUp"},Ji={search:"onSearch",mount:"onMount",render:"onRender",processUserData:"onProcessUserData",processFieldData:"onProcessFieldData",afterFieldDataProcessed:"onAfterFieldDataProcessed",completed:"onCompleted",error:"onError"},Zi={foundByEmail:"FOUND_BY_EMAIL",foundByEmailButNotByPhone:"FOUND_BY_EMAIL_BUT_NOT_BY_PHONE",foundByPhoneAndEmail:"FOUND_BY_PHONE_AND_EMAIL",foundByEmailAndAlsoByPhone:"FOUND_BY_EMAIL_AND_ALSO_BY_PHONE",foundInContacts:"FOUND_IN_CONTACTS",notFound:"NOT_FOUND"},en={email:"email",emailAndPhone:"email&phone",emailButNotPhone:"email!phone",phoneInUsers:"phoneInUsers",phoneInContacts:"phoneInContacts",phone:"phone"},tn={reload:"reload",redirect:"redirect"},nn={signIn:"signIn",signUp:"signUp",act:"act"},an={signIn:"sign-in",signUp:"sign-up",common:"common"},sn={simple:"simple"},on=["phone","email"],rn=["input","blur"],ln=["toCheckFormat"],cn={notAuthComponent:"Argument should contain authorization component",notJQueryObject:"Argument should be present with jQuery object, instead got %s"},un=$("<store>"),dn=app.modules.applicationUtils,hn=app.modules.userAPI,pn=app.modules.userUtils;return $.extend(e,{load:function(){Object.keys(app.config.currentUser).length&&app.config.currentUser.email||Ii(),Ni()},isInitialized:Ai,processUserData:ti,reset:function(){Fi=null,Mi=null},loadMergeUserData:jt}),e}(app.modules.authComponent||{}),app.modules.authComponentContainer=function(e){function t(e){return"app.modules."+e+"AuthComponentContainer"}function i(e){var i=t(e),a=n.getFromObjectByPath(i,window);return e&&app.modules.applicationUtils.invariant(n.isPlainObject(a),"%s should be initialized",i),a}var n=app.modules.applicationUtils;return e.getComponentContainer=i,e}(app.modules.authComponentContainer||{}),app.modules.dynamicAuthComponent=function(e){function t(e){return d.component.replace("${type}",e)}function i(e){var t=c[e],i=t.containerName;return i?$.extend(!0,{},{popup:{}},app.modules.authComponentContainer.getComponentContainer(i).getOptions(),t):t}function n(e){return e||"sign-in"}function a(e){var n=$("."+t(e));if(app.modules.applicationUtils.invariant(c[e],"Need to set up config for auth component with %s type",e),n.length)return n.show().trigger("render:authComponent",[i(e)]);$("<div>").addClass(t(e)).appendTo("body").trigger("render:authComponent",[i(e)])}function s(e,t){a(n(t))}function o(){return app.modules.applicationUtils.invariant(app.modules.applicationUtils.getFromObjectByPath("authComponent.wrappers.dynamic",app.config),"Need to set up app.config.authComponent.wrappers.dynamic config."),app.modules.applicationUtils.invariant(app.modules.applicationUtils.isPlainObject(app.config.authComponent.wrappers.dynamic),"The value of component config should be a plain object."),app.config.authComponent.wrappers.dynamic}function r(e){e.preventDefault(),a(n($(this).data("authComponentType")))}function l(){$doc.on("click",u.item,r).on("show:dynamicAuthComponent",s)}var c,u={item:".js-show-dynamic-auth-component"},d={component:"auth-component-${type}"};return $.extend(e,{load:function(){c=o(),l()},reset:function(){c=null}}),e}(app.modules.dynamicAuthComponent||{}),app.modules.staticAuthComponent=function(e){function t(e){return $(m.component.replace("${type}",e))}function i(){return _.getFromObjectByPath("authComponent.wrappers.static",app.config)}function n(){return _.invariant(_.isPlainObject(f),"The value of component config should be a plain object."),Object.keys(f)}function a(e){b.push(e)}function s(e){var t=app.config.currentUser,i=app.modules.authComponentUtils.doesCurrentUserHaveData;if(!t)return!1;switch(e){case g.email:return i(v.email);case g.phone:return i(v.phone);case g.sid:return i(v.sid);case g.phoneAndEmail:return i([v.phone,v.email]);default:return!1}}function o(e){return $.extend({},y,f[e])}function r(e,t){var i=o(e);return s(i.requiredUserInfo)||i.forceRender&&!t||~b.indexOf(e)}function l(e){var t=f[e],i=t.containerName;return i?$.extend(!0,{},app.modules.authComponentContainer.getComponentContainer(i).getOptions(),t):t}function c(e,i){var n;r(e,i)||(n=t(e),n.length&&(o(e).cache&&a(e),n.trigger("render:authComponent",[l(e)])))}function u(e){e.forEach(c)}function d(){f&&u(n())}function h(e,t){_.invariant(t,"component type should be provided for static component"),c(t,!0)}function p(){$doc.on("forceRender:staticAuthComponent",h)}var f,m={component:".js-static-${type}-auth-component"},g={email:"email",phone:"phone",phoneAndEmail:"phone&email",sid:"sid"},v={email:"email",phone:"phone",sid:"sid"},b=[],y={requiredUserInfo:"email",cache:!0},_=app.modules.applicationUtils;return $.extend(e,{load:function(){f=i(),d(),p()},rerender:d,reset:function(){f=null,b=[]}}),e}(app.modules.staticAuthComponent||{}),app.modules.crossDomainAuthBridge=function(e){function t(e){return e+k}function i(e,i){return{type:t(e),payload:i}}function n(e){return $.post(app.config.ssoUsersSessionHandleSigninURL,{token:e})}function a(){return $.get(app.config.ssoUsersSessionRequestURL)}function s(){return w?w[0].contentWindow:window.parent}function o(e,t){return s().postMessage(i(e,t),"*"),$.Deferred().resolve()}function r(){app.config.isUserSigned?o("checkUser:anotherDomain",{currentUser:app.config.currentUser}):o("getAuthToken:anotherDomain")}function l(e){return app.config.isUserSigned&&app.config.currentUser.id===e}function c(){return $("<iframe>").addClass(x.iframe).attr({src:app.config.crossDomainIframe})}function u(e){return e.appendTo("body")}function d(){return u(c())}function h(e){return $.Deferred().resolve({crossdomainProcessCompleted:!0,currentUser:e&&e.currentUser})}function p(e){switch(e.type){case t("continueLoadModules:mainDomain"):return h(e.payload);case t("getAuthToken:mainDomain"):return a().then(m.bind(null,"anotherDomain"));case t("sendAuthToken:mainDomain"):return n(e.payload);case t("checkUser:anotherDomain"):return l(e.payload.currentUser.id)?o("continueLoadModules:mainDomain",{currentUser:e.payload.currentUser}):o("getAuthToken:mainDomain");case t("authorizeUser:anotherDomain"):case t("authorizeUser:mainDomain"):return n(e.payload).then(f.bind(null,t("authorizeUser:mainDomain")===e.type));case t("getAuthToken:anotherDomain"):return app.config.isUserSigned?a().then(m.bind(null,"mainDomain")):o("continueLoadModules:mainDomain")}}function f(e,t){var i=t.user;return e?h({currentUser:i}):o("continueLoadModules:mainDomain",{currentUser:i})}function m(e,t){return o("authorizeUser:"+e,t.token)}function g(e){e.originalEvent.data.type&&~e.originalEvent.data.type.indexOf(k)&&p(e.originalEvent.data).done(function(e){e&&e.crossdomainProcessCompleted&&(app.modules.userUtils.setConfigData(e.currentUser||{},"simple"),C.resolve())})}function v(){y(),r(),setTimeout(function(){C.resolve()},3e3)}function b(e,t,i){i.crossDomain&&(i.xhrFields={withCredentials:!i.declineCredentials},t.setRequestHeader("X-Requested-With","XMLHttpRequest"))}function y(){$(window).on("message",g),$(document).ajaxSend(b)}function _(){return w?r():w=d().one("load",v),C}var w,x={iframe:"cross-domain-auth-bridge js-cross-domain-auth-bridge"},k=":crossDomainAuthBridge",C=$.Deferred();return e.authorizeUser=_,e.listenParentWindow=y,e}(app.modules.crossDomainAuthBridge||{}),$(window).load(app.modules.crossDomainAuthBridge.listenParentWindow),app.modules.orderInPopupAuthComponentContainer=function(e){return e.getOptions=function(){return{onSearch:app.modules.orderForm.togglePhone,onError:function(){app.modules.orderForm.showFlashError()},onCompleted:function(){app.modules.orderForm.submit($(".js-order-form"),{authComponentCompleted:!0})},getAdditionalUserData:function(){return app.modules.orderForm.getUserAdditionalData()}}},e}(app.modules.orderInPopupAuthComponentContainer||{}),app.modules.fastOrderInPopupAuthComponentContainer=function(e){return e.getOptions=function(){return{onSearch:function(){!app.config.isMobile&&u_reRenderPopup()},onError:function(){app.modules.orderForm.showFlashError()},onCompleted:function(){app.modules.orderForm.submit($(".js-order-form"),{authComponentCompleted:!0})},getAdditionalUserData:function(){return app.modules.orderForm.getUserAdditionalData()}}},e}(app.modules.fastOrderInPopupAuthComponentContainer||{}),app.modules.dealsSubscriptionInPanelAuthComponentContainer=function(e){return e.getOptions=function(){return{onSearch:app.modules.dealsSubscriptionFormInPanel.onUserSearch,onError:app.modules.dealsSubscriptionFormInPanel.onSubscribe,onCompleted:function(){app.modules.dealsSubscriptionFormInPanel.onSubscribe()},getAdditionalUserData:function(){return{profile_attributes:{city_id:app.config.currentRegionCapitalId}}}}},e}(app.modules.dealsSubscriptionInPanelAuthComponentContainer||{}),app.modules.dealsSubscriptionInPopupAuthComponentContainer=function(e){return e.getOptions=function(){return{onError:app.modules.subscriptionsPopup.onSubscribe,onCompleted:function(){app.modules.subscriptionsPopup.onSubscribe()}}},e}(app.modules.dealsSubscriptionInPopupAuthComponentContainer||{}),app.modules.signInAuthComponentContainer=function(e){return e.getOptions=function(){return{getAdditionalUserData:function(){var e={profile_attributes:{city_id:app.config.currentRegionCapitalId}},t=document.querySelector(".js-sign-in-popup .js-input-phone-auth");return t&&t.value&&(e.profile_attributes.contacts=t.value),e}}},e}(app.modules.signInAuthComponentContainer||{}),
app.modules.reviewsAuthComponentContainer=function(e){return e.getOptions=function(){return{getAdditionalUserData:function(){return{profile_attributes:{city_id:app.config.currentRegionCapitalId}}}}},e}(app.modules.reviewsAuthComponentContainer||{}),app.modules.customerOrdersAPI=function(e){function t(e,t){var i={order:e};return t&&$.extend(i,t),$.ajax({url:app.config.api.customerOrdersURL,method:"post",data:i})}function i(e){return $.ajax({url:app.config.api.customerOrdersURL,method:"post",processData:!1,contentType:!1,data:e})}function n(e,t){return $.ajax({url:app.config.api.customerOrdersMessagesURL.replace("_id_",e),method:"post",data:{message:{text:t,message_type:"dialog"}}})}function a(e,t){return $.ajax({url:app.config.api.customerOrdersMessagesURL.replace("_id_",e),method:"get",data:t})}function s(e){return $.ajax({url:app.config.api.customerOrderUpdatedAtURL.replace("_id_",e)})}function o(e){var t,i={url:app.config.api.customerAppealURL,method:"POST",contentType:"application/json"};if(t=e.subjectId?{order:{company_id:e.companyId,items_attributes:[{subject_id:e.subjectId}]},target_action:{target_action_type:e.targetActionType,source_url:location.href}}:{order:{company_id:e.companyId},target_action:{target_action_type:e.targetActionType,source_url:location.href}},app.modules.recaptcha)return app.modules.recaptcha.sendOrderRequestWithToken("create_appeal_order",t,i);i.data=JSON.stringify(t),$.ajax(i)}function r(e){return $.ajax({url:app.config.api.customerOrdersDraftsUrl,type:"POST",data:{order:e}})}return $.extend(e,{createOrder:t,createOrderWithFile:i,createOrderMessage:n,getOrderMessages:a,getUpdatedAt:s,createAppealOrder:o,getOrderDraft:r})}(app.modules.customerOrdersAPI||{}),app.modules.sellerOrdersAPI=function(e){function t(e){return $.ajax({url:app.config.api.sellerOrdersURL,method:"post",processData:!1,contentType:!1,data:e})}return $.extend(e,{createOrderWithFile:t})}(app.modules.sellerOrdersAPI||{}),app.modules.customerOrdersUtils=function(e){function t(e){return e.companyId?app.config.isUserSigned?app.modules.customerOrdersAPI.createAppealOrder(e):app.modules.userUtils.signUp({withSID:!0}).then(app.modules.customerOrdersAPI.createAppealOrder.bind(null,e)):$.Deferred().reject()}function i(){var e=$.Deferred();return $doc.trigger("register:authComponent",[e,{withSID:!0,crossDomainAuth:app.config.crossDomainAuth}]),e}function n(e,t){return Array.isArray(t)?t.forEach(function(t){e=e.replace(t.key,t.value)}):e=e.replace(t.key,t.value),e}function a(){return"cosmos_client/"+(app.config.isMobile?"mobile/":"")}function s(){$(".js-body").addClass("lock-scroll")}function o(){$(".js-body").removeClass("lock-scroll")}function r(e){e.dialog("open")}function l(e){e.dialog("close")}function c(e){return u(e)||app.config.ordersUpdatesLocked}function u(e){return app.config.companyCommunicationShow&&!1===app.config.companyCommunicationShow[e]}function d(e,t,i){return app.config.ordersUpdatesLocked||t===i&&u(e)}return $.extend(e,{createAppealOrder:t,registerWithSID:i,replaceText:n,pathTemplateByPlatform:a,lockScroll:s,unlockScroll:o,openPopup:r,closePopup:l,isLockedPopup:c,isLockedRequestCompanyOrder:d})}(app.modules.customerOrdersUtils||{}),app.modules.ordersFactory=function(e){function t(){app.modules.customerOrdersUtils.createAppealOrder($.extend({},$(this).data(),$(".js-cosmos-create-order-data-container").data()))}function i(){$doc.on("click",".js-create-appeal-order",t)}return e.load=function(){i()},e}(app.modules.ordersFactory||{}),app.modules.ordersPriceTypeToggler=function(e){function t(e){r.find(l.togglerItem).each(function(){var t=$(this),i=n(e),a=t.data("type")===i;t.toggleClass("selected",!!a).find(l.togglerRadiobutton).prop({checked:!!a})})}function i(e,i){r=$(this).closest(l.togglerContainer),r.find(l.togglerItem).length>1&&t(i),s(i)}function n(e){var t=r.data("wholesale")["min-qty"];return!t||e<parseInt(t)?"retail":"wholesale"}function a(e){var t;r=e.closest(l.togglerContainer),t=r.data(e.closest(l.togglerItem).data("type")),r.find(l.togglerItem).toggleClass("selected").end().find(l.togglerQuantityField).val(t["min-qty"]).trigger("updateQuantity:ordersItem"),s(t["min-qty"])}function s(e){r.find(l.togglerMeasureUnit).each(function(){var t=$(this),i=n(e),a=t.data("type")===i;t.toggle(!!a).find(l.togglerMeasureUnits).prop({disabled:!a})})}function o(){$doc.on("change",l.togglerRadiobutton,function(){a($(this))}).on("changeQuantity:ordersPriceTypeToggler",l.togglerQuantityField,i)}var r,l={togglerContainer:".js-orders-price-type-toggler-container",togglerItem:".js-orders-price-type-toggler-item",togglerQuantityField:".js-orders-price-type-toggler-quantity-field",togglerRadiobutton:".js-orders-price-type-toggler-radiobutton",togglerMeasureUnit:".js-orders-price-type-toggler-measure-unit",togglerMeasureUnits:".js-orders-price-type-toggler-measure-units"};return e.load=function(){o()},e}(app.modules.ordersPriceTypeToggler||{}),app.modules.ordersItem=function(e){function t(e,t,n){var a={customer_region_id:t.customer_region_id};return delete t.customer_region_id,$.extend({},D[e],{url:D[e].url.replace("_id_",t.id),beforeSend:!n&&i.bind(null,t.cartItemId,"before"),data:{item:t,order:a},success:function(e){t.updateTotalEvent&&$doc.trigger(t.updateTotalEvent+":ordersItem",[e]).trigger(t.updateTotalEvent+":ordersCartItem",[e]),!n&&i(t.cartItemId,"after")}})}function i(e,t){j.trigger("toggleProcessing:ordersCartItem",[e,"before"===t])}function n(e,i,n){return $.ajax(t(e,i,n))}function a(e,t,i){n("add",i).done(function(e){t.resolve(e)})}function s(e,t,i){r(t),o($(e.target),i)}function o(e,t){v(e.html(d(t)))}function r(e){j=e}function l(e,t){var i=j.data("measure_units").filter(function(t){return t.id===e})[0];return i&&app.modules.applicationUtils.pluralize(t,[i.name,i.name_plural_1,i.name_plural_2,i.name_plural_2])}function c(e){return e?j.data("flatCart")[e].items:[j.data("item")]}function u(e,t){return $.extend(e,{hasRetailPrice:e.formatted_retail_price!==app.config.cartItemPriceAgreed,company:t&&j.data("flatCart")[t].company,cartItemID:t,wholesalePluralizedMeasureUnitName:e.wholesale_min_qty&&l(e.wholesale_measure_unit.id,e.wholesale_min_qty)})}function d(e){return c(e).reduce(function(t,i){return t.append(k(h(i,e)))},$("<div>"))}function h(e,t){var i=j.data();return $(HandlebarsTemplates[T]({item:u(e,t),measureUnits:i.measure_units,config:i.ordersItem}))}function p(e){e.remove()}function f(e){j.trigger("delete:ordersCartItem",[e.data("cartItemId")])}function m(e){return e.closest(P.component)}function g(e,t){$doc.trigger("update:ordersItem"),$(P.component+'[data-id="'+t.item.id+'"]').find(P.price).html(t.item.formatted_total)}function v(e){var t=e.find(P.fields.quantity),i=e.find(P.fields.measureUnits);t.extendedSpinner($.extend(t.data(S),{spin:y})).numeric({decimalPlaces:2,negative:!1}),i.selectric($.extend(i.data(A)))}function b(e){E=app.modules.applicationUtils.delayCall(n.bind(null,"update",e,!0))}function y(e,t){var i=t&&t.value||e.target.value||1;b({id:$(this).data(S).id,quantity:i,updateTotalEvent:"updateTotal"}),$(e.target).trigger("changeQuantity:ordersPriceTypeToggler",[i])}function _(){var e=m($(this));!e.siblings(P.component).length&&f(e),p(e)}function w(){n("delete",m($(this)).data()).done(_.bind(this))}function x(){E(),E=function(){}}function k(e){return e.on("click",P.deleteItem,w).on("mouseout",[P.quantityContainer,P.measureUnitsContainer].join(","),x).on("updateQuantity:ordersItem",P.fields.quantity,y)}function C(){$doc.on("render:ordersItem",s).on("add:ordersItem",a).on("updateTotal:ordersItem",g).on("input",P.fields.quantity,y)}var P={component:".js-orders-item",quantityContainer:".js-orders-item-count-container",measureUnitsContainer:".js-orders-item-measure-units-container",fields:{quantity:".js-orders-item-count",measureUnits:".js-orders-item-measure-units"},price:".js-orders-item-total",deleteItem:".js-orders-item-delete"},T="cosmos_client/cart/orders_item",D={add:{url:app.config.api.customerCartCartItemsURL,method:"POST"},update:{url:app.config.api.customerCartCartItemURL,method:"PUT"},"delete":{url:app.config.api.customerCartCartItemURL,method:"DELETE"}},S="spinnerOptions",A="selectricOptions",j=$("<store>"),E=function(){};return e.load=function(){C()},e}(app.modules.ordersItem||{}),app.modules.addOrdersItem=function(e){function t(e){var t=$.Deferred();return $doc.trigger("add:ordersItem",[t,e]),t}function i(){var e=$.Deferred();return $doc.trigger("get:applicationDataStore",[e,["measure_units"]]),e}function n(e,t){return $.extend(e,t)}function a(e){$(this).toggleClass(v.disabledItem,!!e)}function s(){return $.when(t(m.data(y)),i())}function o(){var e=$.Deferred();return $(g.counterContainer).trigger(w.getCounterValue,[e]),e}function r(){var e=$(this);if(!e.closest(".cke_editable").length){if(app.modules.customerOrdersUtils.isLockedPopup(e.data("type")))return void app.modules.closedOrderPopup.getPopup.call(this);p.call(this),o().done(l.bind(this)),a.call(this,!0),(app.config.isUserSigned?s.call(this):app.modules.customerOrdersUtils.registerWithSID().then(s.bind(this))).then(n).then(h).done(d.bind(this))}}function l(e){h({counterValue:e})}function c(){return 1===parseInt(m.data("item").quantity)}function u(){$(g.counterContainer).trigger(w.updateCounter,[parseInt(m.data("counterValue"))+1])}function d(e){var t=$(g.component).data("redirect-url");c()&&u(),a.call(this),$doc.trigger("update:ordersItem"),t?location.href=t:$doc.trigger("show:popupWithNewOrdersItem",[e])}function h(e){return m.data(e)}function p(){return m=$("<store>").data($.extend(!0,{},_,$(this).data(b)))}function f(){$doc.on("click",g.component,r)}var m,g={component:".js-add-orders-item",counterContainer:".js-orders-cart-counter-container"},v={disabledItem:"disabled"},b="addOrdersItemData",y="dataToAdd",_={counterValue:0},w={updateCounter:"update:ordersCartCounter",getCounterValue:"getValue:ordersCartCounter"};return e.load=function(){f()},e}(app.modules.addOrdersItem||{}),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["orders_cart/popup_with_new_orders_item"]=Handlebars.template({1:function(e){var t;return"            <a href='"+this.escapeExpression(this.lambda(null!=(t=null!=e?e.item:e)?t.subject_url:t,e))+"'>"+this.escapeExpression(this.lambda(null!=(t=null!=e?e.item:e)?t.name:t,e))+"</a>\n"},3:function(e){var t;return"            "+this.escapeExpression(this.lambda(null!=(t=null!=e?e.item:e)?t.name:t,e))+"\n"},5:function(e,t,i,n){var a;return"            <div class='orders-price-type-toggler-item js-orders-price-type-toggler-item "+(null!=(a=t["if"].call(e,null!=(a=null!=e?e.item:e)?a.wholesale_min_qty:a,{name:"if",hash:{},fn:this.program(6,n,0),inverse:this.noop,data:n}))?a:"")+"' data-type='retail'>\n              <label class='orders-price-type-toggler-label clearfix'>\n"+(null!=(a=t["if"].call(e,null!=(a=null!=e?e.item:e)?a.wholesale_min_qty:a,{name:"if",hash:{},fn:this.program(9,n,0),inverse:this.noop,data:n}))?a:"")+"                <span class='orders-price-type-toggler-price'>\n"+(null!=(a=t["if"].call(e,null!=(a=null!=e?e.item:e)?a.wholesale_min_qty:a,{name:"if",hash:{},fn:this.program(14,n,0),inverse:this.noop,data:n}))?a:"")+"                  "+this.escapeExpression(this.lambda(null!=(a=null!=e?e.item:e)?a.formatted_retail_price:a,e))+"\n                </span>\n              </label>\n            </div>\n"},6:function(e,t,i,n){var a;return null!=(a=t.unless.call(e,null!=(a=null!=e?e.item:e)?a["wholesale?"]:a,{name:"unless",hash:{},fn:this.program(7,n,0),inverse:this.noop,data:n}))?a:""},7:function(){return"selected"},9:function(e,t,i,n){var a;return(null!=(a=t.unless.call(e,null!=(a=null!=e?e.item:e)?a["wholesale?"]:a,{name:"unless",hash:{},fn:this.program(10,n,0),inverse:this.program(12,n,0),data:n}))?a:"")+"                <div class='orders-price-type-toggler-pseudo-radiobutton'></div>\n"},10:function(e){var t;return"                <input checked class='orders-price-type-toggler-radiobutton js-orders-price-type-toggler-radiobutton' name='orders-cart-price-item-"+this.escapeExpression(this.lambda(null!=(t=null!=e?e.item:e)?t.id:t,e))+"' type='radio'>\n"},12:function(e){var t;return"                <input class='orders-price-type-toggler-radiobutton js-orders-price-type-toggler-radiobutton' name='orders-cart-price-item-"+this.escapeExpression(this.lambda(null!=(t=null!=e?e.item:e)?t.id:t,e))+"' type='radio'>\n"},14:function(){return"                  \u0420\u043e\u0437\u043d\u0438\u0446\u0430:\n"},16:function(e,t,i,n){var a;return"            <div class='orders-price-type-toggler-item js-orders-price-type-toggler-item "+(null!=(a=t["if"].call(e,null!=(a=null!=e?e.item:e)?a.formatted_wholesale_price:a,{name:"if",hash:{},fn:this.program(17,n,0),inverse:this.noop,data:n}))?a:"")+"' data-type='wholesale'>\n              <label class='orders-price-type-toggler-label clearfix'>\n"+(null!=(a=t["if"].call(e,null!=(a=null!=e?e.item:e)?a.formatted_wholesale_price:a,{name:"if",hash:{},fn:this.program(19,n,0),inverse:this.noop,data:n}))?a:"")+"                <span class='orders-price-type-toggler-price'>\n                  \u041e\u043f\u0442:\n                  "+this.escapeExpression(this.lambda(null!=(a=null!=e?e.item:e)?a.formatted_wholesale_price:a,e))+"\n                </span>\n                <span class='orders-price-type-toggler-min-qty'>\n                  \u043e\u0442 "+this.escapeExpression(this.lambda(null!=(a=null!=e?e.item:e)?a.wholesale_min_qty:a,e))+" "+this.escapeExpression(this.lambda(null!=(a=null!=e?e.item:e)?a.wholesalePluralizedMeasureUnitName:a,e))+"\n                </span>\n              </label>\n            </div>\n"},17:function(e,t,i,n){var a;return null!=(a=t["if"].call(e,null!=(a=null!=e?e.item:e)?a["wholesale?"]:a,{name:"if",hash:{},fn:this.program(7,n,0),inverse:this.noop,data:n}))?a:""},19:function(e,t,i,n){var a;return(null!=(a=t["if"].call(e,null!=(a=null!=e?e.item:e)?a["wholesale?"]:a,{name:"if",hash:{},fn:this.program(10,n,0),inverse:this.program(12,n,0),data:n}))?a:"")+"                <div class='orders-price-type-toggler-pseudo-radiobutton'></div>\n"},21:function(){return"dn"},23:function(e){var t;return"                <div class='orders-price-type-toggler-measure-unit-disabled'>\n                  "+this.escapeExpression(this.lambda(null!=(t=null!=(t=null!=e?e.item:e)?t.measure_unit_object:t)?t.name:t,e))+"\n                </div>\n"},25:function(e,t,i,n){var a;return"              <div class='orders-price-type-toggler-measure-unit-disabled js-orders-price-type-toggler-measure-unit "+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.item:e)?a["wholesale?"]:a,{name:"unless",hash:{},fn:this.program(21,n,0),inverse:this.noop,data:n}))?a:"")+"' data-type='wholesale'>\n                "+this.escapeExpression(this.lambda(null!=(a=null!=(a=null!=e?e.item:e)?a.wholesale_measure_unit:a)?a.name:a,e))+"\n              </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='popup-with-new-orders-item js-popup-with-new-orders-item'>\n  <div class='popup-with-new-orders-item-header'>\u0422\u043e\u0432\u0430\u0440 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443</div>\n  <div class='orders-item js-orders-item' data-cart-item-id='"+this.escapeExpression(this.lambda(null!=(a=null!=e?e.item:e)?a.cartItemID:a,e))+"' data-id='"+this.escapeExpression(this.lambda(null!=(a=null!=e?e.item:e)?a.id:a,e))+"'>\n    <div class='orders-item-cell-container content'>\n      <div class='orders-item-cell name'>\n        <div class='orders-item-description-container'>\n          <p>\n"+(null!=(a=t["if"].call(e,null!=(a=null!=e?e.config:e)?a.extendedType:a,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.program(3,n,0),data:n}))?a:"")+"          </p>\n        </div>\n      </div>\n      <div class='orders-item-cell details'>\n        <div class='orders-price-type-toggler-container js-orders-price-type-toggler-container simple' data-retail='{\"min-qty\":1,\"measure-unit-id\":\""+this.escapeExpression(this.lambda(null!=(a=null!=(a=null!=e?e.item:e)?a.measure_unit_object:a)?a.id:a,e))+'","measure-unit-name":"'+this.escapeExpression(this.lambda(null!=(a=null!=(a=null!=e?e.item:e)?a.measure_unit_object:a)?a.name:a,e))+'"}\' data-wholesale=\'{"min-qty":"'+this.escapeExpression(this.lambda(null!=(a=null!=e?e.item:e)?a.wholesale_min_qty:a,e))+'","measure-unit-id":"'+this.escapeExpression(this.lambda(null!=(a=null!=(a=null!=e?e.item:e)?a.wholesale_measure_unit:a)?a.id:a,e))+'","measure-unit-name":"'+this.escapeExpression(this.lambda(null!=(a=null!=(a=null!=e?e.item:e)?a.wholesale_measure_unit:a)?a.name:a,e))+"\"}'>\n          <div class='orders-price-type-toggler-types'>\n"+(null!=(a=t["if"].call(e,null!=(a=null!=e?e.item:e)?a.formatted_retail_price:a,{name:"if",hash:{},fn:this.program(5,n,0),inverse:this.noop,data:n}))?a:"")+(null!=(a=t["if"].call(e,null!=(a=null!=e?e.item:e)?a.wholesale_min_qty:a,{name:"if",hash:{},fn:this.program(16,n,0),inverse:this.noop,data:n}))?a:"")+"          </div>\n          <div class='orders-price-type-toggler-quantity-content'>\n            <div class='orders-price-type-toggler-item-count-container js-orders-item-count-container'>\n"+(null!=(a=this.invokePartial(i["application/_spinner"],e,{name:"application/_spinner",hash:{max:99999,min:1,itemName:"ordersQuantity",itemID:null!=(a=null!=e?e.item:e)?a.id:a,validationMessage:"translation missing: ru.cosmos_client.orders_cart.templates.orders_cart_item.fields.quantity.spinner.validation_error",className:"js-orders-item-count js-orders-price-type-toggler-quantity-field",value:null!=(a=null!=e?e.item:e)?a.quantity:a},data:n,indent:"              ",helpers:t,partials:i}))?a:"")+"            </div>\n            <div class='orders-price-type-toggler-measure-unit-container'>\n              <div class='js-orders-price-type-toggler-measure-unit "+(null!=(a=t["if"].call(e,null!=(a=null!=e?e.item:e)?a["wholesale?"]:a,{name:"if",hash:{},fn:this.program(21,n,0),inverse:this.noop,data:n}))?a:"")+"' data-type='retail'>\n"+(null!=(a=t["if"].call(e,null!=(a=null!=(a=null!=e?e.item:e)?a.measure_unit_object:a)?a.id:a,{name:"if",hash:{},fn:this.program(23,n,0),inverse:this.noop,data:n}))?a:"")+"              </div>\n"+(null!=(a=t["if"].call(e,null!=(a=null!=e?e.item:e)?a.wholesale_min_qty:a,{name:"if",hash:{},fn:this.program(25,n,0),inverse:this.noop,data:n}))?a:"")+"            </div>\n          </div>\n          <div class='orders-item-cell total'>\n            <div class='orders-item-total-label'>\n              \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0442\u043e\u0432\u0430\u0440\u0430 \u043d\u0430 \u0441\u0443\u043c\u043c\u0443:\n            </div>\n            <span class='orders-item-total js-orders-item-total'>"+(null!=(a=this.lambda(null!=(a=null!=e?e.item:e)?a.formatted_total:a,e))?a:"")+"</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class='popup-with-new-orders-item-footer'>\n    <span class='apress-button ab-secondary js-close-popup-with-new-orders-item'>\n      \u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u043f\u043e\u043a\u0443\u043f\u043a\u0430\u043c\n    </span>\n    <a class='apress-button ab-default' href='"+this.escapeExpression(this.lambda(null!=(a=null!=e?e.config:e)?a.customerCartURL:a,e))+"'>\n      \u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044e\n    </a>\n  </div>\n  <div class='js-orders-cart-popup-similar-products' data-content-url='"+this.escapeExpression(this.lambda(null!=(a=null!=e?e.config:e)?a.similarProductsURL:a,e))+"'></div>\n</div>"},usePartial:!0,useData:!0}),this.HandlebarsTemplates["orders_cart/popup_with_new_orders_item"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["orders_cart/similar_products"]=Handlebars.template({1:function(e,t,i,n){var a;return"    <li class='sp-item'>\n      <a class='sp-link' href='"+this.escapeExpression(this.lambda(null!=e?e.portal_url:e,e))+"'>\n"+(null!=(a=t["if"].call(e,null!=e?e.discount_percent:e,{name:"if",hash:{},fn:this.program(2,n,0),inverse:this.noop,data:n}))?a:"")+"        <div class='sp-img-wrap'>\n          <img class='sp-image' src='"+this.escapeExpression(this.lambda(null!=e?e.image:e,e))+"'>\n        </div>\n        <div class='sp-name'>"+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"</div>\n        <div class='sp-price'>"+(null!=(a=this.lambda(null!=e?e.html_price:e,e))?a:"")+"</div>\n      </a>\n    </li>\n"},2:function(e){var t;return"        <div class='discount-marker'>\n          -"+(null!=(t=this.lambda(null!=e?e.discount_percent:e,e))?t:"")+"%\n        </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='similar-products-order-cart js-popup-with-new-orders-item-similar-products'>\n  <div class='sp-header'>\u0412\u0430\u0441 \u043c\u043e\u0433\u0443\u0442 \u0437\u0430\u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043e\u0432\u0430\u0442\u044c:</div>\n  <ul class='sp-list js-popup-with-new-orders-item-sp-carousel'>\n"+(null!=(a=t.each.call(e,null!=e?e.data:e,{name:"each",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"  </ul>\n</div>"},useData:!0}),this.HandlebarsTemplates["orders_cart/similar_products"]}.call(this),app.modules.popupWithNewOrdersItem=function(e){function t(){return $(HandlebarsTemplates["orders_cart/popup_with_new_orders_item"]({config:l.data("popupWithNewOrdersItemData"),item:l.data("item")})).dialog({modal:!0,width:"auto",dialogClass:"popup-with-new-orders-item-wrapper",close:function(){document.dispatchEvent(new Event("showTip:cartIconTip"))}})}function i(e){var t=e.find(".js-orders-item-count");t.extendedSpinner($.extend(t.data("spinnerOptions"),{spin:a})).numeric({decimalPlaces:2,negative:!1}),$doc.trigger("send:externalAnalytics",2119)}function n(e){return $.ajax({url:app.config.api.customerCartCartItemURL.replace("_id_",e.id),method:"PUT",data:{item:e},success:function(t){e.updateTotalEvent&&$doc.trigger(e.updateTotalEvent+":ordersItem",[t]).trigger(e.updateTotalEvent+":ordersCartItem",[t])}})}function a(e,t,i){var a=i&&i.$field||$(e.target),s=t&&t.value||i&&i.quantity||a.val()||1;app.modules.applicationUtils.delayCall(n.bind(null,{id:i&&i.id||$(this).data("spinnerOptions").id,quantity:s,updateTotalEvent:"updateTotal"})),a.val(s).trigger("changeQuantity:ordersPriceTypeToggler",[s])}function s(){$(this).closest(".js-popup-with-new-orders-item").dialog("destroy"),document.dispatchEvent(new Event("showTip:cartIconTip"))}function o(){var e=$(".js-orders-cart-popup-similar-products");$.ajax({url:e.data("content-url"),success:function(t){t.length>2&&(e.replaceWith($(HandlebarsTemplates["orders_cart/similar_products"]({data:t}))),t.length>4&&$(".js-popup-with-new-orders-item-sp-carousel").contentslider({classBlock:"contentslider-preview contentslider-block",countView:4,countSlide:4,showScroll:!1,animate:300,wheelMouse:!0,autoResize:!0}))}})}function r(){$doc.on("show:popupWithNewOrdersItem",function(e,n){l=n,i(t()),o()}).on("click",".js-orders-price-type-toggler-item",function(){var e=$(this),t=e.closest(".js-orders-item");a(null,null,{id:t.data("id"),$field:t.find(".js-orders-item-count"),quantity:e.closest(".js-orders-price-type-toggler-container").data(e.data("type"))["min-qty"]})}).on("click",".js-close-popup-with-new-orders-item",s)}var l=$("<store>");return e.load=function(){r()},e}(app.modules.popupWithNewOrdersItem||{}),app.modules.ordersCartProvider=function(e){function t(e){if(e===document)throw new Error(s)}function i(){$doc.on(a.updateCounterWithProvider,function(e,i){t(e.target),i.trigger(a.updateCartCounter,[$(e.target).data(n).count])})}var n="orders-cart-provider",a={updateCounterWithProvider:"updateCounter:ordersCartProvider",updateCartCounter:"update:ordersCartCounter"},s="Event should be emmited on counter container element.";return e.load=function(){i()},e}(app.modules.ordersCartProvider||{}),app.modules.ordersCartCounter=function(e){function t(e){if(e===document)throw new Error(c)}function i(e){return parseInt(e.find(o.counter).text())}function n(e,i){t(e.target),$(e.target).find(o.component).removeClass(r.loading).find(o.counter).text(i).toggleClass("empty",0===i)}function a(e,n){t(e.target),n.resolve(i($(e.target)))}function s(){$doc.on(l.update,n).on(l.getValue,a)}var o={component:".js-orders-cart-counter",counter:".js-orders-cart-counter-value"},r={loading:"orders-cart-counter-loading"},l={update:"update:ordersCartCounter",getValue:"getValue:ordersCartCounter"},c="Event should be emmited on counter container element.";return e.load=function(){s()},e}(app.modules.ordersCartCounter||{}),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["customer_orders/coupon_email"]=Handlebars.template({1:function(e,t,i,n){var a;return"      <b>"+this.escapeExpression((a=null!=(a=t.email||(null!=e?e.email:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"email",hash:{},data:n}):a))+"</b>\n      <input class='js-cof-email' type='hidden' value='"+this.escapeExpression((a=null!=(a=t.email||(null!=e?e.email:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"email",hash:{},data:n}):a))+"'>\n      <a class='control-link js-close-quick-popup' href='"+this.escapeExpression((a=null!=(a=t.changeLink||(null!=e?e.changeLink:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"changeLink",hash:{},data:n}):a))+"' target='_blank'>\n        \u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c\n      </a>\n"},3:function(){return"      <input class='cof-field text-field js-cof-email' type='text'>\n      <div class='error-block js-of-error' data-empty='\u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c' data-exist='\u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d' data-other='\u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442'></div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='form-group'>\n  <div class='form-group inline'>\n    <div class='of-label label'>Email:</div>\n    <div class='field'>\n"+(null!=(a=t["if"].call(e,null!=e?e.email:e,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.program(3,n,0),data:n}))?a:"")+"      <input name='extra_params[coupon][send_to]' type='hidden' value='email'>\n    </div>\n  </div>\n</div>"},useData:!0}),this.HandlebarsTemplates["customer_orders/coupon_email"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["customer_orders/coupon_phone"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='form-group'>\n  <div class='form-group inline'>\n    <div class='of-label label'>\u0412\u0430\u0448 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0439:</div>\n    <div class='field clearfix'>\n      <input class='cof-field text-field js-cof-phone js-of-customer_phone' name='order[customer_phone]' placeholder='+7 (___) ___-__-__' type='tel' value='"+this.escapeExpression((a=null!=(a=t.phone||(null!=e?e.phone:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"phone",hash:{},data:n}):a))+"'>\n      <div class='error-block js-of-error' data-other='\u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442'></div>\n      <input name='extra_params[coupon][send_to]' type='hidden' value='phone'>\n    </div>\n  </div>\n</div>"},useData:!0}),this.HandlebarsTemplates["customer_orders/coupon_phone"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["customer_orders/dummy_comment"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"\u0414\u043e\u0431\u0440\u044b\u0439 \u0434\u0435\u043d\u044c! \u041c\u0435\u043d\u044f \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u0435\u0442:\n"+this.escapeExpression((a=null!=(a=t.title||(null!=e?e.title:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"title",hash:{},data:n}):a))},useData:!0}),this.HandlebarsTemplates["customer_orders/dummy_comment"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["customer_orders/form2"]=Handlebars.template({1:function(){return"\u0414\u0430\u043d\u043d\u044b\u0435 \u0442\u0443\u0440\u0430:"},3:function(e,t,i,n){var a;return" \u0434\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430 "+this.escapeExpression((a=null!=(a=t.date||(null!=e?e.date:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"date",hash:{},data:n}):a))},5:function(){return","},7:function(){return" \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043d\u043e\u0447\u0435\u0439"},9:function(e,t,i,n){var a;return" \u043e\u0442 "+this.escapeExpression((a=null!=(a=t.nightsFrom||(null!=e?e.nightsFrom:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"nightsFrom",hash:{},data:n}):a))},11:function(e,t,i,n){var a;return" \u0434\u043e "+this.escapeExpression((a=null!=(a=t.nightsTo||(null!=e?e.nightsTo:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"nightsTo",hash:{},data:n}):a))},13:function(e,t,i,n){var a;return" \u0432\u0437\u0440\u043e\u0441\u043b\u044b\u0445: "+this.escapeExpression((a=null!=(a=t.adults||(null!=e?e.adults:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"adults",hash:{},data:n}):a))},15:function(e,t,i,n){var a;return" \u0434\u0435\u0442\u0435\u0439: "+this.escapeExpression((a=null!=(a=t.children||(null!=e?e.children:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"children",hash:{},data:n}):a))},17:function(){return"."},19:function(e,t,i,n){var a,s;return(null!=(a=t["if"].call(e,null!=e?e.hasAdditional:e,{name:"if",hash:{},fn:this.program(20,n,0),inverse:this.noop,data:n}))?a:"")+this.escapeExpression((s=null!=(s=t.comment||(null!=e?e.comment:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"comment",hash:{},data:n}):s))},20:function(){return"\n\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return(null!=(a=t["if"].call(e,null!=e?e.hasAdditional:e,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+(null!=(a=t["if"].call(e,null!=e?e.date:e,{name:"if",hash:{},fn:this.program(3,n,0),inverse:this.noop,data:n}))?a:"")+(null!=(a=t["if"].call(e,null!=e?e.comma1:e,{name:"if",hash:{},fn:this.program(5,n,0),inverse:this.noop,data:n}))?a:"")+(null!=(a=t["if"].call(e,null!=e?e.nights:e,{name:"if",hash:{},fn:this.program(7,n,0),inverse:this.noop,data:n}))?a:"")+(null!=(a=t["if"].call(e,null!=e?e.nightsFrom:e,{name:"if",hash:{},fn:this.program(9,n,0),inverse:this.noop,data:n}))?a:"")+(null!=(a=t["if"].call(e,null!=e?e.nightsTo:e,{name:"if",hash:{},fn:this.program(11,n,0),inverse:this.noop,data:n}))?a:"")+(null!=(a=t["if"].call(e,null!=e?e.comma2:e,{name:"if",hash:{},fn:this.program(5,n,0),inverse:this.noop,data:n}))?a:"")+(null!=(a=t["if"].call(e,null!=e?e.adults:e,{name:"if",hash:{},fn:this.program(13,n,0),inverse:this.noop,data:n}))?a:"")+(null!=(a=t["if"].call(e,null!=e?e.comma3:e,{name:"if",hash:{},fn:this.program(5,n,0),inverse:this.noop,data:n}))?a:"")+(null!=(a=t["if"].call(e,null!=e?e.children:e,{name:"if",hash:{},fn:this.program(15,n,0),inverse:this.noop,data:n}))?a:"")+(null!=(a=t["if"].call(e,null!=e?e.hasAdditional:e,{name:"if",hash:{},fn:this.program(17,n,0),inverse:this.noop,data:n}))?a:"")+(null!=(a=t["if"].call(e,null!=e?e.comment:e,{name:"if",hash:{},fn:this.program(19,n,0),inverse:this.noop,data:n}))?a:"")},useData:!0}),this.HandlebarsTemplates["customer_orders/form2"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["customer_orders/form3"]=Handlebars.template({1:function(e,t,i,n){var a;return" "+this.escapeExpression((a=null!=(a=t.date||(null!=e?e.date:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"date",hash:{},data:n}):a))+","},3:function(e,t,i,n){var a;return" "+this.escapeExpression((a=null!=(a=t.time||(null!=e?e.time:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"time",hash:{},data:n}):a))},5:function(e,t,i,n){var a;return", \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0433\u043e\u0441\u0442\u0435\u0439: "+this.escapeExpression((a=null!=(a=t.guests||(null!=e?e.guests:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"guests",hash:{},data:n}):a))},7:function(e,t,i,n){var a;return"\n"+this.escapeExpression((a=null!=(a=t.comment||(null!=e?e.comment:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"comment",hash:{},data:n
}):a))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f:"+(null!=(a=t["if"].call(e,null!=e?e.date:e,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+(null!=(a=t["if"].call(e,null!=e?e.time:e,{name:"if",hash:{},fn:this.program(3,n,0),inverse:this.noop,data:n}))?a:"")+(null!=(a=t["if"].call(e,null!=e?e.guests:e,{name:"if",hash:{},fn:this.program(5,n,0),inverse:this.noop,data:n}))?a:"")+".\n"+(null!=(a=t["if"].call(e,null!=e?e.comment:e,{name:"if",hash:{},fn:this.program(7,n,0),inverse:this.noop,data:n}))?a:"")},useData:!0}),this.HandlebarsTemplates["customer_orders/form3"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["customer_orders/form4"]=Handlebars.template({1:function(e,t,i,n){var a;return" "+this.escapeExpression((a=null!=(a=t.date||(null!=e?e.date:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"date",hash:{},data:n}):a))+","},3:function(e,t,i,n){var a;return" "+this.escapeExpression((a=null!=(a=t.time||(null!=e?e.time:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"time",hash:{},data:n}):a))},5:function(e,t,i,n){var a;return"\n"+this.escapeExpression((a=null!=(a=t.comment||(null!=e?e.comment:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"comment",hash:{},data:n}):a))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u0443\u0441\u043b\u0443\u0433\u0438:"+(null!=(a=t["if"].call(e,null!=e?e.date:e,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+(null!=(a=t["if"].call(e,null!=e?e.time:e,{name:"if",hash:{},fn:this.program(3,n,0),inverse:this.noop,data:n}))?a:"")+".\n"+(null!=(a=t["if"].call(e,null!=e?e.comment:e,{name:"if",hash:{},fn:this.program(5,n,0),inverse:this.noop,data:n}))?a:"")},useData:!0}),this.HandlebarsTemplates["customer_orders/form4"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["customer_orders/form5"]=Handlebars.template({1:function(e,t,i,n){var a;return" "+this.escapeExpression((a=null!=(a=t.date||(null!=e?e.date:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"date",hash:{},data:n}):a))+","},3:function(e,t,i,n){var a;return" "+this.escapeExpression((a=null!=(a=t.time||(null!=e?e.time:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"time",hash:{},data:n}):a))},5:function(e,t,i,n){var a;return"\n"+this.escapeExpression((a=null!=(a=t.comment||(null!=e?e.comment:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"comment",hash:{},data:n}):a))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u0443\u0441\u043b\u0443\u0433\u0438:"+(null!=(a=t["if"].call(e,null!=e?e.date:e,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+(null!=(a=t["if"].call(e,null!=e?e.time:e,{name:"if",hash:{},fn:this.program(3,n,0),inverse:this.noop,data:n}))?a:"")+".\n"+(null!=(a=t["if"].call(e,null!=e?e.comment:e,{name:"if",hash:{},fn:this.program(5,n,0),inverse:this.noop,data:n}))?a:"")},useData:!0}),this.HandlebarsTemplates["customer_orders/form5"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["customer_orders/online_payment_comment"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return"\n\u0421\u043f\u043e\u0441\u043e\u0431 \u043e\u043f\u043b\u0430\u0442\u044b: on-line."},useData:!0}),this.HandlebarsTemplates["customer_orders/online_payment_comment"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["orders/flash_message"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return"<div class='flash js-of-flash-message'>\n  <div class='flash-message failure'>\n    <p>\u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442</p>\n  </div>\n</div>"},useData:!0}),this.HandlebarsTemplates["orders/flash_message"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["orders/loader"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return"<div class='order-popup-form-loader-wrapper'>\n  <div class='order-popup-form-loader js-order-popup-form-loader'></div>\n</div>"},useData:!0}),this.HandlebarsTemplates["orders/loader"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["orders/mobile_orders_popup"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a,s;return null!=(s=null!=(s=t.content||(null!=e?e.content:e))?s:t.helperMissing,a="function"==typeof s?s.call(e,{name:"content",hash:{},data:n}):s)?a:""},useData:!0}),this.HandlebarsTemplates["orders/mobile_orders_popup"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["orders/order_form"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return"<div class='order-popup-form-wrapper js-order-popup-form-wrapper'></div>"},useData:!0}),this.HandlebarsTemplates["orders/order_form"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["orders/success_popup"]=Handlebars.template({1:function(e,t,i,n){var a,s;return"<div class='tender-success'>\n  <h2 class='gp-header'>\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e</h2>\n  <p class='gp-text'>\u0412\u0430\u0448\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u0437\u0430\u044f\u0432\u043a\u0443 \u0441\u043f\u0440\u043e\u0441\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u043f\u043e\u043a\u0443\u043f\u0430\u0442\u0435\u043b\u044e.</p>\n  <p class='gp-text'>\n    \u041d\u0430 \u0435\u0433\u043e \u043e\u0441\u043d\u043e\u0432\u0435 \u0431\u044b\u043b \u0441\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d \u0437\u0430\u043a\u0430\u0437, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0432 \u0441\u0432\u043e\u0435\u043c \u041b\u0438\u0447\u043d\u043e\u043c \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0435.\n  </p>\n  <p class='gp-text'>\n    \u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u043a\u0430\u0437\u0430:\n    <a href='"+this.escapeExpression((s=null!=(s=t.order_url||(null!=e?e.order_url:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"order_url",hash:{},data:n}):s))+"' target='_blank'>"+this.escapeExpression(this.lambda(null!=(a=null!=e?e.order:e)?a.id:a,e))+"</a>\n  </p>\n  <div class='tac'><a class='apress-button ab-default' href='"+this.escapeExpression((s=null!=(s=t.order_url||(null!=e?e.order_url:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"order_url",hash:{},data:n}):s))+"' target='_blank'>\n      \u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u041a\u0430\u0431\u0438\u043d\u0435\u0442\n    </a></div>\n</div>\n"},3:function(e,t,i,n){var a;return"<div class='dp-header'>\u0421\u043f\u0430\u0441\u0438\u0431\u043e!</div>\n<div class='dp-content'>\n"+(null!=(a=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=e?e.template:e,"===","coupon",{name:"ifCond",hash:{},fn:this.program(4,n,0),inverse:this.program(10,n,0),data:n}))?a:"")+"</div>\n<div class='tac mt25 js-order-success-popup-footer'>\n  <span class='sbm js-close-order-popup'>OK</span>\n</div>\n"},4:function(e,t,i,n){var a;return null!=(a=t["if"].call(e,null!=e?e.sendType:e,{name:"if",hash:{},fn:this.program(5,n,0),inverse:this.noop,data:n}))?a:""},5:function(e,t,i,n){var a;return null!=(a=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=e?e.sendType:e,"===","phone",{name:"ifCond",hash:{},fn:this.program(6,n,0),inverse:this.program(8,n,0),data:n}))?a:""},6:function(){return"  \u041c\u044b \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438 \u043a\u0443\u043f\u043e\u043d \u043d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440.\n"},8:function(){return"  \u041c\u044b \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438 \u043a\u0443\u043f\u043e\u043d \u043d\u0430 \u0432\u0430\u0448\u0443 \u043f\u043e\u0447\u0442\u0443.\n"},10:function(){return"  \u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u0438\u0442\u0435\u043b\u044c \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \u0441\u0432\u044f\u0436\u0435\u0442\u0441\u044f \u0441 \u0432\u0430\u043c\u0438\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return null!=(a=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=(a=null!=e?e.order:e)?a.order_type:a,"===","tender",{name:"ifCond",hash:{},fn:this.program(1,n,0),inverse:this.program(3,n,0),data:n}))?a:""},useData:!0}),this.HandlebarsTemplates["orders/success_popup"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["orders/success_popup_mobile"]=Handlebars.template({1:function(e,t,i,n){var a;return null!=(a=t["if"].call(e,null!=e?e.sendType:e,{name:"if",hash:{},fn:this.program(2,n,0),inverse:this.noop,data:n}))?a:""},2:function(e,t,i,n){var a;return null!=(a=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=e?e.sendType:e,"===","phone",{name:"ifCond",hash:{},fn:this.program(3,n,0),inverse:this.program(5,n,0),data:n}))?a:""},3:function(){return"    \u041c\u044b \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438 \u043a\u0443\u043f\u043e\u043d \u043d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440.\n"},5:function(){return"    \u041c\u044b \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438 \u043a\u0443\u043f\u043e\u043d \u043d\u0430 \u0432\u0430\u0448\u0443 \u043f\u043e\u0447\u0442\u0443.\n"},7:function(){return"    \u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u0438\u0442\u0435\u043b\u044c \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \u0441\u0432\u044f\u0436\u0435\u0442\u0441\u044f \u0441 \u0432\u0430\u043c\u0438\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='tac'>\n  <p class='cover-block-header'>\n    <b>\u0421\u043f\u0430\u0441\u0438\u0431\u043e!</b>\n  </p>\n  <p class='mt10'>\n"+(null!=(a=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=e?e.template:e,"===","coupon",{name:"ifCond",hash:{},fn:this.program(1,n,0),inverse:this.program(7,n,0),data:n}))?a:"")+"  </p>\n  <div class='js-order-success-popup-footer'></div>\n</div>"},useData:!0}),this.HandlebarsTemplates["orders/success_popup_mobile"]}.call(this),app.modules.orderForm=function(){function e(){return{order_type:N.find(".js-order-type").val(),company_id:N.find(".js-order-company-id").val(),items_attributes:[{subject_id:N.find(".js-order-subject-id").val(),quantity:N.find(".js-of-count").val()||1}]}}function t(e){return!!app.config.minTotalValidationForms.filter(function(t){return t===e}).length}function i(){if(t(app.config.orderFormType)){var i=N.find(".js-order-total-warning"),n=N.find(".js-send-order");app.modules.customerOrdersAPI.getOrderDraft(e()).then(function(e){var t=e.order.price_validation;t&&(t.passed?(n.prop({disabled:!1}),i.addClass("hidden")):(n.prop({disabled:!!t.required}),i.html(app.config.orderMinTotalMessages.blockingMessage.replace("_total_",t.min_price)).removeClass("hidden")))})}}function n(){var e={profile_attributes:{city_id:app.config.currentRegionCapitalId}},t=document.querySelector(".js-order-form .js-input-phone-auth");return t&&t.value&&(e.profile_attributes.contacts=t.value),e}function a(e){var t=e.length&&e.val();return t&&t.length||(t=HandlebarsTemplates["customer_orders/dummy_comment"]({title:e.data("order-subject-title")})),t}function s(){var e=$(".js-order-form-message"),t=e.val();switch(app.config.orderFormType){case"form2":o();break;case"form3":r();break;case"form4":l();break;default:return a(e)}return I.comment=t.length>0&&t,$.isEmptyObject(I)||(t=HandlebarsTemplates["customer_orders/"+app.config.orderFormType](I)),t}function o(){I={date:$("[data-field=date]").val(),nightsFrom:$("[data-field=nights_from]").val(),nightsTo:$("[data-field=nights_to]").val(),adults:$("[data-field=adults]").val(),children:$("[data-field=children]").val()},I.nights=I.nightsFrom||I.nightsTo,I.comma1=I.date.length>0&&I.nights.length>0,I.comma2=(I.nights.length>0||I.nights.length<1&&I.date.length>0&&!I.comma1)&&I.adults,I.comma3=(I.adults||!I.adults&&(I.date.length>0||I.nights.length>0)&&!I.comma2)&&I.children,I.hasAdditional=I.date||I.nights||I.adults||I.children}function r(){I={date:$("[data-field=date]").val(),time:$("[data-field=time]").val(),guests:$("[data-field=guests]").val()}}function l(){I={date:$("[data-field=date]").val(),time:$("[data-field=time]").val()}}function c(){var e=s(),t=$(".js-order-form-full-message");R&&(e+=HandlebarsTemplates["customer_orders/online_payment_comment"]()),t.length&&t.val(e)}function u(){var e,t,n=$(this),a=$(".js-order-total-price .bp-price"),s=$(".js-order-current-price"),o=s.find("[data-price-type=from], [data-price-type=exact], [data-price-type=discount-new]").html(),r=s.find("[data-price-type=to], [data-price-type=discount-old]").html(),l=parseInt(n.val())||1;if(o&&(e=parseFloat(o.replace(" ","")),t=d(l*e),$(".js-order-product-total-price-field").val(t),a.first().html(t)),r){var c=parseFloat(r.replace(" ",""));a.last().html(d(l*c))}i()}function d(e){var t=/(\d)(?=(?:\d{3})+(?:[^\d]|$))/g;return e.toFixed(2).replace(t,"$1 ")}function h(e){var t=$(".js-of-new-user-phone");e.user&&e.user.id?($(".js-of-contact-phone").val(""),t.addClass("dn"),$doc.trigger("showSignInFields:authComponent")):(t.removeClass("dn"),$doc.trigger("showSignUpFields:authComponent"))}function p(){var e=$(this);e.val(e.val().replace("+8","+7")),$(".js-of-field-for-phone").val(function(){try{return e.cleanVal()}catch(t){return e.val()}})}function f(){N=$(".js-order-form"),F=app.config.currentUser.email||app.config.currentUser.phone||!1,F||app.modules.staticAuthComponent.rerender(),$(".js-of-date-picker").datepicker({dateFormat:"dd.mm.yy",changeMonth:!0,changeYear:!0,defaultDate:0,disabled:!0}),app.config.amountForOrder&&$(".js-of-count").val(app.config.amountForOrder).trigger("recount"),$(".js-order-product-total-price-field").val($(".js-order-current-price .bp-price:eq(0)").text()),$(".js-numeric").numeric({negative:!1}),$(".js-toggle").toggler(),$(".js-inputmask").inputmask(),!app.config.isMobile&&$(".js-check-length").checkLength(),app.modules.selectCheck&&app.modules.selectCheck.load(),i(),app.config.orderFormAnalytics&&$doc.trigger("send:externalAnalytics",app.config.orderFormAnalytics.openedId)}function m(e,t){if(!t.responseJSON)return void k(e);$.each(t.responseJSON.errors,function(t,i){$.each(i,function(t,i){e.find(".js-of-"+t).data({other:i}).addClass("js-of-field-with-error error-on other")})})}function g(e){var t=new FormData,i=["input","textarea","select"];return e.find(i.map(function(e){return e+":not(:disabled)"}).join(",")).each(function(){var e=$(this),i=e.attr("type"),n=e.attr("name"),a=e.is(".js-attach-file-button")?this.files[0]:e.val()||e.data("defaultValue");i&&i.match(/checkbox|radio/)&&!e.prop("checked")||a&&t.append(n,a)}),t.append("order[source_url]",location.href),t}function v(e){var t=e.find(".js-order-type").val(),i=app.config.api["tender"===t?"sellerOrdersURL":"customerOrdersURL"];$.ajax({url:i,method:"POST",processData:!1,contentType:!1,data:g(e)}).done(y(t)).fail(b(e))}function b(e){return function(t){m(e,t),F||!app.config.currentUser.email&&!app.config.currentUser.phone||e.find(".js-of-send-options").remove(),_(e)}}function y(e){return function(t,i,n){var a={},s=$(".js-order-popup-form-wrapper");201===n.status?($.extend(a,{order:t.order,order_url:app.config.orderFormPopup["tender"===e?"sellerOrderURL":"customerOrderURL"].replace(":id",t.order.id),template:app.config.orderFormType,sendType:app.config.orderFormSendType}),t.order.items&&t.order.items.length&&$doc.trigger("conversionEventLog:send",{type:"order",productId:t.order.items[0].subject_id,userId:t.order.user.id}),app.config.isMobile?$doc.trigger("closeAllPopup:popups").trigger("insert:popups:mobile",{tmpl:"orders/success_popup_mobile",params:a}):R?($(".js-order-popup-form-wrapper").dialog("close"),$doc.trigger("render:onlinePaymentPopup",[{order:t.order,wasUserSigned:F}]),R=!1):s.html(HandlebarsTemplates["orders/success_popup"](a)).dialog("option",{width:390,resizable:!1,dialogClass:"dialog-popup send-message-popup order-success js-order-form-popup",close:function(){s.dialog("option",{dialogClass:"",width:"auto"}),F||location.reload(!0)}}),t.order&&$doc.trigger("checkout:ordersItem",t.order)):s.html(t)}}function _(e){formSubmitter.enableButtons(e[0]),R&&(e.find(".js-of-online-payment-button").prop({disabled:!1}),R=!1)}function w(e){var t=e.find(".js-of-required:visible"),i=0;return!t.length||(t.removeClass("error-on"),t.each(function(){var e=$(this),t=e.find(".js-of-required-field");t.val().length||(t.addClass("error").closest(".js-of-required").addClass("error-on"),i++)}),!i)}function x(e){e.find(".js-of-flash-message").remove().end().find(".js-of-field-with-error").removeClass("js-of-field-with-error error error-on other")}function k(e){var t=e||$(".js-of-flash-container");e=e||$(".js-order-form"),t.prepend(HandlebarsTemplates["orders/flash_message"]()),_(e)}function C(e,t){e=e||$(".js-order-form"),x(e),w(e)?t&&t.authComponentCompleted||F?v(e):app.modules.authComponent.processUserData.apply(e):_(e)}function P(){L=$(HandlebarsTemplates["orders/loader"]()).dialog({modal:!0,autoOpen:!1,resizable:!1,width:"110px",dialogClass:"order-popup-form-loader-dialog order-popup-form-loader-wrapper",close:T})}function T(){M.abort()}function D(e,t,i){var n;app.config.isMobile?$doc.trigger("closeAllPopup:popups").trigger("insert:popups:mobile",{sourceElement:e,tmpl:"orders/mobile_orders_popup",params:{content:t}}):(n=$(".js-order-popup-form-wrapper"),n.length?n.html($(t)).dialog({close:function(){$doc.trigger("conversionEventLog:send",[{type:"form",productId:i.params.product_id}])}}):$(HandlebarsTemplates["orders/order_form"]()).append($(t)).dialog({modal:!0,resizable:!1,width:"auto",height:"auto",dialogClass:"order-form-dialog order-popup-wrapper",open:app.modules.customerOrdersUtils.lockScroll,close:function(){app.modules.customerOrdersUtils.unlockScroll,$doc.trigger("conversionEventLog:send",{type:"form",productId:i.params.product_id})}})),$(".js-of-date-picker").datepicker("enable"),$doc.trigger("createdOrderFromPopupCallback:getOrderFormPopup"),app.modules.attachmentsFields&&app.modules.attachmentsFields.load()}function S(e,t){app.config.isMobile||(L||P(),app.modules.customerOrdersUtils.openPopup.bind(null,L)),M=$.ajax({url:app.config.getOrderPopupURLs[t.type],data:t.params}).always(function(){app.config.isMobile||app.modules.customerOrdersUtils.closePopup.bind(null,L)}).done(function(i){D(e,i,t)}).fail(function(t,i,n){503===t.status?A(e):console.error(n)})}function A(e){var t={cmsUrl:app.config.pageUrls.order+"?from="+location.href,mobile:app.config.isMobile};app.config.isMobile?$doc.trigger("insert:popups:mobile",{sourceElement:e,tmpl:"shared/orders_locked",params:t}):$(".js-dialog-popup-box").html(HandlebarsTemplates["shared/orders_locked"](t)).dialog({modal:!0,width:400,resizable:!1,dialogClass:"dialog-popup orders-locked-popup"})}function j(){F||location.reload(!0)}function E(){$doc.on("orderForm.init",f).on("input propertychange recount",".js-of-count",u).on("focus",".js-of-customer_phone",function(){$(this).trigger("init:phoneMask")}).on("input",".js-input-phone-auth, .js-of-customer_phone",p).on("focus",".js-input-phone-auth:not(.js-input-multiple-auth), .js-of-customer_phone",function(){var e=$(this);e.val()||e.val("+7")}).on("focusout",".js-input-phone-auth:not(.js-input-multiple-auth), .js-of-customer_phone",function(){var e=$(this);"+7"===e.val()&&e.val("")}).on("blur",".js-of-count",function(){var e=$(this);!parseInt(e.val())&&e.val(1)}).on("click",".js-of-date-picker",function(e){var t=$(this);t.prop("disabled")||t.datepicker("show"),e.preventDefault()}).on("click",".js-of-online-payment-button",function(){R=!0,$(this).prop({disabled:!0}).closest(".js-order-form").submit()}).on("submit",".js-order-form",function(e){var t=$(this);c(),app.config.orderFormAnalytics&&$doc.trigger("send:externalAnalytics",app.config.orderFormAnalytics.sendId),app.config.orderFormPrepare?app.config.orderFormPrepare(t):C(t),e.preventDefault()}).on("click",".js-close-order-popup",function(){$(".js-order-popup-form-wrapper").dialog("close")}).on("click",".js-get-order-form",function(e){var t=$(this),i=t.data();app.config.globalLocked||app.config.ordersUpdatesLocked||app.modules.customerOrdersUtils.isLockedPopup(i.type)?A(t):S(t,i),e.preventDefault()}).on("generateCodeComplete:authComponent",function(){!app.config.isMobile&&u_reRenderPopup()}).on("closePopup.popups",function(e,t){t&&$(t[0]).hasClass("js-order-form-call")&&j()})}var I,N,F,M,L,R;return{load:E,submit:C,togglePhone:h,showFlashError:k,getUserAdditionalData:n}}(app.modules.orderForm),app.modules.dealsSubscriptionFormInPanel=function(e){function t(){return $.ajax({url:c.attr("action"),data:c.serializeArray(),type:"post",dataType:"json"})}function i(){t().then(s)}function n(e){$(u.panel).toggleClass("auth-mod",!!e.user)}function a(){app.modules.lowerPanel&&app.modules.lowerPanel.isPanelActive()&&app.modules.lowerPanel.animatePanel()}function s(){var e=$(u.priseLink);e.attr({href:e.attr("href").replace("{user:email}",app.config.currentUser.email)}),$(u.infoBlock).add(u.successBlock).toggleClass("hidden"),setTimeout(a,d)}function o(e){e?formSubmitter.enableButtons(c[0]):i()}function r(e){var t=app.modules.authComponent;e.preventDefault(),$doc.trigger("submit:dealsSubscriptionInPanel"),app.config.currentUser.email?i():t.isInitialized.apply(this)&&t.processUserData.apply(this)}function l(){$doc.on("submit",u.form,r)}var c,u={panel:".js-lower-panel",form:".js-deals-subscription-form",successBlock:".js-dsf-success",priseLink:".js-dsf-link",infoBlock:".js-dsf-info"},d=5e3;return $.extend(e,{load:function(){c=$(u.form),l()},onSubscribe:o,onUserSearch:n}),e}(app.modules.dealsSubscriptionFormInPanel||{}),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["offers/subscription_in_order_popup"]=Handlebars.template({1:function(){return"mt25"},3:function(){return"dp-footer"},5:function(){return"      <div class='mb10'>\n        <input class='submit-form button orange wide' type='submit' value='\u0434\u0430'>\n      </div>\n      <div class='mt10'>\n        <span class='close-popup js-close-cover-block'>\u041d\u0435\u0442, \u043c\u043d\u0435 \u044d\u0442\u043e \u043d\u0435 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u043e</span>\n      </div>\n"},7:function(){return"      <span class='close-popup js-close-order-popup'>\u041d\u0435\u0442, \u043c\u043d\u0435 \u044d\u0442\u043e \u043d\u0435 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u043e</span>\n      <input class='submit-form sbm' type='submit' value='\u0434\u0430'>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a,s;return"<div class='"+(null!=(a=t["if"].call(e,null!=e?e.isMobile:e,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.program(3,n,0),data:n}))?a:"")+"'>\n  \u041f\u0440\u0438\u0441\u044b\u043b\u0430\u0442\u044c \u0432\u0430\u043c \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u044b\u0435 <b>\u0430\u043a\u0446\u0438\u0438 \u0438\u0437 \u0440\u0430\u0437\u0434\u0435\u043b\u0430 \xab"+this.escapeExpression((s=null!=(s=t.rubric||(null!=e?e.rubric:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"rubric",hash:{},data:n}):s))+"\xbb?</b>\n  <form action='' class='deals-subscription-form-in-order-popup js-deals-subscription-form-in-order-popup' method='post'>\n    <input name='rubric_id' type='hidden' value='"+this.escapeExpression((s=null!=(s=t.rubricId||(null!=e?e.rubricId:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"rubricId",hash:{},data:n}):s))+"'>\n    <div class='actions'>\n"+(null!=(a=t["if"].call(e,null!=e?e.isMobile:e,{name:"if",hash:{},fn:this.program(5,n,0),inverse:this.program(7,n,0),data:n}))?a:"")+"    </div>\n  </form>\n</div>"},useData:!0}),this.HandlebarsTemplates["offers/subscription_in_order_popup"]}.call(this),app.modules.dealsSubscriptionFormInOrderPopup=function(e){function t(){return $.ajax({url:app.config.api.offerSubscriptionsUrl,data:r.serializeArray(),type:"post",dataType:"json"})}function i(){app.config.isMobile?$doc.trigger("closeAllPopup:popups"):$(".js-order-popup-form-wrapper").dialog("close"),!app.config.isUserSigned&&location.reload()}function n(e){r=$(l.form),t().then(i),e.preventDefault()}function a(e){return $.get(app.config.api.offerSubscriptionsRubricUrl,{rubric_id:e.items.length?e.items[0].rubric_l4:"",company_id:e.items.length?"":e.company.id,order_type:e.order_type})}function s(e){$(".js-order-success-popup-footer").replaceWith(HandlebarsTemplates["offers/subscription_in_order_popup"]({rubric:e.rubric_title,rubricId:e.rubric_id,isMobile:app.config.isMobile}))}function o(){$doc.on("checkout:ordersItem",function(e,t){var i=$(".js-order-success-popup-footer");i.addClass("some-content-loading"),a(t).then(function(e){$.isEmptyObject(e)?i.removeClass("some-content-loading"):s(e)}).fail(function(){i.removeClass("some-content-loading")})}).on("submit",l.form,n)}var r,l={form:".js-deals-subscription-form-in-order-popup"};return e.load=function(){o()},e}(app.modules.dealsSubscriptionFormInOrderPopup||{}),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["subscriptions_popup/not_chosen_error"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return"<span class='error-block js-rubric-not-chosen-error'>\n  \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e\n</span>"},useData:!0}),this.HandlebarsTemplates["subscriptions_popup/not_chosen_error"]}.call(this),app.modules.subscriptionsPopup=function(e){function t(e){p=$(".js-subscriptions-popup").html(e||"").dialog({closeOnEscape:!0,resizable:!1,draggable:!1,modal:!0,width:430,dialogClass:"dialog-popup subscriptions-popup portal-popup"})}function i(){var e=$(this);e.closest(".js-subscriptions-form").find(".js-subscriptions-form-submit").prop({disabled:!e.prop("checked")})}function n(e,t){var i;for(i in t)e.find(".js-sf-"+i+"-error:visible").text(t[i][0])}function a(){var e=$(".js-rubric-not-chosen-error");return"[]"===$(".js-input-rubrics_tree").val()?(!e.length&&$(".js-show-treeview-popup").append(HandlebarsTemplates["subscriptions_popup/not_chosen_error"]()),!1):(e.length&&e.remove(),!0)}function s(e){e.find(".js-sf-error").empty(),$.ajax({method:"POST",url:e.attr("action"),data:e.serialize(),dataType:"json",statusCode:{422:function(t){n(e,t.responseJSON.errors),formSubmitter.enableButtons(form,null,null)}}}).fail(function(){formSubmitter.enableButtons(form,null,null)}).done(function(){p.dialog("close"),location.reload()})}function o(e){e.preventDefault(),a()?app.modules.authComponent.processUserData.apply($(this)):formSubmitter.enableButtons($(this))}function r(e){var t=$(".js-subscriptions-form");e?formSubmitter.enableButtons(t[0]):s(t)}function l(){p.dialog("open")}function c(e){$.get(e).then(function(e){t(e),app.modules.staticAuthComponent.rerender(),app.modules.treeView.init()})}function u(e){e.preventDefault(),p?l():(t(),c($(this).data("url")))}function d(){$doc.on("click",".js-show-subscriptions-form",u).on("change",".js-subscriptions-form-accepted",i).on("submit",".js-subscriptions-form",o).on("saveRubrics:notificationsForm",a)}function h(){!app.config.currentUser.email&&d()}var p;return $.extend(e,{load:h,onSubscribe:r}),e}(app.modules.subscriptionsPopup||{}),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["lettered_item/letter"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<span class='main-letter first'>"+this.escapeExpression((a=null!=(a=t.letter||(null!=e?e.letter:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"letter",hash:{},data:n}):a))+"</span>"},useData:!0}),this.HandlebarsTemplates["lettered_item/letter"]}.call(this),app.modules.projectUtils=function(e){function t(){var e="",t=!0;$(".js-lettered-item").each(function(){var i=$(this),n=i.data("liter"),a=$.isNumeric(n);n!==e&&(!t&&a||i.prepend(HandlebarsTemplates["lettered_item/letter"]({letter:a?"1-9":n})),t=!a,e=n)})}function i(){$(".js-text-cutter-wrapper:visible:not(.checked):not(.active)").each(function(){var e=$(this).addClass("checked");parseInt(e.data("height"))<e.find(".js-text-cutter-content").height()?e.addClass("overflowed"):e.parent().removeClass("cutter-text")})}function n(){var e=$(this),t=e.prev(".js-text-cutter-wrapper");e.text(t.hasClass("active")?t.data("showtext"):t.data("hidetext")),t.toggleClass("active")}function a(){$(".js-go-to").each(function(){var e=$(this);e.attr({href:e.data("to")}).removeClass("js-go-to")})}function s(e){var t={"~":"\u0401","`":"\u0451","@":'"',"#":"\u2116",q:"\u0439",w:"\u0446",e:"\u0443",r:"\u043a",t:"\u0435",y:"\u043d",u:"\u0433",i:"\u0448",o:"\u0449",p:"\u0437",a:"\u0444",s:"\u044b",d:"\u0432",f:"\u0430",g:"\u043f",h:"\u0440",j:"\u043e",k:"\u043b",l:"\u0434",z:"\u044f",x:"\u0447",c:"\u0441",v:"\u043c",b:"\u0438",n:"\u0442",m:"\u044c",Q:"\u0419",W:"\u0426",E:"\u0423",R:"\u041a",T:"\u0415",Y:"\u041d",U:"\u0413",I:"\u0428",O:"\u0429",P:"\u0417",A:"\u0424",S:"\u042b",D:"\u0412",F:"\u0410",G:"\u041f",H:"\u0420",J:"\u041e",K:"\u041b",L:"\u0414",Z:"\u042f",X:"\u0427",C:"\u0421",V:"\u041c",B:"\u0418",N:"\u0422",M:"\u042c","[":"\u0445","{":"\u0425","]":"\u044a","}":"\u042a",";":"\u0436",":":"\u0416","'":"\u044d",'"':"\u042d",",":"\u0431","<":"\u0411",".":"\u044e",">":"\u042e","&":"?","/":"."},i={"\u0401":"~","\u0451":"`",'"':"@","\u2116":"#","\u0439":"q","\u0446":"w","\u0443":"e","\u043a":"r","\u0435":"t","\u043d":"y","\u0433":"u","\u0448":"i","\u0449":"o","\u0437":"p","\u0444":"a","\u044b":"s","\u0432":"d","\u0430":"f","\u043f":"g","\u0440":"h","\u043e":"j","\u043b":"k","\u0434":"l","\u044f":"z","\u0447":"x","\u0441":"c","\u043c":"v","\u0438":"b","\u0442":"n","\u044c":"m","\u0419":"Q","\u0426":"W","\u0423":"E","\u041a":"R","\u0415":"T","\u041d":"Y","\u0413":"U","\u0428":"I","\u0429":"O","\u0417":"P","\u0424":"A","\u042b":"S","\u0412":"D","\u0410":"F","\u041f":"G","\u0420":"H","\u041e":"J","\u041b":"K","\u0414":"L","\u042f":"Z","\u0427":"X","\u0421":"C","\u041c":"V","\u0418":"B","\u0422":"N","\u042c":"M","\u0445":"[","\u0425":"{","\u044a":"]","\u042a":"}","\u0436":",","\u0416":":","\u044d":"'","\u042d":'"',"\u0431":",","\u0411":"<","\u044e":".","\u042e":">","?":"&",".":"/"},n={ru:t,en:i},a=e.str,s=e.direction||"ru";return a&&(a=a.split("").map(function(e){return n[s][e]||e}).join("")),a}function o(){var e=$(this),t=e.prop("checked");e.closest(".js-terms-form").find(".js-terms-needed").prop("disabled",!t).toggleClass("disabled",!t)}function r(){$doc.on("click",".js-text-cutter-toggle",n).on("init:textCutter",i).on("unlock:seoLinks",a).on("change",".js-terms",o)}function l(){i(),t(),a()}return e.load=function(){l(),r()},e.enRuSwitch=s,e}(app.modules.projectUtils||{}),ZoomImage=function(){var e,t,i={},n=function(n){if(!e){var o,r,l,c=$(this),u=c.parent(),d=u.parent(),h=d.width(),p=d.height(),f=n.clientX-c.offset().left,m=n.pageY-c.offset().top,g=(h-c.width())/2,v=(p-c.height())/2,b=c.attr("alt");e=$("<div/>").addClass(i.bigClass),b&&i.titleClass&&e.html('<div class="'+i.titleClass+'">'+b+"</div>"),e.css({"background-image":"url("+u.attr("href")+")","background-position":"50% 50%",left:h,opacity:.1}),u.append(e),e.animate({opacity:1},200,function(){}),t=$("<div/>").addClass(i.zoomClass),t.css("opacity",.1),u.append(t),o=e.width()*c.width()/u.data("width"),r=e.height()*c.height()/u.data("height"),l=2*parseInt(t.css("border-left-width")),o=Math.min(o,c.width()),r=Math.min(r,c.height()),t.css({width:o-l,height:r-l});var y=t.width()/2;halfZoomHeight=t.height()/2,f+y+l>$(this).width()?f=$(this).width()-t.width():f<y?f=l:f-=y,m+halfZoomHeight+l>=$(this).height()?m=$(this).height()-t.height():m<halfZoomHeight?m=l:m-=halfZoomHeight,t.css({left:f-l+g+"px",top:m-l+v+"px"}),t.mousemove(s),t.mouseleave(a),u.mouseleave(a),i.callbackClick&&t.click(function(){return i.callbackClick(),!1}),t.animate({opacity:.5},200)}
},a=function(){e&&(e.remove(),e=""),t&&(t.remove(),t="")},s=function(i){if(t){var n,a,s=$(this),o=s.parent().find("img"),r=o.parent(),l=parseInt(t.css("left")),c=parseInt(t.css("top")),u=i.clientX-s.offset().left-s.width()/2,d=i.pageY-s.offset().top-s.height()/2,h=2*parseInt(s.css("border-left-width")),p=s.parent().parent().width(),f=s.parent().parent().height(),m=(p-o.width())/2,g=(f-o.height())/2,v=o.width()-s.width(),b=o.height()-s.height();l+u-h>m&&l+u-m<v?t.css("left",l+u-h+"px"):(l+u<0&&t.css("left",m),l+u-m>v&&t.css("left",v-h+m)),c+d-h>g&&c+d-g<b?t.css("top",c+d-h+"px"):(c+d<g&&t.css("top",g),c+d-g>b&&t.css("top",b-h+g)),n=e.width()>=r.data("width")?"center":(parseInt(t.css("left"))-m)/(o.width()/r.data("width"))*-1+"px",a=e.height()>=r.data("height")?"center":(parseInt(t.css("top"))-g)/(o.height()/r.data("height"))*-1+"px",e.css("background-position",n+" "+a)}},o=function(){var e=$(i.selector).find("img");e.length&&$.each(e,function(t){var i=$(this).parent(),a=new Image;a.src=i.attr("href"),a.onload=function(){i.data("width",this.width),i.data("height",this.height),$(e[t]).mouseenter(n)}})};return{init:function(e){$.extend(i,e),o()},reload:function(){a(),o()}}}(),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["shared/orders_locked"]=Handlebars.template({1:function(e,t,i,n){var a;return"  <p class='cover-block-header'>\u041c\u044b \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u043c \u043f\u043e\u0440\u0442\u0430\u043b</p>\n  <div class='mt15 mb15'>\u0421\u0430\u0439\u0442 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430.</div>\n  <div class=\"mb15\">\u041f\u0440\u0438\u043d\u043e\u0441\u0438\u043c \u0438\u0437\u0432\u0438\u043d\u0435\u043d\u0438\u044f \u0437\u0430 \u043d\u0435\u0443\u0434\u043e\u0431\u0441\u0442\u0432\u043e.</div> <div class=\"mb15\">\n    \u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043a\u0430\u0437\u0443 \u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u0434\u043b\u044f \u0441\u0432\u044f\u0437\u0438.\n    \u041c\u044b \u043f\u0435\u0440\u0435\u0434\u0430\u0434\u0438\u043c \u0432\u0430\u0448\u0443 \u0437\u0430\u044f\u0432\u043a\u0443 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438-\u043f\u0440\u043e\u0434\u0430\u0432\u0446\u0443 \u0432 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f.\n  </div>\n  <div class='mb15'>\n    <a class='base-style button wide' href='"+this.escapeExpression((a=null!=(a=t.cmsUrl||(null!=e?e.cmsUrl:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"cmsUrl",hash:{},data:n}):a))+"' target='_blank'>\n      \u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443\n    </a>\n  </div>\n"},3:function(e,t,i,n){var a;return"  <div class='dp-header'>\u0421\u0430\u0439\u0442 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430</div>\n  <div class='dp-content'>\n    <div class=\"mb15\">\u041f\u0440\u0438\u043d\u043e\u0441\u0438\u043c \u0438\u0437\u0432\u0438\u043d\u0435\u043d\u0438\u044f \u0437\u0430 \u043d\u0435\u0443\u0434\u043e\u0431\u0441\u0442\u0432\u043e.</div> <div class=\"mb15\">\n      \u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043a\u0430\u0437\u0443 \u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u0434\u043b\u044f \u0441\u0432\u044f\u0437\u0438.\n      \u041c\u044b \u043f\u0435\u0440\u0435\u0434\u0430\u0434\u0438\u043c \u0432\u0430\u0448\u0443 \u0437\u0430\u044f\u0432\u043a\u0443 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438-\u043f\u0440\u043e\u0434\u0430\u0432\u0446\u0443 \u0432 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f.\n    </div>\n    <div class='mb15'>\n      <a class='apress-button ab-conversion big' href='"+this.escapeExpression((a=null!=(a=t.cmsUrl||(null!=e?e.cmsUrl:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"cmsUrl",hash:{},data:n}):a))+"' target='_blank'>\n        \u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443\n      </a>\n    </div>\n  </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='tac'>\n"+(null!=(a=t["if"].call(e,null!=e?e.mobile:e,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.program(3,n,0),data:n}))?a:"")+"</div>"},useData:!0}),this.HandlebarsTemplates["shared/orders_locked"]}.call(this),app.modules.selectCheck=function(e){function t(){var e=[];return c.find(".js-select-check-checkbox:checked").each(function(){e.push($(this).closest(".js-select-check-item").data("region-name"))}),e.join(", ")}function i(){c.find(".js-select-check-checkbox:checked").length===c.data("max-items")?c.find(".js-select-check-checkbox:not(:checked)").prop("disabled",!0):u.prop("disabled",!1)}function n(e){var t=app.modules.projectUtils.enRuSwitch({str:e.val()}),i=new RegExp("^"+t,"i");c.find(".js-select-check-item, .js-select-single-item").each(function(){var e=$(this);e.toggle(i.test(e.data("region-name")))})}function a(){var e=$(this);l.text(e.data("region-name")),$(".js-select-single-value").val(e.data("region-id")),r.hide()}function s(){c.on("click",".js-select-check-input, .js-toggle-select-check",function(){c.data("disabled")||(r.show(),c.addClass("active"),app.config.isMobile||c.find(".js-select-check-search").focus())}),$doc.on("click keyup",function(e){$(e.target).closest(".js-select-check").length&&27!==e.keyCode||(r.hide(),c.removeClass("active"))}).on("disableOrEnable:selectCheck",function(e,t){c.data({disabled:t})}).on("click",".js-select-single-item",a).on("init:selectCheck",o),u.change(function(){var e=t();c.data("max-items")&&i(),l.length&&l.text(e||c.data("default-value")),$doc.trigger("getSelected:selectCheck")}),c.find(".js-select-check-button").click(function(){r.hide(),c.removeClass("active")}),c.find(".js-select-check-search").on("input propertychange",function(){n($(this))})}function o(){c=$(".js-select-check"),c.addClass(c.data("position")||"bottom"),u=c.find(".js-select-check-checkbox"),r=c.find(".js-select-check-body"),l=c.find(".js-select-check-input"),s(),c.find(".js-select-check-checkbox:checked").length&&c.find(".js-select-check-checkbox:eq(0)").change()}var r,l,c,u;return e.load=function(){o()},e}(app.modules.selectCheck||{}),function(e){"use strict";var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,i=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),n=i&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),a=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,s=(i||a)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,s,o,r,l,c;for(t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),s=new ArrayBuffer(t.length),o=new Uint8Array(s),r=0;r<t.length;r+=1)o[r]=t.charCodeAt(r);return l=e.split(",")[0].split(":")[1].split(";")[0],i?new Blob([n?o:s],{type:l}):(c=new a,c.append(s),c.getBlob(l))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(e,i,n){e(n&&t.toDataURL&&s?s(this.toDataURL(i,n)):this.mozGetAsFile("blob",i))}:t.toDataURL&&s&&(t.toBlob=function(e,t,i){e(s(this.toDataURL(t,i)))})),e.dataURLtoBlob=s}(window),function(e,t){"use strict";function i(e,t,i,n,a){var s={type:i.type||i,target:e,result:n};X(s,a),t(s)}function n(e){return C&&!!C.prototype["readAs"+e]}function a(e,a,s,o){if(ie.isBlob(e)&&n(s)){var r=new C;Q(r,U,function t(n){var s=n.type;"progress"==s?i(e,a,n,n.target.result,{loaded:n.loaded,total:n.total}):"loadend"==s?(J(r,U,t),r=null):i(e,a,n,n.target.result)});try{o?r["readAs"+s](e,o):r["readAs"+s](e)}catch(n){i(e,a,"error",t,{error:n.toString()})}}else i(e,a,"error",t,{error:"filreader_not_support_"+s})}function s(e,t){if(!e.type&&(_||e.size%4096==0&&e.size<=102400))if(C)try{var i=new C;Z(i,U,function(e){var n="error"!=e.type;n?(null!=i.readyState&&i.readyState!==i.LOADING||i.abort(),t(n)):t(!1,i.error)}),i.readAsDataURL(e)}catch(e){t(!1,e)}else t(null,new Error("FileReader is not supported"));else t(!0)}function o(e){return e&&(e.isFile||e.isDirectory)}function r(e){var t;return e.getAsEntry?t=e.getAsEntry():e.webkitGetAsEntry&&(t=e.webkitGetAsEntry()),t}function l(e,t){if(e)if(e.isFile)e.file(function(i){i.fullPath=e.fullPath,t(!1,[i],[i])},function(i){e.error=i,t("FileError.code: "+i.code,[],[e])});else if(e.isDirectory){var i=e.createReader(),n=!0,a=[],s=[e],o=function(i){e.error=i,t("DirectoryError.code: "+i.code,a,s)},c=function r(c){n&&(n=!1,c.length||(e.error=new Error("directory is empty"))),c.length?ie.afor(c,function(e,t){l(t,function(t,n,l){t||(a=a.concat(n)),s=s.concat(l),e?e():i.readEntries(r,o)})}):t(!1,a,s)};i.readEntries(c,o)}else l(r(e),t);else{var u=new Error("invalid entry");e=new Object(e),e.error=u,t(u.message,[],[e])}}function c(e){var t={};return Y(e,function(e,i){e&&"object"==typeof e&&void 0===e.nodeType&&(e=X({},e)),t[i]=e}),t}function u(e){return L.test(e&&e.tagName)}function d(e){return(e.originalEvent||e||"").dataTransfer||{}}function h(e){var t;for(t in e)if(e.hasOwnProperty(t)&&!(e[t]instanceof Object||"overlay"===t||"filter"===t))return!0;return!1}var p,f,m=1,g=function(){},v=e.document,b=v.doctype||{},y=e.navigator.userAgent,_=/safari\//i.test(y)&&!/chrome\//i.test(y),w=/iemobile\//i.test(y),$=e.createObjectURL&&e||e.URL&&URL.revokeObjectURL&&URL||e.webkitURL&&webkitURL,x=e.Blob,k=e.File,C=e.FileReader,P=e.FormData,T=e.XMLHttpRequest,D=e.jQuery,S=!(!(k&&C&&(e.Uint8Array||P||T.prototype.sendAsBinary))||_&&/windows/i.test(y)&&!w),A=S&&"withCredentials"in new T,j=S&&!!x&&!!(x.prototype.webkitSlice||x.prototype.mozSlice||x.prototype.slice),E=(""+"".normalize).indexOf("[native code]")>0,I=e.dataURLtoBlob,N=/img/i,F=/canvas/i,M=/img|canvas/i,L=/input/i,R=/^data:[^,]+,/,O={}.toString,H=e.Math,z=function(t){return t=new e.Number(H.pow(1024,t)),t.from=function(e){return H.round(e*this)},t},B={},q=[],U="abort progress error load loadend",W="status statusText readyState response responseXML responseText responseBody".split(" "),G="currentTarget",V="preventDefault",K=function(e){return e&&"length"in e},Y=function(e,t,i){if(e)if(K(e))for(var n=0,a=e.length;n<a;n++)n in e&&t.call(i,e[n],n,e);else for(var s in e)e.hasOwnProperty(s)&&t.call(i,e[s],s,e)},X=function(e){for(var t=arguments,i=1,n=function(t,i){e[i]=t};i<t.length;i++)Y(t[i],n);return e},Q=function(e,t,i){if(e){var n=ie.uid(e);B[n]||(B[n]={});var a=C&&e&&e instanceof C;Y(t.split(/\s+/),function(t){D&&!a?D.event.add(e,t,i):(B[n][t]||(B[n][t]=[]),B[n][t].push(i),e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent?e.attachEvent("on"+t,i):e["on"+t]=i)})}},J=function(e,t,i){if(e){var n=ie.uid(e),a=B[n]||{},s=C&&e&&e instanceof C;Y(t.split(/\s+/),function(t){if(D&&!s)D.event.remove(e,t,i);else{for(var n=a[t]||[],o=n.length;o--;)if(n[o]===i){n.splice(o,1);break}e.addEventListener?e.removeEventListener(t,i,!1):e.detachEvent?e.detachEvent("on"+t,i):e["on"+t]=null}})}},Z=function(e,t,i){Q(e,t,function n(a){J(e,t,n),i(a)})},ee=function(t){return t.target||(t.target=e.event&&e.event.srcElement||v),3===t.target.nodeType&&(t.target=t.target.parentNode),t},te=function(e){var t=v.createElement("input");return t.setAttribute("type","file"),e in t},ie={version:"2.0.19",cors:!1,html5:!0,media:!1,formData:!0,multiPassResize:!0,debug:!1,pingUrl:!1,multiFlash:!1,flashAbortTimeout:0,withCredentials:!0,staticPath:"./dist/",flashUrl:0,flashImageUrl:0,postNameConcat:function(e,t){return e+(null!=t?"["+t+"]":"")},ext2mime:{jpg:"image/jpeg",tif:"image/tiff",txt:"text/plain"},accept:{"image/*":"art bm bmp dwg dxf cbr cbz fif fpx gif ico iefs jfif jpe jpeg jpg jps jut mcf nap nif pbm pcx pgm pict pm png pnm qif qtif ras rast rf rp svf tga tif tiff xbm xbm xpm xwd","audio/*":"m4a flac aac rm mpa wav wma ogg mp3 mp2 m3u mod amf dmf dsm far gdm imf it m15 med okt s3m stm sfx ult uni xm sid ac3 dts cue aif aiff wpl ape mac mpc mpp shn wv nsf spc gym adplug adx dsp adp ymf ast afc hps xs","video/*":"m4v 3gp nsv ts ty strm rm rmvb m3u ifo mov qt divx xvid bivx vob nrg img iso pva wmv asf asx ogm m2v avi bin dat dvr-ms mpg mpeg mp4 mkv avc vp3 svq3 nuv viv dv fli flv wpl"},uploadRetry:0,networkDownRetryTimeout:5e3,chunkSize:0,chunkUploadRetry:0,chunkNetworkDownRetryTimeout:2e3,KB:z(1),MB:z(2),GB:z(3),TB:z(4),EMPTY_PNG:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NkAAIAAAoAAggA9GkAAAAASUVORK5CYII=",expando:"fileapi"+(new Date).getTime(),uid:function(e){return e?e[ie.expando]=e[ie.expando]||ie.uid():(++m,ie.expando+m)},log:function(){ie.debug&&p&&(f?console.log.apply(console,arguments):console.log([].join.call(arguments," ")))},newImage:function(e,t){var i=v.createElement("img");return t&&ie.event.one(i,"error load",function(e){t("error"==e.type,i),i=null}),i.src=e,i},getXHR:function(){var t;if(T)t=new T;else if(e.ActiveXObject)try{t=new ActiveXObject("MSXML2.XMLHttp.3.0")}catch(e){t=new ActiveXObject("Microsoft.XMLHTTP")}return t},isArray:K,support:{dnd:A&&"ondrop"in v.createElement("div"),cors:A,html5:S,chunked:j,dataURI:!0,accept:te("accept"),multiple:te("multiple")},event:{on:Q,off:J,one:Z,fix:ee},throttle:function(t,i){var n,a;return function(){a=arguments,n||(t.apply(e,a),n=setTimeout(function(){n=0,t.apply(e,a)},i))}},F:function(){},parseJSON:function(t){return e.JSON&&JSON.parse?JSON.parse(t):new Function("return ("+t.replace(/([\r\n])/g,"\\$1")+");")()},trim:function(e){return e=String(e),e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},defer:function(){var e,i,n=[],a={resolve:function(t,s){for(a.resolve=g,i=t||!1,e=s;s=n.shift();)s(i,e)},then:function(a){i!==t?a(i,e):n.push(a)}};return a},queue:function(e){var t=0,i=0,n=!1,a=!1,s={inc:function(){i++},next:function(){t++,setTimeout(s.check,0)},check:function(){t>=i&&!n&&s.end()},isFail:function(){return n},fail:function(){!n&&e(n=!0)},end:function(){a||(a=!0,e())}};return s},each:Y,afor:function(e,t){var i=0,n=e.length;K(e)&&n--?function a(){t(n!=i&&a,e[i],i++)}():t(!1)},extend:X,isFile:function(e){return"[object File]"===O.call(e)},isBlob:function(e){return this.isFile(e)||"[object Blob]"===O.call(e)},isCanvas:function(e){return e&&F.test(e.nodeName)},getFilesFilter:function(e){return e="string"==typeof e?e:e.getAttribute&&e.getAttribute("accept")||"",e?new RegExp("("+e.replace(/\./g,"\\.").replace(/,/g,"|")+")$","i"):/./},readAsDataURL:function(e,t){ie.isCanvas(e)?i(e,t,"load",ie.toDataURL(e)):a(e,t,"DataURL")},readAsBinaryString:function(e,t){n("BinaryString")?a(e,t,"BinaryString"):a(e,function(e){if("load"==e.type)try{e.result=ie.toBinaryString(e.result)}catch(t){e.type="error",e.message=t.toString()}t(e)},"DataURL")},readAsArrayBuffer:function(e,t){a(e,t,"ArrayBuffer")},readAsText:function(e,t,i){i||(i=t,t="utf-8"),a(e,i,"Text",t)},toDataURL:function(e,t){return"string"==typeof e?e:e.toDataURL?e.toDataURL(t||"image/png"):void 0},toBinaryString:function(t){return e.atob(ie.toDataURL(t).replace(R,""))},readAsImage:function(e,n,a){if(ie.isBlob(e))if($){var s=$.createObjectURL(e);s===t?i(e,n,"error"):ie.readAsImage(s,n,a)}else ie.readAsDataURL(e,function(t){"load"==t.type?ie.readAsImage(t.result,n,a):(a||"error"==t.type)&&i(e,n,t,null,{loaded:t.loaded,total:t.total})});else if(ie.isCanvas(e))i(e,n,"load",e);else if(N.test(e.nodeName))if(e.complete)i(e,n,"load",e);else{var o="error abort load";Z(e,o,function t(a){"load"==a.type&&$&&$.revokeObjectURL(e.src),J(e,o,t),i(e,n,a,e)})}else if(e.iframe)i(e,n,{type:"error"});else{var r=ie.newImage(e.dataURL||e);ie.readAsImage(r,n,a)}},checkFileObj:function(e){var t={},i=ie.accept;return"object"==typeof e?t=e:t.name=(e+"").split(/\\|\//g).pop(),null==t.type&&(t.type=t.name.split(".").pop()),Y(i,function(e,i){e=new RegExp(e.replace(/\s/g,"|"),"i"),(e.test(t.type)||ie.ext2mime[t.type])&&(t.type=ie.ext2mime[t.type]||i.split("/")[0]+"/"+t.type)}),t},getDropFiles:function(e,t){var i,n=[],a=[],c=d(e),u=c.files,h=c.items,p=K(h)&&h[0]&&r(h[0]),f=ie.queue(function(){t(n,a)});if(p)if(E&&u){var m,g,v=u.length;for(i=new Array(v);v--;){m=u[v];try{g=r(h[v])}catch(e){ie.log("[err] getDropFiles: ",e),g=null}o(g)&&(g.isDirectory||g.isFile&&m.name==m.name.normalize("NFC"))?i[v]=g:i[v]=m}}else i=h;else i=u;Y(i||[],function(e){f.inc();try{p&&o(e)?l(e,function(e,t,i){e?ie.log("[err] getDropFiles:",e):n.push.apply(n,t),a.push.apply(a,i),f.next()}):s(e,function(t,i){t?n.push(e):e.error=i,a.push(e),f.next()})}catch(e){f.next(),ie.log("[err] getDropFiles: ",e)}}),f.check()},getFiles:function(e,t,i){var n=[];return i?(ie.filterFiles(ie.getFiles(e),t,i),null):(e.jquery&&(e.each(function(){n=n.concat(ie.getFiles(this))}),e=n,n=[]),"string"==typeof t&&(t=ie.getFilesFilter(t)),e.originalEvent?e=ee(e.originalEvent):e.srcElement&&(e=ee(e)),e.dataTransfer?e=e.dataTransfer:e.target&&(e=e.target),e.files?(n=e.files,S||(n[0].blob=e,n[0].iframe=!0)):!S&&u(e)?ie.trim(e.value)&&(n=[ie.checkFileObj(e.value)],n[0].blob=e,n[0].iframe=!0):K(e)&&(n=e),ie.filter(n,function(e){return!t||t.test(e.name)}))},getTotalSize:function(e){for(var t=0,i=e&&e.length;i--;)t+=e[i].size;return t},getInfo:function(e,t){var i={},n=q.concat();ie.isBlob(e)?function a(){var s=n.shift();s?s.test(e.type)?s(e,function(e,n){e?t(e):(X(i,n),a())}):a():t(!1,i)}():t("not_support_info",i)},addInfoReader:function(e,t){t.test=function(t){return e.test(t)},q.push(t)},filter:function(e,t){for(var i,n=[],a=0,s=e.length;a<s;a++)a in e&&(i=e[a],t.call(i,i,a,e)&&n.push(i));return n},filterFiles:function(e,t,i){if(e.length){var n,a=e.concat(),s=[],o=[];!function e(){a.length?(n=a.shift(),ie.getInfo(n,function(i,a){(t(n,!i&&a)?s:o).push(n),e()})):i(s,o)}()}else i([],e)},upload:function(e){e=X({jsonp:"callback",prepare:ie.F,beforeupload:ie.F,upload:ie.F,fileupload:ie.F,fileprogress:ie.F,filecomplete:ie.F,progress:ie.F,complete:ie.F,pause:ie.F,imageOriginal:!0,chunkSize:ie.chunkSize,chunkUploadRetry:ie.chunkUploadRetry,uploadRetry:ie.uploadRetry},e),e.imageAutoOrientation&&!e.imageTransform&&(e.imageTransform={rotate:"auto"});var t,i=new ie.XHR(e),n=this._getFilesDataArray(e.files),a=this,s=0,o=0,r=!1;return Y(n,function(e){s+=e.size}),i.files=[],Y(n,function(e){i.files.push(e.file)}),i.total=s,i.loaded=0,i.filesLeft=n.length,e.beforeupload(i,e),t=function(){var l=n.shift(),u=l&&l.file,d=!1,h=c(e);if(i.filesLeft=n.length,u&&u.name===ie.expando&&(u=null,ie.log("[warn] FileAPI.upload() \u2014 called without files")),("abort"!=i.statusText||i.current)&&l){if(r=!1,i.currentFile=u,u&&!1===e.prepare(u,h))return void t.call(a);h.file=u,a._getFormData(h,l,function(r){o||e.upload(i,e);var c=new ie.XHR(X({},h,{upload:u?function(){e.fileupload(u,c,h)}:g,progress:u?function(t){d||(d=t.loaded===t.total,e.fileprogress({type:"progress",total:l.total=t.total,loaded:l.loaded=t.loaded},u,c,h),e.progress({type:"progress",total:s,loaded:i.loaded=o+l.size*(t.loaded/t.total)||0},u,c,h))}:g,complete:function(n){Y(W,function(e){i[e]=c[e]}),u&&(l.total=l.total||l.size,l.loaded=l.total,n||(this.progress(l),d=!0,o+=l.size,i.loaded=o),e.filecomplete(n,c,u,h)),setTimeout(function(){t.call(a)},0)}}));i.abort=function(e){e||(n.length=0),this.current=e,c.abort()},c.send(r)})}else{var p=200==i.status||201==i.status||204==i.status;e.complete(!p&&(i.statusText||"error"),i,e),r=!0}},setTimeout(t,0),i.append=function(e,o){e=ie._getFilesDataArray([].concat(e)),Y(e,function(e){s+=e.size,i.files.push(e.file),o?n.unshift(e):n.push(e)}),i.statusText="",r&&t.call(a)},i.remove=function(e){for(var t,i=n.length;i--;)n[i].file==e&&(t=n.splice(i,1),s-=t.size);return t},i},_getFilesDataArray:function(e){var t=[],i={};if(u(e)){var n=ie.getFiles(e);i[e.name||"file"]=null!==e.getAttribute("multiple")?n:n[0]}else K(e)&&u(e[0])?Y(e,function(e){i[e.name||"file"]=ie.getFiles(e)}):i=e;return Y(i,function e(i,n){K(i)?Y(i,function(t){e(t,n)}):i&&(i.name||i.image)&&t.push({name:n,file:i,size:i.size,total:i.size,loaded:0})}),t.length||t.push({file:{name:ie.expando}}),t},_getFormData:function(e,t,i){var n=t.file,a=t.name,s=n.name,o=n.type,r=ie.support.transform&&e.imageTransform,l=new ie.Form,c=ie.queue(function(){i(l)}),u=r&&h(r),d=ie.postNameConcat;Y(e.data,function e(t,i){"object"==typeof t?Y(t,function(t,n){e(t,d(i,n))}):l.append(i,t)}),function t(i){i.image?(c.inc(),i.toData(function(e,n){i.file&&(n.type=i.file.type,n.quality=i.matrix.quality,s=i.file&&i.file.name),s=s||(new Date).getTime()+".png",t(n),c.next()})):ie.Image&&r&&(/^image/.test(i.type)||M.test(i.nodeName))?(c.inc(),u&&(r=[r]),ie.Image.transform(i,r,e.imageAutoOrientation,function(t,n){if(u&&!t)I||ie.flashEngine||(l.multipart=!0),l.append(a,n[0],s,r[0].type||o);else{var h=0;t||Y(n,function(e,t){I||ie.flashEngine||(l.multipart=!0),r[t].postName||(h=1),l.append(r[t].postName||d(a,t),e,s,r[t].type||o)}),(t||e.imageOriginal)&&l.append(d(a,h?"original":null),i,s,o)}c.next()})):s!==ie.expando&&l.append(a,i,s)}(n),c.check()},reset:function(e,t){var i,n;return D?(n=D(e).clone(!0).insertBefore(e).val("")[0],t||D(e).remove()):(i=e.parentNode,n=i.insertBefore(e.cloneNode(!0),e),n.value="",t||i.removeChild(e),Y(B[ie.uid(e)],function(t,i){Y(t,function(t){J(e,i,t),Q(n,i,t)})})),n},load:function(e,t){var i=ie.getXHR();return i?(i.open("GET",e,!0),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),Q(i,"progress",function(e){e.lengthComputable&&t({type:e.type,loaded:e.loaded,total:e.total},i)}),i.onreadystatechange=function(){if(4==i.readyState)if(i.onreadystatechange=null,200==i.status){e=e.split("/");var n={name:e[e.length-1],size:i.getResponseHeader("Content-Length"),type:i.getResponseHeader("Content-Type")};n.dataURL="data:"+n.type+";base64,"+ie.encode64(i.responseBody||i.responseText),t({type:"load",result:n},i)}else t({type:"error"},i)},i.send(null)):t({type:"error"}),i},encode64:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",n=0;for("string"!=typeof e&&(e=String(e));n<e.length;){var a,s,o=255&e.charCodeAt(n++),r=255&e.charCodeAt(n++),l=255&e.charCodeAt(n++),c=o>>2,u=(3&o)<<4|r>>4;isNaN(r)?a=s=64:(a=(15&r)<<2|l>>6,s=isNaN(l)?64:63&l),i+=t.charAt(c)+t.charAt(u)+t.charAt(a)+t.charAt(s)}return i}};ie.addInfoReader(/^image/,function(e,t){if(!e.__dimensions){var i=e.__dimensions=ie.defer();ie.readAsImage(e,function(e){var t=e.target;i.resolve("load"!=e.type&&"error",{width:t.width,height:t.height}),t.src=ie.EMPTY_PNG,t=null})}e.__dimensions.then(t)}),ie.event.dnd=function(e,t,i){var n,a;i||(i=t,t=ie.F),C?(Q(e,"dragenter dragleave dragover",t.ff=t.ff||function(e){for(var i=d(e).types,s=i&&i.length,o=!1;s--;)if(~i[s].indexOf("File")){e[V](),a!==e.type&&(a=e.type,"dragleave"!=a&&t.call(e[G],!0,e),o=!0);break}o&&(clearTimeout(n),n=setTimeout(function(){t.call(e[G],"dragleave"!=a,e)},50))}),Q(e,"drop",i.ff=i.ff||function(e){e[V](),a=0,t.call(e[G],!1,e),ie.getDropFiles(e,function(t,n){i.call(e[G],t,n,e)})})):ie.log("Drag'n'Drop -- not supported")},ie.event.dnd.off=function(e,t,i){J(e,"dragenter dragleave dragover",t.ff),J(e,"drop",i.ff)},D&&!D.fn.dnd&&(D.fn.dnd=function(e,t){return this.each(function(){ie.event.dnd(this,e,t)})},D.fn.offdnd=function(e,t){return this.each(function(){ie.event.dnd.off(this,e,t)})}),e.FileAPI=X(ie,e.FileAPI),ie.log("FileAPI: "+ie.version),ie.log("protocol: "+e.location.protocol),ie.log("doctype: ["+b.name+"] "+b.publicId+" "+b.systemId),Y(v.getElementsByTagName("meta"),function(e){/x-ua-compatible/i.test(e.getAttribute("http-equiv"))&&ie.log("meta.http-equiv: "+e.getAttribute("content"))});try{p=!!console.log,f=!!console.log.apply}catch(e){}ie.flashUrl||(ie.flashUrl=ie.staticPath+"FileAPI.flash.swf"),ie.flashImageUrl||(ie.flashImageUrl=ie.staticPath+"FileAPI.flash.image.swf"),ie.flashWebcamUrl||(ie.flashWebcamUrl=ie.staticPath+"FileAPI.flash.camera.swf")}(window,void 0),function(e,t,i){"use strict";function n(t){if(t instanceof n){var i=new n(t.file);return e.extend(i.matrix,t.matrix),i}if(!(this instanceof n))return new n(t);this.file=t,this.size=t.size||100,this.matrix={sx:0,sy:0,sw:0,sh:0,dx:0,dy:0,dw:0,dh:0,resize:0,deg:0,quality:1,filter:0}}var a=Math.min,s=Math.round,o=function(){return t.createElement("canvas")},r=!1,l={8:270,3:180,6:90,7:270,4:180,5:90};try{r=o().toDataURL("image/png").indexOf("data:image/png")>-1}catch(e){}n.prototype={image:!0,constructor:n,set:function(t){return e.extend(this.matrix,t),this},crop:function(e,t,n,a){return n===i&&(n=e,a=t,e=t=0),this.set({sx:e,sy:t,sw:n,sh:a||n})},resize:function(e,t,i){return/min|max|height|width/.test(t)&&(i=t,t=e),this.set({dw:e,dh:t||e,resize:i})},preview:function(e,t){return this.resize(e,t||e,"preview")},rotate:function(e){return this.set({deg:e})},filter:function(e){return this.set({filter:e})},overlay:function(e){return this.set({overlay:e})},clone:function(){return new n(this)},_load:function(t,i){var n=this;/img|video/i.test(t.nodeName)?i.call(n,null,t):e.readAsImage(t,function(e){i.call(n,"load"!=e.type,e.result)})},_apply:function(t,i){var s,r=o(),l=this.getMatrix(t),c=r.getContext("2d"),u=t.videoWidth||t.width,d=t.videoHeight||t.height,h=l.deg,p=l.dw,f=l.dh,m=u,g=d,v=l.filter,b=t,y=l.overlay,_=e.queue(function(){t.src=e.EMPTY_PNG,i(!1,r)}),w=e.renderImageToCanvas;for(h-=360*Math.floor(h/360),t._type=this.file.type;l.multipass&&a(m/p,g/f)>2;)m=m/2+.5|0,g=g/2+.5|0,s=o(),s.width=m,s.height=g,b!==t?(w(s,b,0,0,b.width,b.height,0,0,m,g),b=s):(b=s,w(b,t,l.sx,l.sy,l.sw,l.sh,0,0,m,g),l.sx=l.sy=l.sw=l.sh=0);r.width=h%180?f:p,r.height=h%180?p:f,r.type=l.type,r.quality=l.quality,c.rotate(h*Math.PI/180),w(c.canvas,b,l.sx,l.sy,l.sw||b.width,l.sh||b.height,180==h||270==h?-p:0,90==h||180==h?-f:0,p,f),p=r.width,f=r.height,y&&e.each([].concat(y),function(t){_.inc();var i=new window.Image,n=function(){var a=0|t.x,s=0|t.y,o=t.w||i.width,r=t.h||i.height,l=t.rel;a=1==l||4==l||7==l?(p-o+a)/2:2==l||5==l||8==l?p-(o+a):a,s=3==l||4==l||5==l?(f-r+s)/2:l>=6?f-(r+s):s,e.event.off(i,"error load abort",n);try{c.globalAlpha=t.opacity||1,c.drawImage(i,a,s,o,r)}catch(e){}_.next()};e.event.on(i,"error load abort",n),i.src=t.src,i.complete&&n()}),v&&(_.inc(),n.applyFilter(r,v,_.next)),_.check()},getMatrix:function(t){var i=e.extend({},this.matrix),n=i.sw=i.sw||t.videoWidth||t.naturalWidth||t.width,o=i.sh=i.sh||t.videoHeight||t.naturalHeight||t.height,r=i.dw=i.dw||n,l=i.dh=i.dh||o,c=n/o,u=r/l,d=i.resize;if("preview"==d){if(r!=n||l!=o){var h,p;u>=c?(h=n,p=h/u):(p=o,h=p*u),h==n&&p==o||(i.sx=~~((n-h)/2),i.sy=~~((o-p)/2),n=h,o=p)}}else"height"==d?r=l*c:"width"==d?l=r/c:d&&(n>r||o>l?"min"==d?(r=s(c<u?a(n,r):l*c),l=s(c<u?r/c:a(o,l))):(r=s(c>=u?a(n,r):l*c),l=s(c>=u?r/c:a(o,l))):(r=n,l=o));return i.sw=n,i.sh=o,i.dw=r,i.dh=l,i.multipass=e.multiPassResize,i},_trans:function(t){this._load(this.file,function(i,n){if(i)t(i);else try{this._apply(n,t)}catch(i){e.log("[err] FileAPI.Image.fn._apply:",i),t(i)}})},get:function(t){if(e.support.transform){var i=this,n=i.matrix;"auto"==n.deg?e.getInfo(i.file,function(e,a){n.deg=l[a&&a.exif&&a.exif.Orientation]||0,i._trans(t)}):i._trans(t)}else t("not_support_transform");return this},toData:function(e){return this.get(e)}},n.exifOrientation=l,n.transform=function(t,a,s,o){function r(r,l){var c={},u=e.queue(function(e){o(e,c)});r?u.fail():e.each(a,function(e,a){if(!u.isFail()){var o=new n(l.nodeType?l:t),r="function"==typeof e;if(r?e(l,o):e.width?o[e.preview?"preview":"resize"](e.width,e.height,e.strategy):e.maxWidth&&(l.width>e.maxWidth||l.height>e.maxHeight)&&o.resize(e.maxWidth,e.maxHeight,"max"),e.crop){var d=e.crop;o.crop(0|d.x,0|d.y,d.w||d.width,d.h||d.height)}e.rotate===i&&s&&(e.rotate="auto"),o.set({type:o.matrix.type||e.type||t.type||"image/png"}),r||o.set({deg:e.rotate,overlay:e.overlay,filter:e.filter,quality:e.quality||1}),u.inc(),o.toData(function(e,t){e?u.fail():(c[a]=t,u.next())})}})}t.width?r(!1,t):e.getInfo(t,r)},e.each(["TOP","CENTER","BOTTOM"],function(t,i){e.each(["LEFT","CENTER","RIGHT"],function(e,a){n[t+"_"+e]=3*i+a,n[e+"_"+t]=3*i+a})}),n.toCanvas=function(e){var i=t.createElement("canvas");return i.width=e.videoWidth||e.width,i.height=e.videoHeight||e.height,i.getContext("2d").drawImage(e,0,0),i},n.fromDataURL=function(t,i,n){var a=e.newImage(t);e.extend(a,i),n(a)},n.applyFilter=function(t,i,a){"function"==typeof i?i(t,a):window.Caman&&window.Caman("IMG"==t.tagName?n.toCanvas(t):t,function(){"string"==typeof i?this[i]():e.each(i,function(e,t){this[t](e)},this),this.render(a)})},e.renderImageToCanvas=function(t,i,n,a,s,o,r,l,c,u){try{return t.getContext("2d").drawImage(i,n,a,s,o,r,l,c,u)}catch(t){throw e.log("renderImageToCanvas failed"),t}},e.support.canvas=e.support.transform=r,e.Image=n}(FileAPI,document),function(e){"use strict";e(FileAPI)}(function(e){"use strict";if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var t=e.renderImageToCanvas;e.detectSubsampling=function(e){var t,i;return e.width*e.height>1048576&&(t=document.createElement("canvas"),t.width=t.height=1,i=t.getContext("2d"),i.drawImage(e,1-e.width,0),0===i.getImageData(0,0,1,1).data[3])},e.detectVerticalSquash=function(e,t){var i,n,a,s,o,r=e.naturalHeight||e.height,l=document.createElement("canvas"),c=l.getContext("2d");for(t&&(r/=2),l.width=1,l.height=r,c.drawImage(e,0,0),i=c.getImageData(0,0,1,r).data,n=0,a=r,s=r;s>n;)o=i[4*(s-1)+3],0===o?a=s:n=s,s=a+n>>1;return s/r||1},e.renderImageToCanvas=function(i,n,a,s,o,r,l,c,u,d){if("image/jpeg"===n._type){var h,p,f,m,g=i.getContext("2d"),v=document.createElement("canvas"),b=1024,y=v.getContext("2d");if(v.width=b,v.height=b,g.save(),h=e.detectSubsampling(n),h&&(a/=2,s/=2,o/=2,r/=2),p=e.detectVerticalSquash(n,h),h||1!==p){for(s*=p,u=Math.ceil(b*u/o),d=Math.ceil(b*d/r/p),c=0,m=0;m<r;){for(l=0,f=0;f<o;)y.clearRect(0,0,b,b),y.drawImage(n,a,s,o,r,-f,-m,o,r),g.drawImage(v,0,0,b,b,l,c,u,d),f+=b,l+=u;m+=b,c+=d}return g.restore(),i}}return t(i,n,a,s,o,r,l,c,u,d)}}}),function(e,t){"use strict";function i(t,i,n){var a=t.blob,s=t.file;if(s){if(!a.toDataURL)return void e.readAsBinaryString(a,function(e){"load"==e.type&&i(t,e.result)});var o={"image/jpeg":".jpe?g","image/png":".png"},r=o[t.type]?t.type:"image/png",l=o[r]||".png",c=a.quality||1;s.match(new RegExp(l+"$","i"))||(s+=l.replace("?","")),t.file=s,t.type=r,!n&&a.toBlob?a.toBlob(function(e){i(t,e)},r,c):i(t,e.toBinaryString(a.toDataURL(r,c)))}else i(t,a)}var n=t.document,a=t.FormData,s=function(){this.items=[]},o=t.encodeURIComponent;s.prototype={append:function(e,t,i,n){this.items.push({name:e,blob:t&&t.blob||(void 0==t?"":t),file:t&&(i||t.name),type:t&&(n||t.type)})},each:function(e){for(var t=0,i=this.items.length;t<i;t++)e.call(this,this.items[t])},toData:function(t,i){i._chunked=e.support.chunked&&i.chunkSize>0&&1==e.filter(this.items,function(e){return e.file}).length,e.support.html5?e.formData&&!this.multipart&&a?i._chunked?(e.log("FileAPI.Form.toPlainData"),this.toPlainData(t)):(e.log("FileAPI.Form.toFormData"),this.toFormData(t)):(e.log("FileAPI.Form.toMultipartData"),this.toMultipartData(t)):(e.log("FileAPI.Form.toHtmlData"),this.toHtmlData(t))},_to:function(t,i,n,a){var s=e.queue(function(){i(t)});this.each(function(o){try{n(o,t,s,a)}catch(t){e.log("FileAPI.Form._to: "+t.message),i(t)}}),s.check()},toHtmlData:function(t){this._to(n.createDocumentFragment(),t,function(t,i){var a,s=t.blob;t.file?(e.reset(s,!0),s.name=t.name,s.disabled=!1,i.appendChild(s)):(a=n.createElement("input"),a.name=t.name,a.type="hidden",a.value=s,i.appendChild(a))})},toPlainData:function(e){this._to({},e,function(e,t,n){e.file&&(t.type=e.file),e.blob.toBlob?(n.inc(),i(e,function(e,i){t.name=e.name,t.file=i,t.size=i.length,t.type=e.type,n.next()})):e.file?(t.name=e.blob.name,t.file=e.blob,t.size=e.blob.size,t.type=e.type):(t.params||(t.params=[]),t.params.push(o(e.name)+"="+o(e.blob))),t.start=-1,t.end=t.file&&t.file.FileAPIReadPosition||-1,t.retry=0})},toFormData:function(e){this._to(new a,e,function(e,t,n){e.blob&&e.blob.toBlob?(n.inc(),i(e,function(e,i){t.append(e.name,i,e.file),n.next()})):e.file?t.append(e.name,e.blob,e.file):t.append(e.name,e.blob),e.file&&t.append("_"+e.name,e.file)})},toMultipartData:function(t){this._to([],t,function(e,t,n,a){n.inc(),i(e,function(e,i){t.push("--_"+a+'\r\nContent-Disposition: form-data; name="'+e.name+'"'+(e.file?'; filename="'+o(e.file)+'"':"")+(e.file?"\r\nContent-Type: "+(e.type||"application/octet-stream"):"")+"\r\n\r\n"+(e.file?i:o(i))+"\r\n"),n.next()},!0)
},e.expando)}},e.Form=s}(FileAPI,window),function(e,t){"use strict";var i=function(){},n=e.document,a=function(e){this.uid=t.uid(),this.xhr={abort:i,getResponseHeader:i,getAllResponseHeaders:i},this.options=e},s={"":1,XML:1,Text:1,Body:1};a.prototype={status:0,statusText:"",constructor:a,getResponseHeader:function(e){return this.xhr.getResponseHeader(e)},getAllResponseHeaders:function(){return this.xhr.getAllResponseHeaders()||{}},end:function(n,a){var s=this,o=s.options;s.end=s.abort=i,s.status=n,a&&(s.statusText=a),t.log("xhr.end:",n,a),o.complete(200!=n&&201!=n&&(s.statusText||"unknown"),s),s.xhr&&s.xhr.node&&setTimeout(function(){var t=s.xhr.node;try{t.parentNode.removeChild(t)}catch(e){}try{delete e[s.uid]}catch(e){}e[s.uid]=s.xhr.node=null},9)},abort:function(){this.end(0,"abort"),this.xhr&&(this.xhr.aborted=!0,this.xhr.abort())},send:function(e){var t=this,i=this.options;e.toData(function(e){e instanceof Error?t.end(0,e.message):(i.upload(i,t),t._send.call(t,i,e))},i)},_send:function(i,a){var o,r=this,l=r.uid,c=r.uid+"Load",u=i.url;if(t.log("XHR._send:",a),i.cache||(u+=(~u.indexOf("?")?"&":"?")+t.uid()),a.nodeName){var d=i.jsonp;u=u.replace(/([a-z]+)=(\?)/i,"$1="+l),i.upload(i,r);var h=function(e){if(~u.indexOf(e.origin))try{var i=t.parseJSON(e.data);i.id==l&&p(i.status,i.statusText,i.response)}catch(e){p(0,e.message)}},p=e[l]=function(i,n,a){r.readyState=4,r.responseText=a,r.end(i,n),t.event.off(e,"message",h),e[l]=o=m=e[c]=null};r.xhr.abort=function(){try{m.stop?m.stop():m.contentWindow.stop?m.contentWindow.stop():m.contentWindow.document.execCommand("Stop")}catch(e){}p(0,"abort")},t.event.on(e,"message",h),e[c]=function(){try{var e=m.contentWindow,i=e.document,n=e.result||t.parseJSON(i.body.innerHTML);p(n.status,n.statusText,n.response)}catch(e){t.log("[transport.onload]",e)}},o=n.createElement("div"),o.innerHTML='<form target="'+l+'" action="'+u+'" method="POST" enctype="multipart/form-data" style="position: absolute; top: -1000px; overflow: hidden; width: 1px; height: 1px;"><iframe name="'+l+'" src="javascript:false;" onload="window.'+c+" && "+c+'();"></iframe>'+(d&&i.url.indexOf("=?")<0?'<input value="'+l+'" name="'+d+'" type="hidden"/>':"")+"</form>";var f=o.getElementsByTagName("form")[0],m=o.getElementsByTagName("iframe")[0];f.appendChild(a),t.log(f.parentNode.innerHTML),n.body.appendChild(o),r.xhr.node=o,r.readyState=2;try{f.submit()}catch(e){t.log("iframe.error: "+e)}f=null}else{if(u=u.replace(/([a-z]+)=(\?)&?/i,""),this.xhr&&this.xhr.aborted)return void t.log("Error: already aborted");if(o=r.xhr=t.getXHR(),a.params&&(u+=(u.indexOf("?")<0?"?":"&")+a.params.join("&")),o.open("POST",u,!0),t.withCredentials&&(o.withCredentials="true"),i.headers&&i.headers["X-Requested-With"]||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.each(i.headers,function(e,t){o.setRequestHeader(t,e)}),i._chunked){o.upload&&o.upload.addEventListener("progress",t.throttle(function(e){a.retry||i.progress({type:e.type,total:a.size,loaded:a.start+e.loaded,totalSize:a.size},r,i)},100),!1),o.onreadystatechange=function(){var e=parseInt(o.getResponseHeader("X-Last-Known-Byte"),10);if(r.status=o.status,r.statusText=o.statusText,r.readyState=o.readyState,4==o.readyState){for(var n in s)r["response"+n]=o["response"+n];if(o.onreadystatechange=null,!o.status||o.status-201>0)if(t.log("Error: "+o.status),(!o.status&&!o.aborted||500==o.status||416==o.status)&&++a.retry<=i.chunkUploadRetry){var l=o.status?0:t.chunkNetworkDownRetryTimeout;i.pause(a.file,i),t.log("X-Last-Known-Byte: "+e),e?a.end=e:(a.end=a.start-1,416==o.status&&(a.end=a.end-i.chunkSize)),setTimeout(function(){r._send(i,a)},l)}else r.end(o.status);else a.retry=0,a.end==a.size-1?r.end(o.status):(t.log("X-Last-Known-Byte: "+e),e&&(a.end=e),a.file.FileAPIReadPosition=a.end,setTimeout(function(){r._send(i,a)},0));o=null}},a.start=a.end+1,a.end=Math.max(Math.min(a.start+i.chunkSize,a.size)-1,a.start);var g=a.file,v=(g.slice||g.mozSlice||g.webkitSlice).call(g,a.start,a.end+1);a.size&&!v.size?setTimeout(function(){r.end(-1)}):(o.setRequestHeader("Content-Range","bytes "+a.start+"-"+a.end+"/"+a.size),o.setRequestHeader("Content-Disposition","attachment; filename="+encodeURIComponent(a.name)),o.setRequestHeader("Content-Type",a.type||"application/octet-stream"),o.send(v)),g=v=null}else if(o.upload&&o.upload.addEventListener("progress",t.throttle(function(e){i.progress(e,r,i)},100),!1),o.onreadystatechange=function(){if(r.status=o.status,r.statusText=o.statusText,r.readyState=o.readyState,4==o.readyState){for(var e in s)r["response"+e]=o["response"+e];if(o.onreadystatechange=null,!o.status||o.status>201)if(t.log("Error: "+o.status),(!o.status&&!o.aborted||500==o.status)&&(i.retry||0)<i.uploadRetry){i.retry=(i.retry||0)+1;var n=t.networkDownRetryTimeout;i.pause(i.file,i),setTimeout(function(){r._send(i,a)},n)}else r.end(o.status);else r.end(o.status);o=null}},t.isArray(a)){o.setRequestHeader("Content-Type","multipart/form-data; boundary=_"+t.expando);var b=a.join("")+"--_"+t.expando+"--";if(o.sendAsBinary)o.sendAsBinary(b);else{var y=Array.prototype.map.call(b,function(e){return 255&e.charCodeAt(0)});o.send(new Uint8Array(y).buffer)}}else o.send(a)}}},t.XHR=a}(window,FileAPI),function(e,t){"use strict";function i(e){return e>=0?e+"px":e}function n(e){var i,n=s.createElement("canvas"),a=!1;try{i=n.getContext("2d"),i.drawImage(e,0,0,1,1),a=255!=i.getImageData(0,0,1,1).data[4]}catch(e){t.log("[FileAPI.Camera] detectVideoSignal:",e)}return a}var a=e.URL||e.webkitURL,s=e.document,o=e.navigator,r=o.getUserMedia||o.webkitGetUserMedia||o.mozGetUserMedia||o.msGetUserMedia,l=!!r;t.support.media=l;var c=function(e){this.video=e};c.prototype={isActive:function(){return!!this._active},start:function(e){var t,i,s=this,l=s.video,c=function(n){s._active=!n,clearTimeout(i),clearTimeout(t),e&&e(n,s)};r.call(o,{video:!0},function(e){s.stream=e,l.src=a.createObjectURL(e),t=setInterval(function(){n(l)&&c(null)},1e3),i=setTimeout(function(){c("timeout")},5e3),l.play()},c)},stop:function(){try{this._active=!1,this.video.pause();try{this.stream.stop()}catch(e){t.each(this.stream.getTracks(),function(e){e.stop()})}this.stream=null}catch(e){t.log("[FileAPI.Camera] stop:",e)}},shot:function(){return new u(this.video)}},c.get=function(e){return new c(e.firstChild)},c.publish=function(n,a,o){"function"==typeof a&&(o=a,a={}),a=t.extend({},{width:"100%",height:"100%",start:!0},a),n.jquery&&(n=n[0]);var r=function(e){if(e)o(e);else{var t=c.get(n);a.start?t.start(o):o(null,t)}};if(n.style.width=i(a.width),n.style.height=i(a.height),t.html5&&l){var u=s.createElement("video");u.style.width=i(a.width),u.style.height=i(a.height),e.jQuery?jQuery(n).empty():n.innerHTML="",n.appendChild(u),r()}else c.fallback(n,a,r)},c.fallback=function(e,t,i){i("not_support_camera")};var u=function(e){var i=e.nodeName?t.Image.toCanvas(e):e,n=t.Image(i);return n.type="image/png",n.width=i.width,n.height=i.height,n.size=i.width*i.height*4,n};c.Shot=u,t.Camera=c}(window,FileAPI),function(e,t,i){"use strict";var n=i.each,a=[];!i.support.flash||!i.media||i.support.media&&i.html5||function(){function e(e){var t=e.wid=i.uid();return i.Flash._fn[t]=e,"FileAPI.Flash._fn."+t}function t(e){try{i.Flash._fn[e.wid]=null,delete i.Flash._fn[e.wid]}catch(e){}}var s=i.Flash;i.extend(i.Flash,{patchCamera:function(){i.Camera.fallback=function(n,a,o){var r=i.uid();i.log("FlashAPI.Camera.publish: "+r),s.publish(n,r,i.extend(a,{camera:!0,onEvent:e(function e(n){"camera"===n.type&&(t(e),n.error?(i.log("FlashAPI.Camera.publish.error: "+n.error),o(n.error)):(i.log("FlashAPI.Camera.publish.success: "+r),o(null)))})}))},n(a,function(e){i.Camera.fallback.apply(i.Camera,e)}),a=[],i.extend(i.Camera.prototype,{_id:function(){return this.video.id},start:function(n){var a=this;s.cmd(this._id(),"camera.on",{callback:e(function e(s){t(e),s.error?(i.log("FlashAPI.camera.on.error: "+s.error),n(s.error,a)):(i.log("FlashAPI.camera.on.success: "+a._id()),a._active=!0,n(null,a))})})},stop:function(){this._active=!1,s.cmd(this._id(),"camera.off")},shot:function(){i.log("FlashAPI.Camera.shot:",this._id());var e=i.Flash.cmd(this._id(),"shot",{});return e.type="image/png",e.flashId=this._id(),e.isShot=!0,new i.Camera.Shot(e)}})}}),i.Camera.fallback=function(){a.push(arguments)}}()}(window,window.jQuery,FileAPI),"function"==typeof define&&define.amd&&define("FileAPI",[],function(){return FileAPI}),function(e){"use strict";var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,i=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),n=i&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),a=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,s=(i||a)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,s,o,r,l,c;for(t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),s=new ArrayBuffer(t.length),o=new Uint8Array(s),r=0;r<t.length;r+=1)o[r]=t.charCodeAt(r);return l=e.split(",")[0].split(":")[1].split(";")[0],i?new Blob([n?o:s],{type:l}):(c=new a,c.append(s),c.getBlob(l))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(e,i,n){e(n&&t.toDataURL&&s?s(this.toDataURL(i,n)):this.mozGetAsFile("blob",i))}:t.toDataURL&&s&&(t.toBlob=function(e,t,i){e(s(this.toDataURL(t,i)))})),e.dataURLtoBlob=s}(window),function(e,t){"use strict";function i(e,t,i,n,a){var s={type:i.type||i,target:e,result:n};X(s,a),t(s)}function n(e){return C&&!!C.prototype["readAs"+e]}function a(e,a,s,o){if(ie.isBlob(e)&&n(s)){var r=new C;Q(r,U,function t(n){var s=n.type;"progress"==s?i(e,a,n,n.target.result,{loaded:n.loaded,total:n.total}):"loadend"==s?(J(r,U,t),r=null):i(e,a,n,n.target.result)});try{o?r["readAs"+s](e,o):r["readAs"+s](e)}catch(n){i(e,a,"error",t,{error:n.toString()})}}else i(e,a,"error",t,{error:"filreader_not_support_"+s})}function s(e,t){if(!e.type&&(_||e.size%4096==0&&e.size<=102400))if(C)try{var i=new C;Z(i,U,function(e){var n="error"!=e.type;n?(null!=i.readyState&&i.readyState!==i.LOADING||i.abort(),t(n)):t(!1,i.error)}),i.readAsDataURL(e)}catch(e){t(!1,e)}else t(null,new Error("FileReader is not supported"));else t(!0)}function o(e){return e&&(e.isFile||e.isDirectory)}function r(e){var t;return e.getAsEntry?t=e.getAsEntry():e.webkitGetAsEntry&&(t=e.webkitGetAsEntry()),t}function l(e,t){if(e)if(e.isFile)e.file(function(i){i.fullPath=e.fullPath,t(!1,[i],[i])},function(i){e.error=i,t("FileError.code: "+i.code,[],[e])});else if(e.isDirectory){var i=e.createReader(),n=!0,a=[],s=[e],o=function(i){e.error=i,t("DirectoryError.code: "+i.code,a,s)},c=function r(c){n&&(n=!1,c.length||(e.error=new Error("directory is empty"))),c.length?ie.afor(c,function(e,t){l(t,function(t,n,l){t||(a=a.concat(n)),s=s.concat(l),e?e():i.readEntries(r,o)})}):t(!1,a,s)};i.readEntries(c,o)}else l(r(e),t);else{var u=new Error("invalid entry");e=new Object(e),e.error=u,t(u.message,[],[e])}}function c(e){var t={};return Y(e,function(e,i){e&&"object"==typeof e&&void 0===e.nodeType&&(e=X({},e)),t[i]=e}),t}function u(e){return L.test(e&&e.tagName)}function d(e){return(e.originalEvent||e||"").dataTransfer||{}}function h(e){var t;for(t in e)if(e.hasOwnProperty(t)&&!(e[t]instanceof Object||"overlay"===t||"filter"===t))return!0;return!1}var p,f,m=1,g=function(){},v=e.document,b=v.doctype||{},y=e.navigator.userAgent,_=/safari\//i.test(y)&&!/chrome\//i.test(y),w=/iemobile\//i.test(y),$=e.createObjectURL&&e||e.URL&&URL.revokeObjectURL&&URL||e.webkitURL&&webkitURL,x=e.Blob,k=e.File,C=e.FileReader,P=e.FormData,T=e.XMLHttpRequest,D=e.jQuery,S=!(!(k&&C&&(e.Uint8Array||P||T.prototype.sendAsBinary))||_&&/windows/i.test(y)&&!w),A=S&&"withCredentials"in new T,j=S&&!!x&&!!(x.prototype.webkitSlice||x.prototype.mozSlice||x.prototype.slice),E=(""+"".normalize).indexOf("[native code]")>0,I=e.dataURLtoBlob,N=/img/i,F=/canvas/i,M=/img|canvas/i,L=/input/i,R=/^data:[^,]+,/,O={}.toString,H=e.Math,z=function(t){return t=new e.Number(H.pow(1024,t)),t.from=function(e){return H.round(e*this)},t},B={},q=[],U="abort progress error load loadend",W="status statusText readyState response responseXML responseText responseBody".split(" "),G="currentTarget",V="preventDefault",K=function(e){return e&&"length"in e},Y=function(e,t,i){if(e)if(K(e))for(var n=0,a=e.length;n<a;n++)n in e&&t.call(i,e[n],n,e);else for(var s in e)e.hasOwnProperty(s)&&t.call(i,e[s],s,e)},X=function(e){for(var t=arguments,i=1,n=function(t,i){e[i]=t};i<t.length;i++)Y(t[i],n);return e},Q=function(e,t,i){if(e){var n=ie.uid(e);B[n]||(B[n]={});var a=C&&e&&e instanceof C;Y(t.split(/\s+/),function(t){D&&!a?D.event.add(e,t,i):(B[n][t]||(B[n][t]=[]),B[n][t].push(i),e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent?e.attachEvent("on"+t,i):e["on"+t]=i)})}},J=function(e,t,i){if(e){var n=ie.uid(e),a=B[n]||{},s=C&&e&&e instanceof C;Y(t.split(/\s+/),function(t){if(D&&!s)D.event.remove(e,t,i);else{for(var n=a[t]||[],o=n.length;o--;)if(n[o]===i){n.splice(o,1);break}e.addEventListener?e.removeEventListener(t,i,!1):e.detachEvent?e.detachEvent("on"+t,i):e["on"+t]=null}})}},Z=function(e,t,i){Q(e,t,function n(a){J(e,t,n),i(a)})},ee=function(t){return t.target||(t.target=e.event&&e.event.srcElement||v),3===t.target.nodeType&&(t.target=t.target.parentNode),t},te=function(e){var t=v.createElement("input");return t.setAttribute("type","file"),e in t},ie={version:"2.0.19",cors:!1,html5:!0,media:!1,formData:!0,multiPassResize:!0,debug:!1,pingUrl:!1,multiFlash:!1,flashAbortTimeout:0,withCredentials:!0,staticPath:"./dist/",flashUrl:0,flashImageUrl:0,postNameConcat:function(e,t){return e+(null!=t?"["+t+"]":"")},ext2mime:{jpg:"image/jpeg",tif:"image/tiff",txt:"text/plain"},accept:{"image/*":"art bm bmp dwg dxf cbr cbz fif fpx gif ico iefs jfif jpe jpeg jpg jps jut mcf nap nif pbm pcx pgm pict pm png pnm qif qtif ras rast rf rp svf tga tif tiff xbm xbm xpm xwd","audio/*":"m4a flac aac rm mpa wav wma ogg mp3 mp2 m3u mod amf dmf dsm far gdm imf it m15 med okt s3m stm sfx ult uni xm sid ac3 dts cue aif aiff wpl ape mac mpc mpp shn wv nsf spc gym adplug adx dsp adp ymf ast afc hps xs","video/*":"m4v 3gp nsv ts ty strm rm rmvb m3u ifo mov qt divx xvid bivx vob nrg img iso pva wmv asf asx ogm m2v avi bin dat dvr-ms mpg mpeg mp4 mkv avc vp3 svq3 nuv viv dv fli flv wpl"},uploadRetry:0,networkDownRetryTimeout:5e3,chunkSize:0,chunkUploadRetry:0,chunkNetworkDownRetryTimeout:2e3,KB:z(1),MB:z(2),GB:z(3),TB:z(4),EMPTY_PNG:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NkAAIAAAoAAggA9GkAAAAASUVORK5CYII=",expando:"fileapi"+(new Date).getTime(),uid:function(e){return e?e[ie.expando]=e[ie.expando]||ie.uid():(++m,ie.expando+m)},log:function(){ie.debug&&p&&(f?console.log.apply(console,arguments):console.log([].join.call(arguments," ")))},newImage:function(e,t){var i=v.createElement("img");return t&&ie.event.one(i,"error load",function(e){t("error"==e.type,i),i=null}),i.src=e,i},getXHR:function(){var t;if(T)t=new T;else if(e.ActiveXObject)try{t=new ActiveXObject("MSXML2.XMLHttp.3.0")}catch(e){t=new ActiveXObject("Microsoft.XMLHTTP")}return t},isArray:K,support:{dnd:A&&"ondrop"in v.createElement("div"),cors:A,html5:S,chunked:j,dataURI:!0,accept:te("accept"),multiple:te("multiple")},event:{on:Q,off:J,one:Z,fix:ee},throttle:function(t,i){var n,a;return function(){a=arguments,n||(t.apply(e,a),n=setTimeout(function(){n=0,t.apply(e,a)},i))}},F:function(){},parseJSON:function(t){return e.JSON&&JSON.parse?JSON.parse(t):new Function("return ("+t.replace(/([\r\n])/g,"\\$1")+");")()},trim:function(e){return e=String(e),e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},defer:function(){var e,i,n=[],a={resolve:function(t,s){for(a.resolve=g,i=t||!1,e=s;s=n.shift();)s(i,e)},then:function(a){i!==t?a(i,e):n.push(a)}};return a},queue:function(e){var t=0,i=0,n=!1,a=!1,s={inc:function(){i++},next:function(){t++,setTimeout(s.check,0)},check:function(){t>=i&&!n&&s.end()},isFail:function(){return n},fail:function(){!n&&e(n=!0)},end:function(){a||(a=!0,e())}};return s},each:Y,afor:function(e,t){var i=0,n=e.length;K(e)&&n--?function a(){t(n!=i&&a,e[i],i++)}():t(!1)},extend:X,isFile:function(e){return"[object File]"===O.call(e)},isBlob:function(e){return this.isFile(e)||"[object Blob]"===O.call(e)},isCanvas:function(e){return e&&F.test(e.nodeName)},getFilesFilter:function(e){return e="string"==typeof e?e:e.getAttribute&&e.getAttribute("accept")||"",e?new RegExp("("+e.replace(/\./g,"\\.").replace(/,/g,"|")+")$","i"):/./},readAsDataURL:function(e,t){ie.isCanvas(e)?i(e,t,"load",ie.toDataURL(e)):a(e,t,"DataURL")},readAsBinaryString:function(e,t){n("BinaryString")?a(e,t,"BinaryString"):a(e,function(e){if("load"==e.type)try{e.result=ie.toBinaryString(e.result)}catch(t){e.type="error",e.message=t.toString()}t(e)},"DataURL")},readAsArrayBuffer:function(e,t){a(e,t,"ArrayBuffer")},readAsText:function(e,t,i){i||(i=t,t="utf-8"),a(e,i,"Text",t)},toDataURL:function(e,t){return"string"==typeof e?e:e.toDataURL?e.toDataURL(t||"image/png"):void 0},toBinaryString:function(t){return e.atob(ie.toDataURL(t).replace(R,""))},readAsImage:function(e,n,a){if(ie.isBlob(e))if($){var s=$.createObjectURL(e);s===t?i(e,n,"error"):ie.readAsImage(s,n,a)}else ie.readAsDataURL(e,function(t){"load"==t.type?ie.readAsImage(t.result,n,a):(a||"error"==t.type)&&i(e,n,t,null,{loaded:t.loaded,total:t.total})});else if(ie.isCanvas(e))i(e,n,"load",e);else if(N.test(e.nodeName))if(e.complete)i(e,n,"load",e);else{var o="error abort load";Z(e,o,function t(a){"load"==a.type&&$&&$.revokeObjectURL(e.src),J(e,o,t),i(e,n,a,e)})}else if(e.iframe)i(e,n,{type:"error"});else{var r=ie.newImage(e.dataURL||e);ie.readAsImage(r,n,a)}},checkFileObj:function(e){var t={},i=ie.accept;return"object"==typeof e?t=e:t.name=(e+"").split(/\\|\//g).pop(),null==t.type&&(t.type=t.name.split(".").pop()),Y(i,function(e,i){e=new RegExp(e.replace(/\s/g,"|"),"i"),(e.test(t.type)||ie.ext2mime[t.type])&&(t.type=ie.ext2mime[t.type]||i.split("/")[0]+"/"+t.type)}),t},getDropFiles:function(e,t){var i,n=[],a=[],c=d(e),u=c.files,h=c.items,p=K(h)&&h[0]&&r(h[0]),f=ie.queue(function(){t(n,a)});if(p)if(E&&u){var m,g,v=u.length;for(i=new Array(v);v--;){m=u[v];try{g=r(h[v])}catch(e){ie.log("[err] getDropFiles: ",e),g=null}o(g)&&(g.isDirectory||g.isFile&&m.name==m.name.normalize("NFC"))?i[v]=g:i[v]=m}}else i=h;else i=u;Y(i||[],function(e){f.inc();try{p&&o(e)?l(e,function(e,t,i){e?ie.log("[err] getDropFiles:",e):n.push.apply(n,t),a.push.apply(a,i),f.next()}):s(e,function(t,i){t?n.push(e):e.error=i,a.push(e),f.next()})}catch(e){f.next(),ie.log("[err] getDropFiles: ",e)}}),f.check()},getFiles:function(e,t,i){var n=[];return i?(ie.filterFiles(ie.getFiles(e),t,i),null):(e.jquery&&(e.each(function(){n=n.concat(ie.getFiles(this))}),e=n,n=[]),"string"==typeof t&&(t=ie.getFilesFilter(t)),e.originalEvent?e=ee(e.originalEvent):e.srcElement&&(e=ee(e)),e.dataTransfer?e=e.dataTransfer:e.target&&(e=e.target),e.files?(n=e.files,S||(n[0].blob=e,n[0].iframe=!0)):!S&&u(e)?ie.trim(e.value)&&(n=[ie.checkFileObj(e.value)],n[0].blob=e,n[0].iframe=!0):K(e)&&(n=e),ie.filter(n,function(e){return!t||t.test(e.name)}))},getTotalSize:function(e){for(var t=0,i=e&&e.length;i--;)t+=e[i].size;return t},getInfo:function(e,t){var i={},n=q.concat();ie.isBlob(e)?function a(){var s=n.shift();s?s.test(e.type)?s(e,function(e,n){e?t(e):(X(i,n),a())}):a():t(!1,i)}():t("not_support_info",i)},addInfoReader:function(e,t){t.test=function(t){return e.test(t)},q.push(t)},filter:function(e,t){for(var i,n=[],a=0,s=e.length;a<s;a++)a in e&&(i=e[a],t.call(i,i,a,e)&&n.push(i));return n},filterFiles:function(e,t,i){if(e.length){var n,a=e.concat(),s=[],o=[];!function e(){a.length?(n=a.shift(),ie.getInfo(n,function(i,a){(t(n,!i&&a)?s:o).push(n),e()})):i(s,o)}()}else i([],e)},upload:function(e){e=X({jsonp:"callback",prepare:ie.F,beforeupload:ie.F,upload:ie.F,fileupload:ie.F,fileprogress:ie.F,filecomplete:ie.F,progress:ie.F,complete:ie.F,pause:ie.F,imageOriginal:!0,chunkSize:ie.chunkSize,chunkUploadRetry:ie.chunkUploadRetry,uploadRetry:ie.uploadRetry},e),e.imageAutoOrientation&&!e.imageTransform&&(e.imageTransform={rotate:"auto"});var t,i=new ie.XHR(e),n=this._getFilesDataArray(e.files),a=this,s=0,o=0,r=!1;return Y(n,function(e){s+=e.size}),i.files=[],Y(n,function(e){i.files.push(e.file)}),i.total=s,i.loaded=0,i.filesLeft=n.length,e.beforeupload(i,e),t=function(){var l=n.shift(),u=l&&l.file,d=!1,h=c(e);if(i.filesLeft=n.length,u&&u.name===ie.expando&&(u=null,ie.log("[warn] FileAPI.upload() \u2014 called without files")),("abort"!=i.statusText||i.current)&&l){if(r=!1,i.currentFile=u,u&&!1===e.prepare(u,h))return void t.call(a);h.file=u,a._getFormData(h,l,function(r){o||e.upload(i,e);var c=new ie.XHR(X({},h,{upload:u?function(){e.fileupload(u,c,h)}:g,progress:u?function(t){d||(d=t.loaded===t.total,e.fileprogress({type:"progress",total:l.total=t.total,loaded:l.loaded=t.loaded},u,c,h),e.progress({type:"progress",total:s,loaded:i.loaded=o+l.size*(t.loaded/t.total)||0},u,c,h))}:g,complete:function(n){Y(W,function(e){i[e]=c[e]}),u&&(l.total=l.total||l.size,l.loaded=l.total,n||(this.progress(l),d=!0,o+=l.size,i.loaded=o),e.filecomplete(n,c,u,h)),setTimeout(function(){t.call(a)},0)}}));i.abort=function(e){e||(n.length=0),this.current=e,c.abort()},c.send(r)})}else{var p=200==i.status||201==i.status||204==i.status;e.complete(!p&&(i.statusText||"error"),i,e),r=!0}},setTimeout(t,0),i.append=function(e,o){e=ie._getFilesDataArray([].concat(e)),Y(e,function(e){s+=e.size,i.files.push(e.file),o?n.unshift(e):n.push(e)}),i.statusText="",r&&t.call(a)},i.remove=function(e){for(var t,i=n.length;i--;)n[i].file==e&&(t=n.splice(i,1),s-=t.size);return t},i},_getFilesDataArray:function(e){var t=[],i={};if(u(e)){var n=ie.getFiles(e);i[e.name||"file"]=null!==e.getAttribute("multiple")?n:n[0]}else K(e)&&u(e[0])?Y(e,function(e){i[e.name||"file"]=ie.getFiles(e)}):i=e;return Y(i,function e(i,n){K(i)?Y(i,function(t){e(t,n)}):i&&(i.name||i.image)&&t.push({name:n,file:i,size:i.size,total:i.size,loaded:0})}),t.length||t.push({file:{name:ie.expando}}),t},_getFormData:function(e,t,i){var n=t.file,a=t.name,s=n.name,o=n.type,r=ie.support.transform&&e.imageTransform,l=new ie.Form,c=ie.queue(function(){i(l)}),u=r&&h(r),d=ie.postNameConcat;Y(e.data,function e(t,i){"object"==typeof t?Y(t,function(t,n){e(t,d(i,n))}):l.append(i,t)}),function t(i){i.image?(c.inc(),i.toData(function(e,n){i.file&&(n.type=i.file.type,n.quality=i.matrix.quality,s=i.file&&i.file.name),s=s||(new Date).getTime()+".png",t(n),c.next()})):ie.Image&&r&&(/^image/.test(i.type)||M.test(i.nodeName))?(c.inc(),u&&(r=[r]),ie.Image.transform(i,r,e.imageAutoOrientation,function(t,n){if(u&&!t)I||ie.flashEngine||(l.multipart=!0),l.append(a,n[0],s,r[0].type||o);else{var h=0;t||Y(n,function(e,t){I||ie.flashEngine||(l.multipart=!0),r[t].postName||(h=1),l.append(r[t].postName||d(a,t),e,s,r[t].type||o)}),(t||e.imageOriginal)&&l.append(d(a,h?"original":null),i,s,o)}c.next()})):s!==ie.expando&&l.append(a,i,s)}(n),c.check()},reset:function(e,t){var i,n;return D?(n=D(e).clone(!0).insertBefore(e).val("")[0],t||D(e).remove()):(i=e.parentNode,n=i.insertBefore(e.cloneNode(!0),e),n.value="",t||i.removeChild(e),Y(B[ie.uid(e)],function(t,i){Y(t,function(t){J(e,i,t),Q(n,i,t)})})),n},load:function(e,t){var i=ie.getXHR();return i?(i.open("GET",e,!0),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),Q(i,"progress",function(e){e.lengthComputable&&t({type:e.type,loaded:e.loaded,total:e.total},i)}),i.onreadystatechange=function(){if(4==i.readyState)if(i.onreadystatechange=null,200==i.status){e=e.split("/");var n={name:e[e.length-1],size:i.getResponseHeader("Content-Length"),type:i.getResponseHeader("Content-Type")};n.dataURL="data:"+n.type+";base64,"+ie.encode64(i.responseBody||i.responseText),t({type:"load",result:n},i)}else t({type:"error"},i)},i.send(null)):t({type:"error"}),i},encode64:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",n=0;for("string"!=typeof e&&(e=String(e));n<e.length;){var a,s,o=255&e.charCodeAt(n++),r=255&e.charCodeAt(n++),l=255&e.charCodeAt(n++),c=o>>2,u=(3&o)<<4|r>>4;isNaN(r)?a=s=64:(a=(15&r)<<2|l>>6,s=isNaN(l)?64:63&l),i+=t.charAt(c)+t.charAt(u)+t.charAt(a)+t.charAt(s)}return i}};ie.addInfoReader(/^image/,function(e,t){if(!e.__dimensions){var i=e.__dimensions=ie.defer();ie.readAsImage(e,function(e){var t=e.target;i.resolve("load"!=e.type&&"error",{width:t.width,height:t.height}),t.src=ie.EMPTY_PNG,t=null})}e.__dimensions.then(t)}),ie.event.dnd=function(e,t,i){var n,a;i||(i=t,t=ie.F),C?(Q(e,"dragenter dragleave dragover",t.ff=t.ff||function(e){for(var i=d(e).types,s=i&&i.length,o=!1;s--;)if(~i[s].indexOf("File")){e[V](),a!==e.type&&(a=e.type,"dragleave"!=a&&t.call(e[G],!0,e),o=!0);break}o&&(clearTimeout(n),n=setTimeout(function(){t.call(e[G],"dragleave"!=a,e)},50))}),Q(e,"drop",i.ff=i.ff||function(e){e[V](),a=0,t.call(e[G],!1,e),ie.getDropFiles(e,function(t,n){i.call(e[G],t,n,e)})})):ie.log("Drag'n'Drop -- not supported")},ie.event.dnd.off=function(e,t,i){J(e,"dragenter dragleave dragover",t.ff),J(e,"drop",i.ff)},D&&!D.fn.dnd&&(D.fn.dnd=function(e,t){return this.each(function(){ie.event.dnd(this,e,t)})},D.fn.offdnd=function(e,t){return this.each(function(){ie.event.dnd.off(this,e,t)})}),e.FileAPI=X(ie,e.FileAPI),ie.log("FileAPI: "+ie.version),ie.log("protocol: "+e.location.protocol),ie.log("doctype: ["+b.name+"] "+b.publicId+" "+b.systemId),Y(v.getElementsByTagName("meta"),function(e){/x-ua-compatible/i.test(e.getAttribute("http-equiv"))&&ie.log("meta.http-equiv: "+e.getAttribute("content"))});try{p=!!console.log,f=!!console.log.apply}catch(e){}ie.flashUrl||(ie.flashUrl=ie.staticPath+"FileAPI.flash.swf"),ie.flashImageUrl||(ie.flashImageUrl=ie.staticPath+"FileAPI.flash.image.swf"),ie.flashWebcamUrl||(ie.flashWebcamUrl=ie.staticPath+"FileAPI.flash.camera.swf")}(window,void 0),function(e,t,i){"use strict";function n(t){if(t instanceof n){var i=new n(t.file);return e.extend(i.matrix,t.matrix),i}if(!(this instanceof n))return new n(t);this.file=t,this.size=t.size||100,this.matrix={sx:0,sy:0,sw:0,sh:0,dx:0,dy:0,dw:0,dh:0,resize:0,deg:0,quality:1,filter:0}}var a=Math.min,s=Math.round,o=function(){return t.createElement("canvas")},r=!1,l={8:270,3:180,6:90,7:270,4:180,5:90};try{r=o().toDataURL("image/png").indexOf("data:image/png")>-1}catch(e){}n.prototype={image:!0,constructor:n,set:function(t){return e.extend(this.matrix,t),this},crop:function(e,t,n,a){return n===i&&(n=e,a=t,e=t=0),this.set({sx:e,sy:t,sw:n,sh:a||n})},resize:function(e,t,i){return/min|max|height|width/.test(t)&&(i=t,t=e),this.set({dw:e,dh:t||e,resize:i})},preview:function(e,t){return this.resize(e,t||e,"preview")},rotate:function(e){return this.set({deg:e})},filter:function(e){return this.set({filter:e})},overlay:function(e){return this.set({overlay:e})},clone:function(){return new n(this)},_load:function(t,i){var n=this;/img|video/i.test(t.nodeName)?i.call(n,null,t):e.readAsImage(t,function(e){i.call(n,"load"!=e.type,e.result)})},_apply:function(t,i){var s,r=o(),l=this.getMatrix(t),c=r.getContext("2d"),u=t.videoWidth||t.width,d=t.videoHeight||t.height,h=l.deg,p=l.dw,f=l.dh,m=u,g=d,v=l.filter,b=t,y=l.overlay,_=e.queue(function(){t.src=e.EMPTY_PNG,i(!1,r)}),w=e.renderImageToCanvas;for(h-=360*Math.floor(h/360),t._type=this.file.type;l.multipass&&a(m/p,g/f)>2;)m=m/2+.5|0,g=g/2+.5|0,s=o(),s.width=m,s.height=g,b!==t?(w(s,b,0,0,b.width,b.height,0,0,m,g),b=s):(b=s,w(b,t,l.sx,l.sy,l.sw,l.sh,0,0,m,g),l.sx=l.sy=l.sw=l.sh=0);r.width=h%180?f:p,r.height=h%180?p:f,r.type=l.type,r.quality=l.quality,c.rotate(h*Math.PI/180),w(c.canvas,b,l.sx,l.sy,l.sw||b.width,l.sh||b.height,180==h||270==h?-p:0,90==h||180==h?-f:0,p,f),p=r.width,f=r.height,y&&e.each([].concat(y),function(t){_.inc();var i=new window.Image,n=function(){var a=0|t.x,s=0|t.y,o=t.w||i.width,r=t.h||i.height,l=t.rel;a=1==l||4==l||7==l?(p-o+a)/2:2==l||5==l||8==l?p-(o+a):a,s=3==l||4==l||5==l?(f-r+s)/2:l>=6?f-(r+s):s,e.event.off(i,"error load abort",n);try{c.globalAlpha=t.opacity||1,c.drawImage(i,a,s,o,r)}catch(e){}_.next()};e.event.on(i,"error load abort",n),i.src=t.src,i.complete&&n()}),v&&(_.inc(),n.applyFilter(r,v,_.next)),_.check()},getMatrix:function(t){var i=e.extend({},this.matrix),n=i.sw=i.sw||t.videoWidth||t.naturalWidth||t.width,o=i.sh=i.sh||t.videoHeight||t.naturalHeight||t.height,r=i.dw=i.dw||n,l=i.dh=i.dh||o,c=n/o,u=r/l,d=i.resize;if("preview"==d){if(r!=n||l!=o){var h,p;u>=c?(h=n,p=h/u):(p=o,h=p*u),h==n&&p==o||(i.sx=~~((n-h)/2),i.sy=~~((o-p)/2),n=h,o=p)}}else"height"==d?r=l*c:"width"==d?l=r/c:d&&(n>r||o>l?"min"==d?(r=s(c<u?a(n,r):l*c),l=s(c<u?r/c:a(o,l))):(r=s(c>=u?a(n,r):l*c),l=s(c>=u?r/c:a(o,l))):(r=n,l=o));return i.sw=n,i.sh=o,i.dw=r,i.dh=l,i.multipass=e.multiPassResize,i},_trans:function(t){this._load(this.file,function(i,n){if(i)t(i);else try{this._apply(n,t)}catch(i){e.log("[err] FileAPI.Image.fn._apply:",i),t(i)}})},get:function(t){if(e.support.transform){var i=this,n=i.matrix;"auto"==n.deg?e.getInfo(i.file,function(e,a){n.deg=l[a&&a.exif&&a.exif.Orientation]||0,i._trans(t)}):i._trans(t)}else t("not_support_transform");return this},toData:function(e){return this.get(e)}},n.exifOrientation=l,n.transform=function(t,a,s,o){function r(r,l){var c={},u=e.queue(function(e){o(e,c)});r?u.fail():e.each(a,function(e,a){if(!u.isFail()){var o=new n(l.nodeType?l:t),r="function"==typeof e;if(r?e(l,o):e.width?o[e.preview?"preview":"resize"](e.width,e.height,e.strategy):e.maxWidth&&(l.width>e.maxWidth||l.height>e.maxHeight)&&o.resize(e.maxWidth,e.maxHeight,"max"),e.crop){var d=e.crop;o.crop(0|d.x,0|d.y,d.w||d.width,d.h||d.height)}e.rotate===i&&s&&(e.rotate="auto"),o.set({type:o.matrix.type||e.type||t.type||"image/png"}),r||o.set({deg:e.rotate,overlay:e.overlay,filter:e.filter,quality:e.quality||1}),u.inc(),o.toData(function(e,t){e?u.fail():(c[a]=t,u.next())})}})}t.width?r(!1,t):e.getInfo(t,r)},e.each(["TOP","CENTER","BOTTOM"],function(t,i){e.each(["LEFT","CENTER","RIGHT"],function(e,a){n[t+"_"+e]=3*i+a,n[e+"_"+t]=3*i+a})}),n.toCanvas=function(e){var i=t.createElement("canvas");return i.width=e.videoWidth||e.width,i.height=e.videoHeight||e.height,i.getContext("2d").drawImage(e,0,0),i},n.fromDataURL=function(t,i,n){var a=e.newImage(t);e.extend(a,i),n(a)},n.applyFilter=function(t,i,a){"function"==typeof i?i(t,a):window.Caman&&window.Caman("IMG"==t.tagName?n.toCanvas(t):t,function(){"string"==typeof i?this[i]():e.each(i,function(e,t){this[t](e)},this),this.render(a)})},e.renderImageToCanvas=function(t,i,n,a,s,o,r,l,c,u){try{return t.getContext("2d").drawImage(i,n,a,s,o,r,l,c,u)}catch(t){throw e.log("renderImageToCanvas failed"),t}},e.support.canvas=e.support.transform=r,e.Image=n}(FileAPI,document),function(e){"use strict";e(FileAPI)}(function(e){"use strict";if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var t=e.renderImageToCanvas;e.detectSubsampling=function(e){var t,i;return e.width*e.height>1048576&&(t=document.createElement("canvas"),t.width=t.height=1,i=t.getContext("2d"),i.drawImage(e,1-e.width,0),0===i.getImageData(0,0,1,1).data[3])},e.detectVerticalSquash=function(e,t){var i,n,a,s,o,r=e.naturalHeight||e.height,l=document.createElement("canvas"),c=l.getContext("2d");for(t&&(r/=2),l.width=1,l.height=r,c.drawImage(e,0,0),i=c.getImageData(0,0,1,r).data,n=0,a=r,s=r;s>n;)o=i[4*(s-1)+3],0===o?a=s:n=s,s=a+n>>1;return s/r||1},e.renderImageToCanvas=function(i,n,a,s,o,r,l,c,u,d){if("image/jpeg"===n._type){var h,p,f,m,g=i.getContext("2d"),v=document.createElement("canvas"),b=1024,y=v.getContext("2d");if(v.width=b,v.height=b,g.save(),h=e.detectSubsampling(n),h&&(a/=2,s/=2,o/=2,r/=2),p=e.detectVerticalSquash(n,h),h||1!==p){for(s*=p,u=Math.ceil(b*u/o),d=Math.ceil(b*d/r/p),c=0,m=0;m<r;){for(l=0,f=0;f<o;)y.clearRect(0,0,b,b),y.drawImage(n,a,s,o,r,-f,-m,o,r),g.drawImage(v,0,0,b,b,l,c,u,d),f+=b,l+=u;m+=b,c+=d}return g.restore(),i}}return t(i,n,a,s,o,r,l,c,u,d)}}}),function(e,t){"use strict";function i(t,i,n){var a=t.blob,s=t.file;if(s){if(!a.toDataURL)return void e.readAsBinaryString(a,function(e){"load"==e.type&&i(t,e.result)});var o={"image/jpeg":".jpe?g","image/png":".png"},r=o[t.type]?t.type:"image/png",l=o[r]||".png",c=a.quality||1;s.match(new RegExp(l+"$","i"))||(s+=l.replace("?","")),t.file=s,t.type=r,!n&&a.toBlob?a.toBlob(function(e){i(t,e)},r,c):i(t,e.toBinaryString(a.toDataURL(r,c)))}else i(t,a)}var n=t.document,a=t.FormData,s=function(){this.items=[]},o=t.encodeURIComponent;s.prototype={append:function(e,t,i,n){this.items.push({name:e,blob:t&&t.blob||(void 0==t?"":t),file:t&&(i||t.name),type:t&&(n||t.type)})},each:function(e){for(var t=0,i=this.items.length;t<i;t++)e.call(this,this.items[t])},toData:function(t,i){i._chunked=e.support.chunked&&i.chunkSize>0&&1==e.filter(this.items,function(e){return e.file}).length,
e.support.html5?e.formData&&!this.multipart&&a?i._chunked?(e.log("FileAPI.Form.toPlainData"),this.toPlainData(t)):(e.log("FileAPI.Form.toFormData"),this.toFormData(t)):(e.log("FileAPI.Form.toMultipartData"),this.toMultipartData(t)):(e.log("FileAPI.Form.toHtmlData"),this.toHtmlData(t))},_to:function(t,i,n,a){var s=e.queue(function(){i(t)});this.each(function(o){try{n(o,t,s,a)}catch(t){e.log("FileAPI.Form._to: "+t.message),i(t)}}),s.check()},toHtmlData:function(t){this._to(n.createDocumentFragment(),t,function(t,i){var a,s=t.blob;t.file?(e.reset(s,!0),s.name=t.name,s.disabled=!1,i.appendChild(s)):(a=n.createElement("input"),a.name=t.name,a.type="hidden",a.value=s,i.appendChild(a))})},toPlainData:function(e){this._to({},e,function(e,t,n){e.file&&(t.type=e.file),e.blob.toBlob?(n.inc(),i(e,function(e,i){t.name=e.name,t.file=i,t.size=i.length,t.type=e.type,n.next()})):e.file?(t.name=e.blob.name,t.file=e.blob,t.size=e.blob.size,t.type=e.type):(t.params||(t.params=[]),t.params.push(o(e.name)+"="+o(e.blob))),t.start=-1,t.end=t.file&&t.file.FileAPIReadPosition||-1,t.retry=0})},toFormData:function(e){this._to(new a,e,function(e,t,n){e.blob&&e.blob.toBlob?(n.inc(),i(e,function(e,i){t.append(e.name,i,e.file),n.next()})):e.file?t.append(e.name,e.blob,e.file):t.append(e.name,e.blob),e.file&&t.append("_"+e.name,e.file)})},toMultipartData:function(t){this._to([],t,function(e,t,n,a){n.inc(),i(e,function(e,i){t.push("--_"+a+'\r\nContent-Disposition: form-data; name="'+e.name+'"'+(e.file?'; filename="'+o(e.file)+'"':"")+(e.file?"\r\nContent-Type: "+(e.type||"application/octet-stream"):"")+"\r\n\r\n"+(e.file?i:o(i))+"\r\n"),n.next()},!0)},e.expando)}},e.Form=s}(FileAPI,window),function(e,t){"use strict";var i=function(){},n=e.document,a=function(e){this.uid=t.uid(),this.xhr={abort:i,getResponseHeader:i,getAllResponseHeaders:i},this.options=e},s={"":1,XML:1,Text:1,Body:1};a.prototype={status:0,statusText:"",constructor:a,getResponseHeader:function(e){return this.xhr.getResponseHeader(e)},getAllResponseHeaders:function(){return this.xhr.getAllResponseHeaders()||{}},end:function(n,a){var s=this,o=s.options;s.end=s.abort=i,s.status=n,a&&(s.statusText=a),t.log("xhr.end:",n,a),o.complete(200!=n&&201!=n&&(s.statusText||"unknown"),s),s.xhr&&s.xhr.node&&setTimeout(function(){var t=s.xhr.node;try{t.parentNode.removeChild(t)}catch(e){}try{delete e[s.uid]}catch(e){}e[s.uid]=s.xhr.node=null},9)},abort:function(){this.end(0,"abort"),this.xhr&&(this.xhr.aborted=!0,this.xhr.abort())},send:function(e){var t=this,i=this.options;e.toData(function(e){e instanceof Error?t.end(0,e.message):(i.upload(i,t),t._send.call(t,i,e))},i)},_send:function(i,a){var o,r=this,l=r.uid,c=r.uid+"Load",u=i.url;if(t.log("XHR._send:",a),i.cache||(u+=(~u.indexOf("?")?"&":"?")+t.uid()),a.nodeName){var d=i.jsonp;u=u.replace(/([a-z]+)=(\?)/i,"$1="+l),i.upload(i,r);var h=function(e){if(~u.indexOf(e.origin))try{var i=t.parseJSON(e.data);i.id==l&&p(i.status,i.statusText,i.response)}catch(e){p(0,e.message)}},p=e[l]=function(i,n,a){r.readyState=4,r.responseText=a,r.end(i,n),t.event.off(e,"message",h),e[l]=o=m=e[c]=null};r.xhr.abort=function(){try{m.stop?m.stop():m.contentWindow.stop?m.contentWindow.stop():m.contentWindow.document.execCommand("Stop")}catch(e){}p(0,"abort")},t.event.on(e,"message",h),e[c]=function(){try{var e=m.contentWindow,i=e.document,n=e.result||t.parseJSON(i.body.innerHTML);p(n.status,n.statusText,n.response)}catch(e){t.log("[transport.onload]",e)}},o=n.createElement("div"),o.innerHTML='<form target="'+l+'" action="'+u+'" method="POST" enctype="multipart/form-data" style="position: absolute; top: -1000px; overflow: hidden; width: 1px; height: 1px;"><iframe name="'+l+'" src="javascript:false;" onload="window.'+c+" && "+c+'();"></iframe>'+(d&&i.url.indexOf("=?")<0?'<input value="'+l+'" name="'+d+'" type="hidden"/>':"")+"</form>";var f=o.getElementsByTagName("form")[0],m=o.getElementsByTagName("iframe")[0];f.appendChild(a),t.log(f.parentNode.innerHTML),n.body.appendChild(o),r.xhr.node=o,r.readyState=2;try{f.submit()}catch(e){t.log("iframe.error: "+e)}f=null}else{if(u=u.replace(/([a-z]+)=(\?)&?/i,""),this.xhr&&this.xhr.aborted)return void t.log("Error: already aborted");if(o=r.xhr=t.getXHR(),a.params&&(u+=(u.indexOf("?")<0?"?":"&")+a.params.join("&")),o.open("POST",u,!0),t.withCredentials&&(o.withCredentials="true"),i.headers&&i.headers["X-Requested-With"]||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.each(i.headers,function(e,t){o.setRequestHeader(t,e)}),i._chunked){o.upload&&o.upload.addEventListener("progress",t.throttle(function(e){a.retry||i.progress({type:e.type,total:a.size,loaded:a.start+e.loaded,totalSize:a.size},r,i)},100),!1),o.onreadystatechange=function(){var e=parseInt(o.getResponseHeader("X-Last-Known-Byte"),10);if(r.status=o.status,r.statusText=o.statusText,r.readyState=o.readyState,4==o.readyState){for(var n in s)r["response"+n]=o["response"+n];if(o.onreadystatechange=null,!o.status||o.status-201>0)if(t.log("Error: "+o.status),(!o.status&&!o.aborted||500==o.status||416==o.status)&&++a.retry<=i.chunkUploadRetry){var l=o.status?0:t.chunkNetworkDownRetryTimeout;i.pause(a.file,i),t.log("X-Last-Known-Byte: "+e),e?a.end=e:(a.end=a.start-1,416==o.status&&(a.end=a.end-i.chunkSize)),setTimeout(function(){r._send(i,a)},l)}else r.end(o.status);else a.retry=0,a.end==a.size-1?r.end(o.status):(t.log("X-Last-Known-Byte: "+e),e&&(a.end=e),a.file.FileAPIReadPosition=a.end,setTimeout(function(){r._send(i,a)},0));o=null}},a.start=a.end+1,a.end=Math.max(Math.min(a.start+i.chunkSize,a.size)-1,a.start);var g=a.file,v=(g.slice||g.mozSlice||g.webkitSlice).call(g,a.start,a.end+1);a.size&&!v.size?setTimeout(function(){r.end(-1)}):(o.setRequestHeader("Content-Range","bytes "+a.start+"-"+a.end+"/"+a.size),o.setRequestHeader("Content-Disposition","attachment; filename="+encodeURIComponent(a.name)),o.setRequestHeader("Content-Type",a.type||"application/octet-stream"),o.send(v)),g=v=null}else if(o.upload&&o.upload.addEventListener("progress",t.throttle(function(e){i.progress(e,r,i)},100),!1),o.onreadystatechange=function(){if(r.status=o.status,r.statusText=o.statusText,r.readyState=o.readyState,4==o.readyState){for(var e in s)r["response"+e]=o["response"+e];if(o.onreadystatechange=null,!o.status||o.status>201)if(t.log("Error: "+o.status),(!o.status&&!o.aborted||500==o.status)&&(i.retry||0)<i.uploadRetry){i.retry=(i.retry||0)+1;var n=t.networkDownRetryTimeout;i.pause(i.file,i),setTimeout(function(){r._send(i,a)},n)}else r.end(o.status);else r.end(o.status);o=null}},t.isArray(a)){o.setRequestHeader("Content-Type","multipart/form-data; boundary=_"+t.expando);var b=a.join("")+"--_"+t.expando+"--";if(o.sendAsBinary)o.sendAsBinary(b);else{var y=Array.prototype.map.call(b,function(e){return 255&e.charCodeAt(0)});o.send(new Uint8Array(y).buffer)}}else o.send(a)}}},t.XHR=a}(window,FileAPI),function(e,t){"use strict";function i(e){return e>=0?e+"px":e}function n(e){var i,n=s.createElement("canvas"),a=!1;try{i=n.getContext("2d"),i.drawImage(e,0,0,1,1),a=255!=i.getImageData(0,0,1,1).data[4]}catch(e){t.log("[FileAPI.Camera] detectVideoSignal:",e)}return a}var a=e.URL||e.webkitURL,s=e.document,o=e.navigator,r=o.getUserMedia||o.webkitGetUserMedia||o.mozGetUserMedia||o.msGetUserMedia,l=!!r;t.support.media=l;var c=function(e){this.video=e};c.prototype={isActive:function(){return!!this._active},start:function(e){var t,i,s=this,l=s.video,c=function(n){s._active=!n,clearTimeout(i),clearTimeout(t),e&&e(n,s)};r.call(o,{video:!0},function(e){s.stream=e,l.src=a.createObjectURL(e),t=setInterval(function(){n(l)&&c(null)},1e3),i=setTimeout(function(){c("timeout")},5e3),l.play()},c)},stop:function(){try{this._active=!1,this.video.pause();try{this.stream.stop()}catch(e){t.each(this.stream.getTracks(),function(e){e.stop()})}this.stream=null}catch(e){t.log("[FileAPI.Camera] stop:",e)}},shot:function(){return new u(this.video)}},c.get=function(e){return new c(e.firstChild)},c.publish=function(n,a,o){"function"==typeof a&&(o=a,a={}),a=t.extend({},{width:"100%",height:"100%",start:!0},a),n.jquery&&(n=n[0]);var r=function(e){if(e)o(e);else{var t=c.get(n);a.start?t.start(o):o(null,t)}};if(n.style.width=i(a.width),n.style.height=i(a.height),t.html5&&l){var u=s.createElement("video");u.style.width=i(a.width),u.style.height=i(a.height),e.jQuery?jQuery(n).empty():n.innerHTML="",n.appendChild(u),r()}else c.fallback(n,a,r)},c.fallback=function(e,t,i){i("not_support_camera")};var u=function(e){var i=e.nodeName?t.Image.toCanvas(e):e,n=t.Image(i);return n.type="image/png",n.width=i.width,n.height=i.height,n.size=i.width*i.height*4,n};c.Shot=u,t.Camera=c}(window,FileAPI),function(e,t,i){"use strict";var n=e.document,a=e.location,s=e.navigator,o=i.each;i.support.flash=function(){var t=s.mimeTypes,n=!1;if(s.plugins&&"object"==typeof s.plugins["Shockwave Flash"])n=s.plugins["Shockwave Flash"].description&&!(t&&t["application/x-shockwave-flash"]&&!t["application/x-shockwave-flash"].enabledPlugin);else try{n=!(!e.ActiveXObject||!new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(e){i.log("Flash -- does not supported.")}return n&&/^file:/i.test(a)&&i.log("[warn] Flash does not work on `file:` protocol."),n}(),i.support.flash&&(!i.html5||!i.support.html5||i.cors&&!i.support.cors||i.media&&!i.support.media)&&function(){function r(e){return('<object id="#id#" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+(e.width||"100%")+'" height="'+(e.height||"100%")+'"><param name="movie" value="#src#" /><param name="flashvars" value="#flashvars#" /><param name="swliveconnect" value="true" /><param name="allowscriptaccess" value="always" /><param name="allownetworking" value="all" /><param name="menu" value="false" /><param name="wmode" value="#wmode#" /><embed flashvars="#flashvars#" swliveconnect="true" allownetworking="all" allowscriptaccess="always" name="#id#" src="#src#" width="'+(e.width||"100%")+'" height="'+(e.height||"100%")+'" menu="false" wmode="transparent" type="application/x-shockwave-flash"></embed></object>').replace(/#(\w+)#/gi,function(t,i){return e[i]})}function l(e,t){if(e&&e.style){var i,n;for(i in t){n=t[i],"number"==typeof n&&(n+="px");try{e.style[i]=n}catch(e){}}}}function c(e,t){o(t,function(t,i){var n=e[i];e[i]=function(){return this.parent=n,t.apply(this,arguments)}})}function u(e){return e&&!e.flashId}function d(e){var t=e.wid=i.uid();return w._fn[t]=e,"FileAPI.Flash._fn."+t}function h(e){try{w._fn[e.wid]=null,delete w._fn[e.wid]}catch(e){}}function p(e,t){if(!_.test(e)){if(/^\.\//.test(e)||"/"!=e.charAt(0)){var i=a.pathname;i=i.substr(0,i.lastIndexOf("/")),e=(i+"/"+e).replace("/./","/")}"//"!=e.substr(0,2)&&(e="//"+a.host+e),_.test(e)||(e=a.protocol+e)}return t&&(e+=(/\?/.test(e)?"&":"?")+t),e}function f(e,t,a){function s(){try{w.get(c).setImage(t)}catch(e){i.log('[err] FlashAPI.Preview.setImage -- can not set "base64":',e)}}var o,c=i.uid(),u=n.createElement("div"),f=10;for(o in e)u.setAttribute(o,e[o]),u[o]=e[o];l(u,e),e.width="100%",e.height="100%",u.innerHTML=r(i.extend({id:c,src:p(i.flashImageUrl,"r="+i.uid()),wmode:"opaque",flashvars:"scale="+e.scale+"&callback="+d(function e(){return h(e),--f>0&&s(),!0})},e)),a(!1,u),u=null}function m(e){return{id:e.id,name:e.name,matrix:e.matrix,flashId:e.flashId}}function g(t){var i=t.getBoundingClientRect(),a=n.body,s=(t&&t.ownerDocument).documentElement;return{top:i.top+(e.pageYOffset||s.scrollTop)-(s.clientTop||a.clientTop||0),left:i.left+(e.pageXOffset||s.scrollLeft)-(s.clientLeft||a.clientLeft||0),width:i.right-i.left,height:i.bottom-i.top}}var v=i.uid(),b=0,y={},_=/^https?:/i,w={_fn:{},init:function(){var e=n.body&&n.body.firstChild;if(e)do{if(1==e.nodeType){i.log("FlashAPI.state: awaiting");var t=n.createElement("div");return t.id="_"+v,l(t,{top:1,right:1,width:5,height:5,position:"absolute",zIndex:"2147483647"}),e.parentNode.insertBefore(t,e),void w.publish(t,v)}}while(e=e.nextSibling);b<10&&setTimeout(w.init,50*++b)},publish:function(e,t,n){n=n||{},e.innerHTML=r({id:t,src:p(i.flashUrl,"r="+i.version),wmode:n.camera?"":"transparent",flashvars:"callback="+(n.onEvent||"FileAPI.Flash.onEvent")+"&flashId="+t+"&storeKey="+s.userAgent.match(/\d/gi).join("")+"_"+i.version+(w.isReady||(i.pingUrl?"&ping="+i.pingUrl:""))+"&timeout="+i.flashAbortTimeout+(n.camera?"&useCamera="+p(i.flashWebcamUrl):"")+"&debug="+(i.debug?"1":"")},n)},ready:function(){i.log("FlashAPI.state: ready"),w.ready=i.F,w.isReady=!0,w.patch(),w.patchCamera&&w.patchCamera(),i.event.on(n,"mouseover",w.mouseover),i.event.on(n,"click",function(e){w.mouseover(e)&&(e.preventDefault?e.preventDefault():e.returnValue=!0)})},getEl:function(){return n.getElementById("_"+v)},getWrapper:function(e){do{if(/js-fileapi-wrapper/.test(e.className))return e}while((e=e.parentNode)&&e!==n.body)},mouseover:function(e){var t=i.event.fix(e).target;if(/input/i.test(t.nodeName)&&"file"==t.type&&!t.disabled){var a=t.getAttribute(v),s=w.getWrapper(t);if(i.multiFlash){if("i"==a||"r"==a)return!1;if("p"!=a){t.setAttribute(v,"i");var o=n.createElement("div");if(!s)return void i.log("[err] FlashAPI.mouseover: js-fileapi-wrapper not found");l(o,{top:0,left:0,width:t.offsetWidth,height:t.offsetHeight,zIndex:"2147483647",position:"absolute"}),s.appendChild(o),w.publish(o,i.uid()),t.setAttribute(v,"p")}return!0}if(s){var r=g(s);l(w.getEl(),r),w.curInp=t}}else/object|embed/i.test(t.nodeName)||l(w.getEl(),{top:1,left:1,width:5,height:5})},onEvent:function(e){var t=e.type;if("ready"==t){try{w.getInput(e.flashId).setAttribute(v,"r")}catch(e){}return w.ready(),setTimeout(function(){w.mouseenter(e)},50),!0}"ping"===t?i.log("(flash -> js).ping:",[e.status,e.savedStatus],e.error):"log"===t?i.log("(flash -> js).log:",e.target):t in w&&setTimeout(function(){i.log("FlashAPI.event."+e.type+":",e),w[t](e)},1)},mouseenter:function(e){var t=w.getInput(e.flashId);if(t){w.cmd(e,"multiple",null!=t.getAttribute("multiple"));var n=[],a={};o((t.getAttribute("accept")||"").split(/,\s*/),function(e){i.accept[e]&&o(i.accept[e].split(" "),function(e){a[e]=1})}),o(a,function(e,t){n.push(t)}),w.cmd(e,"accept",n.length?n.join(",")+","+n.join(",").toUpperCase():"*")}},get:function(t){return n[t]||e[t]||n.embeds[t]},getInput:function(e){if(!i.multiFlash)return w.curInp;try{var t=w.getWrapper(w.get(e));if(t)return t.getElementsByTagName("input")[0]}catch(t){i.log('[err] Can not find "input" by flashId:',e,t)}},select:function(e){var a,s=w.getInput(e.flashId),r=i.uid(s),l=e.target.files;o(l,function(e){i.checkFileObj(e)}),y[r]=l,n.createEvent?(a=n.createEvent("Event"),a.files=l,a.initEvent("change",!0,!0),s.dispatchEvent(a)):t?t(s).trigger({type:"change",files:l}):(a=n.createEventObject(),a.files=l,s.fireEvent("onchange",a))},cmd:function(e,t,n,a){try{return i.log("(js -> flash)."+t+":",n),w.get(e.flashId||e).cmd(t,n)}catch(s){i.log("(js -> flash).onError:",s.toString()),a||setTimeout(function(){w.cmd(e,t,n,!0)},50)}},patch:function(){i.flashEngine=!0,c(i,{getFiles:function(e,t,n){if(n)return i.filterFiles(i.getFiles(e),t,n),null;var a=i.isArray(e)?e:y[i.uid(e.target||e.srcElement||e)];return a?(t&&(t=i.getFilesFilter(t),a=i.filter(a,function(e){return t.test(e.name)})),a):this.parent.apply(this,arguments)},getInfo:function(e,t){if(u(e))this.parent.apply(this,arguments);else if(e.isShot)t(null,e.info={width:e.width,height:e.height});else{if(!e.__info){var n=e.__info=i.defer();w.cmd(e,"getFileInfo",{id:e.id,callback:d(function t(i,a){h(t),n.resolve(i,e.info=a)})})}e.__info.then(t)}}}),i.support.transform=!0,i.Image&&c(i.Image.prototype,{get:function(e,t){return this.set({scaleMode:t||"noScale"}),this.parent(e)},_load:function(e,t){if(i.log("FlashAPI.Image._load:",e),u(e))this.parent.apply(this,arguments);else{var n=this;i.getInfo(e,function(i){t.call(n,i,e)})}},_apply:function(e,t){if(i.log("FlashAPI.Image._apply:",e),u(e))this.parent.apply(this,arguments);else{var n=this.getMatrix(e.info),a=t;w.cmd(e,"imageTransform",{id:e.id,matrix:n,callback:d(function s(o,r){i.log("FlashAPI.Image._apply.callback:",o),h(s),o?a(o):i.support.html5||i.support.dataURI&&!(r.length>3e4)?(n.filter&&(a=function(e,a){e?t(e):i.Image.applyFilter(a,n.filter,function(){t(e,this.canvas)})}),i.newImage("data:"+e.type+";base64,"+r,a)):f({width:n.deg%180?n.dh:n.dw,height:n.deg%180?n.dw:n.dh,scale:n.scaleMode},r,a)})})}},toData:function(e){var t=this.file,n=t.info,a=this.getMatrix(n);i.log("FlashAPI.Image.toData"),u(t)?this.parent.apply(this,arguments):("auto"==a.deg&&(a.deg=i.Image.exifOrientation[n&&n.exif&&n.exif.Orientation]||0),e.call(this,!t.info,{id:t.id,flashId:t.flashId,name:t.name,type:t.type,matrix:a}))}}),i.Image&&c(i.Image,{fromDataURL:function(e,t,n){!i.support.dataURI||e.length>3e4?f(i.extend({scale:"exactFit"},t),e.replace(/^data:[^,]+,/,""),function(e,t){n(t)}):this.parent(e,t,n)}}),c(i.Form.prototype,{toData:function(e){for(var t=this.items,n=t.length;n--;)if(t[n].file&&u(t[n].blob))return this.parent.apply(this,arguments);i.log("FlashAPI.Form.toData"),e(t)}}),c(i.XHR.prototype,{_send:function(e,t){if(t.nodeName||t.append&&i.support.html5||i.isArray(t)&&"string"==typeof t[0])return this.parent.apply(this,arguments);var n,a,s={},r={},l=this;if(o(t,function(e){e.file?(r[e.name]=e=m(e.blob),a=e.id,n=e.flashId):s[e.name]=e.blob}),a||(n=v),!n)return i.log("[err] FlashAPI._send: flashId -- undefined"),this.parent.apply(this,arguments);i.log("FlashAPI.XHR._send: "+n+" -> "+a),l.xhr={headers:{},abort:function(){w.cmd(n,"abort",{id:a})},getResponseHeader:function(e){return this.headers[e]},getAllResponseHeaders:function(){return this.headers}};var c=i.queue(function(){w.cmd(n,"upload",{url:p(e.url.replace(/([a-z]+)=(\?)&?/i,"")),data:s,files:a?r:null,headers:e.headers||{},callback:d(function t(n){var a=n.type,s=n.result;i.log("FlashAPI.upload."+a),"progress"==a?(n.loaded=Math.min(n.loaded,n.total),n.lengthComputable=!0,e.progress(n)):"complete"==a?(h(t),"string"==typeof s&&(l.responseText=s.replace(/%22/g,'"').replace(/%5c/g,"\\").replace(/%26/g,"&").replace(/%25/g,"%")),l.end(n.status||200)):"abort"!=a&&"error"!=a||(l.end(n.status||0,n.message),h(t))})})});o(r,function(e){c.inc(),i.getInfo(e,c.next)}),c.check()}})}};i.Flash=w,i.newImage("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",function(e,t){i.support.dataURI=!(1!=t.width||1!=t.height),w.init()})}()}(window,window.jQuery,FileAPI),function(e,t,i){"use strict";var n=i.each,a=[];!i.support.flash||!i.media||i.support.media&&i.html5||function(){function e(e){var t=e.wid=i.uid();return i.Flash._fn[t]=e,"FileAPI.Flash._fn."+t}function t(e){try{i.Flash._fn[e.wid]=null,delete i.Flash._fn[e.wid]}catch(e){}}var s=i.Flash;i.extend(i.Flash,{patchCamera:function(){i.Camera.fallback=function(n,a,o){var r=i.uid();i.log("FlashAPI.Camera.publish: "+r),s.publish(n,r,i.extend(a,{camera:!0,onEvent:e(function e(n){"camera"===n.type&&(t(e),n.error?(i.log("FlashAPI.Camera.publish.error: "+n.error),o(n.error)):(i.log("FlashAPI.Camera.publish.success: "+r),o(null)))})}))},n(a,function(e){i.Camera.fallback.apply(i.Camera,e)}),a=[],i.extend(i.Camera.prototype,{_id:function(){return this.video.id},start:function(n){var a=this;s.cmd(this._id(),"camera.on",{callback:e(function e(s){t(e),s.error?(i.log("FlashAPI.camera.on.error: "+s.error),n(s.error,a)):(i.log("FlashAPI.camera.on.success: "+a._id()),a._active=!0,n(null,a))})})},stop:function(){this._active=!1,s.cmd(this._id(),"camera.off")},shot:function(){i.log("FlashAPI.Camera.shot:",this._id());var e=i.Flash.cmd(this._id(),"shot",{});return e.type="image/png",e.flashId=this._id(),e.isShot=!0,new i.Camera.Shot(e)}})}}),i.Camera.fallback=function(){a.push(arguments)}}()}(window,window.jQuery,FileAPI),"function"==typeof define&&define.amd&&define("FileAPI",[],function(){return FileAPI}),function(e,t){"use strict";var i=e.noop,n=!e.fn.prop,a=n?"attr":"prop",s="data-fileapi",o="data-fileapi-id",r=function(n,a){if(this.$el=n=e(n).on("change.fileapi",e.proxy(this,"_onSelect")),this.el=n[0],this._options={},this.options=a=e.extend({url:0,data:{},accept:0,multiple:!1,paramName:0,dataType:"json",duplicate:!1,chunkSize:0,chunkUploadRetry:3,maxSize:0,maxFiles:0,imageSize:0,sortFn:0,filterFn:0,autoUpload:!1,lang:{B:"bytes",KB:"KB",MB:"MB",GB:"GB",TB:"TB"},sizeFormat:"0.00",imageTransform:0,elements:{ctrl:{upload:'[data-fileapi="ctrl.upload"]',reset:'[data-fileapi="ctrl.reset"]',abort:'[data-fileapi="ctrl.abort"]'},empty:{show:'[data-fileapi="empty.show"]',hide:'[data-fileapi="empty.hide"]'},emptyQueue:{show:'[data-fileapi="emptyQueue.show"]',hide:'[data-fileapi="emptyQueue.hide"]'},active:{show:'[data-fileapi="active.show"]',hide:'[data-fileapi="active.hide"]'},size:'[data-fileapi="size"]',name:'[data-fileapi="name"]',progress:'[data-fileapi="progress"]',file:{tpl:'[data-fileapi="file.tpl"]',progress:'[data-fileapi="file.progress"]',active:{show:'[data-fileapi="active.show"]',hide:'[data-fileapi="active.hide"]'},preview:{el:0,get:0,width:0,height:0,processing:0}},dnd:{el:'[data-fileapi="dnd"]',hover:"dnd_hover"}},onDrop:i,onDropHover:i,onSelect:i,onUpload:i,onProgress:i,onComplete:i,onFileUpload:i,onFileProgress:i,onFileComplete:i},a),!a.url){var o=this.$el.attr("action")||this.$el.find("form").attr("action");o?a.url=o:this._throw("url \u2014 is not defined")}this.$files=this.elem("list"),this.itemTplFn=e.fn.fileapi.tpl(e("<div/>").append(this.elem("file.tpl")).html()),t.each(a,function(e,t){this._setOption(t,e)},this),this.$el.on("reset.fileapi",e.proxy(this,"_onReset")).on("submit.fileapi",e.proxy(this,"_onSubmit")).on("upload.fileapi progress.fileapi complete.fileapi",e.proxy(this,"_onUploadEvent")).on("fileupload.fileapi fileprogress.fileapi filecomplete.fileapi",e.proxy(this,"_onFileUploadEvent")).on("click","["+s+"]",e.proxy(this,"_onActionClick"));var r=a.elements.ctrl;r&&(r.reset&&this.$el.on("click.fileapi",r.reset,e.proxy(this,"_onReset")),r.upload&&this.$el.on("click.fileapi",r.upload,e.proxy(this,"_onSubmit"))),this.elem("dnd.el",!0).dnd(e.proxy(this,"_onDropHover"),e.proxy(this,"_onDrop")),this.$progress=this.elem("progress"),this._crop={},this._rotate={},this.files=[],this.uploaded=[],this.clear()};r.prototype={constructor:r,_throw:function(e){throw"jquery.fileapi: "+e},_getFiles:function(e,i){var n=this.options,a=n.maxSize,s=n.filterFn,o=t.getFiles(e),r={all:o,files:[],other:[],duplicate:n.duplicate?[]:this._extractDuplicateFiles(o)},l=n.imageSize,c=this;l||s?t.filterFiles(o,function(e,t){var i=!0;return t&&l&&(i=(!l.minWidth||t.width>=l.minWidth)&&(!l.minHeight||t.height>=l.minHeight)&&(!l.maxWidth||t.height<=l.maxWidth)&&(!l.maxHeight||t.height<=l.maxHeight)),i&&(!a||a>=e.size)&&(!s||s(e,t))},function(e,t){r.files=e,r.other=t,i.call(c,r)}):(t.each(o,function(e){r[!a||a>=e.size?"files":"other"].push(e)}),i.call(c,r))},_extractDuplicateFiles:function(e){for(var t,i=[],n=e.length,a=this.files;n--;)for(t=a.length;t--;)if(this._fileCompare(e[n],a[t])){i.push(e.splice(n,1));break}return i},_fileCompare:function(e,t){return e.size==t.size&&e.name==t.name},_getFormatedSize:function(e){var i=this.options,n="B";return e>=t.TB?e/=t[n="TB"]:e>=t.GB?e/=t[n="GB"]:e>=t.MB?e/=t[n="MB"]:e>=t.KB&&(e/=t[n="KB"]),i.sizeFormat.replace(/^\d+([^\d]+)(\d*)/,function(t,a,s){return e=e.toFixed(s.length),(e+"").replace(".",a)+" "+i.lang[n]})},_onSelect:function(t){this._getFiles(t,e.proxy(function(e){e.all.length&&!1!==this.emit("select",e)&&this.add(e.files)},this))},_onActionClick:function(i){var n=i.currentTarget,a=e.attr(n,s),r=e(n).closest("["+o+"]",this.$el),l=r.attr(o),c=!0;"remove"==a?(r.remove(),this.queue=t.filter(this.queue,function(e){return t.uid(e)!=l}),this.files=t.filter(this.files,function(e){return t.uid(e)!=l}),this._redraw()):/^rotate/.test(a)?this.rotate(l,/ccw/.test(a)?"-=90":"+=90"):c=!1,c&&i.preventDefault()},_onSubmit:function(e){this.upload(),e.preventDefault()},_onReset:function(e){this.clear(),e.preventDefault()},_onDrop:function(e){this._getFiles(e,function(e){!1!==this.emit("drop",e)&&this.add(e.files)})},_onDropHover:function(t,i){if(!1!==this.emit("dropHover",{state:t,event:i})){var n=this.option("elements.dnd.hover");n&&e(i.currentTarget).toggleClass(n,t)}},_getUploadEvent:function(t){var i=this.xhr,n={xhr:i,file:i.currentFile,files:i.files,widget:this};return e.extend(n,t)},_emitUploadEvent:function(e){var t=this._getUploadEvent();this.emit(e+"upload",t)},_emitProgressEvent:function(e,t){var i=this._getUploadEvent(t);this.emit(e+"progress",i)},_emitCompleteEvent:function(t,i){var n=this.xhr,a=this._getUploadEvent({error:i,status:n.status,statusText:n.statusText,result:n.responseText});"json"==this.options.dataType&&(a.result=e.parseJSON(a.result)),this.emit(t+"complete",a)},_onUploadEvent:function(e,t){var i=this,n=this.$progress,a=e.type;if("progress"==a)n.stop().animate({width:t.loaded/t.total*100+"%"},300);else if("upload"==a)n.width(0);else{var s=function(){n.dequeue(),i.clear()};this.xhr=null,this.active=!1,n.length?n.queue(s):s()}},_onFileUploadPrepare:function(i,n){var a=t.uid(i),s=this._rotate[a],o=this._crop[a];if(s||o){var r=n.imageTransform=n.imageTransform||{};e.isEmptyObject(r)||parseInt(r.maxWidth||r.minWidth||r.width,10)>0||r.type||r.quality?(r.crop=o,r.rotate=s):t.each(r,function(e){e.crop=o,e.rotate=s})}},_onFileUploadEvent:function(e,i){var n=this,a=e.type.substr(4),o=t.uid(i.file),r=this.fileElem(o),l=this._$fileprogress;if(this.__fileId!==o&&(this.__fileId=o,this._$fileprogress=l=r.find(this.option("elements.file.progress"))),"progress"==a)l.stop().animate({width:i.loaded/i.total*100+"%"},300);else if("upload"==a||"complete"==a){var c=function(){var e="elements.file."+a;"upload"==a&&(r.find("["+s+'="remove"]').hide(),l.width(0)),l.dequeue(),r.find(n.option(e+".show")).show(),r.find(n.option(e+".hide")).hide()};l.length?l.queue(c):c(),"complete"==a&&(this.uploaded.push(i.file),delete this._rotate[o])}},_redraw:function(){var i=!!this.active,n=this.files,s=!n.length&&!i,r=!this.queue.length&&!i,l=[],c=0,u=this.$files,d=u.children().length,h=this.option("elements.file.preview");t.each(n,function(i,n){var a=t.uid(i);if(l.push(i.name),c+=i.size,u.length&&!this.fileElem(a).length){var s=this.itemTplFn({$idx:d+n,uid:i.uid,name:i.name,type:i.type,size:i.size,sizeText:this._getFormatedSize(i.size)});u.append(e(s).attr(o,a)),h.el&&this._makeFilePreview(a,i,h)}},this),this.elem("name").text(l.join(", ")),this.elem("size").text(this._getFormatedSize(c)),this.__empty!==s&&(this.__empty=s,this.elem("empty.show").toggle(s),this.elem("empty.hide").toggle(!s)),this.__emptyQueue!==r&&(this.__emptyQueue=s,this.elem("emptyQueue.show").toggle(r),this.elem("emptyQueue.hide").toggle(!r)),this.__active!==i&&(this.__active=i,this.elem("active.show").toggle(i),this.elem("active.hide").toggle(!i),this.$(".js-fileapi-wrapper,:file")[i?"attr":"removeAttr"]("aria-disabled",i)[a]("disabled",i)),this.elem("ctrl.upload").add(this.elem("ctrl.reset"))[s||i?"attr":"removeAttr"]("aria-disabled",s||i)[a]("disabled",s||i)},_makeFilePreview:function(e,i,n,a){var s=this,o=a?s.$(n.el):s.fileElem(e).find(n.el);if(/^image/.test(i.type)){t.log("_makeFilePreview:",e,i);var r=t.Image(i),l=function(){r.get(function(t,a){s._crop[e]||(t?(n.get&&n.get(o,i),s.emit("filePreviewError",{error:t,file:i})):o.html(a))})};n.width&&r.preview(n.width,n.height),n.rotate&&r.rotate(n.rotate),n.processing?n.processing(i,r,l):l()}else n.get&&n.get(o,i)},emit:function(t,i){var n,a=this.options,s=e.Event(t);return s.widget=this,t=e.camelCase("on-"+t.replace(/(file)(upload)/,"$1-$2")),e.isFunction(a[t])&&(n=a[t].call(this.el,s,i)),!1!==n&&this.$el.triggerHandler(s,i)},add:function(e){if(e.length){var i=this.options,n=i.sortFn,a=i.elements.preview;n&&e.sort(n),a&&a.el&&t.each(e,function(e){this._makeFilePreview(t.uid(e),e,a,!0)},this),this.xhr&&this.xhr.append(e),this.queue=this.queue.concat(e),this.files=this.files.concat(e),this.options.autoUpload?this.upload():this._redraw()}},$:function(t,i){return"string"==typeof t&&(t=/^#/.test(t)?t:(i?e(i):this.$el).find(t)),e(t)},elem:function(t,i){var n=this.option("elements."+t);return void 0===n&&i&&(n=this.option("elements."+t.substr(0,t.lastIndexOf(".")))),this.$("string"!=e.type(n)&&e.isEmptyObject(n)?[]:n)},fileElem:function(e){return this.$("["+o+'="'+e+'"]')},option:function(i,n){if(void 0!==n&&e.isPlainObject(n))return t.each(n,function(e,t){this.option(i+"."+t,e)},this),this;var a,s,o=this.options,r=o[i],l=0;if(-1!=i.indexOf("."))for(r=o,i=i.split("."),a=i.length;a>l;l++){if(s=i[l],void 0!==n&&1==a-l){r[s]=n;break}void 0===r[s]&&(r[s]={}),r=r[s]}else void 0!==n&&(o[i]=n);return void 0!==n&&(this._setOption(i,n,this._options[i]),this._options[i]=n),void 0!==n?n:r},_setOption:function(e,t){switch(e){case"accept":case"multiple":case"paramName":"paramName"==e&&(e="name"),t&&this.$(":file")[a](e,t)}},serialize:function(){var t,i={};return this.$el.find(":input").each(function(n,a){(n=a.name)&&!a.disabled&&(a.checked||/select|textarea|input/i.test(a.nodeName)&&/checkbox|radio/i.test(a.type))&&(t=e(a).val(),void 0!==i[n]?(i[n].push||(i[n]=[i[n]]),i[n].push(t)):i[n]=t)}),i},upload:function(){if(!this.active){this.active=!0;var i=this.$el,n=this.options,a={},s={url:n.url,data:e.extend({},this.serialize(),n.data),files:a,chunkSize:0|n.chunkSize,chunkUploadRetry:0|n.chunkUploadRetry,prepare:e.proxy(this,"_onFileUploadPrepare"),imageTransform:n.imageTransform};a[i.find(":file").attr("name")||"files[]"]=this.queue,t.each(["upload","progress","complete"],function(t){s[t]=e.proxy(this,e.camelCase("_emit-"+t+"Event"),""),s["file"+t]=e.proxy(this,e.camelCase("_emit-"+t+"Event"),"file")},this),this.xhr=t.upload(s),this._redraw()}},crop:function(i,n){var a=t.uid(i),s=this.options,o=s.multiple?this.option("elements.file.preview"):s.elements.preview,r=(s.multiple?this.fileElem(a):this.$el).find(o&&o.el);r.length&&t.getInfo(i,e.proxy(function(a,s){if(!a){r.find("div>div").length||r.html(e("<div><div></div></div>").css(o).css("overflow","hidden")),this.__cropFile!==i&&(this.__cropFile=i,t.Image(i).get(function(t,i){r.find(">div>div").html(e(i).width("100%").height("100%"))},"exactFit"));var l=o.width/n.w,c=o.height/n.h;r.find(">div>div").css({width:Math.round(l*s.width),height:Math.round(c*s.height),marginLeft:-Math.round(l*n.x),marginTop:-Math.round(c*n.y)})}},this)),this._crop[a]=n},rotate:function(e,i){var n="object"==typeof e?t.uid(e):e,a=this.options,s=a.multiple?this.option("elements.file.preview"):a.elements.preview,o=(a.multiple?this.fileElem(n):this.$el).find(s&&s.el),r=this._rotate;/([+-])=/.test(i)?i=r[n]=(r[n]||0)+("+"==RegExp.$1?1:-1)*i.substr(2):r[n]=i,o.css({"-webkit-transform":"rotate("+i+"deg)","-moz-transform":"rotate("+i+"deg)",transform:"rotate("+i+"deg)"})},clear:function(){this.queue=[],this._redraw()},widget:function(){return this},destroy:function(){this.$el.off(".fileapi").removeData("fileapi")}},e.fn.fileapi=function(t,i){var n=this.data("fileapi");if(n){if("widget"===t)return n;if("string"==typeof t){var a,s=n[t];return e.isFunction(s)?a=s.call(n,i,arguments[2]):void 0===s&&(a=this.option(t,i)),void 0===a?this:a}}else this.data("fileapi",new r(this,t));return this},e.fn.fileapi.version="0.1.0",e.fn.fileapi.tpl=function(e){var t=0,i="__b+='";return e.replace(/(?:&lt;|<)%([-=])?([\s\S]+?)%(?:&gt;|>)|$/g,function(n,a,s,o){return i+=e.slice(t,o).replace(/[\r\n"']/g,function(e){return"\\"+e}),s&&(i+=a?"'+\n((__x=("+s+"))==null?'':"+("-"==a?"__esc(__x)":"__x")+")\n+'":"';\n"+s+"\n__b+='"),t=o+n.length,n}),Function("ctx","var __x,__b='',__esc=function(val){return typeof val=='string'?val.replace(/</g,'&lt;').replace(/\"/g,'&quot;'):val;};with(ctx||{}){\n"+i+"';\n}return __b;")},e.fn.cropper=function(i){var n=this,a=i.file;return"string"==typeof i?n.Jcrop(i):t.getInfo(a,function(s,o){var r=t.Image(a);i.maxSize&&r.resize(i.maxSize[0],i.maxSize[1],"max"),r.get(function(a,s){i.setSelect=i.setSelect||[0,0,s.width,s.height],t.each(["onSelect","onChange"],function(e,t){(t=i[e])&&(i[e]=function(e){var i=o.width/s.width,n=o.height/s.height;t({x:0|e.x*i+.5,y:0|e.y*n+.5,w:0|e.w*i+.5,h:0|e.h*n+.5})})}),n.css("lineHeight",0).html(e(s).css("margin",0)).trigger("resize").Jcrop("destroy").Jcrop(i)})}),n}}(jQuery,FileAPI),function(e,t){function i(t,i){var a,s,o,r=t.nodeName.toLowerCase();return"area"===r?(a=t.parentNode,s=a.name,!(!t.href||!s||"map"!==a.nodeName.toLowerCase())&&(!!(o=e("img[usemap=#"+s+"]")[0])&&n(o))):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var a=0,s=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,
NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,a,s=e(this[0]);s.length&&s[0]!==document;){if(("absolute"===(n=s.css("position"))||"relative"===n||"fixed"===n)&&(a=parseInt(s.css("zIndex"),10),!isNaN(a)&&0!==a))return a;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})},removeUniqueId:function(){return this.each(function(){s.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),a=isNaN(n);return(a||n>=0)&&i(t,!a)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function a(t,i,n,a){return e.each(s,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var s="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?r["inner"+n].call(this):this.each(function(){e(this).css(o,a(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?r["outer"+n].call(this,t):this.each(function(){e(this).css(o,a(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var a,s=e.ui[t].prototype;for(a in n)s.plugins[a]=s.plugins[a]||[],s.plugins[a].push([i,n[a]])},call:function(e,t,i){var n,a=e.plugins[t];if(a&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;n<a.length;n++)e.options[a[n][0]]&&a[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",a=!1;return t[n]>0||(t[n]=1,a=t[n]>0,t[n]=0,a)}})}(jQuery),function(e,t){var i=0,n=Array.prototype.slice,a=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(e){}a(t)},e.widget=function(t,i,n){var a,s,o,r,l={},c=t.split(".")[0];t=t.split(".")[1],a=c+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[c]=e[c]||{},s=e[c][t],o=e[c][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(n,function(t,n){if(!e.isFunction(n))return void(l[t]=n);l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},a=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,s=this._superApply;return this._super=e,this._superApply=a,t=n.apply(this,arguments),this._super=i,this._superApply=s,t}}()}),o.prototype=e.widget.extend(r,{widgetEventPrefix:s?r.widgetEventPrefix||t:t},l,{constructor:o,namespace:c,widgetName:t,widgetFullName:a}),s?(e.each(s._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,o,i._proto)}),delete s._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(i){for(var a,s,o=n.call(arguments,1),r=0,l=o.length;r<l;r++)for(a in o[r])s=o[r][a],o[r].hasOwnProperty(a)&&s!==t&&(e.isPlainObject(s)?i[a]=e.isPlainObject(i[a])?e.widget.extend({},i[a],s):e.widget.extend({},s):i[a]=s);return i},e.widget.bridge=function(i,a){var s=a.prototype.widgetFullName||i;e.fn[i]=function(o){var r="string"==typeof o,l=n.call(arguments,1),c=this;return o=!r&&l.length?e.widget.extend.apply(null,[o].concat(l)):o,r?this.each(function(){var n,a=e.data(this,s);return a?e.isFunction(a[o])&&"_"!==o.charAt(0)?(n=a[o].apply(a,l),n!==a&&n!==t?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+o+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+o+"'")}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new a(o,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var a,s,o,r=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(r={},a=i.split("."),i=a.shift(),a.length){for(s=r[i]=e.widget.extend({},this.options[i]),o=0;o<a.length-1;o++)s[a[o]]=s[a[o]]||{},s=s[a[o]];if(i=a.pop(),1===arguments.length)return s[i]===t?null:s[i];s[i]=n}else{if(1===arguments.length)return this.options[i]===t?null:this.options[i];r[i]=n}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var a,s=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=a=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,a=this.widget()),e.each(n,function(n,o){function r(){if(t||!0!==s.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof o?s[o]:o).apply(s,arguments)}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+s.eventNamespace,u=l[2];u?a.delegate(u,c,r):i.bind(c,r)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var a,s,o=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(a in s)a in i||(i[a]=s[a]);return this.element.trigger(i,n),!(e.isFunction(o)&&!1===o.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,a,s){"string"==typeof a&&(a={effect:a});var o,r=a?!0===a||"number"==typeof a?i:a.effect||i:t;a=a||{},"number"==typeof a&&(a={duration:a}),o=!e.isEmptyObject(a),a.complete=s,a.delay&&n.delay(a.delay),o&&e.effects&&e.effects.effect[r]?n[t](a):r!==t&&n[r]?n[r](a.duration,a.easing,s):n.queue(function(i){e(this)[t](),s&&s.call(n[0]),i()})}})}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent"))return e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,a=1===i.which,s=!("string"!=typeof this.options.cancel||!i.target.nodeName)&&e(i.target).closest(this.options.cancel).length;return!(a&&!s&&this._mouseCapture(i))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=!1!==this._mouseStart(i),!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0))}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){function i(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function n(t,i){return parseInt(e.css(t,i),10)||0}function a(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var s,o=Math.max,r=Math.abs,l=Math.round,c=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(s!==t)return s;var i,n,a=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=a.children()[0];return e("body").append(a),i=o.offsetWidth,a.css("overflow","scroll"),n=o.offsetWidth,i===n&&(n=a[0].clientWidth),a.remove(),s=i-n},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),a="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:a?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]);return{element:i,isWindow:n,isDocument:!!i[0]&&9===i[0].nodeType,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var s,p,m,g,v,b,y=e(t.of),_=e.position.getWithinInfo(t.within),w=e.position.getScrollInfo(_),$=(t.collision||"flip").split(" "),x={};return b=a(y),y[0].preventDefault&&(t.at="left top"),p=b.width,m=b.height,g=b.offset,v=e.extend({},g),e.each(["my","at"],function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=c.test(n[0])?n.concat(["center"]):u.test(n[0])?["center"].concat(n):["center","center"]),n[0]=c.test(n[0])?n[0]:"center",n[1]=u.test(n[1])?n[1]:"center",e=d.exec(n[0]),i=d.exec(n[1]),x[this]=[e?e[0]:0,i?i[0]:0],t[this]=[h.exec(n[0])[0],h.exec(n[1])[0]]}),1===$.length&&($[1]=$[0]),"right"===t.at[0]?v.left+=p:"center"===t.at[0]&&(v.left+=p/2),"bottom"===t.at[1]?v.top+=m:"center"===t.at[1]&&(v.top+=m/2),s=i(x.at,p,m),v.left+=s[0],v.top+=s[1],this.each(function(){var a,c,u=e(this),d=u.outerWidth(),h=u.outerHeight(),f=n(this,"marginLeft"),b=n(this,"marginTop"),k=d+f+n(this,"marginRight")+w.width,C=h+b+n(this,"marginBottom")+w.height,P=e.extend({},v),T=i(x.my,u.outerWidth(),u.outerHeight());"right"===t.my[0]?P.left-=d:"center"===t.my[0]&&(P.left-=d/2),"bottom"===t.my[1]?P.top-=h:"center"===t.my[1]&&(P.top-=h/2),P.left+=T[0],P.top+=T[1],e.support.offsetFractions||(P.left=l(P.left),P.top=l(P.top)),a={marginLeft:f,marginTop:b},e.each(["left","top"],function(i,n){e.ui.position[$[i]]&&e.ui.position[$[i]][n](P,{targetWidth:p,targetHeight:m,elemWidth:d,elemHeight:h,collisionPosition:a,collisionWidth:k,collisionHeight:C,offset:[s[0]+T[0],s[1]+T[1]],my:t.my,at:t.at,within:_,elem:u})}),t.using&&(c=function(e){var i=g.left-P.left,n=i+p-d,a=g.top-P.top,s=a+m-h,l={target:{element:y,left:g.left,top:g.top,width:p,height:m},element:{element:u,left:P.left,top:P.top,width:d,height:h},horizontal:n<0?"left":i>0?"right":"center",vertical:s<0?"top":a>0?"bottom":"middle"};p<d&&r(i+n)<p&&(l.horizontal="center"),m<h&&r(a+s)<m&&(l.vertical="middle"),o(r(i),r(n))>o(r(a),r(s))?l.important="horizontal":l.important="vertical",t.using.call(this,e,l)}),u.offset(e.extend(P,{using:c}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,a=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,r=e.left-t.collisionPosition.marginLeft,l=a-r,c=r+t.collisionWidth-s-a;t.collisionWidth>s?l>0&&c<=0?(i=e.left+l+t.collisionWidth-s-a,e.left+=l-i):e.left=c>0&&l<=0?a:l>c?a+s-t.collisionWidth:a:l>0?e.left+=l:c>0?e.left-=c:e.left=o(e.left-r,e.left)},top:function(e,t){var i,n=t.within,a=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,r=e.top-t.collisionPosition.marginTop,l=a-r,c=r+t.collisionHeight-s-a;t.collisionHeight>s?l>0&&c<=0?(i=e.top+l+t.collisionHeight-s-a,e.top+=l-i):e.top=c>0&&l<=0?a:l>c?a+s-t.collisionHeight:a:l>0?e.top+=l:c>0?e.top-=c:e.top=o(e.top-r,e.top)}},flip:{left:function(e,t){var i,n,a=t.within,s=a.offset.left+a.scrollLeft,o=a.width,l=a.isWindow?a.scrollLeft:a.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,d=c+t.collisionWidth-o-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];u<0?((i=e.left+h+p+f+t.collisionWidth-o-s)<0||i<r(u))&&(e.left+=h+p+f):d>0&&((n=e.left-t.collisionPosition.marginLeft+h+p+f-l)>0||r(n)<d)&&(e.left+=h+p+f)},top:function(e,t){var i,n,a=t.within,s=a.offset.top+a.scrollTop,o=a.height,l=a.isWindow?a.scrollTop:a.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,d=c+t.collisionHeight-o-l,h="top"===t.my[1],p=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];u<0?(n=e.top+p+f+m+t.collisionHeight-o-s,e.top+p+f+m>u&&(n<0||n<r(u))&&(e.top+=p+f+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-l,e.top+p+f+m>d&&(i>0||r(i)<d)&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,a,s,o=document.getElementsByTagName("body")[0],r=document.createElement("div");t=document.createElement(o?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in n)t.style[s]=n[s];t.appendChild(r),i=o||document.documentElement,i.insertBefore(t,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",a=e(r).offset().left,e.support.offsetFractions=a>10&&a<11,t.innerHTML="",i.removeChild(t)}()}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(e(!0===i.iframeFix?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0))},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),!("original"===this.options.helper&&!e.contains(this.element[0].ownerDocument,this.element[0]))&&("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==i._trigger("stop",t)&&i._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1)},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,a=this.options;return a.containment?"window"===a.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===a.containment?void(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):a.containment.constructor===Array?void(this.containment=a.containment):("parent"===a.containment&&(a.containment=this.helper[0].parentNode),i=e(a.containment),void((n=i[0])&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i))):void(this.containment=null)},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*n}},_generatePosition:function(t){var i,n,a,s,o=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,c=t.pageY;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),o.grid&&(a=o.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,c=i?a-this.offset.click.top>=i[1]||a-this.offset.click.top>i[3]?a:a-this.offset.click.top>=i[1]?a-o.grid[1]:a+o.grid[1]:a,s=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=i?s-this.offset.click.left>=i[0]||s-this.offset.click.left>i[2]?s:s-this.offset.click.left>=i[0]?s-o.grid[0]:s+o.grid[0]:s)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("ui-draggable"),a=n.options,s=e.extend({},i,{item:n.element});n.sortables=[],e(a.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,s))})},stop:function(t,i){var n=e(this).data("ui-draggable"),a=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,a))})},drag:function(t,i){var n=e(this).data("ui-draggable"),a=this;e.each(n.sortables,function(){var s=!1,o=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,e.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(a).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),a=e(this).data("ui-draggable").options;n.css("opacity")&&(a._opacity=n.css("opacity")),n.css("opacity",a.opacity)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),
e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),n=i.options,a=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=a=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=a=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=a=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=a=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?a=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(a=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?a=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(a=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),!1!==a&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),n=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){var n,a,s,o,r,l,c,u,d,h,p=e(this).data("ui-draggable"),f=p.options,m=f.snapTolerance,g=i.offset.left,v=g+p.helperProportions.width,b=i.offset.top,y=b+p.helperProportions.height;for(d=p.snapElements.length-1;d>=0;d--)r=p.snapElements[d].left,l=r+p.snapElements[d].width,c=p.snapElements[d].top,u=c+p.snapElements[d].height,v<r-m||g>l+m||y<c-m||b>u+m||!e.contains(p.snapElements[d].item.ownerDocument,p.snapElements[d].item)?(p.snapElements[d].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(n=Math.abs(c-y)<=m,a=Math.abs(u-b)<=m,s=Math.abs(r-v)<=m,o=Math.abs(l-g)<=m,n&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),a&&(i.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),s&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r-p.helperProportions.width}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),h=n||a||s||o,"outer"!==f.snapMode&&(n=Math.abs(c-b)<=m,a=Math.abs(u-y)<=m,s=Math.abs(r-g)<=m,o=Math.abs(l-v)<=m,n&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),a&&(i.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),s&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[d].snapping&&(n||a||s||o||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=n||a||s||o||h)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,n=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});n.length&&(t=parseInt(e(n[0]).css("zIndex"),10)||0,e(n).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+n.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),a=e(this).data("ui-draggable").options;n.css("zIndex")&&(a._zIndex=n.css("zIndex")),n.css("zIndex",a.zIndex)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(e){function t(e,t,i){return e>t&&e<t+i}e.widget("ui.droppable",{version:"1.10.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,n=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions=function(){if(!arguments.length)return t||(t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});t=arguments[0]},e.ui.ddmanager.droppables[i.scope]=e.ui.ddmanager.droppables[i.scope]||[],e.ui.ddmanager.droppables[i.scope].push(this),i.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,i=e.ui.ddmanager.droppables[this.options.scope];t<i.length;t++)i[t]===this&&i.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"===t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current,a=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope===n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return a=!0,!1}),!a&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(n)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,i,n){if(!i.offset)return!1;var a,s,o=(e.positionAbs||e.position.absolute).left,r=(e.positionAbs||e.position.absolute).top,l=o+e.helperProportions.width,c=r+e.helperProportions.height,u=i.offset.left,d=i.offset.top,h=u+i.proportions().width,p=d+i.proportions().height;switch(n){case"fit":return u<=o&&l<=h&&d<=r&&c<=p;case"intersect":return u<o+e.helperProportions.width/2&&l-e.helperProportions.width/2<h&&d<r+e.helperProportions.height/2&&c-e.helperProportions.height/2<p;case"pointer":return a=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,s=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,t(s,d,i.proportions().height)&&t(a,u,i.proportions().width);case"touch":return(r>=d&&r<=p||c>=d&&c<=p||r<d&&c>p)&&(o>=u&&o<=h||l>=u&&l<=h||o<u&&l>h);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var n,a,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(n=0;n<s.length;n++)if(!(s[n].options.disabled||t&&!s[n].accept.call(s[n].element[0],t.currentItem||t.element))){for(a=0;a<r.length;a++)if(r[a]===s[n].element[0]){s[n].proportions().height=0;continue e}s[n].visible="none"!==s[n].element.css("display"),s[n].visible&&("mousedown"===o&&s[n]._activate.call(s[n],i),s[n].offset=s[n].element.offset(),s[n].proportions({width:s[n].element[0].offsetWidth,height:s[n].element[0].offsetHeight}))}},drop:function(t,i){var n=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,a,s,o=e.ui.intersect(t,this,this.options.tolerance),r=!o&&this.isover?"isout":o&&!this.isover?"isover":null;r&&(this.options.greedy&&(a=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===a}),s.length&&(n=e.data(s[0],"ui-droppable"),n.greedyChild="isover"===r)),n&&"isover"===r&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),n&&"isout"===r&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(e){function t(e){return parseInt(e,10)||0}function i(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,i,n,a,s,o=this,r=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;i<t.length;i++)n=e.trim(t[i]),s="ui-resizable-"+n,a=e("<div class='ui-resizable-handle "+s+"'></div>"),a.css({zIndex:r.zIndex}),"se"===n&&a.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(a);this._renderAxis=function(t){var i,n,a,s;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=e(this.handles[i],this.element),s=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),a=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(a,s),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=a&&a[1]?a[1]:"se")}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,n,a=!1;for(i in this.handles)((n=e(this.handles[i])[0])===t.target||e.contains(n,t.target))&&(a=!0);return!this.options.disabled&&a},_mouseStart:function(i){var n,a,s,o=this.options,r=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),n=t(this.helper.css("left")),a=t(this.helper.css("top")),o.containment&&(n+=e(o.containment).scrollLeft()||0,a+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:a},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:n,top:a},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===s?this.axis+"-resize":s),l.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(t){var i,n=this.helper,a={},s=this.originalMousePosition,o=this.axis,r=this.position.top,l=this.position.left,c=this.size.width,u=this.size.height,d=t.pageX-s.left||0,h=t.pageY-s.top||0,p=this._change[o];return!!p&&(i=p.apply(this,[t,d,h]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==r&&(a.top=this.position.top+"px"),this.position.left!==l&&(a.left=this.position.left+"px"),this.size.width!==c&&(a.width=this.size.width+"px"),this.size.height!==u&&(a.height=this.size.height+"px"),n.css(a),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(a)||this._trigger("resize",t,this.ui()),!1)},_mouseStop:function(t){this.resizing=!1;var i,n,a,s,o,r,l,c=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),a=n&&e.ui.hasScroll(i[0],"left")?0:u.sizeDiff.height,s=n?0:u.sizeDiff.width,o={width:u.helper.width()-s,height:u.helper.height()-a},r=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,l=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(e.extend(o,{top:l,left:r})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,a,s,o,r=this.options;o={minWidth:i(r.minWidth)?r.minWidth:0,maxWidth:i(r.maxWidth)?r.maxWidth:Infinity,minHeight:i(r.minHeight)?r.minHeight:0,maxHeight:i(r.maxHeight)?r.maxHeight:Infinity},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,a=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,s=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),a>o.minHeight&&(o.minHeight=a),n<o.maxWidth&&(o.maxWidth=n),s<o.maxHeight&&(o.maxHeight=s)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,a=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===a&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===a&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,a=i(e.width)&&t.maxWidth&&t.maxWidth<e.width,s=i(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=i(e.width)&&t.minWidth&&t.minWidth>e.width,r=i(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,u=/sw|nw|w/.test(n),d=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),r&&(e.height=t.minHeight),a&&(e.width=t.maxWidth),s&&(e.height=t.maxHeight),o&&u&&(e.left=l-t.minWidth),a&&u&&(e.left=l-t.maxWidth),r&&d&&(e.top=c-t.minHeight),s&&d&&(e.top=c-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,n,a,s=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(a=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[a.css("borderTopWidth"),a.css("borderRightWidth"),a.css("borderBottomWidth"),a.css("borderLeftWidth")],n=[a.css("paddingTop"),a.css("paddingRight"),a.css("paddingBottom"),a.css("paddingLeft")],t=0;t<i.length;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(n[t],10)||0);a.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("ui-resizable"),n=i.options,a=i._proportionallyResizeElements,s=a.length&&/textarea/i.test(a[0].nodeName),o=s&&e.ui.hasScroll(a[0],"left")?0:i.sizeDiff.height,r=s?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-o},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,u&&c?{top:u,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};a&&a.length&&e(a[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var i,n,a,s,o,r,l,c=e(this).data("ui-resizable"),u=c.options,d=c.element,h=u.containment,p=h instanceof e?h.get(0):/parent/.test(h)?d.parent().get(0):h;p&&(c.containerElement=e(p),/document/.test(h)||h===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(i=e(p),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,a){n[e]=t(i.css("padding"+a))}),c.containerOffset=i.offset(),c.containerPosition=i.position(),c.containerSize={height:i.innerHeight()-n[3],width:i.innerWidth()-n[1]},a=c.containerOffset,s=c.containerSize.height,o=c.containerSize.width,r=e.ui.hasScroll(p,"left")?p.scrollWidth:o,l=e.ui.hasScroll(p)?p.scrollHeight:s,c.parentData={element:p,left:a.left,top:a.top,width:r,height:l}))},resize:function(t){var i,n,a,s,o=e(this).data("ui-resizable"),r=o.options,l=o.containerOffset,c=o.position,u=o._aspectRatio||t.shiftKey,d={top:0,left:0},h=o.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(d=l),c.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-d.left),u&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=r.helper?l.left:0),c.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?l.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,i=Math.abs((o._helper,o.offset.left-d.left+o.sizeDiff.width)),n=Math.abs((o._helper?o.offset.top-d.top:o.offset.top-l.top)+o.sizeDiff.height),a=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),a&&s&&(i-=Math.abs(o.parentData.left)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,u&&(o.size.height=o.size.width/o.aspectRatio)),n+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-n,u&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.containerOffset,a=t.containerPosition,s=t.containerElement,o=e(t.helper),r=o.offset(),l=o.outerWidth()-t.sizeDiff.width,c=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(s.css("position"))&&e(this).css({left:r.left-a.left-n.left,width:l,height:c}),t._helper&&!i.animate&&/static/.test(s.css("position"))&&e(this).css({left:r.left-a.left-n.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):e.each(i.alsoResize,function(e){n(e)})},resize:function(t,i){var n=e(this).data("ui-resizable"),a=n.options,s=n.originalSize,o=n.originalPosition,r={height:n.size.height-s.height||0,width:n.size.width-s.width||0,top:n.position.top-o.top||0,left:n.position.left-o.left||0},l=function(t,n){e(t).each(function(){var t=e(this),a=e(this).data("ui-resizable-alsoresize"),s={},o=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var i=(a[t]||0)+(r[t]||0);i&&i>=0&&(s[t]=i||null)}),t.css(s)})};"object"!=typeof a.alsoResize||a.alsoResize.nodeType?l(a.alsoResize):e.each(a.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size,a=t.originalSize,s=t.originalPosition,o=t.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=r[0]||1,c=r[1]||1,u=Math.round((n.width-a.width)/l)*l,d=Math.round((n.height-a.height)/c)*c,h=a.width+u,p=a.height+d,f=i.maxWidth&&i.maxWidth<h,m=i.maxHeight&&i.maxHeight<p,g=i.minWidth&&i.minWidth>h,v=i.minHeight&&i.minHeight>p;i.grid=r,g&&(h+=l),v&&(p+=c),f&&(h-=l),m&&(p-=c),/^(se|s|e)$/.test(o)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.top=s.top-d):/^(sw)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.left=s.left-u):(p-c>0?(t.size.height=p,t.position.top=s.top-d):(t.size.height=c,t.position.top=s.top+a.height-c),h-l>0?(t.size.width=h,t.position.left=s.left-u):(t.size.width=l,t.position.left=s.left+a.width-l))}})}(jQuery),function(e){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,n=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(n.filter,this.element[0]),this._trigger("start",t),e(n.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=e.data(this,"selectable-item");n.startselected=!0,t.metaKey||t.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))}),e(t.target).parents().addBack().each(function(){var n,a=e.data(this,"selectable-item");if(a)return n=!t.metaKey&&!t.ctrlKey||!a.$element.hasClass("ui-selected"),a.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),a.unselecting=!n,a.selecting=n,a.selected=n,n?i._trigger("selecting",t,{selecting:a.element}):i._trigger("unselecting",t,{unselecting:a.element}),!1}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,n=this,a=this.options,s=this.opos[0],o=this.opos[1],r=t.pageX,l=t.pageY;return s>r&&(i=r,r=s,s=i),o>l&&(i=l,l=o,o=i),this.helper.css({left:s,top:o,width:r-s,height:l-o}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),c=!1;i&&i.element!==n.element[0]&&("touch"===a.tolerance?c=!(i.left>r||i.right<s||i.top>l||i.bottom<o):"fit"===a.tolerance&&(c=i.left>s&&i.right<r&&i.top>o&&i.bottom<l),c?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,n._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})}),e(".ui-selecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e){function t(e,t,i){return e>t&&e<t+i}function i(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===e.axis||i(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,
this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=null,a=!1,s=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,s.widgetName+"-item")===s)return n=e(this),!1}),e.data(t.target,s.widgetName+"-item")===s&&(n=e(t.target)),!!n&&(!(this.options.handle&&!i&&(e(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(a=!0)}),!a))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,i,n){var a,s,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(s)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(a=this.containers.length-1;a>=0;a--)this.containers[a]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,n,a,s,o=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),!1!==r&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],a=n.item[0],(s=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&!(a===this.currentItem[0]||this.placeholder[1===s?"next":"prev"]()[0]===a||e.contains(this.placeholder[0],a)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],a))){if(this.direction=1===s?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,a=this.placeholder.offset(),s=this.options.axis,o={};s&&"x"!==s||(o.left=a.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),s&&"y"!==s||(o.top=a.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,a=n+this.helperProportions.height,s=e.left,o=s+e.width,r=e.top,l=r+e.height,c=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||n+c>r&&n+c<l,h="y"===this.options.axis||t+u>s&&t+u<o,p=d&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:s<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<o&&r<n+this.helperProportions.height/2&&a-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var i="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),a=i&&n,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return!!a&&(this.floating?o&&"right"===o||"down"===s?2:1:s&&("down"===s?2:1))},_intersectsWithSides:function(e){var i=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),a=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"===s&&n||"left"===s&&!n:a&&("down"===a&&i||"up"===a&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){r.push(this)}var n,a,s,o,r=[],l=[],c=this._connectWith();if(c&&t)for(n=c.length-1;n>=0;n--)for(s=e(c[n]),a=s.length-1;a>=0;a--)(o=e.data(s[a],this.widgetFullName))&&o!==this&&!o.options.disabled&&l.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=l.length-1;n>=0;n--)l[n][0].each(i);return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,a,s,o,r,l,c,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(i=h.length-1;i>=0;i--)for(a=e(h[i]),n=a.length-1;n>=0;n--)(s=e.data(a[n],this.widgetFullName))&&s!==this&&!s.options.disabled&&(d.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s));for(i=d.length-1;i>=0;i--)for(o=d[i][1],r=d[i][0],n=0,c=r.length;n<c;n++)l=e(r[n]),l.data(this.widgetName+"-item",o),u.push({item:l,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,a,s;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(a=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=a.outerWidth(),n.height=a.outerHeight()),s=a.offset(),n.left=s.left,n.top=s.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)s=this.containers[i].element.offset(),this.containers[i].containerCache.left=s.left,this.containers[i].containerCache.top=s.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,n=t.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),a=e("<"+n+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===n?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(a)}):"img"===n&&a.attr("src",t.currentItem.attr("src")),i||a.css("visibility","hidden"),a},update:function(e,a){i&&!n.forcePlaceholderSize||(a.height()||a.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),a.width()||a.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(n){var a,s,o,r,l,c,u,d,h,p,f=null,m=null;for(a=this.containers.length-1;a>=0;a--)if(!e.contains(this.currentItem[0],this.containers[a].element[0]))if(this._intersectsWith(this.containers[a].containerCache)){if(f&&e.contains(this.containers[a].element[0],f.element[0]))continue;f=this.containers[a],m=a}else this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",n,this._uiHash(this)),this.containers[a].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",n,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(o=1e4,r=null,p=f.floating||i(this.currentItem),l=p?"left":"top",c=p?"width":"height",u=this.positionAbs[l]+this.offset.click[l],s=this.items.length-1;s>=0;s--)e.contains(this.containers[m].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(p&&!t(this.positionAbs.top+this.offset.click.top,this.items[s].top,this.items[s].height)||(d=this.items[s].item.offset()[l],h=!1,Math.abs(d-u)>Math.abs(d+this.items[s][c]-u)&&(h=!0,d+=this.items[s][c]),Math.abs(d-u)<o&&(o=Math.abs(d-u),r=this.items[s],this.direction=h?"up":"down")));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;r?this._rearrange(n,r,null,!0):this._rearrange(n,null,this.containers[m].element,!0),this._trigger("change",n,this._uiHash()),this.containers[m]._trigger("change",n,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",n,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!i.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!i.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,a=this.options;"parent"===a.containment&&(a.containment=this.helper[0].parentNode),"document"!==a.containment&&"window"!==a.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===a.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===a.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(a.containment)||(t=e(a.containment)[0],i=e(a.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(a[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:a.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:a.scrollLeft())*n}},_generatePosition:function(t){var i,n,a=this.options,s=t.pageX,o=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),a.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/a.grid[1])*a.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-a.grid[1]:i+a.grid[1]:i,n=this.originalPageX+Math.round((s-this.originalPageX)/a.grid[0])*a.grid[0],s=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-a.grid[0]:n+a.grid[0]:n)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:r.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var a=this.counter;this._delay(function(){a===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){function i(e,t,i){return function(n){i._trigger(e,n,t._uiHash(t))}}this.reverting=!1;var n,a=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&a.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||a.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(a.push(function(e){this._trigger("remove",e,this._uiHash())}),a.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),a.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||a.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(a.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),n=0;n<a.length;n++)a[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(n=0;n<a.length;n++)a[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),function(e){var t=0,i={},n={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||!1!==t.active&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){if("active"===e)return void this._activate(t);"event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||!1!==this.options.active||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,n=this.headers.length,a=this.headers.index(t.target),s=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:s=this.headers[(a+1)%n];break;case i.LEFT:case i.UP:s=this.headers[(a-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:s=this.headers[0];break;case i.END:s=this.headers[n-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),!1===t.active&&!0===t.collapsible||!this.headers.length?(t.active=!1,this.active=e()):!1===t.active?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var i,n=this.options,a=n.heightStyle,s=this.element.parent(),o=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t);this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var i=e(this),n=i.attr("id"),a=i.next(),s=a.attr("id");n||(n=o+"-header-"+t,i.attr("id",n)),s||(s=o+"-panel-"+t,a.attr("id",s)),i.attr("aria-controls",s),a.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===a?(i=s.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.headers.each(function(){i-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===a&&(i=0,this.headers.next().each(function(){i=Math.max(i,e(this).css("height","").height())}).height(i))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,n=this.active,a=e(t.currentTarget),s=a[0]===n[0],o=s&&i.collapsible,r=o?e():a.next(),l=n.next(),c={oldHeader:n,oldPanel:l,newHeader:o?e():a,newPanel:r};t.preventDefault(),s&&!i.collapsible||!1===this._trigger("beforeActivate",t,c)||(i.active=!o&&this.headers.index(a),this.active=s?e():a,this._toggle(c),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),s||(a.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&a.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),a.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,t):(n.hide(),i.show(),this._toggleComplete(t)),n.attr({"aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(e,t,a){var s,o,r,l=this,c=0,u=e.length&&(!t.length||e.index()<t.index()),d=this.options.animate||{},h=u&&d.down||d,p=function(){l._toggleComplete(a)};return"number"==typeof h&&(r=h),"string"==typeof h&&(o=h),o=o||h.easing||d.easing,r=r||h.duration||d.duration,t.length?e.length?(s=e.show().outerHeight(),t.animate(i,{duration:r,easing:o,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(n,{duration:r,easing:o,complete:p,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?c+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(s-t.outerHeight()-c),c=0)}})):t.animate(i,r,o,p):e.animate(n,r,o,p)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery),function(e){e.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,n,a=this.element[0].nodeName.toLowerCase(),s="textarea"===a,o="input"===a;this.isMultiLine=!!s||!o&&this.element.prop("isContentEditable"),this.valueMethod=this.element[s||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(a){if(this.element.prop("readOnly"))return t=!0,n=!0,void(i=!0);t=!1,n=!1,i=!1;var s=e.ui.keyCode;switch(a.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",a);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",a);break;case s.UP:t=!0,this._keyEvent("previous",a);break;case s.DOWN:t=!0,this._keyEvent("next",a);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,a.preventDefault(),this.menu.select(a));break;case s.TAB:this.menu.active&&this.menu.select(a);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(a),a.preventDefault());break;default:i=!0,this._searchTimeout(a)}},keypress:function(n){if(t)return t=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||n.preventDefault());if(!i){var a=e.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:this._move("previousPage",n);break;case a.PAGE_DOWN:this._move("nextPage",n);break;case a.UP:this._keyEvent("previous",n);break;case a.DOWN:this._keyEvent("next",n)}}},input:function(e){if(n)return n=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){
if(this.cancelBlur)return void delete this.cancelBlur;clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(n){n.target===t.element[0]||n.target===i||e.contains(i,n.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});var n=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:n})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,a){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){a(e)},error:function(){a([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),--this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e){var t,i="ui-button ui-widget ui-state-default ui-corner-all",n="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",a=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},s=function(t){var i=t.name,n=t.form,a=e([]);return i&&(i=i.replace(/'/g,"\\'"),a=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),a};e.widget("ui.button",{version:"1.10.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,a),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var n=this,o=this.options,r="checkbox"===this.type||"radio"===this.type,l=r?"":"ui-state-active";null===o.label&&(o.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(i).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){o.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){o.disabled||e(this).removeClass(l)}).bind("click"+this.eventNamespace,function(e){o.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),r&&this.element.bind("change"+this.eventNamespace,function(){n.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(o.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(o.disabled)return!1;e(this).addClass("ui-state-active"),n.buttonElement.attr("aria-pressed","true");var t=n.element[0];s(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(o.disabled)return!1;e(this).addClass("ui-state-active"),t=this,n.document.one("mouseup",function(){t=null})}).bind("mouseup"+this.eventNamespace,function(){if(o.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(o.disabled)return!1;t.keyCode!==e.ui.keyCode.SPACE&&t.keyCode!==e.ui.keyCode.ENTER||e(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",o.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(i+" ui-state-active "+n).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){if(this._super(e,t),"disabled"===e)return this.element.prop("disabled",!!t),void(t&&this.buttonElement.removeClass("ui-state-focus"));this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?s(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(n),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),a=this.options.icons,s=a.primary&&a.secondary,o=[];a.primary||a.secondary?(this.options.text&&o.push("ui-button-text-icon"+(s?"s":a.primary?"-primary":"-secondary")),a.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+a.primary+"'></span>"),a.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+a.secondary+"'></span>"),this.options.text||(o.push(s?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):o.push("ui-button-text-only"),t.addClass(o.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(e,t){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=n(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){e.datepicker._isDisabledDatepicker(s.inline?t.parent()[0]:s.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function a(t,i){e.extend(t,i);for(var n in i)null==i[n]&&(t[n]=i[n]);return t}e.extend(e.ui,{datepicker:{version:"1.10.4"}});var s,o="datepicker";e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return a(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var n,a,s;n=t.nodeName.toLowerCase(),a="div"===n||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),s=this._newInst(e(t),a),s.settings=e.extend({},i||{}),"input"===n?this._connectDatepicker(t,s):a&&this._inlineDatepicker(t,s)},_newInst:function(t,i){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var n=e(t);i.append=e([]),i.trigger=e([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,o,i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var n,a,s,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[r?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),n=this._get(i,"showOn"),"focus"!==n&&"both"!==n||t.focus(this._showDatepicker),"button"!==n&&"both"!==n||(a=this._get(i,"buttonText"),s=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:a,title:a}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:a,title:a}):a)),t[r?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,a,s=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=0,n=0,a=0;a<e.length;a++)e[a].length>i&&(i=e[a].length,n=a);return n},s.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,i){var n=e(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),e.data(t,o,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,n,s,r){var l,c,u,d,h,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],o,p)),a(p.settings,s||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(c=document.documentElement.clientWidth,u=document.documentElement.clientHeight,d=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+d,u/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],o,p),this},_destroyDatepicker:function(t){var i,n=e(t),a=e.data(t,o);n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,o),"input"===i?(a.append.remove(),a.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==i&&"span"!==i||n.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,n,a=e(t),s=e.data(t,o);a.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==i&&"span"!==i||(n=a.children("."+this._inlineClass),n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,n,a=e(t),s=e.data(t,o);a.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==i&&"span"!==i||(n=a.children("."+this._inlineClass),n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,o)}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,n,s){var o,r,l,c,u=this._getInst(i);if(2===arguments.length&&"string"==typeof n)return"defaults"===n?e.extend({},e.datepicker._defaults):u?"all"===n?e.extend({},u.settings):this._get(u,n):null;o=n||{},"string"==typeof n&&(o={},o[n]=s),u&&(this._curInst===u&&this._hideDatepicker(),r=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(u,"min"),c=this._getMinMaxDate(u,"max"),a(u.settings,o),null!==l&&o.dateFormat!==t&&o.minDate===t&&(u.settings.minDate=this._formatDate(u,l)),null!==c&&o.dateFormat!==t&&o.maxDate===t&&(u.settings.maxDate=this._formatDate(u,c)),"disabled"in o&&(o.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(e(i),u),this._autoSize(u),this._setDate(u,r),this._updateAlternate(u),this._updateDatepicker(u))},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,n,a,s=e.datepicker._getInst(t.target),o=!0,r=s.dpDiv.is(".ui-datepicker-rtl");if(s._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return a=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv),a[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,a[0]),i=e.datepicker._get(s,"onSelect"),i?(n=e.datepicker._formatDate(s),i.apply(s.input?s.input[0]:null,[n,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,n,a=e.datepicker._getInst(t.target);if(e.datepicker._get(a,"constrainInput"))return i=e.datepicker._possibleChars(e.datepicker._get(a,"dateFormat")),n=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||n<" "||!i||i.indexOf(n)>-1},_doKeyUp:function(t){var i,n=e.datepicker._getInst(t.target);if(n.input.val()!==n.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,e.datepicker._getFormatConfig(n)),i&&(e.datepicker._setDateFromField(n),e.datepicker._updateAlternate(n),e.datepicker._updateDatepicker(n))}catch(e){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,s,o,r,l,c;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),s=n?n.apply(t,[t,i]):{},!1!==s&&(a(i.settings,s),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return!(o|="fixed"===e(this).css("position"))}),r={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),r=e.datepicker._checkOffset(i,r,o),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),c=e.datepicker._get(i,"duration"),i.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),c):i.dpDiv[l||"show"](l?c:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,s=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,n=this._getNumberOfMonths(t),a=n[1];t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),a>1&&t.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",17*a+"em"),t.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,n){var a=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(n?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?a-o:0,i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=n&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+a>l&&l>a?Math.abs(i.left+a-l):0),i.top-=Math.min(i.top,i.top+s>c&&c>s?Math.abs(s+r):0),i},_findPos:function(t){for(var i,n=this._getInst(t),a=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[a?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,n,a,s,r=this._curInst;!r||t&&r!==e.data(t,o)||this._datepickerShowing&&(i=this._get(r,"showAnim"),n=this._get(r,"duration"),a=function(){e.datepicker._tidyDialog(r)},e.effects&&(e.effects.effect[i]||e.effects[i])?r.dpDiv.hide(i,e.datepicker._get(r,"showOptions"),n,a):r.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,a),i||a(),this._datepickerShowing=!1,s=this._get(r,"onClose"),s&&s.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),n=e.datepicker._getInst(i[0]);(i[0].id===e.datepicker._mainDivId||0!==i.parents("#"+e.datepicker._mainDivId).length||i.hasClass(e.datepicker.markerClassName)||i.closest("."+e.datepicker._triggerClass).length||!e.datepicker._datepickerShowing||e.datepicker._inDialog&&e.blockUI)&&(!i.hasClass(e.datepicker.markerClassName)||e.datepicker._curInst===n)||e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,n){var a=e(t),s=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(s,i+("M"===n?this._get(s,"showCurrentAtPos"):0),n),this._updateDatepicker(s))},_gotoToday:function(t){var i,n=e(t),a=this._getInst(n[0]);this._get(a,"gotoCurrent")&&a.currentDay?(a.selectedDay=a.currentDay,a.drawMonth=a.selectedMonth=a.currentMonth,a.drawYear=a.selectedYear=a.currentYear):(i=new Date,a.selectedDay=i.getDate(),a.drawMonth=a.selectedMonth=i.getMonth(),a.drawYear=a.selectedYear=i.getFullYear()),this._notifyChange(a),this._adjustDate(n)},_selectMonthYear:function(t,i,n){var a=e(t),s=this._getInst(a[0]);s["selected"+("M"===n?"Month":"Year")]=s["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(a)},_selectDay:function(t,i,n,a){var s,o=e(t);e(a).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(s=this._getInst(o[0]),s.selectedDay=s.currentDay=e("a",a).html(),s.selectedMonth=s.currentMonth=i,s.selectedYear=s.currentYear=n,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var n,a=e(t),s=this._getInst(a[0]);i=null!=i?i:this._formatDate(s),s.input&&s.input.val(i),this._updateAlternate(s),n=this._get(s,"onSelect"),n?n.apply(s.input?s.input[0]:null,[i,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,n,a,s=this._get(t,"altField");s&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),a=this.formatDate(i,n,this._getFormatConfig(t)),e(s).each(function(){e(this).val(a)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,n){if(null==t||null==i)throw"Invalid arguments";if(""===(i="object"==typeof i?i.toString():i+""))return null;var a,s,o,r,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,h=(n?n.dayNames:null)||this._defaults.dayNames,p=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,f=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,b=-1,y=!1,_=function(e){var i=a+1<t.length&&t.charAt(a+1)===e;return i&&a++,i},w=function(e){var t=_(e),n="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,a=new RegExp("^\\d{1,"+n+"}"),s=i.substring(l).match(a);if(!s)throw"Missing number at position "+l;return l+=s[0].length,parseInt(s[0],10)},$=function(t,n,a){var s=-1,o=e.map(_(t)?a:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var n=t[1];if(i.substr(l,n.length).toLowerCase()===n.toLowerCase())return s=t[0],l+=n.length,!1}),-1!==s)return s+1;throw"Unknown name at position "+l},x=function(){if(i.charAt(l)!==t.charAt(a))throw"Unexpected literal at position "+l;l++};for(a=0;a<t.length;a++)if(y)"'"!==t.charAt(a)||_("'")?x():y=!1;else switch(t.charAt(a)){case"d":v=w("d");break;case"D":$("D",d,h);break;case"o":b=w("o");break;case"m":g=w("m");break;case"M":g=$("M",p,f);break;case"y":
m=w("y");break;case"@":r=new Date(w("@")),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"!":r=new Date((w("!")-this._ticksTo1970)/1e4),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"'":_("'")?x():y=!0;break;default:x()}if(l<i.length&&(o=i.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():m<100&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(m<=u?0:-100)),b>-1)for(g=1,v=b;;){if(s=this._getDaysInMonth(m,g-1),v<=s)break;g++,v-=s}if(r=this._daylightSavingAdjust(new Date(m,g-1,v)),r.getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,i){if(!t)return"";var n,a=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,s=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=n+1<e.length&&e.charAt(n+1)===t;return i&&n++,i},c=function(e,t,i){var n=""+t;if(l(e))for(;n.length<i;)n="0"+n;return n},u=function(e,t,i,n){return l(e)?n[t]:i[t]},d="",h=!1;if(t)for(n=0;n<e.length;n++)if(h)"'"!==e.charAt(n)||l("'")?d+=e.charAt(n):h=!1;else switch(e.charAt(n)){case"d":d+=c("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),a,s);break;case"o":d+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=c("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),o,r);break;case"y":d+=l("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":h=!0;break;default:d+=e.charAt(n)}return d},_possibleChars:function(e){var t,i="",n=!1,a=function(i){var n=t+1<e.length&&e.charAt(t+1)===i;return n&&t++,n};for(t=0;t<e.length;t++)if(n)"'"!==e.charAt(t)||a("'")?i+=e.charAt(t):n=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":a("'")?i+="'":n=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,i){return e.settings[i]!==t?e.settings[i]:this._defaults[i]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,a=this._getDefaultDate(e),s=a,o=this._getFormatConfig(e);try{s=this.parseDate(i,n,o)||a}catch(e){n=t?"":n}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=n?s.getDate():0,e.currentMonth=n?s.getMonth():0,e.currentYear=n?s.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,n){var a=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(e){}for(var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,a=n.getFullYear(),s=n.getMonth(),o=n.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=r.exec(i);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":s+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(a,s));break;case"y":case"Y":a+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(a,s))}l=r.exec(i)}return new Date(a,s,o)},o=null==i||""===i?n:"string"==typeof i?s(i):"number"==typeof i?isNaN(i)?n:a(i):new Date(i.getTime());return o=o&&"Invalid Date"===o.toString()?n:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,a=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),a===e.selectedMonth&&s===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(n,-i,"M")},next:function(){e.datepicker._adjustDate(n,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(n)},selectDay:function(){return e.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(n,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,n,a,s,o,r,l,c,u,d,h,p,f,m,g,v,b,y,_,w,$,x,k,C,P,T,D,S,A,j,E,I,N,F,M,L,R,O,H=new Date,z=this._daylightSavingAdjust(new Date(H.getFullYear(),H.getMonth(),H.getDate())),B=this._get(e,"isRTL"),q=this._get(e,"showButtonPanel"),U=this._get(e,"hideIfNoPrevNext"),W=this._get(e,"navigationAsDateFormat"),G=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),K=this._get(e,"stepMonths"),Y=1!==G[0]||1!==G[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(e,"min"),J=this._getMinMaxDate(e,"max"),Z=e.drawMonth-V,ee=e.drawYear;if(Z<0&&(Z+=12,ee--),J)for(t=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-G[0]*G[1]+1,J.getDate())),t=Q&&t<Q?Q:t;this._daylightSavingAdjust(new Date(ee,Z,1))>t;)--Z<0&&(Z=11,ee--);for(e.drawMonth=Z,e.drawYear=ee,i=this._get(e,"prevText"),i=W?this.formatDate(i,this._daylightSavingAdjust(new Date(ee,Z-K,1)),this._getFormatConfig(e)):i,n=this._canAdjustMonth(e,-1,ee,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+i+"</span></a>":U?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+i+"</span></a>",a=this._get(e,"nextText"),a=W?this.formatDate(a,this._daylightSavingAdjust(new Date(ee,Z+K,1)),this._getFormatConfig(e)):a,s=this._canAdjustMonth(e,1,ee,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+a+"</span></a>":U?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+a+"</span></a>",o=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?X:z,o=W?this.formatDate(o,r,this._getFormatConfig(e)):o,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=q?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(B?l:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(B?"":l)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),b=this._get(e,"selectOtherMonths"),y=this._getDefaultDate(e),_="",$=0;$<G[0];$++){for(x="",this.maxRows=4,k=0;k<G[1];k++){if(C=this._daylightSavingAdjust(new Date(ee,Z,e.selectedDay)),P=" ui-corner-all",T="",Y){if(T+="<div class='ui-datepicker-group",G[1]>1)switch(k){case 0:T+=" ui-datepicker-group-first",P=" ui-corner-"+(B?"right":"left");break;case G[1]-1:T+=" ui-datepicker-group-last",P=" ui-corner-"+(B?"left":"right");break;default:T+=" ui-datepicker-group-middle",P=""}T+="'>"}for(T+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+P+"'>"+(/all|left/.test(P)&&0===$?B?s:n:"")+(/all|right/.test(P)&&0===$?B?n:s:"")+this._generateMonthYearHeader(e,Z,ee,Q,J,$>0||k>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",D=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",w=0;w<7;w++)S=(w+u)%7,D+="<th"+((w+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+h[S]+"'>"+p[S]+"</span></th>";for(T+=D+"</tr></thead><tbody>",A=this._getDaysInMonth(ee,Z),ee===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,A)),j=(this._getFirstDayOfMonth(ee,Z)-u+7)%7,E=Math.ceil((j+A)/7),I=Y&&this.maxRows>E?this.maxRows:E,this.maxRows=I,N=this._daylightSavingAdjust(new Date(ee,Z,1-j)),F=0;F<I;F++){for(T+="<tr>",M=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(N)+"</td>":"",w=0;w<7;w++)L=g?g.apply(e.input?e.input[0]:null,[N]):[!0,""],R=N.getMonth()!==Z,O=R&&!b||!L[0]||Q&&N<Q||J&&N>J,M+="<td class='"+((w+u+6)%7>=5?" ui-datepicker-week-end":"")+(R?" ui-datepicker-other-month":"")+(N.getTime()===C.getTime()&&Z===e.selectedMonth&&e._keyEvent||y.getTime()===N.getTime()&&y.getTime()===C.getTime()?" "+this._dayOverClass:"")+(O?" "+this._unselectableClass+" ui-state-disabled":"")+(R&&!v?"":" "+L[1]+(N.getTime()===X.getTime()?" "+this._currentClass:"")+(N.getTime()===z.getTime()?" ui-datepicker-today":""))+"'"+(R&&!v||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(O?"":" data-handler='selectDay' data-event='click' data-month='"+N.getMonth()+"' data-year='"+N.getFullYear()+"'")+">"+(R&&!v?"&#xa0;":O?"<span class='ui-state-default'>"+N.getDate()+"</span>":"<a class='ui-state-default"+(N.getTime()===z.getTime()?" ui-state-highlight":"")+(N.getTime()===X.getTime()?" ui-state-active":"")+(R?" ui-priority-secondary":"")+"' href='#'>"+N.getDate()+"</a>")+"</td>",N.setDate(N.getDate()+1),N=this._daylightSavingAdjust(N);T+=M+"</tr>"}Z++,Z>11&&(Z=0,ee++),T+="</tbody></table>"+(Y?"</div>"+(G[0]>0&&k===G[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=T}_+=x}return _+=c,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,i,n,a,s,o,r){var l,c,u,d,h,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),b=this._get(e,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",_="";if(s||!g)_+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(l=n&&n.getFullYear()===i,c=a&&a.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;u<12;u++)(!l||u>=n.getMonth())&&(!c||u<=a.getMonth())&&(_+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+r[u]+"</option>");_+="</select>"}if(b||(y+=_+(!s&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",s||!v)y+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=n?Math.max(f,n.getFullYear()):f,m=a?Math.min(m,a.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f<=m;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",y+=e.yearshtml,e.yearshtml=null}return y+=this._get(e,"yearSuffix"),b&&(y+=(!s&&g&&v?"":"&#xa0;")+_),y+="</div>"},_adjustInstDate:function(e,t,i){var n=e.drawYear+("Y"===i?t:0),a=e.drawMonth+("M"===i?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(n,a))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,a,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),a=i&&t<i?i:t;return n&&a>n?n:a},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var a=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(i,n+(t<0?t:a[0]*a[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var i,n,a=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),o=null,r=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=n),i[1].match(/[+\-].*/)&&(r+=n)),(!a||t.getTime()>=a.getTime())&&(!s||t.getTime()<=s.getTime())&&(!o||t.getFullYear()>=o)&&(!r||t.getFullYear()<=r)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var a=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),a,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.4"}(jQuery),function(e){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;i<0&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i,n=this;if(this._isOpen&&!1!==this._trigger("beforeClose",t)){if(this._isOpen=!1,this._destroyOverlay(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&e(i).blur()}catch(e){}this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!t&&this._trigger("focus",e),i},open:function(){var t=this;if(this._isOpen)return void(this._moveToTop()&&this._focusTabbable());this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._trigger("open")},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement;this.uiDialog[0]===t||e.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),a=i.filter(":last");t.target!==a[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(a.focus(1),t.preventDefault()):(n.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;if(this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length)return void this.uiDialog.removeClass("ui-dialog-buttons");e.each(i,function(i,n){var a,s;n=e.isFunction(n)?{click:n,text:i}:n,n=e.extend({type:"button"},n),a=n.click,n.click=function(){a.apply(t.element[0],arguments)},s={icons:n.icons,text:n.showText},delete n.icons,delete n.showText,e("<button></button>",n).button(s).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,a){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,t(a))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(a,s){n.position=[s.position.left-i.document.scrollLeft(),s.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",a,t(s))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,n=this.options,a=n.resizable,s=this.uiDialog.css("position"),o="string"==typeof a?a:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:o,start:function(n,a){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,t(a))},resize:function(e,n){i._trigger("resize",e,t(n))},stop:function(a,s){n.height=e(this).height(),n.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",a,t(s))}}).css("position",s)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(n){var a=this,s=!1,o={};e.each(n,function(e,n){a._setOption(e,n),e in t&&(s=!0),e in i&&(o[e]=n)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,t){var i,n,a=this.uiDialog;"dialogClass"===e&&a.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=a.is(":data(ui-draggable)"),i&&!t&&a.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(n=a.is(":data(ui-resizable)"),n&&!t&&a.resizable("destroy"),n&&"string"==typeof t&&a.resizable("option","handles",t),n||!1===t||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog").length||!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,i=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(n){t._allowInteraction(n)||(n.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,!1!==e.uiBackCompat&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,i=this.options.position,n=[],a=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(n=i.split?i.split(" "):[i[0],i[1]],1===n.length&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(a[e]=n[e],n[e]=t)}),i={my:n[0]+(a[0]<0?a[0]:"+"+a[0])+" "+n[1]+(a[1]<0?a[1]:"+"+a[1]),at:n.join(" ")}),i=e.extend({},e.ui.dialog.prototype.options.position,i)):i=e.ui.dialog.prototype.options.position,t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.position(i),t||this.uiDialog.hide()}})}(jQuery),function(e){e.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,a,s,o,r,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,a=this.previousFilter||"",s=String.fromCharCode(t.keyCode),o=!1,clearTimeout(this.filterTimer),s===a?o=!0:s=a+s,r=new RegExp("^"+i(s),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(e(this).children("a").text())}),n=o&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(s=String.fromCharCode(t.keyCode),r=new RegExp("^"+i(s),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=s,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,n=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev("a"),a=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(a),t.attr("aria-labelledby",n.attr("id"))}),t=n.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var i,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,a,s,o,r;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,a=t.offset().top-this.activeMenu.offset().top-i-n,
s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=t.height(),a<0?this.activeMenu.scrollTop(s+a):a+r>o&&this.activeMenu.scrollTop(s+a-o+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this.activeMenu=n},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,n)},nextPage:function(t){var i,n,a;if(!this.active)return void this.next(t);this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,a=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n-a<0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))},previousPage:function(t){var i,n,a;if(!this.active)return void this.next(t);this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,a=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n+a>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first()))},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.10.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){if(e===t)return this.options.value;this.options.value=this._constrainedValue(e),this._refreshValue()},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=!1===e,"number"!=typeof e&&(e=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(jQuery),function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,n=this.options,a=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s=[];for(i=n.values&&n.values.length||1,a.length>i&&(a.slice(i).remove(),a=a.slice(0,i)),t=a.length;t<i;t++)s.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=a.add(e(s.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,n,a,s,o,r,l,c=this,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),a=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(n-c.values(t));(a>i||a===i&&(t===c._lastChangedValue||c.values(t)===u.min))&&(a=i,s=e(this),o=t)}),!1!==this._start(t,o)&&(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),r=s.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-r.left-s.width()/2,top:t.pageY-r.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,a,s;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/t,n>1&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),a=this._valueMax()-this._valueMin(),s=this._valueMin()+n*a,this._trimAlignValue(s)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,a,s;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&!0===this.options.range&&(0===t&&i>n||1===t&&i<n)&&(i=n),i!==this.values(t)&&(a=this.values(),a[t]=i,s=this._trigger("slide",e,{handle:this.handles[t],value:i,values:a}),n=this.values(t?0:1),!1!==s&&this.values(t,i))):i!==this.value()&&!1!==(s=this._trigger("slide",e,{handle:this.handles[t],value:i}))&&this.value(i)},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var n,a,s;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,a=arguments[0],s=0;s<n.length;s+=1)n[s]=this._trimAlignValue(a[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,i){var n,a=0;switch("range"===t&&!0===this.options.range&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(a=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;n<a;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,a,s,o=this.options.range,r=this.options,l=this,c=!this._animateOff&&r.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,u["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[c?"animate":"css"](u,r.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},r.animate),1===n&&l.range[c?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},r.animate),1===n&&l.range[c?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(n=this.value(),a=this._valueMin(),s=this._valueMax(),i=s!==a?(n-a)/(s-a)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](u,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(i){var n,a,s,o=e(i.target).data("ui-slider-handle-index");switch(i.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(i.target).addClass("ui-state-active"),!1===this._start(i,o)))return}switch(s=this.options.step,n=a=this.options.values&&this.options.values.length?this.values(o):this.value(),i.keyCode){case e.ui.keyCode.HOME:a=this._valueMin();break;case e.ui.keyCode.END:a=this._valueMax();break;case e.ui.keyCode.PAGE_UP:a=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:a=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(n===this._valueMax())return;a=this._trimAlignValue(n+s);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n===this._valueMin())return;a=this._trimAlignValue(n-s)}this._slide(i,o,a)},click:function(e){e.preventDefault()},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,n){var a=i.attr(n);a!==undefined&&a.length&&(t[n]=a)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){if(this.cancelBlur)return void delete this.cancelBlur;this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){this.element[0]===this.document[0].activeElement||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),!1!==this._start(t)&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(e(t.currentTarget).hasClass("ui-state-active"))return!1!==this._start(t)&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,i.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return!(!this.spinning&&!1===this._trigger("start",e))&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",t,{value:i})||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;return t=null!==n.min?n.min:0,i=e-t,i=Math.round(i/n.step)*n.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==n.max&&e>n.max?n.max:null!==n.min&&e<n.min?n.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(i))}"max"!==e&&"min"!==e&&"step"!==e||"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var i;""!==e&&null!==(i=this._parse(e))&&(t||(i=this._adjustValue(i)),e=this._format(i)),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());t(this._value).call(this,e)},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function i(){return++a}function n(e){return e=e.cloneNode(!1),e.hash.length>1&&decodeURIComponent(e.href.replace(s,""))===decodeURIComponent(location.href.replace(s,""))}var a=0,s=/#.*$/;e.widget("ui.tabs",{version:"1.10.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(i.active):this.active=e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);return null===t&&(n&&this.tabs.each(function(i,a){if(e(a).attr("aria-controls")===n)return t=i,!1}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==t&&-1!==t||(t=!!this.tabs.length&&0)),!1!==t&&-1===(t=this.tabs.index(this.tabs.eq(t)))&&(t=!i&&0),!i&&!1===t&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),a=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:a=!1,n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,a),t.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function n(){return t>a&&(t=0),t<0&&(t=a),t}for(var a=this.tabs.length-1;-1!==e.inArray(n(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?void this._activate(t):"disabled"===e?void this._setupDisabled(t):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(t),void("heightStyle"===e&&this._setupHeightStyle(t)))},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,a){var s,o,r,l=e(a).uniqueId().attr("id"),c=e(a).closest("li"),u=c.attr("aria-controls");n(a)?(s=a.hash,o=t.element.find(t._sanitizeSelector(s))):(r=t._tabId(c),s="#"+r,o=t.element.find(s),o.length||(o=t._createPanel(r),o.insertAfter(t.panels[i-1]||t.tablist)),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),u&&c.data("ui-tabs-aria-controls",u),c.attr({"aria-controls":s.substring(1),"aria-labelledby":l}),o.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,n=0;i=this.tabs[n];n++)!0===t||-1!==e.inArray(n,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n=this.element.parent();"fill"===t?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,a=e(t.currentTarget),s=a.closest("li"),o=s[0]===n[0],r=o&&i.collapsible,l=r?e():this._getPanelForTab(s),c=n.length?this._getPanelForTab(n):e(),u={oldTab:n,oldPanel:c,newTab:r?e():s,newPanel:l};t.preventDefault(),s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||!1===this._trigger("beforeActivate",t,u)||(i.active=!r&&this.tabs.index(s),this.active=o?e():s,this.xhr&&this.xhr.abort(),c.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(s),t),this._toggle(t,u))},_toggle:function(t,i){function n(){s.running=!1,s._trigger("activate",t,i)}function a(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&s.options.show?s._show(o,s.options.show,n):(o.show(),n())}var s=this,o=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),a()),r.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return!1===t?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var n=this.options.disabled;!1!==n&&(i===t?n=!1:(i=this._getIndex(i),n=e.isArray(n)?e.map(n,function(e){return e!==i?e:null}):e.map(this.tabs,function(e,t){return t!==i?t:null})),this._setupDisabled(n))},disable:function(i){var n=this.options.disabled;if(!0!==n){if(i===t)n=!0;else{if(i=this._getIndex(i),-1!==e.inArray(i,n))return;n=e.isArray(n)?e.merge([i],n).sort():[i]}this._setupDisabled(n)}},load:function(t,i){t=this._getIndex(t);var a=this,s=this.tabs.eq(t),o=s.find(".ui-tabs-anchor"),r=this._getPanelForTab(s),l={tab:s,panel:r};n(o[0])||(this.xhr=e.ajax(this._ajaxSettings(o,i,l)),
this.xhr&&"canceled"!==this.xhr.statusText&&(s.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){r.html(e),a._trigger("load",i,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&a.panels.stop(!1,!0),s.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),e===a.xhr&&delete a.xhr},1)})))},_ajaxSettings:function(t,i,n){var a=this;return{url:t.attr("href"),beforeSend:function(t,s){return a._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:s},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),function(e){function t(t,i){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(n.join(" ")))}function i(t){var i=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),a=e.inArray(i,n);-1!==a&&n.splice(a,1),t.removeData("ui-tooltip-id"),n=e.trim(n.join(" ")),n?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")}var n=0;e.widget("ui.tooltip",{version:"1.10.4",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,i){var n=this;if("disabled"===t)return this[i?"_disable":"_enable"](),void(this.options[t]=i);this._super(t,i),"content"===t&&e.each(this.tooltips,function(e,t){n._updateContent(t)})},_disable:function(){var t=this;e.each(this.tooltips,function(i,n){var a=e.Event("blur");a.target=a.currentTarget=n[0],t.close(a,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&n.parents().each(function(){var t,n=e(this);n.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._updateContent(n,t))},_updateContent:function(e,t){var i,n=this.options.content,a=this,s=t?t.type:null;if("string"==typeof n)return this._open(t,e,n);(i=n.call(e[0],function(i){e.data("ui-tooltip-open")&&a._delay(function(){t&&(t.type=s),this._open(t,e,i)})}))&&this._open(t,e,i)},_open:function(i,n,a){function s(e){c.of=e,o.is(":hidden")||o.position(c)}var o,r,l,c=e.extend({},this.options.position);if(a){if(o=this._find(n),o.length)return void o.find(".ui-tooltip-content").html(a);n.is("[title]")&&(i&&"mouseover"===i.type?n.attr("title",""):n.removeAttr("title")),o=this._tooltip(n),t(n,o.attr("id")),o.find(".ui-tooltip-content").html(a),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:s}),s(i)):o.position(e.extend({of:n},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(l=this.delayedShow=setInterval(function(){o.is(":visible")&&(s(c.of),clearInterval(l))},e.fx.interval)),this._trigger("open",i,{tooltip:o}),r={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=n[0],this.close(i,!0)}},remove:function(){this._removeTooltip(o)}},i&&"mouseover"!==i.type||(r.mouseleave="close"),i&&"focusin"!==i.type||(r.focusout="close"),this._on(!0,n,r)}},close:function(t){var n=this,a=e(t?t.currentTarget:this.element),s=this._find(a);this.closing||(clearInterval(this.delayedShow),a.data("ui-tooltip-title")&&a.attr("title",a.data("ui-tooltip-title")),i(a),s.stop(!0),this._hide(s,this.options.hide,function(){n._removeTooltip(e(this))}),a.removeData("ui-tooltip-open"),this._off(a,"mouseleave focusout keyup"),a[0]!==this.element[0]&&this._off(a,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete n.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:s}),this.closing=!1)},_tooltip:function(t){var i="ui-tooltip-"+n++,a=e("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(a),a.appendTo(this.document[0].body),this.tooltips[i]=t,a},_find:function(t){var i=t.data("ui-tooltip-id");return i?e("#"+i):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,n){var a=e.Event("blur");a.target=a.currentTarget=n[0],t.close(a,!0),e("#"+i).remove(),n.data("ui-tooltip-title")&&(n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))})}})}(jQuery),function(e){e.fn.numeric=function(t,i){"boolean"==typeof t&&(t={decimal:t}),t=t||{},"undefined"==typeof t.negative&&(t.negative=!0);var n=!1===t.decimal?"":t.decimal||".",a=!0===t.negative;return i="function"==typeof i?i:function(){},this.data("numeric.decimal",n).data("numeric.negative",a).data("numeric.callback",i).keypress(e.fn.numeric.keypress).keyup(e.fn.numeric.keyup).blur(e.fn.numeric.blur)},e.fn.numeric.keypress=function(t){var i=e.data(this,"numeric.decimal"),n=e.data(this,"numeric.negative"),a=t.charCode?t.charCode:t.keyCode?t.keyCode:0;if(13==a&&"input"==this.nodeName.toLowerCase())return!0;if(13==a)return!1;var s=!1;if(t.ctrlKey&&97==a||t.ctrlKey&&65==a)return!0;if(t.ctrlKey&&120==a||t.ctrlKey&&88==a)return!0;if(t.ctrlKey&&99==a||t.ctrlKey&&67==a)return!0;if(t.ctrlKey&&122==a||t.ctrlKey&&90==a)return!0;if(t.ctrlKey&&118==a||t.ctrlKey&&86==a||t.shiftKey&&45==a)return!0;if(a<48||a>57){var o=e(this).val();if(0!==o.indexOf("-")&&n&&45==a&&(0===o.length||0===parseInt(e.fn.getSelectionStart(this),10)))return!0;i&&a==i.charCodeAt(0)&&-1!=o.indexOf(i)&&(s=!1),8!=a&&9!=a&&13!=a&&35!=a&&36!=a&&37!=a&&39!=a&&46!=a?s=!1:"undefined"!=typeof t.charCode&&(t.keyCode==t.which&&0!==t.which?(s=!0,46==t.which&&(s=!1)):0!==t.keyCode&&0===t.charCode&&0===t.which&&(s=!0)),i&&a==i.charCodeAt(0)&&(s=-1==o.indexOf(i))}else s=!0;return s},e.fn.numeric.keyup=function(){var t=e(this).val();if(t&&t.length>0){var i=e.fn.getSelectionStart(this),n=e.fn.getSelectionEnd(this),a=e.data(this,"numeric.decimal"),s=e.data(this,"numeric.negative");if(""!==a&&null!==a){var o=t.indexOf(a);0===o&&(this.value="0"+t),1==o&&"-"==t.charAt(0)&&(this.value="-0"+t.substring(1)),t=this.value}for(var r=[0,1,2,3,4,5,6,7,8,9,"-",a],l=t.length,c=l-1;c>=0;c--){var u=t.charAt(c);0!==c&&"-"==u?t=t.substring(0,c)+t.substring(c+1):0!==c||s||"-"!=u||(t=t.substring(1));for(var d=!1,h=0;h<r.length;h++)if(u==r[h]){d=!0;break}d&&" "!=u||(t=t.substring(0,c)+t.substring(c+1))}var p=t.indexOf(a);if(p>0)for(var f=l-1;f>p;f--){var m=t.charAt(f);m==a&&(t=t.substring(0,f)+t.substring(f+1))}this.value=t,e.fn.setSelection(this,[i,n])}},e.fn.numeric.blur=function(){var t=e.data(this,"numeric.decimal"),i=e.data(this,"numeric.callback"),n=this.value;if(""!==n){new RegExp("^\\d+$|^\\d*"+t+"\\d+$").exec(n)||i.apply(this)}},e.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).unbind("keypress",e.fn.numeric.keypress).unbind("blur",e.fn.numeric.blur)},e.fn.getSelectionStart=function(e){if(e.createTextRange){var t=document.selection.createRange().duplicate();return t.moveEnd("character",e.value.length),""===t.text?e.value.length:e.value.lastIndexOf(t.text)}return e.selectionStart},e.fn.getSelectionEnd=function(e){if(e.createTextRange){var t=document.selection.createRange().duplicate();return t.moveStart("character",-e.value.length),t.text.length}return e.selectionEnd},e.fn.setSelection=function(e,t){if("number"==typeof t&&(t=[t,t]),t&&t.constructor==Array&&2==t.length)if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveStart("character",t[0]),i.moveEnd("character",t[1]),i.select()}else e.setSelectionRange&&(e.focus(),e.setSelectionRange(t[0],t[1]))}}(jQuery),app.modules.demandsAuthComponentContainer=function(e){return e.getOptions=function(){return{onError:function(){app.modules.demandsProject.unlockForm($(".js-demands-form")[0])},onCompleted:function(){app.modules.demandsProject.sendDemand()},getAdditionalUserData:function(){var e={profile_attributes:{city_id:app.config.currentRegionCapitalId},delivery_options:{event_from:"demands"}},t=document.querySelector(".js-demands-form .js-input-phone-auth");return t&&t.value&&(e.profile_attributes.contacts=t.value),e}}},e}(app.modules.demandsAuthComponentContainer||{});var PhoneNumberNormalizer=function(){function e(e,o){return"string"!=typeof e?"":(e=e.replace(t,function(e){return String.fromCharCode(48+(15&e.charCodeAt(0)))}),o||(e=e.replace(i,function(e){return String(s[e.toLowerCase()]||0)})),e=e.replace(n,"+"),e=e.replace(a,""))}var t=/[\uFF10-\uFF19\u0660-\u0669\u06F0-\u06F9]/g,i=/[a-zA-Z]/g,n=/^[+\uFF0B]+/g,a=/[^,#+\*\d]/g,s={a:2,b:2,c:2,d:3,e:3,f:3,g:4,h:4,i:4,j:5,k:5,l:5,m:6,n:6,o:6,p:7,q:7,r:7,s:7,t:8,u:8,v:8,w:9,x:9,y:9,z:9};return{Normalize:e}}(),PhoneNumber=function(dataBase){"use strict";function ParseArray(e,t,i){for(var n=0;n<t.length;++n){var a=e[n];if(a){var s=t[n],o=s.replace(NON_ALPHA_CHARS,"");s!=o&&(a=new RegExp(s.replace(o,a))),i[o]=a}}return i}function ParseMetaData(countryCode,md){var array=eval(md.replace(BACKSLASH,"\\\\"));return md=ParseArray(array,META_DATA_ENCODING,{countryCode:countryCode}),regionCache[md.region]=md,md}function ParseFormat(e){var t=e.formats;if(!t)return null;if(Array.isArray(t[0]))for(var i=0;i<t.length;++i)t[i]=ParseArray(t[i],FORMAT_ENCODING,{})}function FindMetaDataForRegion(e){var t=regionCache[e];if(t)return t;for(var i in dataBase){var n=dataBase[i];if(Array.isArray(n)){for(var a=0;a<n.length;a++)if("string"==typeof n[a]&&n[a].substr(2,2)==e){if(a>0){"string"==typeof n[0]&&(n[0]=ParseMetaData(i,n[0]));var s=n[0].formats,o=ParseMetaData(i,n[a]);return o.formats=s,n[a]=o}return n[a]=ParseMetaData(i,n[a]),n[a]}}else if("string"==typeof n&&n.substr(2,2)==e)return dataBase[i]=ParseMetaData(i,n)}}function FormatNumber(e,t,i){ParseFormat(e);var n=e.formats;if(!n)return null;for(var a=0;a<n.length;++a){var s=n[a];if((!s.leadingDigits||s.leadingDigits.test(t))&&s.pattern.test(t)){if(i){var o=s.internationalFormat;if(o||(o=s.nationalFormat),"NA"==o)return null;t="+"+e.countryCode+" "+t.replace(s.pattern,o)}else{t=t.replace(s.pattern,s.nationalFormat);var r=e.nationalPrefixFormattingRule;if(s.nationalPrefixFormattingRule&&(r=s.nationalPrefixFormattingRule),r){var l=t.match(SPLIT_FIRST_GROUP);if(l){var c=l[1],u=l[2],d=r;d=d.replace("$NP",e.nationalPrefix),d=d.replace("$FG",c),t=d+u}}}return"NA"==t?null:t}}return null}function NationalNumber(e,t){this.region=e.region,this.regionMetaData=e,this.nationalNumber=t}function IsValidNumber(e,t){return t.possiblePattern.test(e)}function IsNationalNumber(e,t){return IsValidNumber(e,t)&&t.nationalPattern.test(e)}function ParseCountryCode(e){for(var t=1;t<=3;++t){var i=e.substr(0,t);if(dataBase[i])return i}return null}function ParseInternationalNumber(e){var t,i=ParseCountryCode(e);if(!i)return null;e=e.substr(i.length);var n=dataBase[i];if(Array.isArray(n)){for(var a=0;a<n.length;++a)if("string"==typeof n[a]&&(n[a]=ParseMetaData(i,n[a])),a>0&&(n[a].formats=n[0].formats),t=ParseNationalNumber(e,n[a]))return t;return null}return"string"==typeof n&&(n=dataBase[i]=ParseMetaData(i,n)),ParseNationalNumber(e,n)}function ParseNationalNumber(e,t){return t.possiblePattern.test(e)&&t.nationalPattern.test(e)?new NationalNumber(t,e):null}function ParseNumber(e,t){var i;if(e=PhoneNumberNormalizer.Normalize(e),(!t||"001"===t)&&"+"!==e[0])return null;if("+"===e[0]||"001"===t)return ParseInternationalNumber(e.replace(LEADING_PLUS_CHARS_PATTERN,""));var n=FindMetaDataForRegion(t.toUpperCase());if(n.internationalPrefix.test(e)){if(i=ParseInternationalNumber(e.replace(n.internationalPrefix,"")))return i}if(n.nationalPrefixForParsing){if(i=ParseNationalNumber(e.replace(n.nationalPrefixForParsing,n.nationalPrefixTransformRule||""),n))return i}else{var a=n.nationalPrefix;if(a&&0==e.indexOf(a)&&(i=ParseNationalNumber(e.substr(a.length),n)))return i}return(i=ParseNationalNumber(e,n))?i:(i=ParseInternationalNumber(e))||(n.possiblePattern.test(e)?new NationalNumber(n,e):null)}function IsPlainPhoneNumber(e){if("string"!=typeof e)return!1;var t=e.length,i=t>MAX_PHONE_NUMBER_LENGTH,n=0===t;return!(i||n||NON_DIALABLE_CHARS_ONCE.test(e))}var MAX_PHONE_NUMBER_LENGTH=50,NON_ALPHA_CHARS=/[^a-zA-Z]/g,NON_DIALABLE_CHARS=/[^,#+\*\d]/g,NON_DIALABLE_CHARS_ONCE=new RegExp(NON_DIALABLE_CHARS.source),BACKSLASH=/\\/g,SPLIT_FIRST_GROUP=/^(\d+)(.*)$/,LEADING_PLUS_CHARS_PATTERN=/^[+\uFF0B]+/g,META_DATA_ENCODING=["region","^(?:internationalPrefix)","nationalPrefix","^(?:nationalPrefixForParsing)","nationalPrefixTransformRule","nationalPrefixFormattingRule","^possiblePattern$","^nationalPattern$","formats"],FORMAT_ENCODING=["^pattern$","nationalFormat","^leadingDigits","nationalPrefixFormattingRule","internationalFormat"],regionCache=Object.create(null);return NationalNumber.prototype={get internationalFormat(){var e=FormatNumber(this.regionMetaData,this.nationalNumber,!0);return Object.defineProperty(this,"internationalFormat",{value:e,enumerable:!0}),e},get nationalFormat(){var e=FormatNumber(this.regionMetaData,this.nationalNumber,!1);return Object.defineProperty(this,"nationalFormat",{value:e,enumerable:!0}),e},get internationalNumber(){var e=this.internationalFormat?this.internationalFormat.replace(NON_DIALABLE_CHARS,""):null;return Object.defineProperty(this,"internationalNumber",{value:e,enumerable:!0}),e}},{IsPlain:IsPlainPhoneNumber,Parse:ParseNumber}}({46:'["SE","00","0",,,"$NP$FG","\\d{5,10}","[1-9]\\d{5,9}",[["(8)(\\d{2,3})(\\d{2,3})(\\d{2})","$1-$2 $3 $4","8",,"$1 $2 $3 $4"],["([1-69]\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4","1[013689]|2[0136]|3[1356]|4[0246]|54|6[03]|90",,"$1 $2 $3 $4"],["([1-69]\\d)(\\d{3})(\\d{2})","$1-$2 $3","1[13689]|2[136]|3[1356]|4[0246]|54|6[03]|90",,"$1 $2 $3"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4","1[2457]|2[2457-9]|3[0247-9]|4[1357-9]|5[0-35-9]|6[124-9]|9(?:[125-8]|3[0-5]|4[0-3])",,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3","1[2457]|2[2457-9]|3[0247-9]|4[1357-9]|5[0-35-9]|6[124-9]|9(?:[125-8]|3[0-5]|4[0-3])",,"$1 $2 $3"],["(7\\d)(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4","7",,"$1 $2 $3 $4"],["(77)(\\d{2})(\\d{2})","$1-$2$3","7",,"$1 $2 $3"],["(20)(\\d{2,3})(\\d{2})","$1-$2 $3","20",,"$1 $2 $3"],["(9[034]\\d)(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4","9[034]",,"$1 $2 $3 $4"],["(9[034]\\d)(\\d{4})","$1-$2","9[034]",,"$1 $2"]]]',299:'["GL","00",,,,,"\\d{6}","[1-689]\\d{5}",[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",,,]]]',385:'["HR","00","0",,,"$NP$FG","\\d{6,12}","[1-7]\\d{5,8}|[89]\\d{6,11}",[["(1)(\\d{4})(\\d{3})","$1 $2 $3","1",,],["(6[09])(\\d{4})(\\d{3})","$1 $2 $3","6[09]",,],["([67]2)(\\d{3})(\\d{3,4})","$1 $2 $3","[67]2",,],["([2-5]\\d)(\\d{3})(\\d{3,4})","$1 $2 $3","[2-5]",,],["(9\\d)(\\d{3})(\\d{3,4})","$1 $2 $3","9",,],["(9\\d)(\\d{4})(\\d{4})","$1 $2 $3","9",,],["(9\\d)(\\d{3,4})(\\d{3})(\\d{3})","$1 $2 $3 $4","9",,],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3","6[0145]|7",,],["(\\d{2})(\\d{3,4})(\\d{3})","$1 $2 $3","6[0145]|7",,],["(80[01])(\\d{2})(\\d{2,3})","$1 $2 $3","8",,],["(80[01])(\\d{3,4})(\\d{3})","$1 $2 $3","8",,]]]',670:'["TL","00",,,,,"\\d{7,8}","[2-489]\\d{6}|7\\d{6,7}",[["(\\d{3})(\\d{4})","$1 $2","[2-489]",,],["(\\d{4})(\\d{4})","$1 $2","7",,]]]',258:'["MZ","00",,,,,"\\d{8,9}","[28]\\d{7,8}",[["([28]\\d)(\\d{3})(\\d{3,4})","$1 $2 $3","2|8[2-7]",,],["(80\\d)(\\d{3})(\\d{3})","$1 $2 $3","80",,]]]',359:'["BG","00","0",,,"$NP$FG","\\d{5,9}","[23567]\\d{5,7}|[489]\\d{6,8}",[["(2)(\\d{5})","$1 $2","29",,],["(2)(\\d{3})(\\d{3,4})","$1 $2 $3","2",,],["(\\d{3})(\\d{4})","$1 $2","43[124-7]|70[1-9]",,],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3","43[124-7]|70[1-9]",,],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3","[78]00",,],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3","999",,],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3","[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]",,],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3","48|8[7-9]|9[08]",,]]]',682:'["CK","00",,,,,"\\d{5}","[2-57]\\d{4}",[["(\\d{2})(\\d{3})","$1 $2",,,]]]',852:'["HK","00",,,,,"\\d{5,11}","[235-7]\\d{7}|8\\d{7,8}|9\\d{4,10}",[["(\\d{4})(\\d{4})","$1 $2","[235-7]|[89](?:0[1-9]|[1-9])",,],["(800)(\\d{3})(\\d{3})","$1 $2 $3","800",,],["(900)(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4","900",,],["(900)(\\d{2,5})","$1 $2","900",,]]]',998:'["UZ","810","8",,,"$NP $FG","\\d{7,9}","[679]\\d{8}",[["([679]\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",,,]]]',291:'["ER","00","0",,,"$NP$FG","\\d{6,7}","[178]\\d{6}",[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",,,]]]',95:'["MM","00","0",,,"$NP$FG","\\d{5,10}","[14578]\\d{5,7}|[26]\\d{5,8}|9(?:2\\d{0,2}|[58]|3\\d|4\\d{1,2}|6\\d?|[79]\\d{0,2})\\d{6}",[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3","1|2[45]",,],["(2)(\\d{4})(\\d{4})","$1 $2 $3","251",,],["(\\d)(\\d{2})(\\d{3})","$1 $2 $3","16|2",,],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3","67|81",,],["(\\d{2})(\\d{2})(\\d{3,4})","$1 $2 $3","[4-8]",,],["(9)(\\d{3})(\\d{4,6})","$1 $2 $3","9(?:2[0-4]|[35-9]|4[137-9])",,],["(9)([34]\\d{4})(\\d{4})","$1 $2 $3","9(?:3[0-36]|4[0-57-9])",,],["(9)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4","92[56]",,],["(9)(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4","93",,]]]',266:'["LS","00",,,,,"\\d{8}","[2568]\\d{7}",[["(\\d{4})(\\d{4})","$1 $2",,,]]]',245:'["GW","00",,,,,"\\d{7}","[3-79]\\d{6}",[["(\\d{3})(\\d{4})","$1 $2",,,]]]',374:'["AM","00","0",,,"($NP$FG)","\\d{5,8}","[1-9]\\d{7}",[["(\\d{2})(\\d{6})","$1 $2","1|47",,],["(\\d{2})(\\d{6})","$1 $2","4[139]|[5-7]|9[1-9]","$NP$FG",],["(\\d{3})(\\d{5})","$1 $2","[23]",,],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3","8|90","$NP $FG",]]]',61:['["AU","(?:14(?:1[14]|34|4[17]|[56]6|7[47]|88))?001[14-689]","0",,,,"\\d{6,10}","[1-578]\\d{5,9}",[["([2378])(\\d{4})(\\d{4})","$1 $2 $3","[2378]","($NP$FG)",],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3","[45]|14","$NP$FG",],["(16)(\\d{3})(\\d{2,4})","$1 $2 $3","16","$NP$FG",],["(1[389]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","1(?:[38]0|90)","$FG",],["(180)(2\\d{3})","$1 $2","180","$FG",],["(19\\d)(\\d{3})","$1 $2","19[13]","$FG",],["(19\\d{2})(\\d{4})","$1 $2","19[67]","$FG",],["(13)(\\d{2})(\\d{2})","$1 $2 $3","13[1-9]","$FG",]]]','["CC","(?:14(?:1[14]|34|4[17]|[56]6|7[47]|88))?001[14-689]","0",,,,"\\d{6,10}","[1458]\\d{5,9}",]','["CX","(?:14(?:1[14]|34|4[17]|[56]6|7[47]|88))?001[14-689]","0",,,,"\\d{6,10}","[1458]\\d{5,9}",]'],500:'["FK","00",,,,,"\\d{5}","[2-7]\\d{4}",]',261:'["MG","00","0",,,"$NP$FG","\\d{7,9}","[23]\\d{8}",[["([23]\\d)(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",,,]]]',92:'["PK","00","0",,,"($NP$FG)","\\d{6,12}","1\\d{8}|[2-8]\\d{5,11}|9(?:[013-9]\\d{4,9}|2\\d(?:111\\d{6}|\\d{3,7}))",[["(\\d{2})(111)(\\d{3})(\\d{3})","$1 $2 $3 $4","(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)1",,],["(\\d{3})(111)(\\d{3})(\\d{3})","$1 $2 $3 $4","2[349]|45|54|60|72|8[2-5]|9[2-9]",,],["(\\d{2})(\\d{7,8})","$1 $2","(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]",,],["(\\d{3})(\\d{6,7})","$1 $2","2[349]|45|54|60|72|8[2-5]|9[2-9]",,],["(3\\d{2})(\\d{7})","$1 $2","3","$NP$FG",],["([15]\\d{3})(\\d{5,6})","$1 $2","58[12]|1",,],["(586\\d{2})(\\d{5})","$1 $2","586",,],["([89]00)(\\d{3})(\\d{2})","$1 $2 $3","[89]00","$NP$FG",]]]',234:'["NG","009","0",,,"$NP$FG","\\d{5,14}","[1-6]\\d{5,8}|9\\d{5,9}|[78]\\d{5,13}",[["([129])(\\d{3})(\\d{3,4})","$1 $2 $3","[129]",,],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3","[3-6]|7(?:[1-79]|0[1-9])|8[2-9]",,],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3","70|8[01]|90[2359]",,],["([78]00)(\\d{4})(\\d{4,5})","$1 $2 $3","[78]00",,],["([78]00)(\\d{5})(\\d{5,6})","$1 $2 $3","[78]00",,],["(78)(\\d{2})(\\d{3})","$1 $2 $3","78",,]]]',350:'["GI","00",,,,,"\\d{8}","[2568]\\d{7}",[["(\\d{3})(\\d{5})","$1 $2","2",,]]]',45:'["DK","00",,,,,"\\d{8}","[2-9]\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,,]]]',963:'["SY","00","0",,,"$NP$FG","\\d{6,9}","[1-59]\\d{7,8}",[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3","[1-5]",,],["(9\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","9",,]]]',226:'["BF","00",,,,,"\\d{8}","[267]\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,,]]]',974:'["QA","00",,,,,"\\d{7,8}","[2-8]\\d{6,7}",[["([28]\\d{2})(\\d{4})","$1 $2","[28]",,],["([3-7]\\d{3})(\\d{4})","$1 $2","[3-7]",,]]]',218:'["LY","00","0",,,"$NP$FG","\\d{7,9}","[25679]\\d{8}",[["([25679]\\d)(\\d{7})","$1-$2",,,]]]',51:'["PE","19(?:1[124]|77|90)00","0",,,"($NP$FG)","\\d{6,9}","[14-9]\\d{7,8}",[["(1)(\\d{7})","$1 $2","1",,],["([4-8]\\d)(\\d{6})","$1 $2","[4-7]|8[2-4]",,],["(\\d{3})(\\d{5})","$1 $2","80",,],["(9\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","9","$FG",]]]',62:'["ID","0(?:0[1789]|10(?:00|1[67]))","0",,,"$NP$FG","\\d{5,11}","[1-9]\\d{6,10}",[["(\\d{2})(\\d{5,8})","$1 $2","2[124]|[36]1","($NP$FG)",],["(\\d{3})(\\d{5,8})","$1 $2","[4579]|2[035-9]|[36][02-9]","($NP$FG)",],["(8\\d{2})(\\d{3,4})(\\d{3,4})","$1-$2-$3","8[1-35-9]",,],["(177)(\\d{6,8})","$1 $2","1",,],["(800)(\\d{5,7})","$1 $2","800",,],["(80\\d)(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4","80[79]",,]]]',298:'["FO","00",,"(10(?:01|[12]0|88))",,,"\\d{6}","[2-9]\\d{5}",[["(\\d{6})","$1",,,]]]',381:'["RS","00","0",,,"$NP$FG","\\d{5,12}","[126-9]\\d{4,11}|3(?:[0-79]\\d{3,10}|8[2-9]\\d{2,9})",[["([23]\\d{2})(\\d{4,9})","$1 $2","(?:2[389]|39)0",,],["([1-3]\\d)(\\d{5,10})","$1 $2","1|2(?:[0-24-7]|[389][1-9])|3(?:[0-8]|9[1-9])",,],["(6\\d)(\\d{6,8})","$1 $2","6",,],["([89]\\d{2})(\\d{3,9})","$1 $2","[89]",,],["(7[26])(\\d{4,9})","$1 $2","7[26]",,],["(7[08]\\d)(\\d{4,9})","$1 $2","7[08]",,]]]',975:'["BT","00",,,,,"\\d{6,8}","[1-8]\\d{6,7}",[["([17]7)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","1|77",,],["([2-8])(\\d{3})(\\d{3})","$1 $2 $3","[2-68]|7[246]",,]]]',34:'["ES","00",,,,,"\\d{9}","[5-9]\\d{8}",[["([89]00)(\\d{3})(\\d{3})","$1 $2 $3","[89]00",,],["([5-9]\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","[568]|[79][0-8]",,]]]',881:'["001",,,,,,"\\d{9}","[67]\\d{8}",[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3","[67]",,]]]',855:'["KH","00[14-9]","0",,,,"\\d{6,10}","[1-9]\\d{7,9}",[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3","1\\d[1-9]|[2-9]","$NP$FG",],["(1[89]00)(\\d{3})(\\d{3})","$1 $2 $3","1[89]0",,]]]',420:'["CZ","00",,,,,"\\d{9,12}","[2-8]\\d{8}|9\\d{8,11}",[["([2-9]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","[2-8]|9[015-7]",,],["(96\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4","96",,],["(9\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4","9[36]",,]]]',216:'["TN","00",,,,,"\\d{8}","[2-57-9]\\d{7}",[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",,,]]]',673:'["BN","00",,,,,"\\d{7}","[2-578]\\d{6}",[["([2-578]\\d{2})(\\d{4})","$1 $2",,,]]]',290:['["SH","00",,,,,"\\d{4,5}","[256]\\d{4}",]','["TA","00",,,,,"\\d{4}","8\\d{3}",]'],882:'["001",,,,,,"\\d{7,12}","[13]\\d{6,11}",[["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3","3[23]",,],["(\\d{2})(\\d{5})","$1 $2","16|342",,],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3","34[57]",,],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3","348",,],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3","1",,],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3","16",,],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3","16",,]]]',267:'["BW","00",,,,,"\\d{7,8}","[2-79]\\d{6,7}",[["(\\d{3})(\\d{4})","$1 $2","[2-6]",,],["(7\\d)(\\d{3})(\\d{3})","$1 $2 $3","7",,],["(90)(\\d{5})","$1 $2","9",,]]]',94:'["LK","00","0",,,"$NP$FG","\\d{7,9}","[1-9]\\d{8}",[["(\\d{2})(\\d{1})(\\d{6})","$1 $2 $3","[1-689]",,],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3","7",,]]]',356:'["MT","00",,,,,"\\d{8}","[2357-9]\\d{7}",[["(\\d{4})(\\d{4})","$1 $2",,,]]]',375:'["BY","810","8","8?0?",,,"\\d{6,11}","[1-4]\\d{8}|800\\d{3,7}|[89]\\d{9,10}",[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4","17[0-3589]|2[4-9]|[34]","$NP 0$FG",],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4","1(?:5[24]|6[235]|7[467])|2(?:1[246]|2[25]|3[26])","$NP 0$FG",],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3","1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","$NP 0$FG",],["([89]\\d{2})(\\d{3})(\\d{4})","$1 $2 $3","8[01]|9","$NP $FG",],["(82\\d)(\\d{4})(\\d{4})","$1 $2 $3","82","$NP $FG",],["(800)(\\d{3})","$1 $2","800","$NP $FG",],["(800)(\\d{2})(\\d{2,4})","$1 $2 $3","800","$NP $FG",]]]',690:'["TK","00",,,,,"\\d{4}","[2-9]\\d{3}",]',507:'["PA","00",,,,,"\\d{7,8}","[1-9]\\d{6,7}",[["(\\d{3})(\\d{4})","$1-$2","[1-57-9]",,],["(\\d{4})(\\d{4})","$1-$2","6",,]]]',692:'["MH","011","1",,,,"\\d{7}","[2-6]\\d{6}",[["(\\d{3})(\\d{4})","$1-$2",,,]]]',250:'["RW","00","0",,,,"\\d{8,9}","[027-9]\\d{7,8}",[["(2\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","2","$FG",],["([7-9]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","[7-9]","$NP$FG",],["(0\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","0",,]]]',81:'["JP","010","0",,,"$NP$FG","\\d{8,17}","[1-9]\\d{8,9}|00(?:[36]\\d{7,14}|7\\d{5,7}|8\\d{7})",[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3","(?:12|57|99)0",,],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3","800",,],["(\\d{4})(\\d{4})","$1-$2","0077","$FG","NA"],["(\\d{4})(\\d{2})(\\d{3,4})","$1-$2-$3","0077","$FG","NA"],["(\\d{4})(\\d{2})(\\d{4})","$1-$2-$3","0088","$FG","NA"],["(\\d{4})(\\d{3})(\\d{3,4})","$1-$2-$3","00(?:37|66)","$FG","NA"],["(\\d{4})(\\d{4})(\\d{4,5})","$1-$2-$3","00(?:37|66)","$FG","NA"],["(\\d{4})(\\d{5})(\\d{5,6})","$1-$2-$3","00(?:37|66)","$FG","NA"],["(\\d{4})(\\d{6})(\\d{6,7})","$1-$2-$3","00(?:37|66)","$FG","NA"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3","[2579]0|80[1-9]",,],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3","1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|5(?:76|97)|499|746|8(?:3[89]|63|47|51)|9(?:49|80|9[16])",,],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3","1(?:2[3-6]|3[3-9]|4[2-6]|5[2-8]|[68][2-7]|7[2-689]|9[1-578])|2(?:2[03-689]|3[3-58]|4[0-468]|5[04-8]|6[013-8]|7[06-9]|8[02-57-9]|9[13])|4(?:2[28]|3[689]|6[035-7]|7[05689]|80|9[3-5])|5(?:3[1-36-9]|4[4578]|5[013-8]|6[1-9]|7[2-8]|8[14-7]|9[4-9])|7(?:2[15]|3[5-9]|4[02-9]|6[135-8]|7[0-4689]|9[014-9])|8(?:2[49]|3[3-8]|4[5-8]|5[2-9]|6[35-9]|7[579]|8[03-579]|9[2-8])|9(?:[23]0|4[02-46-9]|5[024-79]|6[4-9]|7[2-47-9]|8[02-7]|9[3-7])",,],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3","1|2(?:2[37]|5[5-9]|64|78|8[39]|91)|4(?:2[2689]|64|7[347])|5(?:[2-589]|39)|60|8(?:[46-9]|3[279]|2[124589])|9(?:[235-8]|93)",,],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3","2(?:9[14-79]|74|[34]7|[56]9)|82|993",,],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3","3|4(?:2[09]|7[01])|6[1-9]",,],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3","[2479][1-9]",,]]]',237:'["CM","00",,,,,"\\d{8,9}","[2368]\\d{7,8}",[["([26])(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5","[26]",,],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","[23]|88",,],["(800)(\\d{2})(\\d{3})","$1 $2 $3","80",,]]]',351:'["PT","00",,,,,"\\d{9}","[2-46-9]\\d{8}",[["(2\\d)(\\d{3})(\\d{4})","$1 $2 $3","2[12]",,],["([2-46-9]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","2[3-9]|[346-9]",,]]]',246:'["IO","00",,,,,"\\d{7}","3\\d{6}",[["(\\d{3})(\\d{4})","$1 $2",,,]]]',227:'["NE","00",,,,,"\\d{8}","[0289]\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","[289]|09",,],["(08)(\\d{3})(\\d{3})","$1 $2 $3","08",,]]]',27:'["ZA","00","0",,,"$NP$FG","\\d{5,9}","[1-79]\\d{8}|8(?:[067]\\d{7}|[1-4]\\d{3,7})",[["(860)(\\d{3})(\\d{3})","$1 $2 $3","860",,],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3","[1-79]|8(?:[0-47]|6[1-9])",,],["(\\d{2})(\\d{3,4})","$1 $2","8[1-4]",,],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3","8[1-4]",,]]]',962:'["JO","00","0",,,"$NP$FG","\\d{8,9}","[235-9]\\d{7,8}",[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3","[2356]|87","($NP$FG)",],["(7)(\\d{4})(\\d{4})","$1 $2 $3","7[457-9]",,],["(\\d{3})(\\d{5,6})","$1 $2","70|8[0158]|9",,]]]',387:'["BA","00","0",,,"$NP$FG","\\d{6,9}","[3-9]\\d{7,8}",[["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3","[3-5]",,],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","6[1-356]|[7-9]",,],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4","6[047]",,]]]',33:'["FR","00","0",,,"$NP$FG","\\d{9}","[1-9]\\d{8}",[["([1-79])(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5","[1-79]",,],["(1\\d{2})(\\d{3})","$1 $2","11","$FG","NA"],["(8\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","8","$NP $FG",]]]',972:'["IL","0(?:0|1[2-9])","0",,,"$FG","\\d{4,10}","[17]\\d{6,9}|[2-589]\\d{3}(?:\\d{3,6})?|6\\d{3}",[["([2-489])(\\d{3})(\\d{4})","$1-$2-$3","[2-489]","$NP$FG",],["([57]\\d)(\\d{3})(\\d{4})","$1-$2-$3","[57]","$NP$FG",],["(1)([7-9]\\d{2})(\\d{3})(\\d{3})","$1-$2-$3-$4","1[7-9]",,],["(1255)(\\d{3})","$1-$2","125",,],["(1200)(\\d{3})(\\d{3})","$1-$2-$3","120",,],["(1212)(\\d{2})(\\d{2})","$1-$2-$3","121",,],["(1599)(\\d{6})","$1-$2","15",,],["(\\d{4})","*$1","[2-689]",,]]]',248:'["SC","0[0-2]",,,,,"\\d{6,7}","[2468]\\d{5,6}",[["(\\d{3})(\\d{3})","$1 $2","8",,],["(\\d)(\\d{3})(\\d{3})","$1 $2 $3","[246]",,]]]',297:'["AW","00",,,,,"\\d{7}","[25-9]\\d{6}",[["(\\d{3})(\\d{4})","$1 $2",,,]]]',421:'["SK","00","0",,,"$NP$FG","\\d{9}","[2-689]\\d{8}",[["(2)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4","2",,],["([3-5]\\d)(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4","[3-5]",,],["([689]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","[689]",,]]]',672:'["NF","00",,,,,"\\d{5,6}","[13]\\d{5}",[["(\\d{2})(\\d{4})","$1 $2","1",,],["(\\d)(\\d{5})","$1 $2","3",,]]]',870:'["001",,,,,,"\\d{9}","[35-7]\\d{8}",[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",,,]]]',883:'["001",,,,,,"\\d{9}(?:\\d{3})?","51\\d{7}(?:\\d{3})?",[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3","510",,],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4","510",,],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3","51[13]",,]]]',264:'["NA","00","0",,,"$NP$FG","\\d{8,9}","[68]\\d{7,8}",[["(8\\d)(\\d{3})(\\d{4})","$1 $2 $3","8[1235]",,],["(6\\d)(\\d{3})(\\d{3,4})","$1 $2 $3","6",,],["(88)(\\d{3})(\\d{3})","$1 $2 $3","88",,],["(870)(\\d{3})(\\d{3})","$1 $2 $3","870",,]]]',878:'["001",,,,,,"\\d{12}","1\\d{11}",[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",,,]]]',239:'["ST","00",,,,,"\\d{7}","[29]\\d{6}",[["(\\d{3})(\\d{4})","$1 $2",,,]]]',357:'["CY","00",,,,,"\\d{8}","[257-9]\\d{7}",[["(\\d{2})(\\d{6})","$1 $2",,,]]]',240:'["GQ","00",,,,,"\\d{9}","[23589]\\d{8}",[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3","[235]",,],["(\\d{3})(\\d{6})","$1 $2","[89]",,]]]',506:'["CR","00",,"(19(?:0[012468]|1[09]|20|66|77|99))",,,"\\d{8,10}","[24-9]\\d{7,9}",[["(\\d{4})(\\d{4})","$1 $2","[24-7]|8[3-9]",,],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3","[89]0",,]]]',86:'["CN","(1(?:[129]\\d{3}|79\\d{2}))?00","0","(1(?:[129]\\d{3}|79\\d{2}))|0",,,"\\d{4,12}","[1-7]\\d{6,11}|8[0-357-9]\\d{6,9}|9\\d{7,10}",[["(80\\d{2})(\\d{4})","$1 $2","80[2678]","$NP$FG",],["([48]00)(\\d{3})(\\d{4})","$1 $2 $3","[48]00",,],["(\\d{5,6})","$1","100|95",,"NA"],["(\\d{2})(\\d{5,6})","$1 $2","(?:10|2\\d)[19]","$NP$FG",],["(\\d{3})(\\d{5,6})","$1 $2","[3-9]","$NP$FG",],["(\\d{3,4})(\\d{4})","$1 $2","[2-9]",,"NA"],["(21)(\\d{4})(\\d{4,6})","$1 $2 $3","21","$NP$FG",],["([12]\\d)(\\d{4})(\\d{4})","$1 $2 $3","10[1-9]|2[02-9]","$NP$FG",],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3","3(?:11|7[179])|4(?:[15]1|3[12])|5(?:1|2[37]|3[12]|51|7[13-79]|9[15])|7(?:31|5[457]|6[09]|91)|8(?:[57]1|98)","$NP$FG",],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3","3(?:1[02-9]|35|49|5|7[02-68]|9[1-68])|4(?:1[02-9]|2[179]|[35][2-9]|6[4789]|7\\d|8[23])|5(?:3[03-9]|4[36]|5[02-9]|6[1-46]|7[028]|80|9[2-46-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[04-9]|4[3-6]|6[2368])|8(?:1[236-8]|2[5-7]|3|5[4-9]|7[02-9]|8[3678]|9[1-7])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])","$NP$FG",],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3","1[3-578]",,],["(10800)(\\d{3})(\\d{4})","$1 $2 $3","108",,],["(\\d{3})(\\d{7,8})","$1 $2","950",,]]]',257:'["BI","00",,,,,"\\d{8}","[267]\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,,]]]',683:'["NU","00",,,,,"\\d{4}","[1-5]\\d{3}",]',43:'["AT","00","0",,,"$NP$FG","\\d{3,13}","[1-9]\\d{3,12}",[["(1)(\\d{3,12})","$1 $2","1",,],["(5\\d)(\\d{3,5})","$1 $2","5[079]",,],["(5\\d)(\\d{3})(\\d{3,4})","$1 $2 $3","5[079]",,],["(5\\d)(\\d{4})(\\d{4,7})","$1 $2 $3","5[079]",,],["(\\d{3})(\\d{3,10})","$1 $2","316|46|51|732|6(?:44|5[0-3579]|[6-9])|7(?:1|[28]0)|[89]",,],["(\\d{4})(\\d{3,9})","$1 $2","2|3(?:1[1-578]|[3-8])|4[2378]|5[2-6]|6(?:[12]|4[1-35-9]|5[468])|7(?:2[1-8]|35|4[1-8]|[5-79])",,]]]',247:'["AC","00",,,,,"\\d{5,6}","[46]\\d{4}|[01589]\\d{5}",]',675:'["PG","00",,,,,"\\d{7,8}","[1-9]\\d{6,7}",[["(\\d{3})(\\d{4})","$1 $2","[13-689]|27",,],["(\\d{4})(\\d{4})","$1 $2","20|7",,]]]',376:'["AD","00",,,,,"\\d{6,8}","(?:[346-9]|180)\\d{5}",[["(\\d{3})(\\d{3})","$1 $2","[346-9]",,],["(180[02])(\\d{4})","$1 $2","1",,]]]',
63:'["PH","00","0",,,,"\\d{5,13}","2\\d{5,7}|[3-9]\\d{7,9}|1800\\d{7,9}",[["(2)(\\d{3})(\\d{4})","$1 $2 $3","2","($NP$FG)",],["(2)(\\d{5})","$1 $2","2","($NP$FG)",],["(\\d{4})(\\d{4,6})","$1 $2","3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|5(?:22|44)|642|8(?:62|8[245])","($NP$FG)",],["(\\d{5})(\\d{4})","$1 $2","346|4(?:27|9[35])|883","($NP$FG)",],["([3-8]\\d)(\\d{3})(\\d{4})","$1 $2 $3","[3-8]","($NP$FG)",],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3","81|9","$NP$FG",],["(1800)(\\d{3})(\\d{4})","$1 $2 $3","1",,],["(1800)(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4","1",,]]]',236:'["CF","00",,,,,"\\d{8}","[278]\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,,]]]',590:['["GP","00","0",,,"$NP$FG","\\d{9}","[56]\\d{8}",[["([56]90)(\\d{2})(\\d{4})","$1 $2-$3",,,]]]','["BL","00","0",,,,"\\d{9}","[56]\\d{8}",]','["MF","00","0",,,,"\\d{9}","[56]\\d{8}",]'],53:'["CU","119","0",,,"($NP$FG)","\\d{4,8}","[2-57]\\d{5,7}",[["(\\d)(\\d{6,7})","$1 $2","7",,],["(\\d{2})(\\d{4,6})","$1 $2","[2-4]",,],["(\\d)(\\d{7})","$1 $2","5","$NP$FG",]]]',64:'["NZ","0(?:0|161)","0",,,"$NP$FG","\\d{7,11}","6[235-9]\\d{6}|[2-57-9]\\d{7,10}",[["([34679])(\\d{3})(\\d{4})","$1-$2 $3","[346]|7[2-57-9]|9[1-9]",,],["(24099)(\\d{3})","$1 $2","240",,],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","21",,],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3","2(?:1[1-9]|[69]|7[0-35-9])|70|86",,],["(2\\d)(\\d{3,4})(\\d{4})","$1 $2 $3","2[028]",,],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3","2(?:10|74)|5|[89]0",,]]]',965:'["KW","00",,,,,"\\d{7,8}","[12569]\\d{6,7}",[["(\\d{4})(\\d{3,4})","$1 $2","[126]|9[04-9]|52[25]",,],["(\\d{3})(\\d{5})","$1 $2","5[015]|92",,]]]',224:'["GN","00",,,,,"\\d{8,9}","[367]\\d{7,8}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","3",,],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","[67]",,]]]',973:'["BH","00",,,,,"\\d{8}","[136-9]\\d{7}",[["(\\d{4})(\\d{4})","$1 $2",,,]]]',32:'["BE","00","0",,,"$NP$FG","\\d{8,9}","[1-9]\\d{7,8}",[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","4[6-9]",,],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4","[23]|4[23]|9[2-4]",,],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","[156]|7[018]|8(?:0[1-9]|[1-79])",,],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3","(?:80|9)0",,]]]',249:'["SD","00","0",,,"$NP$FG","\\d{9}","[19]\\d{8}",[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",,,]]]',678:'["VU","00",,,,,"\\d{5,7}","[2-57-9]\\d{4,6}",[["(\\d{3})(\\d{4})","$1 $2","[579]",,]]]',52:'["MX","0[09]","01","0[12]|04[45](\\d{10})","1$1","$NP $FG","\\d{7,11}","[1-9]\\d{9,10}",[["([358]\\d)(\\d{4})(\\d{4})","$1 $2 $3","33|55|81",,],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3","[2467]|3[0-2457-9]|5[089]|8[02-9]|9[0-35-9]",,],["(1)([358]\\d)(\\d{4})(\\d{4})","044 $2 $3 $4","1(?:33|55|81)","$FG","$1 $2 $3 $4"],["(1)(\\d{3})(\\d{3})(\\d{4})","044 $2 $3 $4","1(?:[2467]|3[0-2457-9]|5[089]|8[2-9]|9[1-35-9])","$FG","$1 $2 $3 $4"]]]',968:'["OM","00",,,,,"\\d{7,9}","(?:2[2-6]|5|9[1-9])\\d{6}|800\\d{5,6}",[["(2\\d)(\\d{6})","$1 $2","2",,],["(9\\d{3})(\\d{4})","$1 $2","9",,],["([58]00)(\\d{4,6})","$1 $2","[58]",,]]]',599:['["CW","00",,,,,"\\d{7,8}","[169]\\d{6,7}",[["(\\d{3})(\\d{4})","$1 $2","[13-7]",,],["(9)(\\d{3})(\\d{4})","$1 $2 $3","9",,]]]','["BQ","00",,,,,"\\d{7}","[347]\\d{6}",]'],800:'["001",,,,,,"\\d{8}","\\d{8}",[["(\\d{4})(\\d{4})","$1 $2",,,]]]',386:'["SI","00","0",,,"$NP$FG","\\d{5,8}","[1-7]\\d{6,7}|[89]\\d{4,7}",[["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4","[12]|3[4-8]|4[24-8]|5[2-8]|7[3-8]","($NP$FG)",],["([3-7]\\d)(\\d{3})(\\d{3})","$1 $2 $3","[37][01]|4[0139]|51|6",,],["([89][09])(\\d{3,6})","$1 $2","[89][09]",,],["([58]\\d{2})(\\d{5})","$1 $2","59|8[1-3]",,]]]',679:'["FJ","0(?:0|52)",,,,,"\\d{7}(?:\\d{4})?","[36-9]\\d{6}|0\\d{10}",[["(\\d{3})(\\d{4})","$1 $2","[36-9]",,],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3","0",,]]]',238:'["CV","0",,,,,"\\d{7}","[259]\\d{6}",[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",,,]]]',691:'["FM","00",,,,,"\\d{7}","[39]\\d{6}",[["(\\d{3})(\\d{4})","$1 $2",,,]]]',262:['["RE","00","0",,,"$NP$FG","\\d{9}","[268]\\d{8}",[["([268]\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,,]]]','["YT","00","0",,,"$NP$FG","\\d{9}","[268]\\d{8}",]'],241:'["GA","00",,,,,"\\d{7,8}","0?\\d{7}",[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","[2-7]","0$FG",],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","0",,]]]',370:'["LT","00","8","[08]",,"($NP-$FG)","\\d{8}","[3-9]\\d{7}",[["([34]\\d)(\\d{6})","$1 $2","37|4(?:1|5[45]|6[2-4])",,],["([3-6]\\d{2})(\\d{5})","$1 $2","3[148]|4(?:[24]|6[09])|528|6",,],["([7-9]\\d{2})(\\d{2})(\\d{3})","$1 $2 $3","[7-9]","$NP $FG",],["(5)(2\\d{2})(\\d{4})","$1 $2 $3","52[0-79]",,]]]',256:'["UG","00[057]","0",,,"$NP$FG","\\d{5,9}","\\d{9}",[["(\\d{3})(\\d{6})","$1 $2","[7-9]|20(?:[013-8]|2[5-9])|4(?:6[45]|[7-9])",,],["(\\d{2})(\\d{7})","$1 $2","3|4(?:[1-5]|6[0-36-9])",,],["(2024)(\\d{5})","$1 $2","2024",,]]]',677:'["SB","0[01]",,,,,"\\d{5,7}","[1-9]\\d{4,6}",[["(\\d{2})(\\d{5})","$1 $2","[7-9]",,]]]',377:'["MC","00","0",,,"$NP$FG","\\d{8,9}","[4689]\\d{7,8}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","9","$FG",],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","4",,],["(6)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5","6",,],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3","8","$FG",]]]',382:'["ME","00","0",,,"$NP$FG","\\d{6,9}","[2-9]\\d{7,8}",[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","[2-57-9]|6[036-9]",,],["(67)(9)(\\d{3})(\\d{3})","$1 $2 $3 $4","679",,]]]',231:'["LR","00","0",,,"$NP$FG","\\d{7,9}","2\\d{7,8}|[37-9]\\d{8}|4\\d{6}|5\\d{6,8}",[["(2\\d)(\\d{3})(\\d{3})","$1 $2 $3","2",,],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3","[2579]",,],["([4-6])(\\d{3})(\\d{3})","$1 $2 $3","[4-6]",,],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3","[38]",,]]]',591:'["BO","00(1\\d)?","0","0(1\\d)?",,,"\\d{7,8}","[23467]\\d{7}",[["([234])(\\d{7})","$1 $2","[234]",,],["([67]\\d{7})","$1","[67]",,]]]',808:'["001",,,,,,"\\d{8}","\\d{8}",[["(\\d{4})(\\d{4})","$1 $2",,,]]]',964:'["IQ","00","0",,,"$NP$FG","\\d{6,10}","[1-7]\\d{7,9}",[["(1)(\\d{3})(\\d{4})","$1 $2 $3","1",,],["([2-6]\\d)(\\d{3})(\\d{3,4})","$1 $2 $3","[2-6]",,],["(7\\d{2})(\\d{3})(\\d{4})","$1 $2 $3","7",,]]]',225:'["CI","00",,,,,"\\d{8}","[02-7]\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,,]]]',992:'["TJ","810","8",,,"($NP) $FG","\\d{3,9}","[3-59]\\d{8}",[["([349]\\d{2})(\\d{2})(\\d{4})","$1 $2 $3","[34]7|91[78]",,],["([459]\\d)(\\d{3})(\\d{4})","$1 $2 $3","4[48]|5|9(?:1[59]|[0235-9])",,],["(331700)(\\d)(\\d{2})","$1 $2 $3","331",,],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3","3[1-5]",,]]]',55:'["BR","00(?:1[45]|2[135]|31|4[13])","0","(?:0|90)(?:(1[245]|2[135]|[34]1)(\\d{10,11}))?","$2",,"\\d{8,11}","[1-46-9]\\d{7,10}|5\\d{8,9}",[["(\\d{4})(\\d{4})","$1-$2","[2-9](?:[1-9]|0[1-9])","$FG","NA"],["(\\d{5})(\\d{4})","$1-$2","9(?:[1-9]|0[1-9])","$FG","NA"],["(\\d{3,5})","$1","1[125689]","$FG","NA"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3","(?:[189][1-9]|2[12478]|3[1-578]|7[13-579])9","($FG)",],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3","[1-9][1-9]","($FG)",],["([34]00\\d)(\\d{4})","$1-$2","[34]00",,],["([3589]00)(\\d{2,3})(\\d{4})","$1 $2 $3","[3589]00","$NP$FG",]]]',674:'["NR","00",,,,,"\\d{7}","[458]\\d{6}",[["(\\d{3})(\\d{4})","$1 $2",,,]]]',967:'["YE","00","0",,,"$NP$FG","\\d{6,9}","[1-7]\\d{6,8}",[["([1-7])(\\d{3})(\\d{3,4})","$1 $2 $3","[1-6]|7[24-68]",,],["(7\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","7[0137]",,]]]',49:'["DE","00","0",,,"$NP$FG","\\d{2,15}","[1-35-9]\\d{3,14}|4(?:[0-8]\\d{4,12}|9(?:[0-37]\\d|4(?:[1-35-8]|4\\d?)|5\\d{1,2}|6[1-8]\\d?)\\d{2,8})",[["(1\\d{2})(\\d{7,8})","$1 $2","1[67]",,],["(15\\d{3})(\\d{6})","$1 $2","15[0568]",,],["(1\\d{3})(\\d{7})","$1 $2","15",,],["(\\d{2})(\\d{3,11})","$1 $2","3[02]|40|[68]9",,],["(\\d{3})(\\d{3,11})","$1 $2","2(?:\\d1|0[2389]|1[24]|28|34)|3(?:[3-9][15]|40)|[4-8][1-9]1|9(?:06|[1-9]1)",,],["(\\d{4})(\\d{2,11})","$1 $2","[24-6]|[7-9](?:\\d[1-9]|[1-9]\\d)|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])",,],["(3\\d{4})(\\d{1,10})","$1 $2","3",,],["(800)(\\d{7,12})","$1 $2","800",,],["(177)(99)(\\d{7,8})","$1 $2 $3","177",,],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3","(?:18|90)0|137",,],["(1\\d{2})(\\d{5,11})","$1 $2","181",,],["(18\\d{3})(\\d{6})","$1 $2","185",,],["(18\\d{2})(\\d{7})","$1 $2","18[68]",,],["(18\\d)(\\d{8})","$1 $2","18[2-579]",,],["(700)(\\d{4})(\\d{4})","$1 $2 $3","700",,],["(138)(\\d{4})","$1 $2","138",,]]]',31:'["NL","00","0",,,"$NP$FG","\\d{5,10}","1\\d{4,8}|[2-7]\\d{8}|[89]\\d{6,9}",[["([1-578]\\d)(\\d{3})(\\d{4})","$1 $2 $3","1[035]|2[0346]|3[03568]|4[0356]|5[0358]|7|8[4578]",,],["([1-5]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","1[16-8]|2[259]|3[124]|4[17-9]|5[124679]",,],["(6)(\\d{8})","$1 $2","6[0-57-9]",,],["(66)(\\d{7})","$1 $2","66",,],["(14)(\\d{3,4})","$1 $2","14","$FG",],["([89]0\\d)(\\d{4,7})","$1 $2","80|9",,]]]',970:'["PS","00","0",,,"$NP$FG","\\d{4,10}","[24589]\\d{7,8}|1(?:[78]\\d{8}|[49]\\d{2,3})",[["([2489])(2\\d{2})(\\d{4})","$1 $2 $3","[2489]",,],["(5[69]\\d)(\\d{3})(\\d{3})","$1 $2 $3","5",,],["(1[78]00)(\\d{3})(\\d{3})","$1 $2 $3","1[78]","$FG",]]]',58:'["VE","00","0",,,"$NP$FG","\\d{7,10}","[24589]\\d{9}",[["(\\d{3})(\\d{7})","$1-$2",,,]]]',856:'["LA","00","0",,,"$NP$FG","\\d{6,10}","[2-8]\\d{7,9}",[["(20)(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4","20",,],["([2-8]\\d)(\\d{3})(\\d{3})","$1 $2 $3","2[13]|3[14]|[4-8]",,],["(30)(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4","30",,]]]',354:'["IS","00",,,,,"\\d{7,9}","[4-9]\\d{6}|38\\d{7}",[["(\\d{3})(\\d{4})","$1 $2","[4-9]",,],["(3\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","3",,]]]',242:'["CG","00",,,,,"\\d{9}","[028]\\d{8}",[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3","[02]",,],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3","8",,]]]',423:'["LI","00","0",,,,"\\d{7,9}","6\\d{8}|[23789]\\d{6}",[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3","[23789]",,],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3","6[56]",,],["(69)(7\\d{2})(\\d{4})","$1 $2 $3","697",,]]]',213:'["DZ","00","0",,,"$NP$FG","\\d{8,9}","(?:[1-4]|[5-9]\\d)\\d{7}",[["([1-4]\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","[1-4]",,],["([5-8]\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","[5-8]",,],["(9\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4","9",,]]]',371:'["LV","00",,,,,"\\d{8}","[2689]\\d{7}",[["([2689]\\d)(\\d{3})(\\d{3})","$1 $2 $3",,,]]]',503:'["SV","00",,,,,"\\d{7,8}|\\d{11}","[267]\\d{7}|[89]\\d{6}(?:\\d{4})?",[["(\\d{4})(\\d{4})","$1 $2","[267]",,],["(\\d{3})(\\d{4})","$1 $2","[89]",,],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3","[89]",,]]]',685:'["WS","0",,,,,"\\d{5,7}","[2-8]\\d{4,6}",[["(8\\d{2})(\\d{3,4})","$1 $2","8",,],["(7\\d)(\\d{5})","$1 $2","7",,],["(\\d{5})","$1","[2-6]",,]]]',880:'["BD","00[12]?","0",,,"$NP$FG","\\d{6,10}","[2-79]\\d{5,9}|1\\d{9}|8[0-7]\\d{4,8}",[["(2)(\\d{7})","$1-$2","2",,],["(\\d{2})(\\d{4,6})","$1-$2","[3-79]1",,],["(\\d{4})(\\d{3,6})","$1-$2","1|3(?:0|[2-58]2)|4(?:0|[25]2|3[23]|[4689][25])|5(?:[02-578]2|6[25])|6(?:[0347-9]2|[26][25])|7[02-9]2|8(?:[023][23]|[4-7]2)|9(?:[02][23]|[458]2|6[016])",,],["(\\d{3})(\\d{3,7})","$1-$2","[3-79][2-9]|8",,]]]',265:'["MW","00","0",,,"$NP$FG","\\d{7,9}","(?:1(?:\\d{2})?|[2789]\\d{2})\\d{6}",[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3","1",,],["(2\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","2",,],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","[1789]",,]]]',65:'["SG","0[0-3]\\d",,,,,"\\d{8,11}","[36]\\d{7}|[17-9]\\d{7,10}",[["([3689]\\d{3})(\\d{4})","$1 $2","[369]|8[1-9]",,],["(1[89]00)(\\d{3})(\\d{4})","$1 $2 $3","1[89]",,],["(7000)(\\d{4})(\\d{3})","$1 $2 $3","70",,],["(800)(\\d{3})(\\d{4})","$1 $2 $3","80",,]]]',504:'["HN","00",,,,,"\\d{8}","[237-9]\\d{7}",[["(\\d{4})(\\d{4})","$1-$2",,,]]]',688:'["TV","00",,,,,"\\d{5,6}","[29]\\d{4,5}",]',84:'["VN","00","0",,,"$NP$FG","\\d{7,10}","[17]\\d{6,9}|[2-69]\\d{7,9}|8\\d{6,8}",[["([17]99)(\\d{4})","$1 $2","[17]99",,],["([48])(\\d{4})(\\d{4})","$1 $2 $3","[48]",,],["([235-7]\\d)(\\d{4})(\\d{3})","$1 $2 $3","2[025-79]|3[0136-9]|5[2-9]|6[0-46-8]|7[02-79]",,],["(80)(\\d{5})","$1 $2","80",,],["(69\\d)(\\d{4,5})","$1 $2","69",,],["([235-7]\\d{2})(\\d{4})(\\d{3})","$1 $2 $3","2[1348]|3[25]|5[01]|65|7[18]",,],["(9\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4","9",,],["(1[2689]\\d)(\\d{3})(\\d{4})","$1 $2 $3","1(?:[26]|8[68]|99)",,],["(1[89]00)(\\d{4,6})","$1 $2","1[89]0","$FG",]]]',255:'["TZ","00[056]","0",,,"$NP$FG","\\d{7,9}","\\d{9}",[["([24]\\d)(\\d{3})(\\d{4})","$1 $2 $3","[24]",,],["([67]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","[67]",,],["([89]\\d{2})(\\d{2})(\\d{4})","$1 $2 $3","[89]",,]]]',222:'["MR","00",,,,,"\\d{8}","[2-48]\\d{7}",[["([2-48]\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,,]]]',230:'["MU","0(?:0|[2-7]0|33)",,,,,"\\d{7,8}","[2-9]\\d{6,7}",[["([2-46-9]\\d{2})(\\d{4})","$1 $2","[2-46-9]",,],["(5\\d{3})(\\d{4})","$1 $2","5",,]]]',592:'["GY","001",,,,,"\\d{7}","[2-4679]\\d{6}",[["(\\d{3})(\\d{4})","$1 $2",,,]]]',41:'["CH","00","0",,,"$NP$FG","\\d{9}(?:\\d{3})?","[2-9]\\d{8}|860\\d{9}",[["([2-9]\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4","[2-7]|[89]1",,],["([89]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","8[047]|90",,],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5","860",,]]]',39:['["IT","00",,,,,"\\d{6,11}","[01589]\\d{5,10}|3(?:[12457-9]\\d{8}|[36]\\d{7,9})",[["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3","0[26]|55",,],["(0[26])(\\d{4})(\\d{5})","$1 $2 $3","0[26]",,],["(0[26])(\\d{4,6})","$1 $2","0[26]",,],["(0\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3","0[13-57-9][0159]",,],["(\\d{3})(\\d{3,6})","$1 $2","0[13-57-9][0159]|8(?:03|4[17]|9[245])",,],["(0\\d{3})(\\d{3})(\\d{4})","$1 $2 $3","0[13-57-9][2-46-8]",,],["(0\\d{3})(\\d{2,6})","$1 $2","0[13-57-9][2-46-8]",,],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3","[13]|8(?:00|4[08]|9[59])",,],["(\\d{4})(\\d{4})","$1 $2","894",,],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3","3",,]]]','["VA","00",,,,,"\\d{6,11}","(?:0(?:878\\d{5}|6698\\d{5})|[1589]\\d{5,10}|3(?:[12457-9]\\d{8}|[36]\\d{7,9}))",]'],993:'["TM","810","8",,,"($NP $FG)","\\d{8}","[1-6]\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4","12",,],["(\\d{2})(\\d{6})","$1 $2","6","$NP $FG",],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4","13|[2-5]",,]]]',888:'["001",,,,,,"\\d{11}","\\d{11}",[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",,,]]]',353:'["IE","00","0",,,"($NP$FG)","\\d{5,10}","[124-9]\\d{6,9}",[["(1)(\\d{3,4})(\\d{4})","$1 $2 $3","1",,],["(\\d{2})(\\d{5})","$1 $2","2[24-9]|47|58|6[237-9]|9[35-9]",,],["(\\d{3})(\\d{5})","$1 $2","40[24]|50[45]",,],["(48)(\\d{4})(\\d{4})","$1 $2 $3","48",,],["(818)(\\d{3})(\\d{3})","$1 $2 $3","81",,],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3","[24-69]|7[14]",,],["([78]\\d)(\\d{3,4})(\\d{4})","$1 $2 $3","76|8[35-9]","$NP$FG",],["(700)(\\d{3})(\\d{3})","$1 $2 $3","70","$NP$FG",],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3","1(?:8[059]|5)","$FG",]]]',966:'["SA","00","0",,,"$NP$FG","\\d{7,10}","1\\d{7,8}|(?:[2-467]|92)\\d{7}|5\\d{8}|8\\d{9}",[["([1-467])(\\d{3})(\\d{4})","$1 $2 $3","[1-467]",,],["(1\\d)(\\d{3})(\\d{4})","$1 $2 $3","1[1-467]",,],["(5\\d)(\\d{3})(\\d{4})","$1 $2 $3","5",,],["(92\\d{2})(\\d{5})","$1 $2","92","$FG",],["(800)(\\d{3})(\\d{4})","$1 $2 $3","80","$FG",],["(811)(\\d{3})(\\d{3,4})","$1 $2 $3","81",,]]]',380:'["UA","00","0",,,"$NP$FG","\\d{5,9}","[3-9]\\d{8}",[["([3-9]\\d)(\\d{3})(\\d{4})","$1 $2 $3","[38]9|4(?:[45][0-5]|87)|5(?:0|6[37]|7[37])|6[36-8]|73|9[1-9]",,],["([3-689]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","3[1-8]2|4[13678]2|5(?:[12457]2|6[24])|6(?:[49]2|[12][29]|5[24])|8[0-8]|90",,],["([3-6]\\d{3})(\\d{5})","$1 $2","3(?:5[013-9]|[1-46-8])|4(?:[137][013-9]|6|[45][6-9]|8[4-6])|5(?:[1245][013-9]|6[0135-9]|3|7[4-6])|6(?:[49][013-9]|5[0135-9]|[12][13-8])",,]]]',98:'["IR","00","0",,,"$NP$FG","\\d{4,10}","[1-8]\\d{9}|9(?:[0-4]\\d{8}|9\\d{2,8})",[["(21)(\\d{3,5})","$1 $2","21",,],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3","[1-8]",,],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3","9",,],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3","9",,],["(\\d{3})(\\d{3})","$1 $2","9",,]]]',971:'["AE","00","0",,,"$NP$FG","\\d{5,12}","[2-79]\\d{7,8}|800\\d{2,9}",[["([2-4679])(\\d{3})(\\d{4})","$1 $2 $3","[2-4679][2-8]",,],["(5[0256])(\\d{3})(\\d{4})","$1 $2 $3","5",,],["([479]00)(\\d)(\\d{5})","$1 $2 $3","[479]0","$FG",],["([68]00)(\\d{2,9})","$1 $2","60|8","$FG",]]]',30:'["GR","00",,,,,"\\d{10}","[26-9]\\d{9}",[["([27]\\d)(\\d{4})(\\d{4})","$1 $2 $3","21|7",,],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3","2[2-9]1|[689]",,],["(2\\d{3})(\\d{6})","$1 $2","2[2-9][02-9]",,]]]',228:'["TG","00",,,,,"\\d{8}","[29]\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,,]]]',48:'["PL","00",,,,,"\\d{6,9}","[12]\\d{6,8}|[3-57-9]\\d{8}|6\\d{5,8}",[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4","[14]|2[0-57-9]|3[2-4]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145]",,],["(\\d{2})(\\d{1})(\\d{4})","$1 $2 $3","[12]2",,],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3","26|39|5[0137]|6[0469]|7[02389]|8[08]",,],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3","64",,],["(\\d{3})(\\d{3})","$1 $2","64",,]]]',886:'["TW","0(?:0[25679]|19)","0",,,"$NP$FG","\\d{8,10}","[2-689]\\d{7,8}|7\\d{7,9}",[["([2-8])(\\d{3,4})(\\d{4})","$1 $2 $3","[2-6]|[78][1-9]",,],["([89]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","80|9",,],["(70)(\\d{4})(\\d{4})","$1 $2 $3","70",,]]]',212:['["MA","00","0",,,"$NP$FG","\\d{9}","[5689]\\d{8}",[["([56]\\d{2})(\\d{6})","$1-$2","5(?:2[015-7]|3[0-4])|6",,],["([58]\\d{3})(\\d{5})","$1-$2","5(?:2[2-489]|3[5-9])|892",,],["(5\\d{4})(\\d{4})","$1-$2","5(?:29|38)",,],["(8[09])(\\d{7})","$1-$2","8(?:0|9[013-9])",,]]]','["EH","00","0",,,"$NP$FG","\\d{9}","[5689]\\d{8}",]'],372:'["EE","00",,,,,"\\d{4,10}","1\\d{3,4}|[3-9]\\d{6,7}|800\\d{6,7}",[["([3-79]\\d{2})(\\d{4})","$1 $2","[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]",,],["(70)(\\d{2})(\\d{4})","$1 $2 $3","70",,],["(8000)(\\d{3})(\\d{3})","$1 $2 $3","800",,],["([458]\\d{3})(\\d{3,4})","$1 $2","40|5|8(?:00|[1-5])",,]]]',598:'["UY","0(?:1[3-9]\\d|0)","0",,,,"\\d{7,8}","[2489]\\d{6,7}",[["(\\d{4})(\\d{4})","$1 $2","[24]",,],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","9[1-9]","$NP$FG",],["(\\d{3})(\\d{4})","$1 $2","[89]0","$NP$FG",]]]',502:'["GT","00",,,,,"\\d{8}(?:\\d{3})?","[2-7]\\d{7}|1[89]\\d{9}",[["(\\d{4})(\\d{4})","$1 $2","[2-7]",,],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3","1",,]]]',82:'["KR","00(?:[124-68]|[37]\\d{2})","0","0(8[1-46-8]|85\\d{2})?",,"$NP$FG","\\d{4,10}","[1-7]\\d{3,9}|8\\d{8}",[["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3","1(?:0|1[19]|[69]9|5[458])|[57]0",,],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3","1(?:[169][2-8]|[78]|5[1-4])|[68]0|[3-6][1-9][1-9]",,],["(\\d{3})(\\d)(\\d{4})","$1-$2-$3","131",,],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3","131",,],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3","13[2-9]",,],["(\\d{2})(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3-$4","30",,],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3","2[1-9]",,],["(\\d)(\\d{3,4})","$1-$2","21[0-46-9]",,],["(\\d{2})(\\d{3,4})","$1-$2","[3-6][1-9]1",,],["(\\d{4})(\\d{4})","$1-$2","1(?:5[46-9]|6[04678]|8[0579])","$FG",]]]',253:'["DJ","00",,,,,"\\d{8}","[27]\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,,]]]',91:'["IN","00","0",,,"$NP$FG","\\d{6,13}","1\\d{7,12}|[2-9]\\d{9,10}",[["(\\d{5})(\\d{5})","$1 $2","7(?:[0257]|3[0157-9]|4[0-389]|6[0-35-9]|8[0-79])|8(?:0[015689]|1[0-57-9]|2[2356-9]|3[0-57-9]|[45]|6[02457-9]|7[01-69]|8[0-24-9]|9[02-9])|9",,],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3","11|2[02]|33|4[04]|79|80[2-46]",,],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3","1(?:2[0-249]|3[0-25]|4[145]|[569][14]|7[1257]|8[1346]|[68][1-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|[36][25]|22|4[28]|5[12]|[78]1|9[15])|6(?:12|[2345]1|57|6[13]|7[14]|80)",,],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3","7(?:12|2[14]|3[134]|4[47]|5[15]|[67]1|88)",,],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3","8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)",,],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3","1(?:[23579]|[468][1-9])|[2-8]",,],["(1600)(\\d{2})(\\d{4})","$1 $2 $3","160","$FG",],["(1800)(\\d{4,5})","$1 $2","180","$FG",],["(18[06]0)(\\d{2,4})(\\d{4})","$1 $2 $3","18[06]","$FG",],["(140)(\\d{3})(\\d{4})","$1 $2 $3","140","$FG",],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4","18[06]","$FG",]]]',389:'["MK","00","0",,,"$NP$FG","\\d{8}","[2-578]\\d{7}",[["(2)(\\d{3})(\\d{4})","$1 $2 $3","2",,],["([347]\\d)(\\d{3})(\\d{3})","$1 $2 $3","[347]",,],["([58]\\d{2})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4","[58]",,]]]',1:['["US","011","1",,,,"\\d{7}(?:\\d{3})?","[2-9]\\d{9}",[["(\\d{3})(\\d{4})","$1-$2",,,"NA"],["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",,,"$1-$2-$3"]]]','["AI","011","1",,,,"\\d{7}(?:\\d{3})?","[2589]\\d{9}",]','["AS","011","1",,,,"\\d{7}(?:\\d{3})?","[5689]\\d{9}",]','["BB","011","1",,,,"\\d{7}(?:\\d{3})?","[2589]\\d{9}",]','["BM","011","1",,,,"\\d{7}(?:\\d{3})?","[4589]\\d{9}",]','["BS","011","1",,,,"\\d{7}(?:\\d{3})?","[2589]\\d{9}",]','["CA","011","1",,,,"\\d{7}(?:\\d{3})?","[2-9]\\d{9}|3\\d{6}",]','["DM","011","1",,,,"\\d{7}(?:\\d{3})?","[57-9]\\d{9}",]','["DO","011","1",,,,"\\d{7}(?:\\d{3})?","[589]\\d{9}",]','["GD","011","1",,,,"\\d{7}(?:\\d{3})?","[4589]\\d{9}",]','["GU","011","1",,,,"\\d{7}(?:\\d{3})?","[5689]\\d{9}",]','["JM","011","1",,,,"\\d{7}(?:\\d{3})?","[589]\\d{9}",]','["KN","011","1",,,,"\\d{7}(?:\\d{3})?","[589]\\d{9}",]','["KY","011","1",,,,"\\d{7}(?:\\d{3})?","[3589]\\d{9}",]','["LC","011","1",,,,"\\d{7}(?:\\d{3})?","[5789]\\d{9}",]','["MP","011","1",,,,"\\d{7}(?:\\d{3})?","[5689]\\d{9}",]','["MS","011","1",,,,"\\d{7}(?:\\d{3})?","[5689]\\d{9}",]','["PR","011","1",,,,"\\d{7}(?:\\d{3})?","[5789]\\d{9}",]','["SX","011","1",,,,"\\d{7}(?:\\d{3})?","[5789]\\d{9}",]','["TC","011","1",,,,"\\d{7}(?:\\d{3})?","[5689]\\d{9}",]','["TT","011","1",,,,"\\d{7}(?:\\d{3})?","[589]\\d{9}",]','["AG","011","1",,,,"\\d{7}(?:\\d{3})?","[2589]\\d{9}",]','["VC","011","1",,,,"\\d{7}(?:\\d{3})?","[5789]\\d{9}",]','["VG","011","1",,,,"\\d{7}(?:\\d{3})?","[2589]\\d{9}",]','["VI","011","1",,,,"\\d{7}(?:\\d{3})?","[3589]\\d{9}",]'],60:'["MY","00","0",,,,"\\d{6,10}","[13-9]\\d{7,9}",[["([4-79])(\\d{3})(\\d{4})","$1-$2 $3","[4-79]","$NP$FG",],["(3)(\\d{4})(\\d{4})","$1-$2 $3","3","$NP$FG",],["([18]\\d)(\\d{3})(\\d{3,4})","$1-$2 $3","1[02-46-9][1-9]|8","$NP$FG",],["(1)([36-8]00)(\\d{2})(\\d{4})","$1-$2-$3-$4","1[36-8]0",,],["(11)(\\d{4})(\\d{4})","$1-$2 $3","11","$NP$FG",],["(15[49])(\\d{3})(\\d{4})","$1-$2 $3","15","$NP$FG",]]]',355:'["AL","00","0",,,"$NP$FG","\\d{5,9}","[2-57]\\d{7}|6\\d{8}|8\\d{5,7}|9\\d{5}",[["(4)(\\d{3})(\\d{4})","$1 $2 $3","4[0-6]",,],["(6[6-9])(\\d{3})(\\d{4})","$1 $2 $3","6",,],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","[2358][2-5]|4[7-9]",,],["(\\d{3})(\\d{3,5})","$1 $2","[235][16-9]|8[016-9]|[79]",,]]]',254:'["KE","000","0",,,"$NP$FG","\\d{7,10}","20\\d{6,7}|[4-9]\\d{6,9}",[["(\\d{2})(\\d{5,7})","$1 $2","[24-6]",,],["(\\d{3})(\\d{6})","$1 $2","7",,],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3","[89]",,]]]',223:'["ML","00",,,,,"\\d{8}","[246-9]\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","[246-9]",,],["(\\d{4})","$1","67|74",,"NA"]]]',686:'["KI","00",,"0",,,"\\d{5,8}","[2458]\\d{4}|3\\d{4,7}|7\\d{7}",]',994:'["AZ","00","0",,,"($NP$FG)","\\d{7,9}","[1-9]\\d{8}",[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4","(?:1[28]|2(?:[45]2|[0-36])|365)",,],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4","[4-8]","$NP$FG",],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","9","$NP$FG",]]]',979:'["001",,,,,,"\\d{9}","\\d{9}",[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",,,]]]',66:'["TH","00","0",,,"$NP$FG","\\d{4}|\\d{8,10}","[2-9]\\d{7,8}|1\\d{3}(?:\\d{5,6})?",[["(2)(\\d{3})(\\d{4})","$1 $2 $3","2",,],["([13-9]\\d)(\\d{3})(\\d{3,4})","$1 $2 $3","14|[3-9]",,],["(1[89]00)(\\d{3})(\\d{3})","$1 $2 $3","1","$FG",]]]',233:'["GH","00","0",,,"$NP$FG","\\d{7,9}","[235]\\d{8}|8\\d{7}",[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3","[235]",,],["(\\d{3})(\\d{5})","$1 $2","8",,]]]',593:'["EC","00","0",,,"($NP$FG)","\\d{7,11}","1\\d{9,10}|[2-8]\\d{7}|9\\d{8}",[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3","[247]|[356][2-8]",,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3","9","$NP$FG",],["(1800)(\\d{3})(\\d{3,4})","$1 $2 $3","1","$FG",]]]',509:'["HT","00",,,,,"\\d{8}","[2-489]\\d{7}",[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",,,]]]',54:'["AR","00","0","0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))?15)?","9$1","$NP$FG","\\d{6,11}","11\\d{8}|[2368]\\d{9}|9\\d{10}",[["([68]\\d{2})(\\d{3})(\\d{4})","$1-$2-$3","[68]",,],["(\\d{2})(\\d{4})","$1-$2","[2-9]","$FG","NA"],["(\\d{3})(\\d{4})","$1-$2","[2-9]","$FG","NA"],["(\\d{4})(\\d{4})","$1-$2","[2-9]","$FG","NA"],["(9)(11)(\\d{4})(\\d{4})","$2 15-$3-$4","911",,"$1 $2 $3-$4"],["(9)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4","9(?:2[234689]|3[3-8])",,"$1 $2 $3-$4"],["(9)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4","9[23]",,"$1 $2 $3-$4"],["(11)(\\d{4})(\\d{4})","$1 $2-$3","1",,],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3","2(?:2[013]|3[067]|49|6[01346]|80|9[147-9])|3(?:36|4[1-358]|5[138]|6[24]|7[069]|8[013578])",,],["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3","[23]",,],["(\\d{3})","$1","1[012]|911","$FG","NA"]]]',57:'["CO","00(?:4(?:[14]4|56)|[579])","0","0([3579]|4(?:44|56))?",,,"\\d{7,11}","(?:[13]\\d{0,3}|[24-8])\\d{7}",[["(\\d)(\\d{7})","$1 $2","1(?:8[2-9]|9[0-3]|[2-7])|[24-8]","($FG)",],["(\\d{3})(\\d{7})","$1 $2","3",,],["(1)(\\d{3})(\\d{7})","$1-$2-$3","1(?:80|9[04])","$NP$FG","$1 $2 $3"]]]',597:'["SR","00",,,,,"\\d{6,7}","[2-8]\\d{5,6}",[["(\\d{3})(\\d{3})","$1-$2","[2-4]|5[2-58]",,],["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3","56",,],["(\\d{3})(\\d{4})","$1-$2","59|[6-8]",,]]]',676:'["TO","00",,,,,"\\d{5,7}","[02-8]\\d{4,6}",[["(\\d{2})(\\d{3})","$1-$2","[1-6]|7[0-4]|8[05]",,],["(\\d{3})(\\d{4})","$1 $2","7[5-9]|8[47-9]",,],["(\\d{4})(\\d{3})","$1 $2","0",,]]]',505:'["NI","00",,,,,"\\d{8}","[12578]\\d{7}",[["(\\d{4})(\\d{4})","$1 $2",,,]]]',850:'["KP","00|99","0",,,"$NP$FG","\\d{6,8}|\\d{10}","1\\d{9}|[28]\\d{7}",[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3","1",,],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3","2",,],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","8",,]]]',7:['["RU","810","8",,,"$NP ($FG)","\\d{10}","[3489]\\d{9}",[["(\\d{3})(\\d{2})(\\d{2})","$1-$2-$3","[1-79]","$FG","NA"],["([3489]\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4","[34689]",,],["(7\\d{2})(\\d{3})(\\d{4})","$1 $2 $3","7",,]]]','["KZ","810","8",,,,"\\d{10}","(?:33\\d|7\\d{2}|80[09])\\d{7}",]'],268:'["SZ","00",,,,,"\\d{8}","[027]\\d{7}",[["(\\d{4})(\\d{4})","$1 $2","[027]",,]]]',501:'["BZ","00",,,,,"\\d{7}(?:\\d{4})?","[2-8]\\d{6}|0\\d{10}",[["(\\d{3})(\\d{4})","$1-$2","[2-8]",,],["(0)(800)(\\d{4})(\\d{3})","$1-$2-$3-$4","0",,]]]',252:'["SO","00","0",,,,"\\d{7,9}","[1-79]\\d{6,8}",[["(\\d)(\\d{6})","$1 $2","2[0-79]|[13-5]",,],["(\\d)(\\d{7})","$1 $2","24|[67]",,],["(\\d{2})(\\d{5,7})","$1 $2","15|28|6[1-35-9]|799",,],["(90\\d)(\\d{3})(\\d{3})","$1 $2 $3","90",,]]]',229:'["BJ","00",,,,,"\\d{4,8}","[2689]\\d{7}|7\\d{3}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,,]]]',680:'["PW","01[12]",,,,,"\\d{7}","[2-8]\\d{6}",[["(\\d{3})(\\d{4})","$1 $2",,,]]]',263:'["ZW","00","0",,,"$NP$FG","\\d{3,10}","2(?:[012457-9]\\d{3,8}|6(?:[14]\\d{7}|\\d{4}))|[13-79]\\d{4,9}|8[06]\\d{8}",[["([49])(\\d{3})(\\d{2,4})","$1 $2 $3","4|9[2-9]",,],["(7\\d)(\\d{3})(\\d{3,4})","$1 $2 $3","7",,],["(86\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","86[24]",,],["([2356]\\d{2})(\\d{3,5})","$1 $2","2(?:0[45]|2[278]|[49]8|[78])|3(?:08|17|3[78]|7[1569]|8[37]|98)|5[15][78]|6(?:[29]8|[38]7|6[78]|75|[89]8)",,],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3","2(?:1[39]|2[0157]|6[14]|7[35]|84)|329",,],["([1-356]\\d)(\\d{3,5})","$1 $2","1[3-9]|2[0569]|3[0-69]|5[05689]|6[0-46-9]",,],["([235]\\d)(\\d{3})(\\d{3,4})","$1 $2 $3","[23]9|54",,],["([25]\\d{3})(\\d{3,5})","$1 $2","(?:25|54)8",,],["(8\\d{3})(\\d{6})","$1 $2","86",,],["(80\\d)(\\d{3})(\\d{4})","$1 $2 $3","80",,]]]',90:'["TR","00","0",,,,"\\d{7,10}","[2-589]\\d{9}|444\\d{4}",[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3","[23]|4(?:[0-35-9]|4[0-35-9])","($NP$FG)",],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3","[589]","$NP$FG",],["(444)(\\d{1})(\\d{3})","$1 $2 $3","444",,]]]',352:'["LU","00",,"(15(?:0[06]|1[12]|35|4[04]|55|6[26]|77|88|99)\\d)",,,"\\d{4,11}","[24-9]\\d{3,10}|3(?:[0-46-9]\\d{2,9}|5[013-9]\\d{1,8})",[["(\\d{2})(\\d{3})","$1 $2","[2-5]|7[1-9]|[89](?:[1-9]|0[2-9])",,],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3","[2-5]|7[1-9]|[89](?:[1-9]|0[2-9])",,],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3","20",,],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4","2(?:[0367]|4[3-8])",,],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4","20",,],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5","2(?:[0367]|4[3-8])",,],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,4})","$1 $2 $3 $4","2(?:[12589]|4[12])|[3-5]|7[1-9]|8(?:[1-9]|0[2-9])|9(?:[1-9]|0[2-46-9])",,],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3","70|80[01]|90[015]",,],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3","6",,]]]',47:['["NO","00",,,,,"\\d{5}(?:\\d{3})?","0\\d{4}|[2-9]\\d{7}",[["([489]\\d{2})(\\d{2})(\\d{3})","$1 $2 $3","[489]",,],["([235-7]\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","[235-7]",,]]]','["SJ","00",,,,,"\\d{5}(?:\\d{3})?","0\\d{4}|[4789]\\d{7}",]'],243:'["CD","00","0",,,"$NP$FG","\\d{7,9}","[2-6]\\d{6}|[18]\\d{6,8}|9\\d{8}",[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3","12",,],["([89]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","8[0-2459]|9",,],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3","88",,],["(\\d{2})(\\d{5})","$1 $2","[1-6]",,]]]',220:'["GM","00",,,,,"\\d{7}","[2-9]\\d{6}",[["(\\d{3})(\\d{4})","$1 $2",,,]]]',687:'["NC","00",,,,,"\\d{6}","[2-57-9]\\d{5}",[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3","[2-46-9]|5[0-4]",,]]]',995:'["GE","00","0",,,,"\\d{6,9}","[34578]\\d{8}",[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","[348]","$NP$FG",],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3","7","$NP$FG",],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","5","$FG",]]]',961:'["LB","00","0",,,,"\\d{7,8}","[13-9]\\d{6,7}",[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3","[13-6]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]|9","$NP$FG",],["([7-9]\\d)(\\d{3})(\\d{3})","$1 $2 $3","[89][01]|7(?:[01]|6[013-9]|8[89]|9[1-3])",,]]]',40:'["RO","00","0",,,"$NP$FG","\\d{6,9}","2\\d{5,8}|[37-9]\\d{8}",[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3","[23]1",,],["(21)(\\d{4})","$1 $2","21",,],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3","[23][3-7]|[7-9]",,],["(2\\d{2})(\\d{3})","$1 $2","2[3-6]",,]]]',232:'["SL","00","0",,,"($NP$FG)","\\d{6,8}","[2-9]\\d{7}",[["(\\d{2})(\\d{6})","$1 $2",,,]]]',594:'["GF","00","0",,,"$NP$FG","\\d{9}","[56]\\d{8}",[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,,]]]',976:'["MN","001","0",,,"$NP$FG","\\d{6,10}","[12]\\d{7,9}|[57-9]\\d{7}",[["([12]\\d)(\\d{2})(\\d{4})","$1 $2 $3","[12]1",,],["([12]2\\d)(\\d{5,6})","$1 $2","[12]2[1-3]",,],["([12]\\d{3})(\\d{5})","$1 $2","[12](?:27|[3-5])",,],["(\\d{4})(\\d{4})","$1 $2","[57-9]","$FG",],["([12]\\d{4})(\\d{4,5})","$1 $2","[12](?:27|[3-5])",,]]]',20:'["EG","00","0",,,"$NP$FG","\\d{5,10}","1\\d{4,9}|[2456]\\d{8}|3\\d{7}|[89]\\d{8,9}",[["(\\d)(\\d{7,8})","$1 $2","[23]",,],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3","1[012]|[89]00",,],["(\\d{2})(\\d{6,7})","$1 $2","1[35]|[4-6]|[89][2-9]",,]]]',689:'["PF","00",,,,,"\\d{6}(?:\\d{2})?","4\\d{5,7}|8\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","4[09]|8[79]",,],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3","44",,]]]',56:'["CL","(?:0|1(?:1[0-69]|2[0-57]|5[13-58]|69|7[0167]|8[018]))0","0","0|(1(?:1[0-69]|2[0-57]|5[13-58]|69|7[0167]|8[018]))",,"$NP$FG","\\d{7,11}","(?:[2-9]|600|123)\\d{7,8}",[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3","2[23]","($FG)",],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3","[357]|4[1-35]|6[13-57]","($FG)",],["(9)(\\d{4})(\\d{4})","$1 $2 $3","9",,],["(44)(\\d{3})(\\d{4})","$1 $2 $3","44",,],["([68]00)(\\d{3})(\\d{3,4})","$1 $2 $3","60|8","$FG",],["(600)(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4","60","$FG",],["(1230)(\\d{3})(\\d{4})","$1 $2 $3","1","$FG",],["(\\d{5})(\\d{4})","$1 $2","219","($FG)",],["(\\d{4,5})","$1","[1-9]","$FG","NA"]]]',596:'["MQ","00","0",,,"$NP$FG","\\d{9}","[56]\\d{8}",[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,,]]]',508:'["PM","00","0",,,"$NP$FG","\\d{6}","[45]\\d{5}",[["([45]\\d)(\\d{2})(\\d{2})","$1 $2 $3",,,]]]',269:'["KM","00",,,,,"\\d{7}","[379]\\d{6}",[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",,,]]]',358:['["FI","00|99[049]","0",,,"$NP$FG","\\d{5,12}","1\\d{4,11}|[2-9]\\d{4,10}",[["(\\d{3})(\\d{3,7})","$1 $2","(?:[1-3]00|[6-8]0)",,],["(\\d{2})(\\d{4,10})","$1 $2","[14]|2[09]|50|7[135]",,],["(\\d)(\\d{4,11})","$1 $2","[25689][1-8]|3",,]]]','["AX","00|99[049]","0",,,"$NP$FG","\\d{5,12}","[135]\\d{5,9}|[27]\\d{4,9}|4\\d{5,10}|6\\d{7,8}|8\\d{6,9}",]'],
251:'["ET","00","0",,,"$NP$FG","\\d{7,9}","[1-59]\\d{8}",[["([1-59]\\d)(\\d{3})(\\d{4})","$1 $2 $3",,,]]]',681:'["WF","00",,,,,"\\d{6}","[5-7]\\d{5}",[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",,,]]]',853:'["MO","00",,,,,"\\d{8}","[268]\\d{7}",[["([268]\\d{3})(\\d{4})","$1 $2",,,]]]',44:['["GB","00","0",,,"$NP$FG","\\d{4,10}","\\d{7,10}",[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3","2|5[56]|7(?:0|6[013-9])",,],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3","1(?:1|\\d1)|3|9[018]",,],["(\\d{5})(\\d{4,5})","$1 $2","1(?:38|5[23]|69|76|94)",,],["(1\\d{3})(\\d{5,6})","$1 $2","1",,],["(7\\d{3})(\\d{6})","$1 $2","7(?:[1-5789]|62)",,],["(800)(\\d{4})","$1 $2","800",,],["(845)(46)(4\\d)","$1 $2 $3","845",,],["(8\\d{2})(\\d{3})(\\d{4})","$1 $2 $3","8(?:4[2-5]|7[0-3])",,],["(80\\d)(\\d{3})(\\d{4})","$1 $2 $3","80",,],["([58]00)(\\d{6})","$1 $2","[58]00",,]]]','["GG","00","0",,,"$NP$FG","\\d{6,10}","[135789]\\d{6,9}",]','["IM","00","0",,,"$NP$FG","\\d{6,10}","[135789]\\d{6,9}",]','["JE","00","0",,,"$NP$FG","\\d{6,10}","[135789]\\d{6,9}",]'],244:'["AO","00",,,,,"\\d{9}","[29]\\d{8}",[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",,,]]]',211:'["SS","00","0",,,,"\\d{9}","[19]\\d{8}",[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",,"$NP$FG",]]]',373:'["MD","00","0",,,"$NP$FG","\\d{8}","[235-9]\\d{7}",[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3","22|3",,],["([25-7]\\d{2})(\\d{2})(\\d{3})","$1 $2 $3","2[13-79]|[5-7]",,],["([89]\\d{2})(\\d{5})","$1 $2","[89]",,]]]',996:'["KG","00","0",,,"$NP$FG","\\d{5,10}","[235-8]\\d{8,9}",[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3","[25-7]|31[25]",,],["(\\d{4})(\\d{5})","$1 $2","3(?:1[36]|[2-9])",,],["(\\d{3})(\\d{3})(\\d)(\\d{3})","$1 $2 $3 $4","8",,]]]',93:'["AF","00","0",,,"$NP$FG","\\d{7,9}","[2-7]\\d{8}",[["([2-7]\\d)(\\d{3})(\\d{4})","$1 $2 $3","[2-7]",,]]]',260:'["ZM","00","0",,,"$NP$FG","\\d{9}","[289]\\d{8}",[["([29]\\d)(\\d{7})","$1 $2","[29]",,],["(800)(\\d{3})(\\d{3})","$1 $2 $3","8",,]]]',378:'["SM","00",,"(?:0549)?([89]\\d{5})","0549$1",,"\\d{6,10}","[05-7]\\d{7,9}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","[5-7]",,],["(0549)(\\d{6})","$1 $2","0",,"($1) $2"],["(\\d{6})","0549 $1","[89]",,"(0549) $1"]]]',235:'["TD","00|16",,,,,"\\d{8}","[2679]\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",,,]]]',960:'["MV","0(?:0|19)",,,,,"\\d{7,10}","[3467]\\d{6}|9(?:00\\d{7}|\\d{6})",[["(\\d{3})(\\d{4})","$1-$2","[3467]|9(?:[1-9]|0[1-9])",,],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3","900",,]]]',221:'["SN","00",,,,,"\\d{9}","[3789]\\d{8}",[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4","[379]",,],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4","8",,]]]',595:'["PY","00","0",,,,"\\d{5,9}","5[0-5]\\d{4,7}|[2-46-9]\\d{5,8}",[["(\\d{2})(\\d{5,7})","$1 $2","(?:[26]1|3[289]|4[124678]|7[123]|8[1236])","($FG)",],["(\\d{3})(\\d{3,6})","$1 $2","[2-9]0","$NP$FG",],["(\\d{3})(\\d{6})","$1 $2","9[1-9]","$NP$FG",],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3","8700",,],["(\\d{3})(\\d{4,6})","$1 $2","[2-8][1-9]","($FG)",]]]',977:'["NP","00","0",,,"$NP$FG","\\d{6,10}","[1-8]\\d{7}|9(?:[1-69]\\d{6,8}|7[2-6]\\d{5,7}|8\\d{8})",[["(1)(\\d{7})","$1-$2","1[2-6]",,],["(\\d{2})(\\d{6})","$1-$2","1[01]|[2-8]|9(?:[1-69]|7[15-9])",,],["(9\\d{2})(\\d{7})","$1-$2","9(?:6[013]|7[245]|8)",,]]]',36:'["HU","00","06",,,"($FG)","\\d{6,9}","[1-9]\\d{7,8}",[["(1)(\\d{3})(\\d{4})","$1 $2 $3","1",,],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3","[2-9]",,]]]'});(function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["amazon_assets/attached_file"]=Handlebars.template({1:function(e,t,i,n){var a;return"    <div class='attachments-fields-item-size'>"+this.escapeExpression((a=null!=(a=t.fullSize||(null!=e?e.fullSize:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"fullSize",hash:{},data:n}):a))+"</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a,s;return"<div class='attachments-fields-item js-file-item'>\n  <div class='attachments-fields-icon "+this.escapeExpression((s=null!=(s=t.ext||(null!=e?e.ext:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"ext",hash:{},data:n}):s))+"'></div>\n  <div class='attachments-fields-item-content'>\n    <div class='attachments-fields-item-title'>"+this.escapeExpression((s=null!=(s=t.name||(null!=e?e.name:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"name",hash:{},data:n}):s))+"</div>\n"+(null!=(a=t["if"].call(e,null!=e?e.fullSize:e,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"  </div>\n  <div class='attachments-fields-icon delete js-detach-file' data-file-field-name='"+this.escapeExpression((s=null!=(s=t.fileFieldName||(null!=e?e.fileFieldName:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"fileFieldName",hash:{},data:n}):s))+"' title='\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u0430\u0439\u043b'></div>\n  <input disabled name='"+this.escapeExpression((s=null!=(s=t.destroyFieldName||(null!=e?e.destroyFieldName:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"destroyFieldName",hash:{},data:n}):s))+"' type='hidden' value='1'>\n  <input disabled name='"+this.escapeExpression((s=null!=(s=t.idFieldName||(null!=e?e.idFieldName:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"idFieldName",hash:{},data:n}):s))+"' type='hidden' value='"+this.escapeExpression((s=null!=(s=t.id||(null!=e?e.id:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"id",hash:{},data:n}):s))+"'>\n</div>"},useData:!0}),this.HandlebarsTemplates["amazon_assets/attached_file"]}).call(this),app.modules.attachmentsFields=function(e){function t(e){m.find(".js-error-message-format").toggleClass("dn",!e||g).end().find(".js-error-message-size").toggleClass("dn",!e||!e.size||v)}function i(e){return Math.round(2*(e<FileAPI.KB?e:e/(e>FileAPI.MB?FileAPI.MB:FileAPI.KB)))/2+m.data("units-of-measure")[e<FileAPI.KB?"byte":e>FileAPI.MB?"MB":"KB"]}function n(e){m.find(".js-attached-files").append(HandlebarsTemplates["amazon_assets/attached_file"](e))}function a(e,t){return m.data("name-template").replace("%index%",t).replace("%type%",e)}function s(e){$.each(e,function(e,t){n({name:t.origin_file_name,ext:o(t.origin_file_name).toLowerCase(),fullSize:i(t.local_file_size),id:t.id,type:t.local_content_type,idFieldName:a("id",e),destroyFieldName:a("_destroy",e),fileFieldName:a("local",e),index:e})})}function o(e){return e.split(".").pop()}function r(e){var t=m.data("permitted-types");return g=!t||new RegExp(t.join("|").toLowerCase()).test(e.type.toLowerCase()),v=e.size<m.data("max-size")*FileAPI.MB,g&&(!e.size||v)}function l(){m.find(".js-attach-file").toggleClass("disabled",m.find(".js-file-item:visible").length===m.data("max-count"))}function c(e,t){e.after(e.clone(!0).attr({name:a("local",t)}).val("")).hide()}function u(e){return e.index=m.find(".js-file-item").length||0,e.ext=o(e.name).toLowerCase(),e.fullSize=e.size&&i(e.size),e.fileFieldName=a("local",e.index),e}function d(e){e.closest(".js-file-item").hide().find('[type="hidden"]').prop({disabled:!1}),m.find('[name="'+e.data("file-field-name")+'"]').prop({disabled:!0})}function h(e){return m.is("[data-required]")?m.find(".js-file-item:visible").length?e.resolve():e.reject():e.resolve(),e}function p(e){m.find(".js-error-message-required-field").toggleClass("dn",!e)}function f(){FileAPI.event.on(m.find(".js-attach-file-button")[0],"change",function(e){var i=FileAPI.getFiles(e),a=$(e.target);t(),FileAPI.filterFiles(i,r,function(e,i){if(e.length){var s=u(e[0]);n(s),c(a,++s.index),$doc.trigger("attachFile:attachAndDetachFile",[a]),p()}else t(i.length?i[0]:{}),a.val(""),$doc.trigger("error:attachAndDetachFile");l()})}),m.on("click",".js-detach-file",function(){var e=$(this);d(e),l(),t(),$doc.trigger("detachFile:attachAndDetachFile",[e])}).on("validateComponent:attachmentsFields",function(e,t){h(t).done(function(){p(!1)}).fail(function(){p(!0)})}).on("click",".js-attach-file-button",function(){$doc.trigger("browseFiles:attachAndDetachFile",[$(this)])})}var m,g,v;return e.load=function(){m=$(".js-attachments-fields");var e=m.data("attached-files");e&&s(e),f()},e}(app.modules.attachmentsFields||{}),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["demands/form_popup"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a,s;return"<div class='header'>\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044f\u043c</div>\n"+(null!=(s=null!=(s=t.content||(null!=e?e.content:e))?s:t.helperMissing,a="function"==typeof s?s.call(e,{name:"content",hash:{},data:n}):s)?a:"")},useData:!0}),this.HandlebarsTemplates["demands/form_popup"]}.call(this),app.modules.demandsProject=function(e){function t(e){var t=e?HandlebarsTemplates["demands/form_popup"]({content:e}):"";$(".js-demands-popup").html(t).dialog({closeOnEscape:!0,resizable:!1,modal:!0,width:590,dialogClass:"dialog-popup demands-popup portal-popup"+(e?"":" loading")})}function i(){return!app.config.isUserSigned||!(app.config.currentUser.email||app.config.currentUser.phone)}function n(){g.find(".js-demands-date").datepicker({dateFormat:"dd.mm.yy",minDate:new Date,maxDate:"+5y",onSelect:function(e){g.find(".js-demands-date-picker").text(e).end().find(".js-date-correctness-error-message").hide()}})}function a(){var e=$.Deferred(),t=g.find(".js-tender-name").val().length,i=t&&t>2;return!i&&r({name:"name",invalid:!0}),i?e.resolve():e.reject()}function s(){var e=$.Deferred(),t=(new Date).setHours(0,0,0,0),i=new Date(g.find(".js-demands-date").datepicker("getDate")).setHours(0,0,0,0),n=t<=i;return!n&&r({name:"date",invalid:!0}),n?e.resolve():e.reject()}function o(){return $.when(a(),app.config.isMobile||s())}function r(e){e.name&&e.invalid&&g.find(".js-"+e.name+"-correctness-error-message").toggleClass("dn",!e.invalid)}function l(e){$(e).find(".js-demands-submit").data("originalValue")&&formSubmitter.enableButtons(e)}function c(e){var t,n=$(e);b||(t=i(),b=!0,n.find(".js-demands-error").addClass("dn"),o().done(function(){v=!0,!t&&n.submit()}).fail(function(){v=!1,l(e)}).always(function(){b=t}),t&&app.modules.authComponent.processUserData.apply(n),b=!1)}function u(){v?$(".js-demands-form").submit():$(".js-df-auth-component").remove()}function d(){var e=$(this).addClass("dn"),t=e.data("type");$(".js-tender-info[data-type="+t+"]").removeClass("dn"),$(".js-tender-info-all").addClass("dn"),$(".js-tender-info:hidden").length||$(".js-tender-info-toggler").addClass("dn")}function h(){var e=$(".js-input-phone-auth").val(),t=$(".js-demands-phone");PhoneNumber.Parse(t.val(),"RU")||(t.val(null),e&&e.length&&PhoneNumber.Parse(e,"RU")&&t.val(e))}function p(){app.config.authComponent.wrappers["static"].demands={withoutSpinner:!0,simpleRegistration:!0,cache:!1,orientation:app.config.isMobile?"vertical":"horizontal",containerName:"demands",crossDomainAuth:app.config.crossDomainAuth,fields:{set:["email","name","phone"],required:["email"],hiddenByDefault:["password"]}},app.modules.staticAuthComponent.rerender()}function f(){$doc.on("submit",".js-demands-form",function(e){h(),v&&!i()?$doc.trigger(g.data("new")?"tenderWasCreated:tendersForm":"tenderWasEdited:tendersForm"):(c(this),e.preventDefault())}).on("click",".js-demands-form .js-demands-date-picker",function(e){var t=g.find(".js-demands-date");t.datepicker(t.datepicker("widget").is(":visible")?"hide":"show"),e.preventDefault()}).on("click",".js-demands-open",function(){t(),$.get($(this).data("url"),function(e){t(e),m(),app.modules.attachmentsFields&&app.modules.attachmentsFields.load()})}).on("click",".js-tender-add-info",d).on("init:tendersForm",m)}function m(){g=$(".js-demands-form"),g.length&&(p(),n(),$(".js-toggle").toggler(),$(".js-check-length").checkLength(),app.modules.selectCheck.load())}var g,v=!1,b=!1;return e.load=function(){m(),f()},e.sendDemand=u,e.unlockForm=l,e}(app.modules.demandsProject||{}),app.modules.timeoutMenu=function(e){function t(e){e.menuAim({delegatedRow:function(e){a(e)}})}function i(e){if(e.find(".js-col").length)return!1;var t,i=500,n="col js-col",a=e.find("li"),s=Math.min(Math.ceil(e.outerHeight()/i),4),o=Math.ceil(e.find("li").length/s),r=0;e.empty();for(var l=0;l<s;l++){t=$("<ul>").addClass(n);for(var c=r;c<r+o;c++)a[c]&&t.append(a[c]);r=c,e.append(t)}e.children().last().addClass("last")}function n(e){var t=e.closest(".js-vertical-menu"),n=e.find(".js-vertical-menu-level-3"),a=t.height(),s=n.height(),o=n.outerHeight(!0),r=t.offset(),l=0;if(e.hasClass("active"))return void e.removeClass("active");e.find(".js-vertical-menu-level-3").length>0&&(e.addClass("active"),i(e.find(".lm-lvl-3"))),n.length>0&&(l=e.offset().top-s/2,l<r.top?l=r.top:r.top+a-e.offset().top<n.height()&&(l=r.top+a-s),l+o-$win.scrollTop()>$win.height()&&(l-=l+o-$win.scrollTop()-$win.height()),l=Math.max($doc.scrollTop()+$(".toolbar-fixed").outerHeight(!0),l,0)-$(".js-wrapper").offset().top,n.css({top:l,left:t.width()}))}function a(e){var t=$(e),i=t.closest(".js-timeout-menu"),a=$(".js-timeout-menu-wrap"),s=t.data("activated-trigger");t.closest(".js-vertical-menu").length>0?n(t):t.toggleClass("active inactive"),t.hasClass("active")&&s&&$doc.trigger(s,[t]),i.data("outside")&&a.toggleClass("active")}function s(){var e=$(".js-timeout-menu");e.length&&t(e)}function o(){$doc.on("init:timeoutMenu",function(e,i){t(i)})}return e.load=function(){s(),o()},e}(app.modules.timeoutMenu||{}),app.modules.sendAnalyticsEvents=function(e){function t(){$(".js-apress-analytics-view").each(function(){a($(this).data())})}function i(e,t){var i=e.analyticsParams.context,n=i.match(/%.*?%/g);n&&n.forEach(function(e){i=i.replace(e,t[0][e.replace(/%/g,"")].value)}),e.analyticsParams.context=i}function n(e){var t=$(e.target),n=t.find(".js-apress-analytics-submit"),s=n.data();s&&(i(s,t),a(s))}function a(e,t){var i=e.analyticsParams;Array.isArray(e.companies)?$.each(e.companies,function(e,n){o($.extend(i,{company_id:n}),t)}):o($.extend(i,{company_id:e.companies}),t)}function s(){$doc.on("click",".js-apress-analytics-action",function(){a($(this).data())}).on("send:apressAnalytics",function(e,t,i){a(t,i)}).on("submit",n)}function o(e,t){$.ajax({url:app.config.crmAnalyticsCollectURL,data:e,declineCredentials:!0,complete:function(){t&&t.resolve()}})}return e.load=function(){app.config.crmAnalyticsCollectURL&&t(),s()},e}(app.modules.sendAnalyticsEvents||{}),app.modules.removeEmptyBarmen=function(e){function t(){$(".js-barmen-list > .js-barmen-item:first-child > .barmen-empty").closest(".js-barmen-list").remove()}function i(){$doc.on("InsertEmpty:Barmen",t)}return e.load=function(){i()},e}(app.modules.removeEmptyBarmen||{}),app.modules.ajaxContent=function(e){function t(){$doc.on("itemActivated:gnoms",function(e,t){var n=t.find(".js-portal-nav-ajax-content");!!n.length&&i(n)})}function i(e,t,i){t=t||e.data("ajax-content-url"),i=i||e.data("ajax-content-event-name"),t&&$.ajax({url:t,success:function(t){e.replaceWith($(t)),$doc.trigger("unlock:seoLinks"),$(".lazy").lazyload(),i&&$doc.trigger(i)}})}function n(){$(".js-ajax-content").each(function(){i($(this))})}return e.load=function(){t(),n()},e.uploadAjaxContent=i,e}(app.modules.ajaxContent||{}),$doc=$(document),$win=$(window),jQuery(function(e){e.datepicker.regional.ru={closeText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",prevText:"&#x3c;\u041f\u0440\u0435\u0434",nextText:"\u0421\u043b\u0435\u0434&#x3e;",currentText:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f",monthNames:["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"],monthNamesShort:["\u042f\u043d\u0432","\u0424\u0435\u0432","\u041c\u0430\u0440","\u0410\u043f\u0440","\u041c\u0430\u0439","\u0418\u044e\u043d","\u0418\u044e\u043b","\u0410\u0432\u0433","\u0421\u0435\u043d","\u041e\u043a\u0442","\u041d\u043e\u044f","\u0414\u0435\u043a"],dayNames:["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],dayNamesShort:["\u0432\u0441\u043a","\u043f\u043d\u0434","\u0432\u0442\u0440","\u0441\u0440\u0434","\u0447\u0442\u0432","\u043f\u0442\u043d","\u0441\u0431\u0442"],dayNamesMin:["\u0412\u0441","\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431"],weekHeader:"\u041d\u0435",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.ru)});var _canLog=!0,getDynaTreePersistData=null,DTNodeStatus_Error=-1,DTNodeStatus_Loading=1,DTNodeStatus_Ok=0;!function($){function getDtNodeFromElement(e){for(var t=5;e&&t--;){if(e.dtnode)return e.dtnode;e=e.parentNode}return null}function noop(){}function _initDragAndDrop(e){var t=e.options.dnd||null;t&&(t.onDragStart||t.onDrop)&&_registerDnd(),t&&t.onDragStart&&e.$tree.draggable({addClasses:!1,appendTo:"body",containment:!1,delay:0,distance:4,revert:!1,connectToDynatree:!0,helper:function(e){var t=getDtNodeFromElement(e.target);return t.tree._onDragEvent("helper",t,null,e,null,null)},_last:null}),t&&t.onDrop&&e.$tree.droppable({addClasses:!1,tolerance:"intersect",greedy:!1,_last:null})}var Class={create:function(){return function(){this.initialize.apply(this,arguments)}}},DynaTreeNode=Class.create();DynaTreeNode.prototype={initialize:function(e,t,i){this.parent=e,this.tree=t,"string"==typeof i&&(i={title:i}),i.key===undefined&&(i.key="_"+t._nodeCount++),this.data=$.extend({},$.ui.dynatree.nodedatadefaults,i),this.li=null,this.span=null,this.ul=null,this.childList=null,this.isLoading=!1,this.hasSubSel=!1,this.bExpanded=!1,this.bSelected=!1},toString:function(){return"DynaTreeNode<"+this.data.key+">: '"+this.data.title+"'"},toDict:function(e,t){var i=$.extend({},this.data);if(i.activate=this.tree.activeNode===this,i.focus=this.tree.focusNode===this,i.expand=this.bExpanded,i.select=this.bSelected,t&&t(i),e&&this.childList){i.children=[];for(var n=0,a=this.childList.length;n<a;n++)i.children.push(this.childList[n].toDict(!0,t))}else delete i.children;return i},fromDict:function(e){var t=e.children;if(t===undefined)return this.data=$.extend(this.data,e),void this.render();e=$.extend({},e),e.children=undefined,this.data=$.extend(this.data,e),this.removeChildren(),this.addChild(t)},_getInnerHtml:function(){var e=this.tree,t=e.options,i=e.cache,n=this.getLevel(),a=this.data,s="";n<t.minExpandLevel?n>1&&(s+=i.tagConnector):!1!==this.hasChildren()?s+=i.tagExpander:s+=i.tagConnector,t.checkbox&&!0!==a.hideCheckbox&&!a.isStatusNode&&(s+=i.tagCheckbox),a.icon?s+="<img src='"+t.imagePath+a.icon+"' alt='' />":!1===a.icon?noop():s+=i.tagNodeIcon;var o="";if(t.onCustomRender&&(o=t.onCustomRender.call(e,this)||""),!o){var r=a.tooltip?" title='"+a.tooltip+"'":"";o=t.noLink||a.noLink?"<span style='display: inline-block;' class='"+t.classNames.title+"'"+r+">"+a.title+"</span>":"<a href='#' class='"+t.classNames.title+"'"+r+">"+a.title+"</a>"}return s+=o},_fixOrder:function(){var e=this.childList;if(e&&this.ul)for(var t=this.ul.firstChild,i=0,n=e.length-1;i<n;i++){var a=e[i],s=t.dtnode;a!==s?(this.tree.logDebug("_fixOrder: mismatch at index "+i+": "+a+" != "+s),this.ul.insertBefore(a.li,s.li)):t=t.nextSibling}},render:function(e,t){var i=this.tree,n=this.parent,a=this.data,s=i.options,o=s.classNames,r=this.isLastSibling();if(n||this.ul){if(n){this.li||(this.li=document.createElement("li"),this.li.dtnode=this,a.key&&s.generateIds&&(this.li.id=s.idPrefix+a.key),this.span=document.createElement("span"),this.span.className=o.title,this.li.appendChild(this.span),n.ul||(n.ul=document.createElement("ul"),n.ul.style.display="none",n.li.appendChild(n.ul)),n.ul.appendChild(this.li)),this.span.innerHTML=this._getInnerHtml();var l=[];l.push(o.node),a.isFolder&&l.push(o.folder),this.bExpanded&&l.push(o.expanded),!1!==this.hasChildren()&&l.push(o.hasChildren),a.isLazy&&null===this.childList&&l.push(o.lazy),r&&l.push(o.lastsib),this.bSelected&&l.push(o.selected),this.hasSubSel&&l.push(o.partsel),i.activeNode===this&&l.push(o.active),a.addClass&&l.push(a.addClass),l.push(o.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(a.isLazy&&null===this.childList?"d":"")+(r?"l":"")),l.push(o.combinedIconPrefix+(this.bExpanded?"e":"c")+(a.isFolder?"f":"")),this.span.className=l.join(" "),this.li.className=r?o.lastsib:"",s.onRender&&s.onRender.call(i,this,this.span)}}else this.li=this.span=null,this.ul=document.createElement("ul"),s.minExpandLevel>1?this.ul.className=o.container+" "+o.noConnector:this.ul.className=o.container;if((this.bExpanded||!0===t)&&this.childList){for(var c=0,u=this.childList.length;c<u;c++)this.childList[c].render(!1,t);this._fixOrder()}if(this.ul){var d="none"===this.ul.style.display,h=!!this.bExpanded;if(e&&s.fx&&d===h){var p=s.fx.duration||200;$(this.ul).animate(s.fx,p)}else this.ul.style.display=this.bExpanded||!n?"":"none"}},getKeyPath:function(e){var t=[];return this.visitParents(function(e){e.parent&&t.unshift(e.data.key)},!e),"/"+t.join(this.tree.options.keyPathSeparator)},getParent:function(){return this.parent},getChildren:function(){return this.childList},hasChildren:function(){return this.data.isLazy?null===this.childList||this.childList===undefined?undefined:0!==this.childList.length&&(1!==this.childList.length||!this.childList[0].isStatusNode()||undefined):!!this.childList},isFirstSibling:function(){var e=this.parent;return!e||e.childList[0]===this},isLastSibling:function(){var e=this.parent;return!e||e.childList[e.childList.length-1]===this},getPrevSibling:function(){if(!this.parent)return null;for(var e=this.parent.childList,t=1,i=e.length;t<i;t++)if(e[t]===this)return e[t-1];return null},getNextSibling:function(){if(!this.parent)return null;for(var e=this.parent.childList,t=0,i=e.length-1;t<i;t++)if(e[t]===this)return e[t+1];return null},isStatusNode:function(){return!0===this.data.isStatusNode},isChildOf:function(e){return this.parent&&this.parent===e},isDescendantOf:function(e){if(!e)return!1;for(var t=this.parent;t;){if(t===e)return!0;t=t.parent}return!1},countChildren:function(){var e=this.childList;if(!e)return 0;for(var t=e.length,i=0,n=t;i<n;i++){t+=e[i].countChildren()}return t},sortChildren:function(e,t){var i=this.childList;if(i){if(e=e||function(e,t){return e.data.title===t.data.title?0:e.data.title>t.data.title?1:-1},i.sort(e),t)for(var n=0,a=i.length;n<a;n++)i[n].childList&&i[n].sortChildren(e,"$norender$");"$norender$"!==t&&this.render()}},_setStatusNode:function(e){var t=this.childList?this.childList[0]:null;if(e)t?(e.isStatusNode=!0,e.key="_statusNode",t.data=e,t.render()):(e.isStatusNode=!0,e.key="_statusNode",t=this.addChild(e));else if(t&&t.isStatusNode()){try{this.ul&&this.ul.removeChild(t.li)}catch(e){}1===this.childList.length?this.childList=[]:this.childList.shift()}},setLazyNodeStatus:function(e,t){var i=t&&t.tooltip?t.tooltip:null,n=t&&t.info?" ("+t.info+")":"";switch(e){case DTNodeStatus_Ok:this._setStatusNode(null),$(this.span).removeClass(this.tree.options.classNames.nodeLoading),this.isLoading=!1,this.tree.options.autoFocus&&(this===this.tree.tnRoot&&this.childList&&this.childList.length>0?this.childList[0].focus():this.focus());break;case DTNodeStatus_Loading:this.isLoading=!0,$(this.span).addClass(this.tree.options.classNames.nodeLoading),this.parent||this._setStatusNode({title:this.tree.options.strings.loading+n,tooltip:i,addClass:this.tree.options.classNames.nodeWait});break;case DTNodeStatus_Error:this.isLoading=!1,this._setStatusNode({title:this.tree.options.strings.loadError+n,tooltip:i,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+e+"'."}},_parentList:function(e,t){for(var i=[],n=t?this:this.parent;n;)(e||n.parent)&&i.unshift(n),n=n.parent;return i},getLevel:function(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e},_getTypeForOuterNodeEvent:function(e){var t=this.tree.options.classNames,i=e.target;if(i.className.indexOf(t.node)<0)return null;for(var n=e.pageX-i.offsetLeft,a=e.pageY-i.offsetTop,s=0,o=i.childNodes.length;s<o;s++){var r=i.childNodes[s],l=r.offsetLeft-i.offsetLeft,c=r.offsetTop-i.offsetTop,u=r.clientWidth,d=r.clientHeight;if(n>=l&&n<=l+u&&a>=c&&a<=c+d){if(r.className==t.title)return"title";if(r.className==t.expander)return"expander";if(r.className==t.checkbox)return"checkbox";if(r.className==t.nodeIcon)return"icon"}}return"prefix"},getEventTargetType:function(e){var t=e&&e.target?e.target.className:"",i=this.tree.options.classNames;return t===i.title?"title":t===i.expander?"expander":t===i.checkbox?"checkbox":t===i.nodeIcon?"icon":t===i.empty||t===i.vline||t===i.connector?"prefix":t.indexOf(i.node)>=0?this._getTypeForOuterNodeEvent(e):null},isVisible:function(){for(var e=this._parentList(!0,!1),t=0,i=e.length;t<i;t++)if(!e[t].bExpanded)return!1;return!0},makeVisible:function(){for(var e=this._parentList(!0,!1),t=0,i=e.length;t<i;t++)e[t]._expand(!0)},focus:function(){this.makeVisible();try{$(this.span).find(">a").focus()}catch(e){}},isFocused:function(){return this.tree.tnFocused===this},_activate:function(e,t){this.tree.logDebug("dtnode._activate(%o, fireEvents=%o) - %o",e,t,this);var i=this.tree.options;if(!(this.data.isStatusNode||t&&i.onQueryActivate&&!1===i.onQueryActivate.call(this.tree,e,this)))if(e){if(this.tree.activeNode){if(this.tree.activeNode===this)return;this.tree.activeNode.deactivate()}i.activeVisible&&this.makeVisible(),this.tree.activeNode=this,i.persist&&$.cookie(i.cookieId+"-active",this.data.key,i.cookie),this.tree.persistence.activeKey=this.data.key,$(this.span).addClass(i.classNames.active),t&&i.onActivate&&i.onActivate.call(this.tree,this)}else if(this.tree.activeNode===this){if(i.onQueryActivate&&!1===i.onQueryActivate.call(this.tree,!1,this))return;$(this.span).removeClass(i.classNames.active),i.persist&&$.cookie(i.cookieId+"-active","",i.cookie),this.tree.persistence.activeKey=null,this.tree.activeNode=null,t&&i.onDeactivate&&i.onDeactivate.call(this.tree,this)}},activate:function(){this._activate(!0,!0)},activateSilently:function(){this._activate(!0,!1)},deactivate:function(){this._activate(!1,!0)},isActive:function(){return this.tree.activeNode===this},_userActivate:function(){var e=!0,t=!1;if(this.data.isFolder)switch(this.tree.options.clickFolderMode){case 2:e=!1,t=!0;break;case 3:e=t=!0}null===this.parent&&(t=!1),t&&(this.toggleExpand(),this.focus()),e&&this.activate()},_setSubSel:function(e){e?(this.hasSubSel=!0,$(this.span).addClass(this.tree.options.classNames.partsel)):(this.hasSubSel=!1,$(this.span).removeClass(this.tree.options.classNames.partsel))},_fixSelectionState:function(){var e,t,i;if(this.bSelected)for(this.visit(function(e){e.parent._setSubSel(!0),e._select(!0,!1,!1)}),e=this.parent;e;){e._setSubSel(!0);var n=!0;for(t=0,i=e.childList.length;t<i;t++){var a=e.childList[t];if(!a.bSelected&&!a.data.isStatusNode){n=!1;break}}n&&e._select(!0,!1,!1),e=e.parent}else for(this._setSubSel(!1),this.visit(function(e){e._setSubSel(!1),e._select(!1,!1,!1)}),e=this.parent;e;){e._select(!1,!1,!1);var s=!1;for(t=0,i=e.childList.length;t<i;t++)if(e.childList[t].bSelected||e.childList[t].hasSubSel){s=!0;break}e._setSubSel(s),e=e.parent}},_select:function(e,t,i){var n=this.tree.options;this.data.isStatusNode||this.bSelected!==e&&(t&&n.onQuerySelect&&!1===n.onQuerySelect.call(this.tree,e,this)||(1==n.selectMode&&e&&this.tree.visit(function(e){if(e.bSelected)return e._select(!1,!1,!1),!1}),this.bSelected=e,e?(n.persist&&this.tree.persistence.addSelect(this.data.key),$(this.span).addClass(n.classNames.selected),i&&3===n.selectMode&&this._fixSelectionState(),t&&n.onSelect&&n.onSelect.call(this.tree,!0,this)):(n.persist&&this.tree.persistence.clearSelect(this.data.key),$(this.span).removeClass(n.classNames.selected),i&&3===n.selectMode&&this._fixSelectionState(),t&&n.onSelect&&n.onSelect.call(this.tree,!1,this))))},select:function(e){return this.data.unselectable?this.bSelected:this._select(!1!==e,!0,!0)},toggleSelect:function(){return this.select(!this.bSelected)},isSelected:function(){return this.bSelected},_loadContent:function(){try{var e=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this),this.setLazyNodeStatus(DTNodeStatus_Loading),!0===e.onLazyRead.call(this.tree,this)&&(this.setLazyNodeStatus(DTNodeStatus_Ok),this.tree.logDebug("_loadContent: succeeded - %o",this))}catch(e){this.tree.logWarning("_loadContent: failed - %o",e),this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+e})}},_expand:function(e,t){if(this.bExpanded===e)return void this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",e,this);this.tree.logDebug("dtnode._expand(%o) - %o",e,this);var i=this.tree.options;if(!e&&this.getLevel()<i.minExpandLevel)return void this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",e,this);if(!i.onQueryExpand||!1!==i.onQueryExpand.call(this.tree,e,this)){this.bExpanded=e,i.persist&&(e?this.tree.persistence.addExpand(this.data.key):this.tree.persistence.clearExpand(this.data.key));var n=!(this.data.isLazy&&null===this.childList||this.isLoading||t);if(this.render(n),this.bExpanded&&this.parent&&i.autoCollapse)for(var a=this._parentList(!1,!0),s=0,o=a.length;s<o;s++)a[s].collapseSiblings();if(i.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()&&this.tree.activeNode.deactivate(),e&&this.data.isLazy&&null===this.childList&&!this.isLoading)return void this._loadContent();i.onExpand&&i.onExpand.call(this.tree,e,this)}},expand:function(e){e=!1!==e,(this.childList||this.data.isLazy||!e)&&(null!==this.parent||e)&&this._expand(e)},scheduleAction:function(e,t){this.tree.timer&&(clearTimeout(this.tree.timer),this.tree.logDebug("clearTimeout(%o)",this.tree.timer));var i=this;switch(e){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){i.tree.logDebug("setTimeout: trigger expand"),i.expand(!0)},t);break;case"activate":this.tree.timer=setTimeout(function(){i.tree.logDebug("setTimeout: trigger activate"),i.activate()},t);break;default:throw"Invalid mode "+e}this.tree.logDebug("setTimeout(%s, %s): %s",e,t,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(null!==this.parent)for(var e=this.parent.childList,t=0,i=e.length;t<i;t++)e[t]!==this&&e[t].bExpanded&&e[t]._expand(!1)},_onClick:function(e){var t=this.getEventTargetType(e);if("expander"===t)this.toggleExpand(),this.focus();else if("checkbox"===t)this.toggleSelect(),this.focus();else{this._userActivate();var i=this.span.getElementsByTagName("a");if(!i[0])return!0;$.browser.msie||i[0].focus()}e.preventDefault()},_onDblClick:function(){},_onKeydown:function(e){var t,i=!0;switch(e.which){case 107:case 187:this.bExpanded||this.toggleExpand();break;case 109:case 189:this.bExpanded&&this.toggleExpand();break;case 32:this._userActivate();break;case 8:this.parent&&this.parent.focus();break;case 37:this.bExpanded?(this.toggleExpand(),this.focus()):this.parent&&this.parent.parent&&this.parent.focus();break;case 39:this.bExpanded||!this.childList&&!this.data.isLazy?this.childList&&this.childList[0].focus():(this.toggleExpand(),this.focus());break;case 38:for(t=this.getPrevSibling();t&&t.bExpanded&&t.childList;)t=t.childList[t.childList.length-1];!t&&this.parent&&this.parent.parent&&(t=this.parent),t&&t.focus();break;case 40:if(this.bExpanded&&this.childList)t=this.childList[0];else for(var n=this._parentList(!1,!0),a=n.length-1;a>=0&&!(t=n[a].getNextSibling());a--);t&&t.focus();break;default:i=!1}i&&e.preventDefault()},_onKeypress:function(){},_onFocus:function(e){var t=this.tree.options;"blur"==e.type||"focusout"==e.type?(t.onBlur&&t.onBlur.call(this.tree,this),this.tree.tnFocused&&$(this.tree.tnFocused.span).removeClass(t.classNames.focused),this.tree.tnFocused=null,t.persist&&$.cookie(t.cookieId+"-focus","",t.cookie)):"focus"!=e.type&&"focusin"!=e.type||(this.tree.tnFocused&&this.tree.tnFocused!==this&&(this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",this.tree.tnFocused),$(this.tree.tnFocused.span).removeClass(t.classNames.focused)),this.tree.tnFocused=this,t.onFocus&&t.onFocus.call(this.tree,this),$(this.tree.tnFocused.span).addClass(t.classNames.focused),t.persist&&$.cookie(t.cookieId+"-focus",this.data.key,t.cookie))},visit:function(e,t){var i=!0
;if(!0===t&&(!1===(i=e(this))||"skip"==i))return i;if(this.childList)for(var n=0,a=this.childList.length;n<a&&!1!==(i=this.childList[n].visit(e,!0));n++);return i},visitParents:function(e,t){if(t&&!1===e(this))return!1;for(var i=this.parent;i;){if(!1===e(i))return!1;i=i.parent}return!0},remove:function(){if(this===this.tree.root)throw"Cannot remove system root";return this.parent.removeChild(this)},removeChild:function(e){var t=this.childList;if(1==t.length){if(e!==t[0])throw"removeChild: invalid child";return this.removeChildren()}e===this.tree.activeNode&&e.deactivate(),this.tree.options.persist&&(e.bSelected&&this.tree.persistence.clearSelect(e.data.key),e.bExpanded&&this.tree.persistence.clearExpand(e.data.key)),e.removeChildren(!0),this.ul.removeChild(e.li);for(var i=0,n=t.length;i<n;i++)if(t[i]===e){this.childList.splice(i,1);break}},removeChildren:function(e,t){this.tree.logDebug("%s.removeChildren(%o)",this,e);var i=this.tree,n=this.childList;if(n){for(var a=0,s=n.length;a<s;a++){var o=n[a];o!==i.activeNode||t||o.deactivate(),this.tree.options.persist&&!t&&(o.bSelected&&this.tree.persistence.clearSelect(o.data.key),o.bExpanded&&this.tree.persistence.clearExpand(o.data.key)),o.removeChildren(!0,t),this.ul&&this.ul.removeChild(o.li)}this.childList=null}e||(this.isLoading=!1,this.render())},setTitle:function(e){this.fromDict({title:e})},reload:function(){throw"Use reloadChildren() instead"},reloadChildren:function(e){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.reloadChildren() requires lazy nodes.";if(e){var t=this,i="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;this.tree.$tree.bind(i,function(n,a,s){if(t.tree.$tree.unbind(i),t.tree.logInfo("loaded %o, %o, %o",n,a,s),a!==t)throw"got invalid load event";e.call(t.tree,a,s)})}this.removeChildren(),this._loadContent()},_loadKeyPath:function(e,t){var i=this.tree;if(i.logDebug("%s._loadKeyPath(%s)",this,e),""===e)throw"Key path must not be empty";var n=e.split(i.options.keyPathSeparator);if(""===n[0])throw"Key path must be relative (don't start with '/')";for(var a=n.shift(),s=0,o=this.childList.length;s<o;s++){var r=this.childList[s];if(r.data.key===a){if(0===n.length)t.call(i,r,"ok");else if(!r.data.isLazy||null!==r.childList&&r.childList!==undefined)t.call(i,r,"loaded"),r._loadKeyPath(n.join(i.options.keyPathSeparator),t);else{i.logDebug("%s._loadKeyPath(%s) -> reloading %s...",this,e,r);var l=this;r.reloadChildren(function(a,s){s?(i.logDebug("%s._loadKeyPath(%s) -> reloaded %s.",a,e,a),t.call(i,r,"loaded"),a._loadKeyPath(n.join(i.options.keyPathSeparator),t)):(i.logWarning("%s._loadKeyPath(%s) -> reloadChildren() failed.",l,e),t.call(i,r,"error"))})}return}}i.logWarning("Node not found: "+a)},resetLazy:function(){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.resetLazy() requires lazy nodes.";this.expand(!1),this.removeChildren()},_addChildNode:function(e,t){var i=this.tree,n=i.options,a=i.persistence;if(e.parent=this,null===this.childList?this.childList=[]:t||this.childList.length>0&&$(this.childList[this.childList.length-1].span).removeClass(n.classNames.lastsib),t){var s=$.inArray(t,this.childList);if(s<0)throw"<beforeNode> must be a child of <this>";this.childList.splice(s,0,e)}else this.childList.push(e);var o=i.isInitializing();if(n.persist&&a.cookiesFound&&o?(a.activeKey==e.data.key&&(i.activeNode=e),a.focusedKey==e.data.key&&(i.focusNode=e),e.bExpanded=$.inArray(e.data.key,a.expandedKeyList)>=0,e.bSelected=$.inArray(e.data.key,a.selectedKeyList)>=0):(e.data.activate&&(i.activeNode=e,n.persist&&(a.activeKey=e.data.key)),e.data.focus&&(i.focusNode=e,n.persist&&(a.focusedKey=e.data.key)),e.bExpanded=!0===e.data.expand,e.bExpanded&&n.persist&&a.addExpand(e.data.key),e.bSelected=!0===e.data.select,e.bSelected&&n.persist&&a.addSelect(e.data.key)),n.minExpandLevel>=e.getLevel()&&(this.bExpanded=!0),e.bSelected&&3==n.selectMode)for(var r=this;r;)r.hasSubSel||r._setSubSel(!0),r=r.parent;return i.bEnableUpdate&&this.render(),e},addChild:function(e,t){if("string"==typeof e)throw"Invalid data type for "+e;if(e&&0!==e.length){if(e instanceof DynaTreeNode)return this._addChildNode(e,t);e.length||(e=[e]);for(var i=this.tree.enableUpdate(!1),n=null,a=0,s=e.length;a<s;a++){var o=e[a],r=this._addChildNode(new DynaTreeNode(this,this.tree,o),t);n||(n=r),o.children&&r.addChild(o.children,null)}return this.tree.enableUpdate(i),n}},append:function(e){return this.tree.logWarning("node.append() is deprecated (use node.addChild() instead)."),this.addChild(e,null)},appendAjax:function(e){var t=this;if(this.removeChildren(!1,!0),this.setLazyNodeStatus(DTNodeStatus_Loading),e.debugLazyDelay){var i=e.debugLazyDelay;return e.debugLazyDelay=0,this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+i),void setTimeout(function(){t.appendAjax(e)},i)}var n=e.success,a=e.error,s="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key,o=$.extend({},this.tree.options.ajaxDefaults,e,{success:function(e){var i=t.tree.phase;t.tree.phase="init",o.postProcess&&(e=o.postProcess.call(this,e,this.dataType)),$.isArray(e)&&0===e.length||t.addChild(e,null),t.tree.phase="postInit",n&&n.call(o,t),t.tree.logInfo("trigger "+s),t.tree.$tree.trigger(s,[t,!0]),t.tree.phase=i,t.setLazyNodeStatus(DTNodeStatus_Ok),$.isArray(e)&&0===e.length&&(t.childList=[],t.render())},error:function(e,i,n){t.tree.logWarning("appendAjax failed:",i,":\n",e,"\n",n),a&&a.call(o,t,e,i,n),t.tree.$tree.trigger(s,[t,!1]),t.setLazyNodeStatus(DTNodeStatus_Error,{info:i,tooltip:""+n})}});$.ajax(o)},move:function(e,t){var i;if(this!==e){if(!this.parent)throw"Cannot move system root";t!==undefined&&"over"!=t||(t="child");var n=this.parent,a="child"===t?e:e.parent;if(a.isDescendantOf(this))throw"Cannot move a node to it's own descendant";if(1==this.parent.childList.length)this.parent.childList=null,this.parent.bExpanded=!1;else{if((i=$.inArray(this,this.parent.childList))<0)throw"Internal error";this.parent.childList.splice(i,1)}if(this.parent.ul.removeChild(this.li),this.parent=a,a.hasChildren())switch(t){case"child":a.childList.push(this);break;case"before":if((i=$.inArray(e,a.childList))<0)throw"Internal error";a.childList.splice(i,0,this);break;case"after":if((i=$.inArray(e,a.childList))<0)throw"Internal error";a.childList.splice(i+1,0,this);break;default:throw"Invalid mode "+t}else a.childList=[this],a.ul||(a.ul=document.createElement("ul"),a.ul.style.display="none",a.li.appendChild(a.ul));if(a.ul.appendChild(this.li),this.tree!==e.tree)throw this.visit(function(t){t.tree=e.tree},null,!0),"Not yet implemented.";n.isDescendantOf(a)||n.render(),a.isDescendantOf(n)||a.render()}},lastentry:undefined};var DynaTreeStatus=Class.create();DynaTreeStatus._getTreePersistData=function(e,t){var i=new DynaTreeStatus(e,t);return i.read(),i.toDict()},getDynaTreePersistData=DynaTreeStatus._getTreePersistData,DynaTreeStatus.prototype={initialize:function(e,t){e===undefined&&(e=$.ui.dynatree.prototype.options.cookieId),t=$.extend({},$.ui.dynatree.prototype.options.cookie,t),this.cookieId=e,this.cookieOpts=t,this.cookiesFound=undefined,this.activeKey=null,this.focusedKey=null,this.expandedKeyList=null,this.selectedKeyList=null},_log:function(){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)},read:function(){this._log("DynaTreeStatus: read"),this.cookiesFound=!1;var e=$.cookie(this.cookieId+"-active");this.activeKey=null===e?"":e,null!==e&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-focus"),this.focusedKey=null===e?"":e,null!==e&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-expand"),this.expandedKeyList=null===e?[]:e.split(","),null!==e&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-select"),this.selectedKeyList=null===e?[]:e.split(","),null!==e&&(this.cookiesFound=!0)},write:function(){this._log("DynaTreeStatus: write"),$.cookie(this.cookieId+"-active",null===this.activeKey?"":this.activeKey,this.cookieOpts),$.cookie(this.cookieId+"-focus",null===this.focusedKey?"":this.focusedKey,this.cookieOpts),$.cookie(this.cookieId+"-expand",null===this.expandedKeyList?"":this.expandedKeyList.join(","),this.cookieOpts),$.cookie(this.cookieId+"-select",null===this.selectedKeyList?"":this.selectedKeyList.join(","),this.cookieOpts)},addExpand:function(e){this._log("addExpand(%o)",e),$.inArray(e,this.expandedKeyList)<0&&(this.expandedKeyList.push(e),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},clearExpand:function(e){this._log("clearExpand(%o)",e);var t=$.inArray(e,this.expandedKeyList);t>=0&&(this.expandedKeyList.splice(t,1),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},addSelect:function(e){this._log("addSelect(%o)",e),$.inArray(e,this.selectedKeyList)<0&&(this.selectedKeyList.push(e),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},clearSelect:function(e){this._log("clearSelect(%o)",e);var t=$.inArray(e,this.selectedKeyList);t>=0&&(this.selectedKeyList.splice(t,1),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},isReloading:function(){return!0===this.cookiesFound},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:undefined};var DynaTree=Class.create();DynaTree.version="$Version: 1.1.1$",DynaTree.prototype={initialize:function(e){this.phase="init",this.$widget=e,this.options=e.options,this.$tree=e.element,this.timer=null,this.divTree=this.$tree.get(0),_initDragAndDrop(this)},_load:function(e){var t=(this.$widget,this.options);this.bEnableUpdate=!0,this._nodeCount=1,this.activeNode=null,this.focusNode=null,t.rootVisible!==undefined&&_log("warn","Option 'rootVisible' is no longer supported."),t.minExpandLevel<1&&(_log("warn","Option 'minExpandLevel' must be >= 1."),t.minExpandLevel=1),t.classNames!==$.ui.dynatree.prototype.options.classNames&&(t.classNames=$.extend({},$.ui.dynatree.prototype.options.classNames,t.classNames)),t.ajaxDefaults!==$.ui.dynatree.prototype.options.ajaxDefaults&&(t.ajaxDefaults=$.extend({},$.ui.dynatree.prototype.options.ajaxDefaults,t.ajaxDefaults)),t.dnd!==$.ui.dynatree.prototype.options.dnd&&(t.dnd=$.extend({},$.ui.dynatree.prototype.options.dnd,t.dnd)),t.imagePath||$("script").each(function(){var e=/.*dynatree[^\/]*\.js$/i;if(this.src.search(e)>=0)return this.src.indexOf("/")>=0?t.imagePath=this.src.slice(0,this.src.lastIndexOf("/"))+"/skin/":t.imagePath="skin/",logMsg("Guessing imagePath from '%s': '%s'",this.src,t.imagePath),!1}),this.persistence=new DynaTreeStatus(t.cookieId,t.cookie),t.persist&&($.cookie||_log("warn","Please include jquery.cookie.js to use persistence."),this.persistence.read()),this.logDebug("DynaTree.persistence: %o",this.persistence.toDict()),this.cache={tagEmpty:"<span class='"+t.classNames.empty+"'></span>",tagVline:"<span class='"+t.classNames.vline+"'></span>",tagExpander:"<span class='"+t.classNames.expander+"'></span>",tagConnector:"<span class='"+t.classNames.connector+"'></span>",tagNodeIcon:"<span class='"+t.classNames.nodeIcon+"'></span>",tagCheckbox:"<span class='"+t.classNames.checkbox+"'></span>",lastentry:undefined},(t.children||t.initAjax&&t.initAjax.url||t.initId)&&$(this.divTree).empty();var i=this.$tree.find(">ul:first").hide();this.tnRoot=new DynaTreeNode(null,this,{}),this.tnRoot.bExpanded=!0,this.tnRoot.render(),this.divTree.appendChild(this.tnRoot.ul);var n=this.tnRoot,a=t.persist&&this.persistence.isReloading(),s=!1,o=this.enableUpdate(!1);this.logDebug("Dynatree._load(): read tree structure..."),t.children?n.addChild(t.children):t.initAjax&&t.initAjax.url?(s=!0,n.data.isLazy=!0,this._reloadAjax(e)):t.initId?this._createFromTag(n,$("#"+t.initId)):(this._createFromTag(n,i),i.remove()),this._checkConsistency(),this.logDebug("Dynatree._load(): render nodes..."),this.enableUpdate(o),this.logDebug("Dynatree._load(): bind events..."),this.$widget.bind(),this.logDebug("Dynatree._load(): postInit..."),this.phase="postInit",t.persist&&this.persistence.write(),this.focusNode&&this.focusNode.isVisible()&&(this.logDebug("Focus on init: %o",this.focusNode),this.focusNode.focus()),!s&&t.onPostInit&&t.onPostInit.call(this,a,!1),this.phase="idle"},_reloadAjax:function(e){var t=this.options;if(!t.initAjax||!t.initAjax.url)throw"tree.reload() requires 'initAjax' mode.";var i=this.persistence,n=$.extend({},t.initAjax);if(n.addActiveKey&&(n.data.activeKey=i.activeKey),n.addFocusedKey&&(n.data.focusedKey=i.focusedKey),n.addExpandedKeyList&&(n.data.expandedKeyList=i.expandedKeyList.join(",")),n.addSelectedKeyList&&(n.data.selectedKeyList=i.selectedKeyList.join(",")),t.onPostInit){n.success&&this.logWarning("initAjax: success callback is ignored when onPostInit was specified."),n.error&&this.logWarning("initAjax: error callback is ignored when onPostInit was specified.");var a=i.isReloading();n.success=function(i){t.onPostInit.call(i.tree,a,!1),e&&e.call(i.tree,"ok")},n.error=function(i){t.onPostInit.call(i.tree,a,!0),e&&e.call(i.tree,"error")}}this.logDebug("Dynatree._init(): send Ajax request..."),this.tnRoot.appendAjax(n)},toString:function(){return"Dynatree '"+this.$tree.attr("id")+"'"},toDict:function(){return this.tnRoot.toDict(!0)},serializeArray:function(e){for(var t=this.getSelectedNodes(e),i=this.$tree.attr("name")||this.$tree.attr("id"),n=[],a=0,s=t.length;a<s;a++)n.push({name:i,value:t[a].data.key});return n},getPersistData:function(){return this.persistence.toDict()},logDebug:function(){this.options.debugLevel>=2&&(Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments))},logInfo:function(){this.options.debugLevel>=1&&(Array.prototype.unshift.apply(arguments,["info"]),_log.apply(this,arguments))},logWarning:function(){Array.prototype.unshift.apply(arguments,["warn"]),_log.apply(this,arguments)},isInitializing:function(){return"init"==this.phase||"postInit"==this.phase},isReloading:function(){return("init"==this.phase||"postInit"==this.phase)&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return"userEvent"==this.phase},redraw:function(){this.tnRoot.render(!1,!1)},renderInvisibleNodes:function(){this.tnRoot.render(!1,!0)},reload:function(e){this._load(e)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(e){var t=document.getElementById(this.options.idPrefix+e);if(t)return t.dtnode?t.dtnode:null;var i=null;return this.visit(function(t){if(t.data.key==e)return i=t,!1},!0),i},getActiveNode:function(){return this.activeNode},reactivate:function(e){var t=this.activeNode;t&&(this.activeNode=null,t.activate(),e&&t.focus())},getSelectedNodes:function(e){var t=[];return this.tnRoot.visit(function(i){if(i.bSelected&&(t.push(i),!0===e))return"skip"}),t},activateKey:function(e){var t=null===e?null:this.getNodeByKey(e);return t?(t.focus(),t.activate(),t):(this.activeNode&&this.activeNode.deactivate(),this.activeNode=null,null)},loadKeyPath:function(e,t){var i=e.split(this.options.keyPathSeparator);return""===i[0]&&i.shift(),i[0]==this.tnRoot.data.key&&(this.logDebug("Removed leading root key."),i.shift()),e=i.join(this.options.keyPathSeparator),this.tnRoot._loadKeyPath(e,t)},selectKey:function(e,t){var i=this.getNodeByKey(e);return i?(i.select(t),i):null},enableUpdate:function(e){return this.bEnableUpdate==e?e:(this.bEnableUpdate=e,e&&this.redraw(),!e)},count:function(){return this.tnRoot.countChildren()},visit:function(e,t){return this.tnRoot.visit(e,t)},_createFromTag:function(parentTreeNode,$ulParent){var self=this;$ulParent.find(">li").each(function(){var $li=$(this),$liSpan=$li.find(">span:first"),title;if($liSpan.length)title=$liSpan.html();else{title=$li.html();var iPos=title.search(/<ul/i);title=iPos>=0?$.trim(title.substring(0,iPos)):$.trim(title)}var data={title:title,isFolder:$li.hasClass("folder"),isLazy:$li.hasClass("lazy"),expand:$li.hasClass("expanded"),select:$li.hasClass("selected"),activate:$li.hasClass("active"),focus:$li.hasClass("focused"),noLink:$li.hasClass("noLink")};if($li.attr("title")&&(data.tooltip=$li.attr("title")),$li.attr("id")&&(data.key=$li.attr("id")),$li.attr("data")){var dataAttr=$.trim($li.attr("data"));if(dataAttr){"{"!=dataAttr.charAt(0)&&(dataAttr="{"+dataAttr+"}");try{$.extend(data,eval("("+dataAttr+")"))}catch(e){throw"Error parsing node data: "+e+"\ndata:\n'"+dataAttr+"'"}}}var childNode=parentTreeNode.addChild(data),$ul=$li.find(">ul:first");$ul.length&&self._createFromTag(childNode,$ul)})},_checkConsistency:function(){},_setDndStatus:function(e,t,i,n,a){var s=e?$(e.span):null,o=$(t.span);if(this.$dndMarker||(this.$dndMarker=$("<div id='dynatree-drop-marker'></div>").hide().prependTo($(this.divTree).parent())),"after"===n||"before"===n||"over"===n){var r=o.position();switch(n){case"before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-before"),r.top-=8;break;case"after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-after"),r.top+=8;break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before"),this.$dndMarker.addClass("dynatree-drop-over"),o.addClass("dynatree-drop-target"),r.left+=8}this.$dndMarker.css({left:r.left+"px",top:r.top+"px"}).show()}else o.removeClass("dynatree-drop-target"),this.$dndMarker.hide();"after"===n?o.addClass("dynatree-drop-after"):o.removeClass("dynatree-drop-after"),"before"===n?o.addClass("dynatree-drop-before"):o.removeClass("dynatree-drop-before"),!0===a?(s&&s.addClass("dynatree-drop-accept"),o.addClass("dynatree-drop-accept"),i.addClass("dynatree-drop-accept")):(s&&s.removeClass("dynatree-drop-accept"),o.removeClass("dynatree-drop-accept"),i.removeClass("dynatree-drop-accept")),!1===a?(s&&s.addClass("dynatree-drop-reject"),o.addClass("dynatree-drop-reject"),i.addClass("dynatree-drop-reject")):(s&&s.removeClass("dynatree-drop-reject"),o.removeClass("dynatree-drop-reject"),i.removeClass("dynatree-drop-reject"))},_onDragEvent:function(e,t,i,n,a,s){var o,r=(this.options,this.options.dnd),l=null,c=$(t.span);switch(e){case"helper":var u=$("<div class='dynatree-drag-helper'><span class='dynatree-drag-helper-img' /></div>").append($(n.target).closest("a").clone());u.data("dtSourceNode",t),l=u;break;case"start":t.isStatusNode()?l=!1:r.onDragStart&&(l=r.onDragStart(t)),!1===l?(this.logDebug("tree.onDragStart() cancelled"),a.helper.trigger("mouseup"),a.helper.hide()):c.addClass("dynatree-drag-source");break;case"enter":l=r.onDragEnter?r.onDragEnter(t,i):null,l={over:!1!==l&&(!0===l||"over"===l||$.inArray("over",l)>=0),before:!1!==l&&(!0===l||"before"===l||$.inArray("before",l)>=0),after:!1!==l&&(!0===l||"after"===l||$.inArray("after",l)>=0)},a.helper.data("enterResponse",l);break;case"over":var d=a.helper.data("enterResponse");if(o=null,!1===d)break;if("string"==typeof d)o=d;else{var h=c.offset(),p={x:n.pageX-h.left,y:n.pageY-h.top},f={x:p.x/c.width(),y:p.y/c.height()};d.after&&f.y>.75?o="after":!d.over&&d.after&&f.y>.5?o="after":d.before&&f.y<=.25?o="before":!d.over&&d.before&&f.y<=.5?o="before":d.over&&(o="over"),r.preventVoidMoves&&(t===i?o=null:"before"===o&&i&&t===i.getNextSibling()?o=null:"after"===o&&i&&t===i.getPrevSibling()?o=null:"over"===o&&i&&i.parent===t&&i.isLastSibling()&&(o=null)),a.helper.data("hitMode",o)}"over"===o&&r.autoExpandMS&&!1!==t.hasChildren()&&!t.bExpanded&&t.scheduleAction("expand",r.autoExpandMS),o&&r.onDragOver&&(l=r.onDragOver(t,i,o)),this._setDndStatus(i,t,a.helper,o,!1!==l);break;case"drop":o=a.helper.data("hitMode"),o&&r.onDrop&&r.onDrop(t,i,o,a,s);break;case"leave":t.scheduleAction("cancel"),a.helper.data("enterResponse",null),a.helper.data("hitMode",null),this._setDndStatus(i,t,a.helper,"out",undefined),r.onDragLeave&&r.onDragLeave(t,i);break;case"stop":c.removeClass("dynatree-drag-source"),r.onDragStop&&r.onDragStop(t);break;default:throw"Unsupported drag event: "+e}return l},cancelDrag:function(){var e=$.ui.ddmanager.current;e&&e.cancel()},lastentry:undefined},$.widget("ui.dynatree",{_init:function(){if(parseFloat($.ui.version)<1.8)return _log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher."),this._create()},_create:function(){this.options;this.options.event+=".dynatree";this.element.get(0);this.tree=new DynaTree(this),this.tree._load(),this.tree.logDebug("Dynatree._init(): done.")},bind:function(){function e(e){e=$.event.fix(e||window.event);var t=getDtNodeFromElement(e.target);return!!t&&t._onFocus(e)}this.unbind();var t="click.dynatree dblclick.dynatree";this.options.keyboard&&(t+=" keypress.dynatree keydown.dynatree"),this.element.bind(t,function(e){var t=getDtNodeFromElement(e.target);if(!t)return!0;var i=t.tree,n=i.options;i.logDebug("event(%s): dtnode: %s",e.type,t);var a=i.phase;i.phase="userEvent";try{switch(e.type){case"click":return(!n.onClick||!1!==n.onClick.call(i,t,e))&&t._onClick(e);case"dblclick":return(!n.onDblClick||!1!==n.onDblClick.call(i,t,e))&&t._onDblClick(e);case"keydown":return(!n.onKeydown||!1!==n.onKeydown.call(i,t,e))&&t._onKeydown(e);case"keypress":return(!n.onKeypress||!1!==n.onKeypress.call(i,t,e))&&t._onKeypress(e)}}catch(n){i.logWarning("bind(%o): dtnode: %o, error: %o",e,t,n)}finally{i.phase=a}});var i=this.tree.divTree;i.addEventListener?(i.addEventListener("focus",e,!0),i.addEventListener("blur",e,!0)):i.onfocusin=i.onfocusout=e},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind(),$.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind(),$.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},lastentry:undefined}),parseFloat($.ui.version)<1.8&&($.ui.dynatree.getter="getTree getRoot getActiveNode getSelectedNodes"),$.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:null,children:null,initId:null,initAjax:null,autoFocus:!0,keyboard:!0,persist:!1,autoCollapse:!1,clickFolderMode:3,activeVisible:!0,checkbox:!1,selectMode:2,fx:null,noLink:!1,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onLazyRead:null,onCustomRender:null,onRender:null,dnd:{onDragStart:null,onDragStop:null,autoExpandMS:1e3,preventVoidMoves:!0,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:!1,dataType:"json"},strings:{loading:"Loading&#8230;",loadError:"Load error!"},generateIds:!1,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:1,lastentry:undefined},parseFloat($.ui.version)<1.8&&($.ui.dynatree.defaults=$.ui.dynatree.prototype.options),$.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:!1,isLazy:!1,tooltip:null,icon:null,addClass:null,noLink:!1,activate:!1,focus:!1,expand:!1,select:!1,hideCheckbox:!1,unselectable:!1,children:null,lastentry:undefined};var didRegisterDnd=!1,_registerDnd=function(){didRegisterDnd||($.ui.plugin.add("draggable","connectToDynatree",{start:function(e,t){var i=$(this).data("draggable"),n=t.helper.data("dtSourceNode")||null;if(n)return i.offset.click.top=-2,i.offset.click.left=16,n.tree._onDragEvent("start",n,null,e,t,i)},drag:function(e,t){var i=$(this).data("draggable"),n=t.helper.data("dtSourceNode")||null,a=t.helper.data("dtTargetNode")||null,s=getDtNodeFromElement(e.target);if(e.target&&!s){if($(e.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length>0)return}t.helper.data("dtTargetNode",s),a&&a!==s&&a.tree._onDragEvent("leave",a,n,e,t,i),s&&(s.tree.options.dnd.onDrop?s===a?s.tree._onDragEvent("over",s,n,e,t,i):s.tree._onDragEvent("enter",s,n,e,t,i):noop())},stop:function(e,t){var i=$(this).data("draggable"),n=t.helper.data("dtSourceNode")||null,a=t.helper.data("dtTargetNode")||null,s=(i._mouseDownEvent,e.type),o="mouseup"==s&&1==e.which;o||logMsg("Drag was cancelled"),a&&(o&&a.tree._onDragEvent("drop",a,n,e,t,i),a.tree._onDragEvent("leave",a,n,e,t,i)),n&&n.tree._onDragEvent("stop",n,null,e,t,i)}}),didRegisterDnd=!0)}}(jQuery),function(e){function t(t){switch(t.type){case"mousemove":return e.extend(t.data,{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY});case"DOMMouseScroll":e.extend(t,t.data),t.delta=-t.detail/3;break;case"mousewheel":t.delta=t.wheelDelta/120}return t.type="wheel",e.event.handle.call(this,t,t.delta)}e.fn.mousewheel=function(e){return this[e?"bind":"trigger"]("wheel",e)},e.event.special.wheel={setup:function(){e.event.add(this,i,t,{})},teardown:function(){e.event.remove(this,i,t)}};var i=e.browser.mozilla?"DOMMouseScroll"+(e.browser.version<"1.9"?" mousemove":""):"mousewheel"}(jQuery),app.modules.corePopups=app.modules.corePopups||{},app.modules.corePopups.load=function(){$doc.bind($.browser.webkit?"keydown":"keypress",function(e){if(27===(e.which||e.keyCode)){var t=$(".ui-widget-overlay"),i=$("#cover-all");return t.length&&t.is(":visible")||i.length&&i.is(":visible")?(closeAllPopup(),!1):!$.active}}),$win.resize(resizeCover),$doc.on("click",".js-p-close",closeAllPopup)},PopupManager=function(){var e={fullscreen:0,resizable:0,width:600,height:500,scrollbars:0},t="pc_popup",i=[];return{open:function(n,a,s){var o,r=a||t,l={};return n&&r?(!(o=i[r])||o.closed||o.location!=n)&&($.extend(l,e,s),o=window.open(n,"_blank",$.param(l).replace(/&/g,",")))?(i[r]=o,o.focus&&o.focus(),o):o?(o.focus&&o.focus(),o):(delete i[r],null):null},close:function(e){var n,a=e||t;if(!a)return null;(n=i[a])&&(n.close(),delete i[a])}}}();var AF_cn=0;formSubmitter=function(){function e(e){e.before('<input name="'+e.attr("name")+'" type="hidden" value="'+e.val()+'" />')}function t(e){e.parent().find('[name="'+e.attr("name")+'"][type="hidden"]').remove()}return{disableButtons:function(t,i,n){return $(t).find(":submit").each(function(){var t=$(this);e(t),t.prop("disabled",!0).blur().data("originalValue",t.val()).val(i||"\u041e\u0436\u0438\u0434\u0430\u0439\u0442\u0435...")}),setTimeout(function(){formSubmitter.enableButtons(t)},n||12e4),!0},enableButtons:function(e){$(e).find(":submit").each(function(){var e=$(this);e.prop("disabled",!1).val(e.data("originalValue")),t(e)})}}}(),$doc.on("click",".js-tb-item",function(){var e=$(this).index();return $(".js-tb-item").removeClass("tb-item-selected").eq(e).addClass("tb-item-selected"),$(".js-tabs-content").hide().eq(e).show(),$doc.trigger("js-tabs.tab.clicked"),!1}),app.modules.coreApplicationBase=app.modules.coreApplicationBase||{},app.modules.coreApplicationBase.load=function(){if(void 0===e)var e=function(){return alert('\u0424\u0443\u043d\u043a\u0446\u0438\u044f "setCompanySitesLightbox" \u043f\u043e\u043a\u0438\u0434\u0430\u0435\u0442 "core" - \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u0438\u0442\u0435 \u0432 \u043f\u0440\u043e\u0435\u043a\u0442.'),!0};$doc.bind("keydown",function(e){if(13==e.which&&isEventCtrlPressed(e)){var t=e.target;t&&t.form&&(e.preventDefault(),$(t.form).submit())}}),$(".js-psf-button").hover(function(){$(this).addClass("psf-button-hover")},function(){$(this).removeClass("psf-button-hover psf-button-active")}).mousedown(function(){$(this).addClass("psf-button-active")}).mouseup(function(){$(this).removeClass("psf-button-active")}),hideFunctionSeo(".usersAgreement1","http://pulscen.ru/about/terms","_blank"),spanToLinks(),tableMessage(),$(".js-packets div").eq(2).html($(".b-tableCover-message").html()),$(".js-startPageLink").click(function(){var e=$(this).next().html();return $("#popup-content").html(e),showPopup("popup-container",!0),$(".js-setStartPage").scrollTop(0),!1}),showToolbarPopups(window.location.href),changePopups(),{init:function(){this.init_show_more_trait_values()},init_show_more_trait_values:function(){$(document).on("click",".js-more-span-portal",function(e){e.preventDefault();var t=$(this),i=t.text(),n=t.prev().find(".js-prl-link").next(),a=n.children(".js-product-rubrics-list-second"),s=n.children().children(".js-prl-item-hidden");toggleText("\u0412\u0441\u0435","\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c",i,this),t.toggleClass("js-more-span-portal-ga more-span-clicked"),s.toggle(),a.toggle()})}}.init()},Visualization=function(){var e=[],t=null,i={"package":"areachart","class":"AreaChart"},n=[],a=[],s={},o=!1,r=function(){for(var e=document.getElementById(t),r=new google.visualization.DataTable,l=new google.visualization[i[1]](e),u=n.length,d=0;d<u;d++)r.addColumn(n[d][1],n[d][2],n[d][0]);r.addRows(a),l.draw(r,s),o=!1,c()},l=function(t,i,n,a,s){e.push([t,i,n,a,s])},c=function(){if(e.length){var t=e.shift();t&&Visualization.draw(t[0],t[1],t[2],t[3],t[4])}},u=function(){google.load("visualization","1",{packages:[i[0]]}),google.setOnLoadCallback(function(){r()})};return{draw:function(e,c,d,h,p){return o?void l(e,c,d,h,p):(o=!0,e&&(t=e),c&&(i=c),d&&(n=d),h&&(a=h),p&&(s=p),!!google&&(google.visualization&&google.visualization[i[1]]?r():u(),!0))}}}(),function(e){function t(t,i){return parseInt(e.css(t[0],i))||0}function i(e){return e[0].offsetWidth+t(e,"marginLeft")+t(e,"marginRight")}function n(e){return e[0].offsetHeight+t(e,"marginTop")+t(e,"marginBottom")}e.fn.jCarouselLite=function(t){return t=e.extend({btnPrev:null,btnNext:null,btnGo:null,mouseWheel:!1,auto:null,speed:200,easing:null,vertical:!1,circular:!0,visible:3,start:0,scroll:1,beforeStart:null,afterEnd:null},t||{}),this.each(function(){function a(){return f.slice(g).slice(0,p)}function s(i){if(!o){if(t.beforeStart&&t.beforeStart.call(this,a()),t.circular)i<=t.start-p-1?(u.css(r,-(m-2*p)*v+"px"),g=i==t.start-p-1?m-2*p-1:m-2*p-t.scroll):i>=m-p+1?(u.css(r,-p*v+"px"),g=i==m-p+1?p+1:p+t.scroll):g=i;else{if(i<0||i>m-p)return;g=i}o=!0,u.animate("left"==r?{left:-g*v}:{top:-g*v},t.speed,t.easing,function(){t.afterEnd&&t.afterEnd.call(this,a()),o=!1}),t.circular||(e(t.btnPrev+","+t.btnNext).removeClass("disabled"),e(g-t.scroll<0&&t.btnPrev||g+t.scroll>m-p&&t.btnNext||[]).addClass("disabled"))}return!1}var o=!1,r=t.vertical?"top":"left",l=t.vertical?"height":"width",c=e(this),u=e("ul",c),d=e("li",u),h=d.size(),p=t.visible;t.circular&&(u.prepend(d.slice(h-p-1+1).clone()).append(d.slice(0,p).clone()),t.start+=p);var f=e("li",u),m=f.size(),g=t.start;c.css("visibility","visible"),f.css({overflow:"hidden","float":t.vertical?"none":"left"}),u.css({margin:"0",padding:"0",position:"relative","list-style-type":"none","z-index":"1"}),c.css({overflow:"hidden",position:"relative","z-index":"2",left:"0px"});var v=t.vertical?n(f):i(f),b=v*m,y=v*p;f.css({width:f.width(),height:f.height()}),u.css(l,b+"px").css(r,-g*v),c.css(l,y+"px"),t.btnPrev&&e(t.btnPrev).click(function(){return s(g-t.scroll)}),t.btnNext&&e(t.btnNext).click(function(){return s(g+t.scroll)}),t.btnGo&&e.each(t.btnGo,function(i,n){e(n).click(function(){return s(t.circular?t.visible+i:i)})}),t.mouseWheel&&c.mousewheel&&c.mousewheel(function(e,i){return s(i>0?g-t.scroll:g+t.scroll)}),t.auto&&setInterval(function(){s(g+t.scroll)},t.auto+t.speed)})}}(jQuery),function(e){function t(t,i,n){var a=this;a.id=n,a.options=i,a.status={animated:!1,rendered:!1,disabled:!1,focused:!1},a.elements={target:t.addClass(a.options.style.classes.target),tooltip:null,wrapper:null,content:null,contentWrapper:null,title:null,button:null,tip:null,bgiframe:null},a.cache={mouse:{},position:{},toggle:0},a.timers={},e.extend(a,a.options.api,{show:function(t){function i(){"static"!==a.options.position.type&&a.focus(),a.onShow.call(a,t),e.browser.msie&&a.elements.tooltip.get(0).style.removeAttribute("filter")}var n;if(!a.status.rendered)return e.fn.qtip.log.error.call(a,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"show");if("none"!==a.elements.tooltip.css("display"))return a
;if(a.elements.tooltip.stop(!0,!1),!1===a.beforeShow.call(a,t))return a;if(a.cache.toggle=1,"static"!==a.options.position.type&&a.updatePosition(t,a.options.show.effect.length>0),"object"==typeof a.options.show.solo?n=e(a.options.show.solo):!0===a.options.show.solo&&(n=e("div.qtip").not(a.elements.tooltip)),n&&n.each(function(){!0===e(this).qtip("api").status.rendered&&e(this).qtip("api").hide()}),"function"==typeof a.options.show.effect.type)a.options.show.effect.type.call(a.elements.tooltip,a.options.show.effect.length),a.elements.tooltip.queue(function(){i(),e(this).dequeue()});else{switch(a.options.show.effect.type.toLowerCase()){case"fade":a.elements.tooltip.fadeIn(a.options.show.effect.length,i);break;case"slide":a.elements.tooltip.slideDown(a.options.show.effect.length,function(){i(),"static"!==a.options.position.type&&a.updatePosition(t,!0)});break;case"grow":a.elements.tooltip.show(a.options.show.effect.length,i);break;default:a.elements.tooltip.show(null,i)}a.elements.tooltip.addClass(a.options.style.classes.active)}return e.fn.qtip.log.error.call(a,1,e.fn.qtip.constants.EVENT_SHOWN,"show")},hide:function(t){function i(){a.onHide.call(a,t)}if(!a.status.rendered)return e.fn.qtip.log.error.call(a,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"hide");if("none"===a.elements.tooltip.css("display"))return a;if(clearTimeout(a.timers.show),a.elements.tooltip.stop(!0,!1),!1===a.beforeHide.call(a,t))return a;if(a.cache.toggle=0,"function"==typeof a.options.hide.effect.type)a.options.hide.effect.type.call(a.elements.tooltip,a.options.hide.effect.length),a.elements.tooltip.queue(function(){i(),e(this).dequeue()});else{switch(a.options.hide.effect.type.toLowerCase()){case"fade":a.elements.tooltip.fadeOut(a.options.hide.effect.length,i);break;case"slide":a.elements.tooltip.slideUp(a.options.hide.effect.length,i);break;case"grow":a.elements.tooltip.hide(a.options.hide.effect.length,i);break;default:a.elements.tooltip.hide(null,i)}a.elements.tooltip.removeClass(a.options.style.classes.active)}return e.fn.qtip.log.error.call(a,1,e.fn.qtip.constants.EVENT_HIDDEN,"hide")},updatePosition:function(t,i){var n,s,o,r,l,c,u,h,p,f,m;if(!a.status.rendered)return e.fn.qtip.log.error.call(a,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updatePosition");if("static"==a.options.position.type)return e.fn.qtip.log.error.call(a,1,e.fn.qtip.constants.CANNOT_POSITION_STATIC,"updatePosition");if(s={position:{left:0,top:0},dimensions:{height:0,width:0},corner:a.options.position.corner.target},o={position:a.getPosition(),dimensions:a.getDimensions(),corner:a.options.position.corner.tooltip},"mouse"!==a.options.position.target){if("area"==a.options.position.target.get(0).nodeName.toLowerCase()){for(r=a.options.position.target.attr("coords").split(","),n=0;n<r.length;n++)r[n]=parseInt(r[n]);switch(l=a.options.position.target.parent("map").attr("name"),c=e('img[usemap="#'+l+'"]:first').offset(),s.position={left:Math.floor(c.left+r[0]),top:Math.floor(c.top+r[1])},a.options.position.target.attr("shape").toLowerCase()){case"rect":s.dimensions={width:Math.ceil(Math.abs(r[2]-r[0])),height:Math.ceil(Math.abs(r[3]-r[1]))};break;case"circle":s.dimensions={width:r[2]+1,height:r[2]+1};break;case"poly":for(s.dimensions={width:r[0],height:r[1]},n=0;n<r.length;n++)n%2==0?(r[n]>s.dimensions.width&&(s.dimensions.width=r[n]),r[n]<r[0]&&(s.position.left=Math.floor(c.left+r[n]))):(r[n]>s.dimensions.height&&(s.dimensions.height=r[n]),r[n]<r[1]&&(s.position.top=Math.floor(c.top+r[n])));s.dimensions.width=s.dimensions.width-(s.position.left-c.left),s.dimensions.height=s.dimensions.height-(s.position.top-c.top);break;default:return e.fn.qtip.log.error.call(a,4,e.fn.qtip.constants.INVALID_AREA_SHAPE,"updatePosition")}s.dimensions.width-=2,s.dimensions.height-=2}else 1===a.options.position.target.add(document.body).length?(s.position={left:e(document).scrollLeft(),top:e(document).scrollTop()},s.dimensions={height:e(window).height(),width:e(window).width()}):(void 0!==a.options.position.target.attr("qtip")?s.position=a.options.position.target.qtip("api").cache.position:s.position=a.options.position.target.offset(),s.dimensions={height:a.options.position.target.outerHeight(),width:a.options.position.target.outerWidth()});u=e.extend({},s.position),-1!==s.corner.search(/right/i)&&(u.left+=s.dimensions.width),-1!==s.corner.search(/bottom/i)&&(u.top+=s.dimensions.height),-1!==s.corner.search(/((top|bottom)Middle)|center/)&&(u.left+=s.dimensions.width/2),-1!==s.corner.search(/((left|right)Middle)|center/)&&(u.top+=s.dimensions.height/2)}else s.position=u={left:a.cache.mouse.x,top:a.cache.mouse.y},s.dimensions={height:1,width:1};if(-1!==o.corner.search(/right/i)&&(u.left-=o.dimensions.width),-1!==o.corner.search(/bottom/i)&&(u.top-=o.dimensions.height),-1!==o.corner.search(/((top|bottom)Middle)|center/)&&(u.left-=o.dimensions.width/2),-1!==o.corner.search(/((left|right)Middle)|center/)&&(u.top-=o.dimensions.height/2),h=e.browser.msie?1:0,e.browser.msie&&6===parseInt(e.browser.version.charAt(0))?1:0,a.options.style.border.radius>0&&(-1!==o.corner.search(/Left/)?u.left-=a.options.style.border.radius:-1!==o.corner.search(/Right/)&&(u.left+=a.options.style.border.radius),-1!==o.corner.search(/Top/)?u.top-=a.options.style.border.radius:-1!==o.corner.search(/Bottom/)&&(u.top+=a.options.style.border.radius)),h&&(-1!==o.corner.search(/top/)?u.top-=h:-1!==o.corner.search(/bottom/)&&(u.top+=h),-1!==o.corner.search(/left/)?u.left-=h:-1!==o.corner.search(/right/)&&(u.left+=h),-1!==o.corner.search(/leftMiddle|rightMiddle/)&&(u.top-=1)),!0===a.options.position.adjust.screen&&(u=d.call(a,u,s,o)),"mouse"===a.options.position.target&&!0===a.options.position.adjust.mouse&&(p=!0===a.options.position.adjust.screen&&a.elements.tip?a.elements.tip.attr("rel"):a.options.position.corner.tooltip,u.left+=-1!==p.search(/right/i)?-6:6,u.top+=-1!==p.search(/bottom/i)?-6:6),!a.elements.bgiframe&&e.browser.msie&&6==parseInt(e.browser.version.charAt(0))&&e("select, object").each(function(){f=e(this).offset(),f.bottom=f.top+e(this).height(),f.right=f.left+e(this).width(),u.top+o.dimensions.height>=f.top&&u.left+o.dimensions.width>=f.left&&v.call(a)}),u.left+=a.options.position.adjust.x,u.top+=a.options.position.adjust.y,m=a.getPosition(),u.left!=m.left||u.top!=m.top){if(!1===a.beforePositionUpdate.call(a,t))return a;a.cache.position=u,!0===i?(a.status.animated=!0,a.elements.tooltip.animate(u,200,"swing",function(){a.status.animated=!1})):a.elements.tooltip.css(u),a.onPositionUpdate.call(a,t),void 0!==t&&t.type&&"mousemove"!==t.type&&e.fn.qtip.log.error.call(a,1,e.fn.qtip.constants.EVENT_POSITION_UPDATED,"updatePosition")}return a},updateWidth:function(t){var i;return a.status.rendered?t&&"number"!=typeof t?e.fn.qtip.log.error.call(a,2,"newWidth must be of type number","updateWidth"):(i=a.elements.contentWrapper.siblings().add(a.elements.tip).add(a.elements.button),t||("number"==typeof a.options.style.width.value?t=a.options.style.width.value:(a.elements.tooltip.css({width:"auto"}),i.hide(),e.browser.msie&&a.elements.wrapper.add(a.elements.contentWrapper.children()).css({zoom:"normal"}),t=a.getDimensions().width+1,a.options.style.width.value||(t>a.options.style.width.max&&(t=a.options.style.width.max),t<a.options.style.width.min&&(t=a.options.style.width.min)))),t%2!=0&&(t-=1),a.elements.tooltip.width(t),i.show(),a.options.style.border.radius&&a.elements.tooltip.find(".qtip-betweenCorners").each(function(){e(this).width(t-2*a.options.style.border.radius)}),e.browser.msie&&(a.elements.wrapper.add(a.elements.contentWrapper.children()).css({zoom:"1"}),a.elements.wrapper.width(t),a.elements.bgiframe&&a.elements.bgiframe.width(t).height(a.getDimensions.height)),e.fn.qtip.log.error.call(a,1,e.fn.qtip.constants.EVENT_WIDTH_UPDATED,"updateWidth")):e.fn.qtip.log.error.call(a,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateWidth")},updateStyle:function(t){var i,n,o,l,c;return a.status.rendered?"string"==typeof t&&e.fn.qtip.styles[t]?(a.options.style=f.call(a,e.fn.qtip.styles[t],a.options.user.style),a.elements.content.css(h(a.options.style)),!1!==a.options.content.title.text&&a.elements.title.css(h(a.options.style.title,!0)),a.elements.contentWrapper.css({borderColor:a.options.style.border.color}),!1!==a.options.style.tip.corner&&(e("<canvas>").get(0).getContext?(i=a.elements.tooltip.find(".qtip-tip canvas:first"),o=i.get(0).getContext("2d"),o.clearRect(0,0,300,300),l=i.parent("div[rel]:first").attr("rel"),c=m(l,a.options.style.tip.size.width,a.options.style.tip.size.height),r.call(a,i,c,a.options.style.tip.color||a.options.style.border.color)):e.browser.msie&&(i=a.elements.tooltip.find('.qtip-tip [nodeName="shape"]'),i.attr("fillcolor",a.options.style.tip.color||a.options.style.border.color))),a.options.style.border.radius>0&&(a.elements.tooltip.find(".qtip-betweenCorners").css({backgroundColor:a.options.style.border.color}),e("<canvas>").get(0).getContext?(n=g(a.options.style.border.radius),a.elements.tooltip.find(".qtip-wrapper canvas").each(function(){o=e(this).get(0).getContext("2d"),o.clearRect(0,0,300,300),l=e(this).parent("div[rel]:first").attr("rel"),s.call(a,e(this),n[l],a.options.style.border.radius,a.options.style.border.color)})):e.browser.msie&&a.elements.tooltip.find('.qtip-wrapper [nodeName="arc"]').each(function(){e(this).attr("fillcolor",a.options.style.border.color)})),e.fn.qtip.log.error.call(a,1,e.fn.qtip.constants.EVENT_STYLE_UPDATED,"updateStyle")):e.fn.qtip.log.error.call(a,2,e.fn.qtip.constants.STYLE_NOT_DEFINED,"updateStyle"):e.fn.qtip.log.error.call(a,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateStyle")},updateContent:function(t,i){function n(){a.updateWidth(),!1!==i&&("static"!==a.options.position.type&&a.updatePosition(a.elements.tooltip.is(":visible"),!0),!1!==a.options.style.tip.corner&&l.call(a))}var s,o,r;if(!a.status.rendered)return e.fn.qtip.log.error.call(a,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateContent");if(!t)return e.fn.qtip.log.error.call(a,2,e.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateContent");if("string"==typeof(s=a.beforeContentUpdate.call(a,t)))t=s;else if(!1===s)return;return e.browser.msie&&a.elements.contentWrapper.children().css({zoom:"normal"}),t.jquery&&t.length>0?t.clone(!0).appendTo(a.elements.content).show():a.elements.content.html(t),o=a.elements.content.find("img[complete=false]"),o.length>0?(r=0,o.each(function(){e('<img src="'+e(this).attr("src")+'" />').load(function(){++r==o.length&&n()})})):n(),a.onContentUpdate.call(a),e.fn.qtip.log.error.call(a,1,e.fn.qtip.constants.EVENT_CONTENT_UPDATED,"loadContent")},loadContent:function(t,i,n){function s(t){a.onContentLoad.call(a),e.fn.qtip.log.error.call(a,1,e.fn.qtip.constants.EVENT_CONTENT_LOADED,"loadContent"),a.updateContent(t)}return a.status.rendered?!1===a.beforeContentLoad.call(a)?a:("post"==n?e.post(t,i,s):e.get(t,i,s),a):e.fn.qtip.log.error.call(a,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"loadContent")},updateTitle:function(t){return a.status.rendered?t?(returned=a.beforeTitleUpdate.call(a),!1===returned?a:(a.elements.button&&(a.elements.button=a.elements.button.clone(!0)),a.elements.title.html(t),a.elements.button&&a.elements.title.prepend(a.elements.button),a.onTitleUpdate.call(a),e.fn.qtip.log.error.call(a,1,e.fn.qtip.constants.EVENT_TITLE_UPDATED,"updateTitle"))):e.fn.qtip.log.error.call(a,2,e.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateTitle"):e.fn.qtip.log.error.call(a,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateTitle")},focus:function(t){var i,n,s;if(!a.status.rendered)return e.fn.qtip.log.error.call(a,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"focus");if("static"==a.options.position.type)return e.fn.qtip.log.error.call(a,1,e.fn.qtip.constants.CANNOT_FOCUS_STATIC,"focus");if(i=parseInt(a.elements.tooltip.css("z-index")),n=6e3+e("div.qtip[qtip]").length-1,!a.status.focused&&i!==n){if(!1===a.beforeFocus.call(a,t))return a;e("div.qtip[qtip]").not(a.elements.tooltip).each(function(){!0===e(this).qtip("api").status.rendered&&(s=parseInt(e(this).css("z-index")),"number"==typeof s&&s>-1&&e(this).css({zIndex:parseInt(e(this).css("z-index"))-1}),e(this).qtip("api").status.focused=!1)}),a.elements.tooltip.css({zIndex:n}),a.status.focused=!0,a.onFocus.call(a,t),e.fn.qtip.log.error.call(a,1,e.fn.qtip.constants.EVENT_FOCUSED,"focus")}return a},disable:function(t){return a.status.rendered?(t?a.status.disabled?e.fn.qtip.log.error.call(a,1,e.fn.qtip.constants.TOOLTIP_ALREADY_DISABLED,"disable"):(a.status.disabled=!0,e.fn.qtip.log.error.call(a,1,e.fn.qtip.constants.EVENT_DISABLED,"disable")):a.status.disabled?(a.status.disabled=!1,e.fn.qtip.log.error.call(a,1,e.fn.qtip.constants.EVENT_ENABLED,"disable")):e.fn.qtip.log.error.call(a,1,e.fn.qtip.constants.TOOLTIP_ALREADY_ENABLED,"disable"),a):e.fn.qtip.log.error.call(a,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"disable")},destroy:function(){var t,i;if(!1===a.beforeDestroy.call(a))return a;if(a.status.rendered?(a.options.show.when.target.unbind("mousemove.qtip",a.updatePosition),a.options.show.when.target.unbind("mouseout.qtip",a.hide),a.options.show.when.target.unbind(a.options.show.when.event+".qtip"),a.options.hide.when.target.unbind(a.options.hide.when.event+".qtip"),a.elements.tooltip.unbind(a.options.hide.when.event+".qtip"),a.elements.tooltip.unbind("mouseover.qtip",a.focus),a.elements.tooltip.remove()):a.options.show.when.target.unbind(a.options.show.when.event+".qtip-create"),"object"==typeof a.elements.target.data("qtip")&&"object"==typeof(i=a.elements.target.data("qtip").interfaces)&&i.length>0)for(t=0;t<i.length-1;t++)i[t].id==a.id&&i.splice(t,1);return delete e.fn.qtip.interfaces[a.id],"object"==typeof i&&i.length>0?a.elements.target.data("qtip").current=i.length-1:a.elements.target.removeData("qtip"),a.onDestroy.call(a),e.fn.qtip.log.error.call(a,1,e.fn.qtip.constants.EVENT_DESTROYED,"destroy"),a.elements.target},getPosition:function(){var t,i;return a.status.rendered?(t="none"===a.elements.tooltip.css("display"),t&&a.elements.tooltip.css({visiblity:"hidden"}).show(),i=a.elements.tooltip.offset(),t&&a.elements.tooltip.css({visiblity:"visible"}).hide(),i):e.fn.qtip.log.error.call(a,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getPosition")},getDimensions:function(){var t,i;return a.status.rendered?(t=!a.elements.tooltip.is(":visible"),t&&a.elements.tooltip.css({visiblity:"hidden"}).show(),i={height:a.elements.tooltip.outerHeight(),width:a.elements.tooltip.outerWidth()},t&&a.elements.tooltip.css({visiblity:"visible"}).hide(),i):e.fn.qtip.log.error.call(a,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getDimensions")}})}function n(){var t,i,n,s,r;t=this,t.beforeRender.call(t),t.status.rendered=!0,t.elements.tooltip='<div qtip="'+t.id+'" class="qtip '+(t.options.style.classes.tooltip||t.options.style)+'"style="display:none; -moz-border-radius:0; -webkit-border-radius:0; border-radius:0;position:'+t.options.position.type+';">  <div class="qtip-wrapper" style="position:relative; overflow:hidden; text-align:left;">    <div class="qtip-contentWrapper" style="overflow:hidden;">       <div class="qtip-content '+t.options.style.classes.content+'"></div></div></div></div>',t.elements.tooltip=e(t.elements.tooltip),t.elements.tooltip.appendTo(t.options.position.container),t.elements.tooltip.data("qtip",{current:0,interfaces:[t]}),t.elements.wrapper=t.elements.tooltip.children("div:first"),t.elements.contentWrapper=t.elements.wrapper.children("div:first").css({background:t.options.style.background}),t.elements.content=t.elements.contentWrapper.children("div:first").css(h(t.options.style)),e.browser.msie&&t.elements.wrapper.add(t.elements.content).css({zoom:1}),"unfocus"==t.options.hide.when.event&&t.elements.tooltip.attr("unfocus",!0),"number"==typeof t.options.style.width.value&&t.updateWidth(),e("<canvas>").get(0).getContext||e.browser.msie?(t.options.style.border.radius>0?a.call(t):t.elements.contentWrapper.css({border:t.options.style.border.width+"px solid "+t.options.style.border.color}),!1!==t.options.style.tip.corner&&o.call(t)):(t.elements.contentWrapper.css({border:t.options.style.border.width+"px solid "+t.options.style.border.color}),t.options.style.border.radius=0,t.options.style.tip.corner=!1,e.fn.qtip.log.error.call(t,2,e.fn.qtip.constants.CANVAS_VML_NOT_SUPPORTED,"render")),"string"==typeof t.options.content.text&&t.options.content.text.length>0||t.options.content.text.jquery&&t.options.content.text.length>0?i=t.options.content.text:"string"==typeof t.elements.target.attr("title")&&t.elements.target.attr("title").length>0?(i=t.elements.target.attr("title").replace("\\n","<br />"),t.elements.target.attr("title","")):"string"==typeof t.elements.target.attr("alt")&&t.elements.target.attr("alt").length>0?(i=t.elements.target.attr("alt").replace("\\n","<br />"),t.elements.target.attr("alt","")):(i=" ",e.fn.qtip.log.error.call(t,1,e.fn.qtip.constants.NO_VALID_CONTENT,"render")),!1!==t.options.content.title.text&&c.call(t),t.updateContent(i),u.call(t),!0===t.options.show.ready&&t.show(),!1!==t.options.content.url&&(n=t.options.content.url,s=t.options.content.data,r=t.options.content.method||"get",t.loadContent(n,s,r)),t.onRender.call(t),e.fn.qtip.log.error.call(t,1,e.fn.qtip.constants.EVENT_RENDERED,"render")}function a(){var t,i,n,a,o,r,l,c,u,d,h,p,f,m,v;t=this,t.elements.wrapper.find(".qtip-borderBottom, .qtip-borderTop").remove(),n=t.options.style.border.width,a=t.options.style.border.radius,o=t.options.style.border.color||t.options.style.tip.color,r=g(a),l={};for(i in r)l[i]='<div rel="'+i+'" style="'+(-1!==i.search(/Left/)?"left":"right")+":0; position:absolute; height:"+a+"px; width:"+a+'px; overflow:hidden; line-height:0.1px; font-size:1px">',e("<canvas>").get(0).getContext?l[i]+='<canvas height="'+a+'" width="'+a+'" style="vertical-align: top"></canvas>':e.browser.msie&&(c=2*a+3,l[i]+='<v:arc stroked="false" fillcolor="'+o+'" startangle="'+r[i][0]+'" endangle="'+r[i][1]+'" style="width:'+c+"px; height:"+c+"px; margin-top:"+(-1!==i.search(/bottom/)?-2:-1)+"px; margin-left:"+(-1!==i.search(/Right/)?r[i][2]-3.5:-1)+'px; vertical-align:top; display:inline-block; behavior:url(#default#VML)"></v:arc>'),l[i]+="</div>";u=t.getDimensions().width-2*Math.max(n,a),d='<div class="qtip-betweenCorners" style="height:'+a+"px; width:"+u+"px; overflow:hidden; background-color:"+o+'; line-height:0.1px; font-size:1px;">',h='<div class="qtip-borderTop" dir="ltr" style="height:'+a+"px; margin-left:"+a+'px; line-height:0.1px; font-size:1px; padding:0;">'+l.topLeft+l.topRight+d,t.elements.wrapper.prepend(h),p='<div class="qtip-borderBottom" dir="ltr" style="height:'+a+"px; margin-left:"+a+'px; line-height:0.1px; font-size:1px; padding:0;">'+l.bottomLeft+l.bottomRight+d,t.elements.wrapper.append(p),e("<canvas>").get(0).getContext?t.elements.wrapper.find("canvas").each(function(){f=r[e(this).parent("[rel]:first").attr("rel")],s.call(t,e(this),f,a,o)}):e.browser.msie&&t.elements.tooltip.append('<v:image style="behavior:url(#default#VML);"></v:image>'),m=Math.max(a,a+(n-a)),v=Math.max(n-a,0),t.elements.contentWrapper.css({border:"0px solid "+o,borderWidth:v+"px "+m+"px"})}function s(e,t,i,n){var a=e.get(0).getContext("2d");a.fillStyle=n,a.beginPath(),a.arc(t[0],t[1],i,0,2*Math.PI,!1),a.fill()}function o(t){var i,n,a,s,o;i=this,null!==i.elements.tip&&i.elements.tip.remove(),n=i.options.style.tip.color||i.options.style.border.color,!1!==i.options.style.tip.corner&&(t||(t=i.options.style.tip.corner),a=m(t,i.options.style.tip.size.width,i.options.style.tip.size.height),i.elements.tip='<div class="'+i.options.style.classes.tip+'" dir="ltr" rel="'+t+'" style="position:absolute; height:'+i.options.style.tip.size.height+"px; width:"+i.options.style.tip.size.width+'px; margin:0 auto; line-height:0.1px; font-size:1px;">',e("<canvas>").get(0).getContext?i.elements.tip+='<canvas height="'+i.options.style.tip.size.height+'" width="'+i.options.style.tip.size.width+'"></canvas>':e.browser.msie&&(s=i.options.style.tip.size.width+","+i.options.style.tip.size.height,o="m"+a[0][0]+","+a[0][1],o+=" l"+a[1][0]+","+a[1][1],o+=" "+a[2][0]+","+a[2][1],o+=" xe",i.elements.tip+='<v:shape fillcolor="'+n+'" stroked="false" filled="true" path="'+o+'" coordsize="'+s+'" style="width:'+i.options.style.tip.size.width+"px; height:"+i.options.style.tip.size.height+"px; line-height:0.1px; display:inline-block; behavior:url(#default#VML); vertical-align:"+(-1!==t.search(/top/)?"bottom":"top")+'"></v:shape>',i.elements.tip+='<v:image style="behavior:url(#default#VML);"></v:image>',i.elements.contentWrapper.css("position","relative")),i.elements.tooltip.prepend(i.elements.tip+"</div>"),i.elements.tip=i.elements.tooltip.find("."+i.options.style.classes.tip).eq(0),e("<canvas>").get(0).getContext&&r.call(i,i.elements.tip.find("canvas:first"),a,n),-1!==t.search(/top/)&&e.browser.msie&&6===parseInt(e.browser.version.charAt(0))&&i.elements.tip.css({marginTop:-4}),l.call(i,t))}function r(e,t,i){var n=e.get(0).getContext("2d");n.fillStyle=i,n.beginPath(),n.moveTo(t[0][0],t[0][1]),n.lineTo(t[1][0],t[1][1]),n.lineTo(t[2][0],t[2][1]),n.fill()}function l(t){var i,n,a,s,o;i=this,!1!==i.options.style.tip.corner&&i.elements.tip&&(t||(t=i.elements.tip.attr("rel")),n=positionAdjust=e.browser.msie?1:0,i.elements.tip.css(t.match(/left|right|top|bottom/)[0],0),-1!==t.search(/top|bottom/)?(e.browser.msie&&(6===parseInt(e.browser.version.charAt(0))?positionAdjust=-1!==t.search(/top/)?-3:1:positionAdjust=-1!==t.search(/top/)?1:2),-1!==t.search(/Middle/)?i.elements.tip.css({left:"50%",marginLeft:-i.options.style.tip.size.width/2}):-1!==t.search(/Left/)?i.elements.tip.css({left:i.options.style.border.radius-n}):-1!==t.search(/Right/)&&i.elements.tip.css({right:i.options.style.border.radius+n}),-1!==t.search(/top/)?i.elements.tip.css({top:-positionAdjust}):i.elements.tip.css({bottom:positionAdjust})):-1!==t.search(/left|right/)&&(e.browser.msie&&(positionAdjust=6===parseInt(e.browser.version.charAt(0))?1:-1!==t.search(/left/)?1:2),-1!==t.search(/Middle/)?i.elements.tip.css({top:"50%",marginTop:-i.options.style.tip.size.height/2}):-1!==t.search(/Top/)?i.elements.tip.css({top:i.options.style.border.radius-n}):-1!==t.search(/Bottom/)&&i.elements.tip.css({bottom:i.options.style.border.radius+n}),-1!==t.search(/left/)?i.elements.tip.css({left:-positionAdjust}):i.elements.tip.css({right:positionAdjust})),a="padding-"+t.match(/left|right|top|bottom/)[0],s=i.options.style.tip.size[-1!==a.search(/left|right/)?"width":"height"],i.elements.tooltip.css("padding",0),i.elements.tooltip.css(a,s),e.browser.msie&&6==parseInt(e.browser.version.charAt(0))&&(o=parseInt(i.elements.tip.css("margin-top"))||0,o+=parseInt(i.elements.content.css("margin-top"))||0,i.elements.tip.css({marginTop:o})))}function c(){var t=this;null!==t.elements.title&&t.elements.title.remove(),t.elements.title=e('<div class="'+t.options.style.classes.title+'">').css(h(t.options.style.title,!0)).css({zoom:e.browser.msie?1:0}).prependTo(t.elements.contentWrapper),t.options.content.title.text&&t.updateTitle.call(t,t.options.content.title.text),!1!==t.options.content.title.button&&"string"==typeof t.options.content.title.button&&(t.elements.button=e('<a class="'+t.options.style.classes.button+'" style="float:right; position: relative"></a>').css(h(t.options.style.button,!0)).html(t.options.content.title.button).prependTo(t.elements.title).click(function(e){t.status.disabled||t.hide(e)}))}function u(){function t(t){!0!==a.status.disabled&&(clearTimeout(a.timers.inactive),a.timers.inactive=setTimeout(function(){e(r).each(function(){o.unbind(this+".qtip-inactive"),a.elements.content.unbind(this+".qtip-inactive")}),a.hide(t)},a.options.hide.delay))}function i(i){!0!==a.status.disabled&&("inactive"==a.options.hide.when.event&&(e(r).each(function(){o.bind(this+".qtip-inactive",t),a.elements.content.bind(this+".qtip-inactive",t)}),t()),clearTimeout(a.timers.show),clearTimeout(a.timers.hide),a.timers.show=setTimeout(function(){a.show(i)},a.options.show.delay))}function n(t){if(!0!==a.status.disabled){if(!0===a.options.hide.fixed&&-1!==a.options.hide.when.event.search(/mouse(out|leave)/i)&&e(t.relatedTarget).parents("div.qtip[qtip]").length>0)return t.stopPropagation(),t.preventDefault(),clearTimeout(a.timers.hide),!1;clearTimeout(a.timers.show),clearTimeout(a.timers.hide),a.elements.tooltip.stop(!0,!0),a.timers.hide=setTimeout(function(){a.hide(t)},a.options.hide.delay)}}var a,s,o,r;a=this,s=a.options.show.when.target,o=a.options.hide.when.target,a.options.hide.fixed&&(o=o.add(a.elements.tooltip)),"inactive"==a.options.hide.when.event?r=["click","dblclick","mousedown","mouseup","mousemove","mouseout","mouseenter","mouseleave","mouseover"]:!0===a.options.hide.fixed&&a.elements.tooltip.bind("mouseover.qtip",function(){!0!==a.status.disabled&&clearTimeout(a.timers.hide)}),1===a.options.show.when.target.add(a.options.hide.when.target).length&&a.options.show.when.event==a.options.hide.when.event&&"inactive"!==a.options.hide.when.event||"unfocus"==a.options.hide.when.event?(a.cache.toggle=0,s.bind(a.options.show.when.event+".qtip",function(e){0==a.cache.toggle?i(e):n(e)})):(s.bind(a.options.show.when.event+".qtip",i),"inactive"!==a.options.hide.when.event&&o.bind(a.options.hide.when.event+".qtip",n)),-1!==a.options.position.type.search(/(fixed|absolute)/)&&a.elements.tooltip.bind("mouseover.qtip",a.focus),"mouse"===a.options.position.target&&"static"!==a.options.position.type&&s.bind("mousemove.qtip",function(e){a.cache.mouse={x:e.pageX,y:e.pageY},!1===a.status.disabled&&!0===a.options.position.adjust.mouse&&"static"!==a.options.position.type&&"none"!==a.elements.tooltip.css("display")&&a.updatePosition(e)})}function d(t,i,n){var a,s,r,l,c;return a=this,"center"==n.corner?i.position:(s=e.extend({},t),l={x:!1,y:!1},c={left:s.left<e.fn.qtip.cache.screen.scroll.left,right:s.left+n.dimensions.width+2>=e.fn.qtip.cache.screen.width+e.fn.qtip.cache.screen.scroll.left,top:s.top<e.fn.qtip.cache.screen.scroll.top,bottom:s.top+n.dimensions.height+2>=e.fn.qtip.cache.screen.height+e.fn.qtip.cache.screen.scroll.top},r={left:c.left&&(-1!=n.corner.search(/right/i)||-1==n.corner.search(/right/i)&&!c.right),right:c.right&&(-1!=n.corner.search(/left/i)||-1==n.corner.search(/left/i)&&!c.left),top:c.top&&-1==n.corner.search(/top/i),bottom:c.bottom&&-1==n.corner.search(/bottom/i)},r.left?("mouse"!==a.options.position.target?s.left=i.position.left+i.dimensions.width:s.left=a.cache.mouse.x,l.x="Left"):r.right&&("mouse"!==a.options.position.target?s.left=i.position.left-n.dimensions.width:s.left=a.cache.mouse.x-n.dimensions.width,l.x="Right"),r.top?("mouse"!==a.options.position.target?s.top=i.position.top+i.dimensions.height:s.top=a.cache.mouse.y,l.y="top"):r.bottom&&("mouse"!==a.options.position.target?s.top=i.position.top-n.dimensions.height:s.top=a.cache.mouse.y-n.dimensions.height,l.y="bottom"),s.left<0&&(s.left=t.left,l.x=!1),s.top<0&&(s.top=t.top,l.y=!1),!1!==a.options.style.tip.corner&&(s.corner=new String(n.corner),!1!==l.x&&(s.corner=s.corner.replace(/Left|Right|Middle/,l.x)),!1!==l.y&&(s.corner=s.corner.replace(/top|bottom/,l.y)),s.corner!==a.elements.tip.attr("rel")&&o.call(a,s.corner)),s)}function h(t,i){var n,a;n=e.extend(!0,{},t);for(a in n)!0===i&&-1!==a.search(/(tip|classes)/i)?delete n[a]:i||-1===a.search(/(width|border|tip|title|classes|user)/i)||delete n[a];return n}function p(e){return"object"!=typeof e.tip&&(e.tip={corner:e.tip}),"object"!=typeof e.tip.size&&(e.tip.size={width:e.tip.size,height:e.tip.size}),"object"!=typeof e.border&&(e.border={width:e.border}),"object"!=typeof e.width&&(e.width={value:e.width}),"string"==typeof e.width.max&&(e.width.max=parseInt(e.width.max.replace(/([0-9]+)/i,"$1"))),"string"==typeof e.width.min&&(e.width.min=parseInt(e.width.min.replace(/([0-9]+)/i,"$1"))),"number"==typeof e.tip.size.x&&(e.tip.size.width=e.tip.size.x,delete e.tip.size.x),"number"==typeof e.tip.size.y&&(e.tip.size.height=e.tip.size.y,delete e.tip.size.y),e}function f(){var t,i,n,a,s,o;for(t=this,n=[!0,{}],i=0;i<arguments.length;i++)n.push(arguments[i]);for(a=[e.extend.apply(e,n)];"string"==typeof a[0].name;)a.unshift(p(e.fn.qtip.styles[a[0].name]));return a.unshift(!0,{classes:{tooltip:"qtip-"+(arguments[0].name||"defaults")}},e.fn.qtip.styles.defaults),s=e.extend.apply(e,a),o=e.browser.msie?1:0,s.tip.size.width+=o,s.tip.size.height+=o,s.tip.size.width%2>0&&(s.tip.size.width+=1),s.tip.size.height%2>0&&(s.tip.size.height+=1),!0===s.tip.corner&&(s.tip.corner="center"!==t.options.position.corner.tooltip&&t.options.position.corner.tooltip),s}function m(e,t,i){var n={bottomRight:[[0,0],[t,i],[t,0]],bottomLeft:[[0,0],[t,0],[0,i]],topRight:[[0,i],[t,0],[t,i]],topLeft:[[0,0],[0,i],[t,i]],topMiddle:[[0,i],[t/2,0],[t,i]],bottomMiddle:[[0,0],[t,0],[t/2,i]],rightMiddle:[[0,0],[t,i/2],[0,i]],leftMiddle:[[t,0],[t,i],[0,i/2]]};return n.leftTop=n.bottomRight,n.rightTop=n.bottomLeft,n.leftBottom=n.topRight,n.rightBottom=n.topLeft,n[e]}function g(t){var i;return e("<canvas>").get(0).getContext?i={topLeft:[t,t],topRight:[0,t],bottomLeft:[t,0],bottomRight:[0,0]}:e.browser.msie&&(i={topLeft:[-90,90,0],topRight:[-90,90,-t],bottomLeft:[90,270,0],bottomRight:[90,270,-t]}),i}function v(){var e,t,i;e=this,i=e.getDimensions(),t='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:false" style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=\'0\'); border: 1px solid red; height:'+i.height+"px; width:"+i.width+'px" />',e.elements.bgiframe=e.elements.wrapper.prepend(t).children(".qtip-bgiframe:first")}e.fn.qtip=function(i,a){var s,o,r,l,c,u,d,h;if("string"==typeof i){if("object"!=typeof e(this).data("qtip")&&e.fn.qtip.log.error.call(self,1,e.fn.qtip.constants.NO_TOOLTIP_PRESENT,!1),"api"==i)return e(this).data("qtip").interfaces[e(this).data("qtip").current];if("interfaces"==i)return e(this).data("qtip").interfaces}else i||(i={}),("object"!=typeof i.content||i.content.jquery&&i.content.length>0)&&(i.content={text:i.content}),"object"!=typeof i.content.title&&(i.content.title={text:i.content.title}),"object"!=typeof i.position&&(i.position={corner:i.position}),"object"!=typeof i.position.corner&&(i.position.corner={target:i.position.corner,tooltip:i.position.corner}),"object"!=typeof i.show&&(i.show={when:i.show}),"object"!=typeof i.show.when&&(i.show.when={event:i.show.when}),"object"!=typeof i.show.effect&&(i.show.effect={type:i.show.effect}),"object"!=typeof i.hide&&(i.hide={when:i.hide}),"object"!=typeof i.hide.when&&(i.hide.when={event:i.hide.when}),"object"!=typeof i.hide.effect&&(i.hide.effect={type:i.hide.effect}),"object"!=typeof i.style&&(i.style={name:i.style}),i.style=p(i.style),l=e.extend(!0,{},e.fn.qtip.defaults,i),l.style=f.call({options:l},l.style),l.user=e.extend(!0,{},i);return e(this).each(function(){if("string"==typeof i){if(u=i.toLowerCase(),"object"==typeof(r=e(this).qtip("interfaces")))if(!0===a&&"destroy"==u)for(;r.length>0;)r[r.length-1].destroy();else for(!0!==a&&(r=[e(this).qtip("api")]),s=0;s<r.length;s++)"destroy"==u?r[s].destroy():!0===r[s].status.rendered&&("show"==u?r[s].show():"hide"==u?r[s].hide():"focus"==u?r[s].focus():"disable"==u?r[s].disable(!0):"enable"==u&&r[s].disable(!1))}else{for(d=e.extend(!0,{},l),d.hide.effect.length=l.hide.effect.length,d.show.effect.length=l.show.effect.length,!1===d.position.container&&(d.position.container=e(document.body)),!1===d.position.target&&(d.position.target=e(this)),!1===d.show.when.target&&(d.show.when.target=e(this)),!1===d.hide.when.target&&(d.hide.when.target=e(this)),o=e.fn.qtip.interfaces.length,s=0;s<o;s++)if("undefined"==typeof e.fn.qtip.interfaces[s]){o=s;break}c=new t(e(this),d,o),e.fn.qtip.interfaces[o]=c,"object"==typeof e(this).data("qtip")?(void 0===e(this).attr("qtip")&&(e(this).data("qtip").current=e(this).data("qtip").interfaces.length),e(this).data("qtip").interfaces.push(c)):e(this).data("qtip",{current:0,interfaces:[c]}),!1===d.content.prerender&&!1!==d.show.when.event&&!0!==d.show.ready?d.show.when.target.bind(d.show.when.event+".qtip-"+o+"-create",{qtip:o},function(t){h=e.fn.qtip.interfaces[t.data.qtip],h.options.show.when.target.unbind(h.options.show.when.event+".qtip-"+t.data.qtip+"-create"),h.cache.mouse={x:t.pageX,y:t.pageY},n.call(h),h.options.show.when.target.trigger(h.options.show.when.event)}):(c.cache.mouse={x:d.show.when.target.offset().left,y:d.show.when.target.offset().top},n.call(c))}})},e(document).ready(function(){e.fn.qtip.cache={screen:{scroll:{left:e(window).scrollLeft(),top:e(window).scrollTop()},width:e(window).width(),height:e(window).height()}};var t;e(window).bind("resize scroll",function(n){clearTimeout(t),t=setTimeout(function(){for("scroll"===n.type?e.fn.qtip.cache.screen.scroll={left:e(window).scrollLeft(),top:e(window).scrollTop()
}:(e.fn.qtip.cache.screen.width=e(window).width(),e.fn.qtip.cache.screen.height=e(window).height()),i=0;i<e.fn.qtip.interfaces.length;i++){var t=e.fn.qtip.interfaces[i];!0===t.status.rendered&&("static"!==t.options.position.type||t.options.position.adjust.scroll&&"scroll"===n.type||t.options.position.adjust.resize&&"resize"===n.type)&&t.updatePosition(n,!0)}},100)}),e(document).bind("mousedown.qtip",function(t){0===e(t.target).parents("div.qtip").length&&e(".qtip[unfocus]").each(function(){var i=e(this).qtip("api");e(this).is(":visible")&&!i.status.disabled&&e(t.target).add(i.elements.target).length>1&&i.hide(t)})})}),e.fn.qtip.interfaces=[],e.fn.qtip.log={error:function(){return this}},e.fn.qtip.constants={},e.fn.qtip.defaults={content:{prerender:!1,text:!1,url:!1,data:null,title:{text:!1,button:!1}},position:{target:!1,corner:{target:"bottomRight",tooltip:"topLeft"},adjust:{x:0,y:0,mouse:!0,screen:!1,scroll:!0,resize:!0},type:"absolute",container:!1},show:{when:{target:!1,event:"mouseover"},effect:{type:"fade",length:100},delay:140,solo:!1,ready:!1},hide:{when:{target:!1,event:"mouseout"},effect:{type:"fade",length:100},delay:0,fixed:!1},api:{beforeRender:function(){},onRender:function(){},beforePositionUpdate:function(){},onPositionUpdate:function(){},beforeShow:function(){},onShow:function(){},beforeHide:function(){},onHide:function(){},beforeContentUpdate:function(){},onContentUpdate:function(){},beforeContentLoad:function(){},onContentLoad:function(){},beforeTitleUpdate:function(){},onTitleUpdate:function(){},beforeDestroy:function(){},onDestroy:function(){},beforeFocus:function(){},onFocus:function(){}}},e.fn.qtip.styles={defaults:{background:"white",color:"#111",overflow:"hidden",textAlign:"left",width:{min:0,max:250},padding:"5px 9px",border:{width:1,radius:0,color:"#d3d3d3"},tip:{corner:!1,color:!1,size:{width:13,height:13},opacity:1},title:{background:"#e1e1e1",fontWeight:"bold",padding:"7px 12px"},button:{cursor:"pointer"},classes:{target:"",tip:"qtip-tip",title:"qtip-title",button:"qtip-button",content:"qtip-content",active:"qtip-active"}},cream:{border:{width:3,radius:0,color:"#F9E98E"},title:{background:"#F0DE7D",color:"#A27D35"},background:"#FBF7AA",color:"#A27D35",classes:{tooltip:"qtip-cream"}},light:{border:{width:3,radius:0,color:"#E2E2E2"},title:{background:"#f1f1f1",color:"#454545"},background:"white",color:"#454545",classes:{tooltip:"qtip-light"}},dark:{border:{width:3,radius:0,color:"#303030"},title:{background:"#404040",color:"#f3f3f3"},background:"#505050",color:"#f3f3f3",classes:{tooltip:"qtip-dark"}},red:{border:{width:3,radius:0,color:"#CE6F6F"},title:{background:"#f28279",color:"#9C2F2F"},background:"#F79992",color:"#9C2F2F",classes:{tooltip:"qtip-red"}},green:{border:{width:3,radius:0,color:"#A9DB66"},title:{background:"#b9db8c",color:"#58792E"},background:"#CDE6AC",color:"#58792E",classes:{tooltip:"qtip-green"}},blue:{border:{width:3,radius:0,color:"#ADD9ED"},title:{background:"#D0E9F5",color:"#5E99BD"},background:"#E5F6FE",color:"#4D9FBF",classes:{tooltip:"qtip-blue"}}}}(jQuery),RubricsTreeView=function(){var e="#rubrics-treeview",t={},i=function(e,t){if(!e.data.unselectable&&(t.pageX||t.pageY)){var i=e.getEventTargetType(t);if("expander"!==i&&"checkbox"!==i){var n=e.span.getElementsByTagName("a");n[0]&&($.browser.msie||n[0].focus())}}},n=function(e){if(!e.data.unselectable){e._userActivate();var t=e.span.getElementsByTagName("a");return t[0]&&!$.browser.msie&&t[0].focus(),!1}},a=function(e){if(e.data.is_symlink)return void e.tree.loadKeyPath(e.data.symlink_target_path,function(e){e.expand()});if(!e.data.unselectable){var t=[],i=e.parent;for(t.push({title:e.data.title,joined_path:e.data.joined_path});null!=i;)i.data.title&&t.push({title:i.data.title,joined_path:i.data.joined_path}),i=i.parent;RubricsTreeViewSelector.selectRubric(e.data.key,e.data.title,t)}},s=function(e){if(!e.data.unselectable){var t=[],i=$(RubricsTreeView.searchTreeId).dynatree("getTree").getNodeByKey(e.data.parent_id);for(t.push({title:e.data.title.replace(/<span>.*?<\/span>/gi,""),joined_path:e.data.joined_path});null!=i;)i.data.title&&t.push({title:i.data.title,joined_path:i.data.joined_path}),i=i.parent;RubricsTreeViewSelector.selectRubric(e.data.key,e.data.title,t)}};return{treeId:"#tree_rubric",searchTreeId:"#search_tree",searchRubricsId:"#search_rubrics",popup:!1,pathOfLinks:!1,reversePath:!1,baseRubricUrl:null,callBacks:{},multiSelect:!1,suggestionsUrl:"",init:function(o){var r=this;this.popup=o.popup||!1,this.pathOfLinks=o.path_of_links,this.reversePath=o.reverse_path,this.baseRubricUrl=o.base_rubric_url,this.multiSelect=o.multiSelect||!1,this.notReposition=o.notReposition||!1,this.suggestionsUrl=o.suggestions_url||"",o.hidden_id&&RubricsTreeViewSelector.setRubricsId(o.hidden_id),t=o.ajax_params,RubricsTreeViewSearch.setSearchUrl(o.search_url),RubricsTreeViewSearch.setNotFoundResponse(o.not_found_response),RubricsTreeViewSearch.initKeys(),$(this.treeId).dynatree({children:o.root_rubrics,selectMode:r.multiSelect?3:1,checkbox:r.multiSelect,clickFolderMode:3,autoCollapse:!0,debugLevel:0,imagePath:"/images/dynatree/",onLazyRead:function(e){e.appendAjax({url:o.rubrics_tree_url,type:"POST",data:jQuery.extend({parent_id:e.data.key},t)})},onPostInit:function(){o.selected_path&&this.loadKeyPath(o.selected_path,function(e,t){"loaded"==t?e.expand():"ok"==t&&e.activate()})},onClick:function(e,t){i(e,t),setTimeout(RubricsTreeView.repositionPopup,500)},onDblClick:function(e,t){return n(e,t)},onActivate:function(e){return a(e)}}),$(this.searchTreeId).dynatree({children:[],selectMode:1,clickFolderMode:1,debugLevel:0,imagePath:"/images/dynatree/",onActivate:function(e){RubricsTreeViewSearch.searchByRubric(e.data.key)},onKeydown:function(e,t){if(39==t.keyCode&&t.ctrlKey){t.preventDefault(),t.stopPropagation();var i=$(r.searchRubricsId).dynatree("getRoot");if(i.hasChildren()){i.getChildren()[0].focus()}return!1}},onExpand:function(){r.onResize()}}),$(this.searchRubricsId).dynatree({children:[],selectMode:r.multiSelect?3:1,checkbox:r.multiSelect,debugLevel:0,imagePath:"/images/dynatree/",onClick:function(e,t){if(r.callBacks.onSelectSearchTree&&!r.callBacks.onSelectSearchTree(e,t))return!0;i(e,t),s(e)},onDblClick:function(e,t){return n(e,t)},onKeydown:function(e,t){if(37==t.keyCode&&t.ctrlKey){t.preventDefault(),t.stopPropagation();var i=$(r.searchTreeId).dynatree("getRoot");if(i.hasChildren()){i.getChildren()[0].focus()}return!1}}}),$doc.on("click",".show-all-search-rubrics",function(e){e.preventDefault(),e.stopPropagation(),RubricsTreeViewSearch.search(null,"")}),$doc.on("click",".show-tree-action",function(e){e.preventDefault(),e.stopPropagation(),$(r.treeId).show(),$(this).parent().hide(),$("#search_rubrics_results").hide(),$("#suggestions-rubric").hide(),$(".uf-rubrics").removeClass("uf-rubrics-noResults"),RubricsTreeViewSearch.emptyQueryEl()}),this.popup&&$(e).dialog({autoOpen:!1,modal:!0,width:"auto",height:"auto",title:"\u0420\u0443\u0431\u0440\u0438\u043a\u0430\u0442\u043e\u0440",buttons:r.multiSelect?{"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":function(){r.callBacks.onSave&&(r.callBacks.onSave(),$(this).dialog("close"))},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c":function(){$(this).dialog("close")}}:null,popup:function(){RubricsTreeViewSearch.focusQueryElement(),setTimeout(r.repositionPopup,0)},close:function(){r.callBacks.onUnPopup&&r.callBacks.onUnPopup()}})},repositionPopup:function(){if(!RubricsTreeView.notReposition){var t=$(e).dialog("widget"),i=$doc.scrollTop(),n=$doc.scrollLeft(),a=Math.max(n+($win.width()-t.outerWidth(!0))/2,n),s=Math.max(i+($win.height()-t.outerHeight(!0))/2,i);t.animate({left:a,top:s},{duration:300})}},showTree:function(){RubricsTreeViewSearch.lock(),$("#choose_rubric").show(),$("#rubric_title").focus(),$("#suggestions-rubric").hide()},popupTreeView:function(t){var i=this;$(e).dialog("open"),RubricsTreeView.suggestionsUrl&&($("#rubric_preview_"+t).data("rubric")||($("#tree_rubric, #rubric_search_result").hide(),$("#suggestions-rubric").empty().show().addClass("loader"),$.get(RubricsTreeView.suggestionsUrl.replace("?","/"+t+"?"),function(t){$("#suggestions-rubric").removeClass("loader"),t.length?($.each(t,function(t,i){$("#suggestions-rubric").append($("<div>").addClass("suggestions-rubric").data("id",i.id).html(i.title).click(function(){var t=$(this);RubricsTreeView.callBacks.onSelectRubric(t.data("id"),t.text(),[t.text()]),$(e).dialog("close")}))}),$("#suggestions-rubric").append($(".show-tree-action").clone(!0))):($("#suggestions-rubric").empty().hide(),$("#tree_rubric").show())}))),this.callBacks.onPopup&&this.callBacks.onPopup(t);var n=$(i.treeId).dynatree("getActiveNode");n&&($("a",n.span).focus(),n.deactivate()),RubricsTreeViewSelector.changeRubric(),RubricsTreeViewSearch.focusQueryElement()},unPopupTreeView:function(){$(e).dialog("close")},isPopuped:function(){return!!$(e).dialog("isOpen")},onResize:function(){var e=Math.max($("#rubric_search_result .left-col .dynatree-container").height(),0);$("#rubric_search_result .right-col").css("height",e)}}}(),RubricsTreeViewSearch=function(){var e=!1,t=!1,i="#rubric_title",n="#rubric_search_result",a=null,s=2,o=null,r="",l="",c=function(e){a=null,e&&alert(e)},u=function(){t=!0,element=f(),element&&element.addClass("loading")},d=function(){element=f(),element&&element.removeClass("loading"),t=!1},h=function(e,t){o={query:e,rubric:t}},p=function(e){if(!e){var t=f();if(!t)return null;e=t.val()}return e=$.trim(e),e.length<s?null:e},f=function(){var e=$(i);return e.length?e:(c("Query string input element with id ["+i+"] was not found"),null)},m=function(){var e=$(n);return e.length?e:(c("Result conteiner element with id ["+n+"] was not found"),null)},g=function(e){var t;$(RubricsTreeView.treeId).hide(),$("#suggestions-rubric").hide(),$(".ui-dialog .dynatree-container").css("max-height",""),RubricsTreeViewSearch.previousRubric()||(t=$(RubricsTreeView.searchTreeId).dynatree("getTree").getRoot(),t.removeChildren(),t.addChild(e.tree),RubricsTreeViewSearch.focusQueryElement()),t=$(RubricsTreeView.searchRubricsId).dynatree("getTree").getRoot(),t.removeChildren(),t.addChild(e.rubrics),0==e.count?(RubricsTreeViewSearch.previousRubric()||RubricsTreeViewSearch.showNotFoundMessage(),$("#search_rubrics_results").html("\u0441\u043e\u0436\u0430\u043b\u0435\u0435\u043c, \u043f\u043e\u0438\u0441\u043a \u0432 \u0440\u0443\u0431\u0440\u0438\u043a\u0430\u0445 \u043d\u0435 \u0434\u0430\u043b \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432").show()):e.total_entries>e.count?(RubricsTreeViewSearch.hideNotFoundMessage(),$("#search_rubrics_results").html("\u043f\u043e\u043a\u0430\u0437\u0430\u043d\u043e "+e.count+' \u0438\u0437 <a class="show-all-search-rubrics" href="#" title="\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430">'+e.total_entries+"</a>"),$(".uf-rubrics").removeClass("uf-rubrics-noResults")):(RubricsTreeViewSearch.hideNotFoundMessage(),$("#search_rubrics_results").empty(),$(".uf-rubrics").removeClass("uf-rubrics-noResults")),m().show(),RubricsTreeView.popup&&RubricsTreeView.repositionPopup(),RubricsTreeView.onResize(),d(),b()},v=function(){c("Search error"),d(),b()},b=function(){this._queue&&(params=this._queue.shift(),params&&RubricsTreeViewSearch.search(params.query,params.rubric))},y=function(e,t){this._queue=[{query:e,rubric:t}]};return{initKeys:function(){var e=this;$doc.keydown(function(t){70==t.keyCode&&t.ctrlKey&&RubricsTreeView.isPopuped()&&(t.preventDefault(),t.stopPropagation(),e.focusQueryElement())})},focusQueryElement:function(){f().focus()},setSearchUrl:function(e){r=e},setNotFoundResponse:function(e){l=e},lock:function(){e=!0},reset:function(){o=null,$(n).hide(),RubricsTreeViewSearch.hideNotFoundMessage(),this.focusQueryElement()},emptyQueryEl:function(){f().val("")},unlock:function(){e=!1},searchByRubric:function(e){this.search(null,e)},search:function(i,n){if(null===n&&(n=RubricsTreeViewSearch.previousRubric()),t)return void y(i,n);if(!(i=p(i))&&!n)return RubricsTreeView.showTree(),void(RubricsTreeView.popup&&RubricsTreeView.repositionPopup());if(o){if(i==o.query&&n==o.rubric)return;if(!i&&n&&o.rubric&&n==o.rubric)return}h(i,n),params={query:i},n&&(params.rubric_id=n);var a=this;e||u(),$.ajax({data:params,dataType:"json",type:"get",url:r,success:function(e){g.call(a,e||null)},error:function(){v.call(a)}})},previousRubric:function(){return o?o.rubric:null},showNotFoundMessage:function(){$("#rubrics-search-notfound-message").show(),$(".uf-rubrics").addClass("uf-rubrics-noResults")},hideNotFoundMessage:function(){$("#rubrics-search-notfound-message").hide()}}}(),RubricsTreeViewSelector=function(){var e="#rubric_preview_edit",t="#rubric_preview_delete",i="#choose_rubric",n="#new_demand #choose_rubric",a="#rubrics-treeview",s="#choose_rubric",o="#rubric_preview",r="#product_rubric_id",l="#rubric_preview_container",c=function(e){$(o).html(e)},u=function(e){$(r).val(e)},d=function(){$(l).show()},h=function(){$(e).hide()},p=function(){$(e).show()},f=function(){$(t).show()},m=function(){$(i).hide(),$(n).hide()},g=function(){$(s).hide()},v=function(){$(i).show(),$(a).show(),$(n).hide(),setTimeout(RubricsTreeView.repositionPopup,500)},b=function(e,t){if(RubricsTreeView.pathOfLinks){var i=RubricsTreeView.baseRubricUrl.replace("/_JOINED_PATH_",e.joined_path);t.push('<a href="'+i+'" target="_blank">'+e.title+"</a>")}else t.push(e.title)};return{setContainers:function(e,t,i){r=e,o=t,l=i},setRubricsId:function(e){r=e},selectRubric:function(e,t,i){d(),u(e),p(),f(),m(),g(),"undefined"!=typeof ProductsDataTable&&RubricsTreeView.popup&&ProductsDataTable.hideButtons();var n=[];i.length>1?$.each(i,function(e){this.title==i[1].title&&0==e||b(this,n)}):$.each(i,function(){b(this,n)}),RubricsTreeView.reversePath||n.reverse(),c(n.join(" / ")),RubricsTreeView.callBacks.onSelectRubric&&RubricsTreeView.callBacks.onSelectRubric(e,t,n),RubricsTreeView.popup&&RubricsTreeView.unPopupTreeView()},changeRubric:function(){h(),v()}}}();var urlParam=window.location.href,last=urlParam.length-1;"/"==urlParam.charAt(last)&&(urlParam=urlParam.slice(0,-1));var paket;$("a[data-paket], td[data-paket] a").click(function(){paket=void 0===$(this).data("paket")?$(this).parents("td").data("paket"):$(this).data("paket"),_gaq.push(["_trackPageview",urlParam+"/form-subscription-"+paket])}),$("a[data-ymlpaket], td[data-ymlpaket] a").click(function(){paket=void 0===$(this).data("ymlpaket")?$(this).parents("td").data("ymlpaket"):$(this).data("ymlpaket"),_gaq.push(["_trackPageview",urlParam+"/yml-form-subscription-"+paket])}),$(".js-psfss-input").keypress(function(){void 0===$(this).data("changed")&&($(this).data("changed","changed"),_gaq.push(["_trackEvent","\u0427\u0438\u0442\u0430\u0442\u0435\u043b\u0438","\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u043f\u043e\u0438\u0441\u043a","\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0442\u0435\u043a\u0441\u0442\u0430"]))}),$(".js-psfc-select").change(function(){_gaq.push(["_trackEvent","\u0427\u0438\u0442\u0430\u0442\u0435\u043b\u0438","\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u043f\u043e\u0438\u0441\u043a","\u0421\u043c\u0435\u043d\u0430 \u0440\u0435\u0433\u0438\u043e\u043d\u0430"])}),$(".js-search-submit").click(function(){_gaq.push(["_trackEvent","\u0427\u0438\u0442\u0430\u0442\u0435\u043b\u0438","\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u043f\u043e\u0438\u0441\u043a","\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430"])}),$(document).on("click",".js-rubrics-menu a",function(){_gaq.push(["_trackEvent","\u0427\u0438\u0442\u0430\u0442\u0435\u043b\u0438","\u0412\u0435\u0440\u0445\u043d\u0435\u0435 \u043c\u0435\u043d\u044e",""])}),$doc.on("click",".js-companyInfo-nameLink",function(){_gaq.push(["_trackEvent","\u0427\u0438\u0442\u0430\u0442\u0435\u043b\u0438","\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043d\u0430 \u0442\u043e\u0432\u0430\u0440\u0435","\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a"])}),$doc.on("click",".js-companyInfo_mailGA",function(){_gaq.push(["_trackEvent","\u0427\u0438\u0442\u0430\u0442\u0435\u043b\u0438","\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043d\u0430 \u0442\u043e\u0432\u0430\u0440\u0435","\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043f\u0440\u043e\u0434\u0430\u0432\u0446\u0443"])}),$doc.on("click",".js-buyLink_ga",function(){_gaq.push(["_trackEvent","\u0427\u0438\u0442\u0430\u0442\u0435\u043b\u0438","\u0417\u0430\u043a\u0430\u0437 \u0442\u043e\u0432\u0430\u0440\u0430",""]),_gaq.push(["_trackPageview","/form-splash-portal"])}),$doc.on("click",".js-siteUrl-link",function(){_gaq.push(["_trackEvent","\u0427\u0438\u0442\u0430\u0442\u0435\u043b\u0438","\u0412\u043d\u0435\u0448\u043d\u0438\u0439 \u0441\u0430\u0439\u0442",""])}),$doc.on("click",".portal-search-form-fixed .js-search-submit",function(){_gaq.push(["_trackEvent","\u0427\u0438\u0442\u0430\u0442\u0435\u043b\u0438","\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430","\u041f\u043e\u0438\u0441\u043a \u0438\u0437 \u0431\u0430\u0440\u0430"])}),$doc.on("click",".b-searhCompany_fixed .js-searhCompany-submit",function(){_gaq.push(["_trackEvent","\u0427\u0438\u0442\u0430\u0442\u0435\u043b\u0438","\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430","\u041f\u043e\u0438\u0441\u043a \u0438\u0437 \u0431\u0430\u0440\u0430"])}),$doc.on("click",".js-mainSort-head",function(){-1!=$(this).text().indexOf("\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435")&&_gaq.push(["_trackEvent","\u0427\u0438\u0442\u0430\u0442\u0435\u043b\u0438","\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043b\u0438\u0441\u0442\u0438\u043d\u0433\u0430","\u0412\u0441\u0435 \u0442\u043e\u0432\u0430\u0440\u044b \u043f\u043b\u0430\u0448\u043a\u0430"])}),$doc.on("click",".js-summary-allGoods",function(){_gaq.push(["_trackEvent","\u0427\u0438\u0442\u0430\u0442\u0435\u043b\u0438","\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043b\u0438\u0441\u0442\u0438\u043d\u0433\u0430","\u0412\u0441\u0435 \u0442\u043e\u0432\u0430\u0440\u044b \u0441\u0441\u044b\u043b\u043a\u0430"])}),$doc.on("click",".js-traits_moreLinkOther",function(){_gaq.push(["_trackEvent","\u0427\u0438\u0442\u0430\u0442\u0435\u043b\u0438","\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438","E\u0449\u0435-\u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438"])}),$doc.on("click",".js-traits_moreLinkMain",function(){_gaq.push(["_trackEvent","\u0427\u0438\u0442\u0430\u0442\u0435\u043b\u0438","\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438","E\u0449\u0435-\u0440\u0443\u0431\u0440\u0438\u043a\u0438"])}),$(document).on("click",".js-writeMessage_listingGASC",function(){_gaq.push(["_trackPageview","/form-splash-sc"])}),$(document).on("click",".js-buyLink_scGA",function(){_gaq.push(["_trackPageview","/form-splash-sctov"])}),$(document).on("click",".js-mail_scGA",function(){_gaq.push(["_trackPageview","/form-contact-sctov"])}),$(document).on("click",".js-mail_ga",function(){_gaq.push(["_trackPageview","/form-contact-portal"])}),$(document).on("click",".js-writeMessage_listingFirmsGA",function(){_gaq.push(["_trackPageview","/form-contact-company"])}),$(document).on("click",".js-writeMessage_listingDemandsGA",function(){_gaq.push(["_trackPageview","/form-contact-spros"])}),$(document).on("click",".js-writeMessage_demandsGA",function(){_gaq.push(["_trackPageview","/form-contacts-demands"])}),$(document).on("click",".js-path-ga",function(){_gaq.push(["_trackEvent","\u0427\u0438\u0442\u0430\u0442\u0435\u043b\u0438","\u0425\u043b\u0435\u0431\u043d\u044b\u0435 \u043a\u0440\u043e\u0448\u043a\u0438","\u041f\u0435\u0440\u0435\u0445\u043e\u0434"])}),$(document).on("click",".js-prl-link-ga",function(){_gaq.push(["_trackEvent","\u0427\u0438\u0442\u0430\u0442\u0435\u043b\u0438","\u0411\u043e\u043a\u043e\u0432\u043e\u0435 \u043c\u0435\u043d\u044e \u0442\u043e\u0432\u0430\u0440\u0430","\u041f\u0435\u0440\u0435\u0445\u043e\u0434"])}),$(document).on("click",".js-prl-toggle-ga",function(){_gaq.push(["_trackEvent","\u0427\u0438\u0442\u0430\u0442\u0435\u043b\u0438"," \u0411\u043e\u043a\u043e\u0432\u043e\u0435 \u043c\u0435\u043d\u044e \u0442\u043e\u0432\u0430\u0440\u0430","\u0412\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"])}),$(document).on("click",".js-more-span-portal-ga",function(){_gaq.push(["_trackEvent","\u0427\u0438\u0442\u0430\u0442\u0435\u043b\u0438"," \u0411\u043e\u043a\u043e\u0432\u043e\u0435 \u043c\u0435\u043d\u044e \u0442\u043e\u0432\u0430\u0440\u0430","\u0412\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"])}),$(document).on("click",".js-tmi-link-advice-ga",function(){_gaq.push(["_trackEvent","\u041f\u0440\u043e\u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0435","\u0421\u043e\u0432\u0435\u0442\u044b","\u0420\u0430\u0437\u0434\u0435\u043b"])}),$(document).on("click",".js-tmi-link-buttons-ga",function(){_gaq.push(["_trackEvent","\u041f\u0440\u043e\u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0435","\u041a\u043d\u043e\u043f\u043a\u0438","\u0420\u0430\u0437\u0434\u0435\u043b"])}),ListingSwitcher=function(){var e,t,i,n,a,s,o,r,l,c,u;return{initialize:function(s,o,r,l,c,d){e=r,t=o,u=l,i=c,n=d,a=s},afterChangeListingStyle:function(e){s=e},afterChangeListingSort:function(e){o=e},afterChangeListingGrouped:function(e){l=e},afterReloadListing:function(e){r=e},applyListingStyle:function(e,i,n){return e.blur(),!c&&($(e).addClass("b-views_itemActive").siblings().removeClass("b-views_itemActive"),t=i,this.reloadListing(n),s&&s(i),!1)},toggleListingSort:function(t,i,n){if(t.blur(),c)return!1;var a=$(t);return a.hasClass("b-sort_itemAsc")?(e=i+"_desc",t.className="b-sort_itemActive b-sort_itemDesc"):(e=i+"_asc",t.className="b-sort_itemActive b-sort_itemAsc"),a.siblings().removeClass(),this.reloadListing(n),o&&o(e),!1},cancelListingSort:function(t,i){return e="",t.className="b-sort_itemActive b-sort_itemAsc",$(t).siblings().removeClass(),this.reloadListing(i),o&&o(null),!1},toggleGroupByCompany:function(t,i,n){if(t.blur(),c)return!1;e="",i.className="b-sort_itemActive b-sort_itemAsc",$(i).siblings().removeClass();var a=$(t);u?(u=!1,a.html(a.data("grouped-false-text"))):(u=!0,a.html(a.data("grouped-true-text"))),l&&l(u),this.reloadListing(n)},coverList:function(){var e,t=$("#"+a);$doc.data("listing-cover")||(e=$("<div></div>").attr({id:"listing-cover"}),$doc.data("listing-cover",e),$("body").append($doc.data("listing-cover"))),$doc.data("listing-cover").css({width:t.width()+20,height:t.height(),left:t.offset().left-10,top:t.offset().top}).show()},unCoverList:function(){$doc.data("listing-cover").hide()},reloadListing:function(s){this.coverList(),c=!0,$.ajax({type:"GET",url:i,data:$.extend({},n,{listing_sort:e,listing_style:t,group_by_company:u}),success:function(i){$("#"+a).html(i),r&&r(t,e,u),$(i).find("span[data-to]").length&&spanToLinks()},complete:function(){$doc.data("listing-cover").hide(),c=!1,void 0!==s&&$("#js-adfoxListingBannerContainer").html(s)}})},getCurrentStyle:function(){return t},getCurrentSort:function(){return e}}}(),$(document).ready(inputLengthCheck()),AdManager=function(e){var t=[],i=function(){e(".b-b-item[data-url]").each(function(){var i=e(this);""!==i.data("url")&&(t[t.length]=i)})},n=function(){var i,n=t.length;for(i=0;i<n;i++)t[i].append(e("<iframe>",{"class":"dn",src:"/get_banner.html?index="+i+"&src="+encodeURIComponent(t[i].data("url"))}))},a=function(e,i){i&&i.indexOf("document.write")<0?t[e].html(i):(t[e].hide(),"undefined"!=typeof console&&"undefined"!=typeof console.debug&&(void 0===i?console.warn('"'+t[e].data("url")+'" - \u043e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438.'):i.indexOf("document.write")>=0?console.error('"'+t[e].data("url")+'" - \u0432 \u043a\u043e\u0434\u0435 \u0438\u043c\u0435\u0435\u0442\u0441\u044f "document.write".'):""===i&&console.log('"'+t[e].data("url")+'" - \u043f\u0443\u0441\u0442\u043e\u0439 \u0431\u0430\u043d\u043d\u0435\u0440.')))};return{init:function(){i(),n()},render:function(e,t){a(e,t)}}}(jQuery),function(e,t){var i=e(t);e.fn.lazyload=function(n){function a(){var t=0;o.each(function(){var i=e(this);if(!r.skip_invisible||i.is(":visible"))if(e.abovethetop(this,r)||e.leftofbegin(this,r));else if(e.belowthefold(this,r)||e.rightoffold(this,r)){if(++t>r.failure_limit)return!1}else i.trigger("appear")})}var s,o=this,r={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return n&&(undefined!==n.failurelimit&&(n.failure_limit=n.failurelimit,delete n.failurelimit),undefined!==n.effectspeed&&(n.effect_speed=n.effectspeed,delete n.effectspeed),e.extend(r,n)),s=r.container===undefined||r.container===t?i:e(r.container),0===r.event.indexOf("scroll")&&s.bind(r.event,function(){return a()}),this.each(function(){var t=this,i=e(t);t.loaded=!1,i.one("appear",function(){if(!this.loaded){if(r.appear){var n=o.length;r.appear.call(t,n,r)}e("<img />").bind("load",function(){i.hide().attr("src",i.data(r.data_attribute))[r.effect](r.effect_speed),t.loaded=!0;var n=e.grep(o,function(e){return!e.loaded});if(o=e(n),r.load){var a=o.length;r.load.call(t,a,r)}}).attr("src",i.data(r.data_attribute)).hide().show(1)}}),0!==r.event.indexOf("scroll")&&i.bind(r.event,function(){t.loaded||i.trigger("appear")})}),i.bind("resize",function(){a()}),a(),this},e.belowthefold=function(n,a){return(a.container===undefined||a.container===t?i.height()+i.scrollTop():e(a.container).offset().top+e(a.container).height())<=e(n).offset().top-a.threshold},e.rightoffold=function(n,a){return(a.container===undefined||a.container===t?i.width()+i.scrollLeft():e(a.container).offset().left+e(a.container).width())<=e(n).offset().left-a.threshold},e.abovethetop=function(n,a){return(a.container===undefined||a.container===t?i.scrollTop():e(a.container).offset().top)>=e(n).offset().top+a.threshold+e(n).height()},e.leftofbegin=function(n,a){return(a.container===undefined||a.container===t?i.scrollLeft():e(a.container).offset().left)>=e(n).offset().left+a.threshold+e(n).width()},e.inviewport=function(t,i){return!(e.rightofscreen(t,i)||e.leftofscreen(t,i)||e.belowthefold(t,i)||e.abovethetop(t,i))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return!e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window),function(e){e.fn.placeholder=function(){function t(e,t){return t in document.createElement(e)}function i(){o.css("z-index","-1")}function n(){o.css("z-index","10")}var a=this.attr("data-placeholder"),s=this,o=s.parent().find(".tooltip"),r={position:"relative",height:s.outerHeight(!0),width:s.outerWidth(!0),background:"#fff",border:"none"},l={position:"absolute","padding-left":parseInt(s.css("padding-left"))+parseInt(s.css("border-left-width"))+"px","padding-top":parseInt(s.css("padding-top"))+parseInt(s.css("border-top-width"))+"px","font-style":s.css("font-style"),color:"#ccc",cursor:"text"},c={position:"relative",top:"0",margin:"0"};return a&&(t("input","placeholder")?s.removeAttr("data-placeholder").attr("placeholder",a):(o.length||(o=e("<label>").addClass("tooltip").attr("for",s.attr("id")),s.wrap(e("<div>").addClass("tooltip-block").css(r)).before(o)),s.css(c).parent().css(r),o.text(a).css(l),""!==s.val()?i(this):n(this),s.bind("focus",function(){i()}).bind("blur",function(){""!==e(this).val()?i():n()}))),this}}(jQuery),jQuery.cookie=function(e,t,i){if(arguments.length>1&&"[object Object]"!==String(t)){if(i=jQuery.extend({},i),null!==t&&t!==undefined||(i.expires=-1),"number"==typeof i.expires){var n=i.expires,a=i.expires=new Date;a.setDate(a.getDate()+n)}return t=String(t),document.cookie=[encodeURIComponent(e),"=",i.raw?t:encodeURIComponent(t),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}i=t||{};var s,o=i.raw?function(e){return e}:decodeURIComponent;return(s=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?o(s[1]):null},function(e){var t,i={},n=!1,a={countView:3,showScroll:!0,animate:1e3,animateScrollbar:100,countSlide:1,classBlock:"contentslider-block",classScrollbar:"contentslider-scrollbar",classScrollbarButton:"contentslider-scrollbar-button",classLeftArrow:"contentslider-left-arrow",classRightArrow:"contentslider-right-arrow",classLeftArrowDisable:"contentslider-left-arrow-disable",classRightArrowDisable:"contentslider-right-arrow-disable",minWidthScrollBtn:100,autoResize:!0,wheelMouse:!1,arrowsBackground:null},s=function(e){var i=0,n=document.documentElement;return null!=document.attachEvent?i=window.event.clientX+(n.scrollLeft||document.body.scrollLeft):!document.attachEvent&&document.addEventListener&&(i=e.clientX+window.scrollX),i-=t.parent().offset().left,{x:i}},o=function(e,i){var n,a=t.parent(),o=a.width(),r=a.parent().children("ul"),l=r.data("options"),c=r.children("li"),u=c.first(),i=i||s(e).x;t.data("ratio");i=Math.min(i-_scrollBtnOffset,o-t.width()),i=Math.max(i+_scrollBtnOffset,_scrollBtnOffset),t.css("left",i-_scrollBtnOffset+"px"),n=parseInt(t.css("left"))/(o-t.width()),u.css("marginLeft",-1*u.data("width")*n*(c.length-l.countView)+parseInt(u.data("defaultLeftMargin"))||parseInt(u.data("defaultLeftMargin"))+"px")},r=function(){var e,i,n=t.parent(),a=n.width(),s=n.parent(),o=s.children("ul"),r=o.data("options"),l=o.children("li"),c=l.first(),u=t.data("ratio"),d=parseInt(t.css("left"))/(a-t.width()),h=Math.round(d*(l.length-r.countView)),p=(h+r.countView)/l.length*a-u,f=Math.floor(-1*c.data("width")*h+parseInt(c.data("defaultLeftMargin")))||parseInt(c.data("defaultLeftMargin"));r.classLeftArrow&&r.classRightArrow&&(e=s.find("."+r.classLeftArrow).removeClass(r.classLeftArrowDisable),i=s.find("."+r.classRightArrow).removeClass(r.classRightArrowDisable),f-parseInt(c.css("paddingRight"))<(r.countView-l.length)*(c.data("width")-4)&&i.addClass(r.classRightArrowDisable||""),f+parseInt(c.css("paddingRight"))>=parseInt(c.data("defaultLeftMargin"))&&e.addClass(r.classLeftArrowDisable||"")),t.animate({left:p},r.animateScrollbar),c.animate({"margin-left":f},r.animateScrollbar,function(){o.find("img.lazy").lazyload()})},l=function(e){var t,i,n,a,s,o,r,l=e.parent(),c=l.children("ul"),u=c.data("options"),d=l.children("."+u.classScrollbar),h=d.children("."+u.classScrollbarButton),p=c.children("li"),f=p.first(),m=parseInt(f.css("marginLeft")),g=f.data("width"),v=(u.countView-p.length+1)*g,b=Math.round(Math.abs(m/g));c.data("disabled")||("left"==e.data("type")?(i=m+g*Math.min(u.countSlide,b),n=i<=parseInt(f.data("defaultLeftMargin")),a=l.children("."+u.classRightArrow)):(t=p.length-b-u.countView,i=m-g*Math.min(t-u.countSlide==1?++u.countSlide:u.countSlide,p.length-b-u.countView),n=m>v,a=l.children("."+u.classLeftArrow)),r=(Math.round(Math.abs(i/g))+u.countView)/p.length*d.width()-h.data("ratio"),n?(c.data("disabled",1),"left"==e.data("type")?(s=u.classLeftArrowDisable,o=u.classRightArrowDisable,n=i>=parseInt(f.data("defaultLeftMargin"))):(s=u.classRightArrowDisable,o=u.classLeftArrowDisable,n=i<=v),a.removeClass(o),n&&e.addClass(s||""),f.animate({marginLeft:Math.round(i)},u.animate,function(){c.data("disabled",0),c.find("img.lazy").lazyload()}),u.showScroll&&h.animate({left:r},u.animate)):e.addClass(u.classDisable||""))},c=function(e){var t,i,n=e.data("options"),a=e.children("li"),s=a.first();t=2*parseInt(s.css("paddingLeft"))+2*parseInt(s.css("borderLeftWidth"))+2*parseInt(s.css("marginLeft"))+2,i=Math.floor(e.width()/n.countView)-t,a.width(i)},u=function(t){t.each(function(){var t,i,n=e(this),a=n.parent(),s=n.data("options"),o=n.children("li"),r=o.first(),l=a.children("."+s.classScrollbar),u=l.children("."+s.classScrollbarButton),d=a.find("."+s.classLeftArrow),h=a.find("."+s.classRightArrow);c(n),r.css("marginLeft",r.data("defaultLeftMargin")),r.data("width",r.width()+2*parseInt(r.css("paddingLeft"))+2*parseInt(r.css("marginLeft"))+2*parseInt(r.css("borderLeftWidth"))+4),s.showScroll&&s.countView<o.length&&(l.width(n.width()),i=o.length/s.countView,
t=Math.round(l.width()/i),u.width(Math.max(t,s.minWidthScrollBtn)),u.data("ratio",t),u.css("left",0).data("ratio",t)),d.addClass(s.classLeftArrowDisable||""),s.countView>=o.length?h.addClass(s.classRightArrowDisable||""):h.removeClass(s.classRightArrowDisable)})},d=function(t){var i=e(this),n=i.parent(),a=i.data("options"),s=n.find("."+a.classLeftArrow),o=n.find("."+a.classRightArrow),r=0;try{if(t.wheelDelta?r=t.wheelDelta/120:t.detail&&(r=-t.detail/3),r<0){if(o.hasClass(a.classRightArrowDisable)&&!i.data("disabled"))return!0;o.click()}else{if(s.hasClass(a.classLeftArrowDisable)&&!i.data("disabled"))return!0;s.click()}t.preventDefault()}catch(e){}},h=function(a){a.each(function(){var s,h,p,f,m,g,v=e(this).data("options",e.extend({},i)),b=v.data("options"),y=e("<div>").addClass(b.classBlock||""),_=v.children("li"),w=_.first(),$=v.get(0);v.wrap(y),v.css("whiteSpace","nowrap"),b.wheelMouse&&($.addEventListener&&$.addEventListener("DOMMouseScroll",d,!1),$.onmousewheel=d),b.classLeftArrow&&b.classRightArrow&&(s=e("<div>").addClass(b.classLeftArrow).data("type","left").click(function(){l(e(this))}),h=e("<div>").addClass(b.classRightArrow).data("type","right").click(function(){l(e(this))}),s.addClass(b.classLeftArrowDisable||""),b.countView>=_.length&&(h.addClass(b.classRightArrowDisable||""),v.data("disabled",1)),v.before(s),v.after(h),b.arrowsBackground&&(s.css({background:b.arrowsBackground}),h.css({background:b.arrowsBackground}))),b.showScroll&&b.countView<_.length&&(p=e("<div>").addClass(b.classScrollbar||"").width(v.width()).mousedown(function(i){var a=e(this);n||(_scrollBtnOffset=0,t=a.children("div"),o(i,i.clientX-a.offset().left),r())}),f=e("<div>").addClass(b.classScrollbarButton||"").mousedown(function(i){return t=e(this),_scrollBtnOffset=i.clientX-parseInt(t.css("left"))-t.parent().offset().left,n=!0,!1}),p.append(f),v.after(p),m=_.length/b.countView,g=Math.round(p.width()/m),f.width(Math.max(g,b.minWidthScrollBtn)),f.data("ratio",g)),w.data("defaultLeftMargin",w.css("marginLeft")),c(v),w.data("width",w.width()+2*parseInt(w.css("paddingLeft"))+2*parseInt(w.css("marginLeft"))+2*parseInt(w.css("borderLeftWidth"))+4),e(window).resize(function(){if(!b.autoResize)return!0;u(a)})})},p={init:function(s){e.extend(i,a,s),h(this),e(document).on("mouseup",function(){t&&n&&r(),n=!1}),e(document).on("mousemove",function(e){if(n)return o(e),!1})},rebuild:function(){u(this)}};e.fn.contentslider=function(t){if(this.length)return"object"!=typeof t&&t?p[t]?p[t].apply(this,Array.prototype.slice.call(arguments,1)):void e.error("\u041c\u0435\u0442\u043e\u0434 "+t+" \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 jQuery.contentslider"):p.init.apply(this,arguments)}}(jQuery),function(e){var t={},i={animate:1e3,slideWidth:200,classBlock:"menuslider-block",classLeftArrow:"menuslider-arrow menuslider-left-arrow",classRightArrow:"menuslider-arrow menuslider-right-arrow",classLeftArrowDisable:"menuslider-arrow-disable",classRightArrowDisable:"menuslider-arrow-disable",autoResize:!0,wheelMouse:!0,"\u0441allback":{}},n=function(e){var t,i,n,a,s,o,r=e.parent(),l=r.children("ul"),c=l.data("options"),u=l.children("li"),d=u.first(),h=parseInt(d.css("marginLeft")),p=parseInt(d.data("widthItems")),f=parseInt(d.data("defaultLeftMargin"));l.data("disabled")||(o="string"==typeof c.slideWidth?p/u.length:c.slideWidth,c.\u0441allback.calcWidth&&(o=c.\u0441allback.calcWidth(o,e.data("type"),l,u,p)),"left"==e.data("type")?(t=h+o,t>f&&(t=f),i=t<=f,n=r.children("."+c.classRightArrow.replace(" ","."))):(t=h-o,Math.abs(t-l.width())>p&&(t=l.width()-p),i=Math.abs(t)<=p,n=r.children("."+c.classLeftArrow.replace(" ","."))),i?(l.data("disabled",1),"left"==e.data("type")?(a=c.classLeftArrowDisable,s=c.classRightArrowDisable,i=t<f):(a=c.classRightArrowDisable,s=c.classLeftArrowDisable,i=Math.abs(t-l.width())<p),n.removeClass(s),i||e.addClass(a||""),d.animate({marginLeft:Math.round(t)},c.animate,function(){l.data("disabled",0)})):e.addClass(c.classDisable||""))},a=function(t){var i=e(this),n=i.parent(),a=i.data("options"),s=n.find("."+a.classLeftArrow.replace(" ",".")),o=n.find("."+a.classRightArrow.replace(" ",".")),r=0;try{if(t.wheelDelta?r=t.wheelDelta/120:t.detail&&(r=-t.detail/3),r<0){if(o.hasClass(a.classRightArrowDisable)&&!i.data("disabled"))return!0;o.click()}else{if(s.hasClass(a.classLeftArrowDisable)&&!i.data("disabled"))return!0;s.click()}t.preventDefault()}catch(e){}},s=function(t){var i=0;return t.each(function(){var t=e(this);i+=t.width()+2*parseInt(t.css("paddingLeft"))+2*parseInt(t.css("marginRight"))+2*parseInt(t.css("borderLeftWidth"))+4}),i},o=function(t){t.each(function(){var t=e(this),i=t.parent(),n=t.data("options"),a=t.children("li"),s=a.first(),o=i.find("."+n.classLeftArrow.replace(" ",".")),r=i.find("."+n.classRightArrow.replace(" ","."));s.css("marginLeft",s.data("defaultLeftMargin")),o.addClass(n.classLeftArrowDisable||""),s.data("widthItems")-Math.abs(parseInt(s.css("marginLeft")))<=t.width()?r.addClass(n.classRightArrowDisable||""):r.removeClass(n.classRightArrowDisable)})},r=function(t){t.each(function(){var t=e(this),i=(t.parent(),t.data("options"),t.children("li"));i.first().data("widthItems",s(i))})},l=function(i){i.each(function(){var r,l,c=e(this).data("options",e.extend({},t)),u=c.data("options"),d=e("<div>").addClass(u.classBlock||""),h=c.children("li"),p=h.first(),f=c.get(0);c.wrap(d),c.css("whiteSpace","nowrap"),u.wheelMouse&&(f.addEventListener&&f.addEventListener("DOMMouseScroll",a,!1),f.onmousewheel=a),p.data("defaultLeftMargin",p.css("marginLeft")),p.data("widthItems",s(h)),u.classLeftArrow&&u.classRightArrow&&(r=e("<div>").addClass(u.classLeftArrow).data("type","left").click(function(){n(e(this))}),l=e("<div>").addClass(u.classRightArrow).data("type","right").click(function(){n(e(this))}),r.addClass(u.classLeftArrowDisable||""),p.data("widthItems")<=c.width()&&(l.addClass(u.classRightArrowDisable||""),c.data("disabled",1)),c.before(r),c.after(l)),e(window).resize(function(){if(!t.autoResize)return!0;o(i)})})},c={init:function(n){e.extend(t,i,n),l(this)},rebuild:function(){r(this)}};e.fn.menuslider=function(t){return"object"!=typeof t&&t?c[t]?c[t].apply(this,Array.prototype.slice.call(arguments,1)):void e.error("\u041c\u0435\u0442\u043e\u0434 "+t+" \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 jQuery.menuslider"):c.init.apply(this,arguments)}}(jQuery),function(e){function t(t,i,n){var a=t.data("sticky-settings"),s=a.topElement,o=a.bottomElement,r=e(window).scrollTop(),l=a.top,c=-a.bottom;s&&s.length?l+=s.offset().top+s.outerHeight(!1):l+=r,o&&o.length?(c+=o.offset().top,a.ignoreMargins||(c-=parseInt(o.css("margin-top")))):c+=e(document).height(),i.height(t.outerHeight()),n.height(a.noPlaceholder?0:t.outerHeight()),c-t.outerHeight()<l?i.addClass(a.stickerClassName).css({position:"absolute",top:Math.max(0,c-n.offset().top-i.height())}):n.offset().top<l?i.addClass(a.stickerClassName).css({position:"fixed",top:l-r}):i.removeClass(a.stickerClassName).css({position:"relative",top:0})}var i={init:function(i){return this.each(function(){var n,a,s=e(this),o=s.data("sticky-settings");o||(s.wrap(e("<div>")).wrap(e("<div>")),n=s.parent().width(s.innerWidth()),a=n.parent().width(s.innerWidth()).css({"float":s.css("float"),clear:s.css("clear"),position:"relative"}),e(window).on("scroll resize",function(){t(s,n,a)})),o=e.extend({},e.fn.stick.defaults,o,i),s.data("sticky-settings",o),n=n||s.parent(),a=a||n.parent(),a.addClass(o.wrapperClassName).css("z-index",o.zIndex),t(s,n,a)}),this}};e.fn.stick=function(t){return t&&"object"!=typeof t?i[t]?i[t].apply(this,Array.prototype.slice.call(arguments,1)):void e.error(t+" is not a method of jQuery.sticky"):i.init.apply(this,arguments)},e.fn.stick.defaults={top:0,topElement:null,bottom:0,bottomElement:null,ignoreMargins:!1,noPlaceholder:!1,wrapperClassName:"sticky-wrapper",stickerClassName:"sticky-sticker",zIndex:null}}(jQuery),function(e,t){"use strict";e.rails!==t&&e.error("jquery-ujs has already been loaded!");var i,n=e(document);e.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return e("meta[name=csrf-token]").attr("content")},csrfParam:function(){return e("meta[name=csrf-param]").attr("content")},CSRFProtection:function(e){var t=i.csrfToken();t&&e.setRequestHeader("X-CSRF-Token",t)},refreshCSRFTokens:function(){e('form input[name="'+i.csrfParam()+'"]').val(i.csrfToken())},fire:function(t,i,n){var a=e.Event(i);return t.trigger(a,n),!1!==a.result},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e[0].href},isRemote:function(e){return e.data("remote")!==t&&!1!==e.data("remote")},handleRemote:function(n){var a,s,o,r,l,c;if(i.fire(n,"ajax:before")){if(r=n.data("with-credentials")||null,l=n.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,n.is("form")){a=n.attr("method"),s=n.attr("action"),o=n.serializeArray();var u=n.data("ujs:submit-button");u&&(o.push(u),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(a=n.data("method"),s=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):n.is(i.buttonClickSelector)?(a=n.data("method")||"get",s=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):(a=n.data("method"),s=i.href(n),o=n.data("params")||null);return c={type:a||"GET",data:o,dataType:l,beforeSend:function(e,a){if(a.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+a.accepts.script),!i.fire(n,"ajax:beforeSend",[e,a]))return!1;n.trigger("ajax:send",e)},success:function(e,t,i){n.trigger("ajax:success",[e,t,i])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,i){n.trigger("ajax:error",[e,t,i])},crossDomain:i.isCrossDomain(s)},r&&(c.xhrFields={withCredentials:r}),s&&(c.url=s),i.ajax(c)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var i=document.createElement("a");try{return i.href=e,i.href=i.href,!i.protocol||!i.host||t.protocol+"//"+t.host!=i.protocol+"//"+i.host}catch(e){return!0}},handleMethod:function(n){var a=i.href(n),s=n.data("method"),o=n.attr("target"),r=i.csrfToken(),l=i.csrfParam(),c=e('<form method="post" action="'+a+'"></form>'),u='<input name="_method" value="'+s+'" type="hidden" />';l===t||r===t||i.isCrossDomain(a)||(u+='<input name="'+l+'" value="'+r+'" type="hidden" />'),o&&c.attr("target",o),c.hide().append(u).appendTo("body"),c.submit()},formElements:function(t,i){return t.is("form")?e(t[0].elements).filter(i):t.find(i)},disableFormElements:function(t){i.formElements(t,i.disableSelector).each(function(){i.disableFormElement(e(this))})},disableFormElement:function(e){var i,n;i=e.is("button")?"html":"val",n=e.data("disable-with"),e.data("ujs:enable-with",e[i]()),n!==t&&e[i](n),e.prop("disabled",!0)},enableFormElements:function(t){i.formElements(t,i.enableSelector).each(function(){i.enableFormElement(e(this))})},enableFormElement:function(e){var t=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[t](e.data("ujs:enable-with")),e.prop("disabled",!1)},allowAction:function(e){var t,n=e.data("confirm"),a=!1;if(!n)return!0;if(i.fire(e,"confirm")){try{a=i.confirm(n)}catch(e){(console.error||console.log).call(console,e.stack||e)}t=i.fire(e,"confirm:complete",[a])}return a&&t},blankInputs:function(t,i,n){var a,s,o=e(),r=i||"input,textarea",l=t.find(r);return l.each(function(){if(a=e(this),(s=a.is("input[type=checkbox],input[type=radio]")?a.is(":checked"):!!a.val())===n){if(a.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+a.attr("name")+'"]').length)return!0;o=o.add(a)}}),!!o.length&&o},nonBlankInputs:function(e,t){return i.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){var n=e.data("disable-with");e.data("ujs:enable-with",e.html()),n!==t&&e.html(n),e.bind("click.railsDisable",function(e){return i.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},i.fire(n,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,n){e.crossDomain||i.CSRFProtection(n)}),e(window).on("pageshow.rails",function(){e(e.rails.enableSelector).each(function(){var t=e(this);t.data("ujs:enable-with")&&e.rails.enableFormElement(t)}),e(e.rails.linkDisableSelector).each(function(){var t=e(this);t.data("ujs:enable-with")&&e.rails.enableElement(t)})}),n.delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(e(this))}),n.delegate(i.buttonDisableSelector,"ajax:complete",function(){i.enableFormElement(e(this))}),n.delegate(i.linkClickSelector,"click.rails",function(t){var n=e(this),a=n.data("method"),s=n.data("params"),o=t.metaKey||t.ctrlKey;if(!i.allowAction(n))return i.stopEverything(t);if(!o&&n.is(i.linkDisableSelector)&&i.disableElement(n),i.isRemote(n)){if(o&&(!a||"GET"===a)&&!s)return!0;var r=i.handleRemote(n);return!1===r?i.enableElement(n):r.fail(function(){i.enableElement(n)}),!1}return a?(i.handleMethod(n),!1):void 0}),n.delegate(i.buttonClickSelector,"click.rails",function(t){var n=e(this);if(!i.allowAction(n)||!i.isRemote(n))return i.stopEverything(t);n.is(i.buttonDisableSelector)&&i.disableFormElement(n);var a=i.handleRemote(n);return!1===a?i.enableFormElement(n):a.fail(function(){i.enableFormElement(n)}),!1}),n.delegate(i.inputChangeSelector,"change.rails",function(t){var n=e(this);return i.allowAction(n)&&i.isRemote(n)?(i.handleRemote(n),!1):i.stopEverything(t)}),n.delegate(i.formSubmitSelector,"submit.rails",function(n){var a,s,o=e(this),r=i.isRemote(o);if(!i.allowAction(o))return i.stopEverything(n);if(o.attr("novalidate")===t&&(a=i.blankInputs(o,i.requiredInputSelector,!1))&&i.fire(o,"ajax:aborted:required",[a]))return i.stopEverything(n);if(r){if(s=i.nonBlankInputs(o,i.fileInputSelector)){setTimeout(function(){i.disableFormElements(o)},13);var l=i.fire(o,"ajax:aborted:file",[s]);return l||setTimeout(function(){i.enableFormElements(o)},13),l}return i.handleRemote(o),!1}setTimeout(function(){i.disableFormElements(o)},13)}),n.delegate(i.formInputClickSelector,"click.rails",function(t){var n=e(this);if(!i.allowAction(n))return i.stopEverything(t);var a=n.attr("name"),s=a?{name:a,value:n.val()}:null;n.closest("form").data("ujs:submit-button",s)}),n.delegate(i.formSubmitSelector,"ajax:send.rails",function(t){this===t.target&&i.disableFormElements(e(this))}),n.delegate(i.formSubmitSelector,"ajax:complete.rails",function(t){this===t.target&&i.enableFormElements(e(this))}),e(function(){i.refreshCSRFTokens()}))}(jQuery),function(e){var t={},i={},n=function(i){i.filter(function(){return null==e(this).data("index")}).each(function(){var i=e(this).data({options:e.extend({},t),index:$win.data("togglerCount")}),n=i.find(".js-toggle-switcher").filter(function(){return e(this).closest(".js-toggle").data("index")==i.data("index")}),a=i.find(".js-toggle-content").filter(function(){return e(this).closest(".js-toggle").data("index")==i.data("index")});$win.data("togglerCount",$win.data("togglerCount")+1),i.data({switcher:n,content:a}),i.hasClass("toggle-off")&&n.data("off")&&n.data("on",n.html()).html(n.data("off")),n.click(function(t){var i,n=e(this),a=n.closest(".js-toggle"),s=a.data("content");switch(i=a.hasClass("toggle-off"),a.toggleClass("toggle-off"),n.data("off")&&(i?n.data("on",n.html()).html(n.data("off")):n.html(n.data("on"))),n[0].hasAttribute("data-on")&&!n.data("on").length&&n.remove(),a.data("effect")){case"slide":i?s.show().slideUp(200,function(){$win.resize()}):s.hide().slideDown(200,function(){$win.resize()});break;case"fade":i?s.show().fadeOut(200,function(){$win.resize()}):s.hide().fadeIn(200,function(){$win.resize()});break;default:s.toggle(!i)}t.preventDefault()})})},a={init:function(a){$win.data("togglerCount")||$win.data("togglerCount",0),e.extend(t,i,a),n(this)}};e.fn.toggler=function(t){return"object"!=typeof t&&t?a[t]?a[t].apply(this,Array.prototype.slice.call(arguments,1)):void e.error("\u041c\u0435\u0442\u043e\u0434 "+t+" \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 jQuery.toggler"):a.init.apply(this,arguments)}}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return i===undefined&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){"use strict";var t=e(document),i=e(window),n="selectric",a=".sl",s=["a","e","i","o","u","n","c","y"],o=[/[\xE0-\xE5]/g,/[\xE8-\xEB]/g,/[\xEC-\xEF]/g,/[\xF2-\xF6]/g,/[\xF9-\xFC]/g,/[\xF1]/g,/[\xE7]/g,/[\xFD-\xFF]/g],r=function(t,i){var n=this;n.element=t,n.$element=e(t),n.state={multiple:!!n.$element.attr("multiple"),enabled:!1,opened:!1,currValue:-1,selectedIdx:-1,highlightedIdx:-1},n.eventTriggers={open:n.open,close:n.close,destroy:n.destroy,refresh:n.refresh,init:n.init},n.init(i)};r.prototype={utils:{isMobile:function(){return/android|ip(hone|od|ad)/i.test(navigator.userAgent)},escapeRegExp:function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},replaceDiacritics:function(e){for(var t=o.length;t--;)e=e.toLowerCase().replace(o[t],s[t]);return e},format:function(e){var t=arguments;return(""+e).replace(/\{(?:(\d+)|(\w+))\}/g,function(e,i,n){return n&&t[1]?t[1][n]:t[i]})},nextEnabledItem:function(e,t){for(;e[t=(t+1)%e.length].disabled;);return t},previousEnabledItem:function(e,t){for(;e[t=(t>0?t:e.length)-1].disabled;);return t},toDash:function(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()},triggerCallback:function(t,i){var a=i.element,s=i.options["on"+t],o=[a].concat([].slice.call(arguments).slice(1));e.isFunction(s)&&s.apply(a,o),e(a).trigger(n+"-"+this.toDash(t),o)},arrayToClassname:function(t){var i=e.grep(t,function(e){return!!e});return e.trim(i.join(" "))}},init:function(t){var i=this;if(i.options=e.extend(!0,{},e.fn[n].defaults,i.options,t),i.utils.triggerCallback("BeforeInit",i),i.destroy(!0),i.options.disableOnMobile&&i.utils.isMobile())return void(i.disableOnMobile=!0);i.classes=i.getClassNames();var a=e("<input/>",{"class":i.classes.input,readonly:i.utils.isMobile()}),s=e("<div/>",{"class":i.classes.items,tabindex:-1}),o=e("<div/>",{"class":i.classes.scroll}),r=e("<div/>",{"class":i.classes.prefix,html:i.options.arrowButtonMarkup}),l=e("<span/>",{"class":"label"}),c=i.$element.wrap("<div/>").parent().append(r.prepend(l),s,a),u=e("<div/>",{"class":i.classes.hideselect});i.elements={input:a,items:s,itemsScroll:o,wrapper:r,label:l,outerWrapper:c},i.options.nativeOnMobile&&i.utils.isMobile()&&(i.elements.input=undefined,u.addClass(i.classes.prefix+"-is-native"),i.$element.on("change",function(){i.refresh()})),i.$element.on(i.eventTriggers).wrap(u),i.originalTabindex=i.$element.prop("tabindex"),i.$element.prop("tabindex",-1),i.populate(),i.activate(),i.utils.triggerCallback("Init",i)},activate:function(){var e=this,t=e.elements.items.closest(":visible").children(":hidden").addClass(e.classes.tempshow),i=e.$element.width();t.removeClass(e.classes.tempshow),e.utils.triggerCallback("BeforeActivate",e),e.elements.outerWrapper.prop("class",e.utils.arrayToClassname([e.classes.wrapper,e.$element.prop("class").replace(/\S+/g,e.classes.prefix+"-$&"),e.options.responsive?e.classes.responsive:""])),e.options.inheritOriginalWidth&&i>0&&e.elements.outerWrapper.width(i),e.unbindEvents(),e.$element.prop("disabled")?(e.elements.outerWrapper.addClass(e.classes.disabled),e.elements.input&&e.elements.input.prop("disabled",!0)):(e.state.enabled=!0,e.elements.outerWrapper.removeClass(e.classes.disabled),e.$li=e.elements.items.removeAttr("style").find("li"),e.bindEvents()),e.utils.triggerCallback("Activate",e)},getClassNames:function(){var t=this,i=t.options.customClass,n={};return e.each("Input Items Open Disabled TempShow HideSelect Wrapper Focus Hover Responsive Above Below Scroll Group GroupLabel".split(" "),function(e,a){var s=i.prefix+a;n[a.toLowerCase()]=i.camelCase?s:t.utils.toDash(s)}),n.prefix=i.prefix,n},setLabel:function(){var t=this,i=t.options.labelBuilder;if(t.state.multiple){var n=e.isArray(t.state.currValue)?t.state.currValue:[t.state.currValue];n=0===n.length?[0]:n;var a=e.map(n,function(i){return e.grep(t.lookupItems,function(e){return e.index===i})[0]});a=e.grep(a,function(t){return a.length>1||0===a.length?""!==e.trim(t.value):t}),a=e.map(a,function(n){return e.isFunction(i)?i(n):t.utils.format(i,n)}),t.options.multiple.maxLabelEntries&&(a.length>=t.options.multiple.maxLabelEntries+1?(a=a.slice(0,t.options.multiple.maxLabelEntries),a.push(e.isFunction(i)?i({text:"..."}):t.utils.format(i,{text:"..."}))):a.slice(a.length-1)),t.elements.label.html(a.join(t.options.multiple.separator))}else{var s=t.lookupItems[t.state.currValue];t.elements.label.html(e.isFunction(i)?i(s):t.utils.format(i,s))}},populate:function(){var t=this,i=t.$element.children(),n=t.$element.find("option"),a=n.filter(":selected"),s=n.index(a),o=0,r=t.state.multiple?[]:0;a.length>1&&t.state.multiple&&(s=[],a.each(function(){s.push(e(this).index())})),t.state.currValue=~s?s:r,t.state.selectedIdx=t.state.currValue,t.state.highlightedIdx=t.state.currValue,t.items=[],t.lookupItems=[],i.length&&(i.each(function(i){var n=e(this);if(n.is("optgroup")){var a={element:n,label:n.prop("label"),groupDisabled:n.prop("disabled"),items:[]};n.children().each(function(i){var n=e(this);a.items[i]=t.getItemData(o,n,a.groupDisabled||n.prop("disabled")),t.lookupItems[o]=a.items[i],o++}),t.items[i]=a}else t.items[i]=t.getItemData(o,n,n.prop("disabled")),t.lookupItems[o]=t.items[i],o++}),t.setLabel(),t.elements.items.append(t.elements.itemsScroll.html(t.getItemsMarkup(t.items))))},getItemData:function(t,i,n){var a=this;return{index:t,element:i,value:i.val(),className:i.prop("class"),text:i.html(),slug:e.trim(a.utils.replaceDiacritics(i.html())),selected:i.prop("selected"),disabled:n}},getItemsMarkup:function(t){var i=this,n="<ul>";return e.isFunction(i.options.listBuilder)&&i.options.listBuilder&&(t=i.options.listBuilder(t)),e.each(t,function(t,a){a.label!==undefined?(n+=i.utils.format('<ul class="{1}"><li class="{2}">{3}</li>',i.utils.arrayToClassname([i.classes.group,a.groupDisabled?"disabled":"",a.element.prop("class")]),i.classes.grouplabel,a.element.prop("label")),e.each(a.items,function(e,t){n+=i.getItemMarkup(t.index,t)}),n+="</ul>"):n+=i.getItemMarkup(a.index,a)}),n+"</ul>"},getItemMarkup:function(t,i){var n=this,a=n.options.optionsItemBuilder,s={value:i.value,text:i.text,slug:i.slug,index:i.index};return n.utils.format('<li data-index="{1}" class="{2}">{3}</li>',t,n.utils.arrayToClassname([i.className,t===n.items.length-1?"last":"",i.disabled?"disabled":"",i.selected?"selected":""]),e.isFunction(a)?n.utils.format(a(i,this.$element,t),i):n.utils.format(a,s))},unbindEvents:function(){var e=this;e.elements.wrapper.add(e.$element).add(e.elements.outerWrapper).add(e.elements.input).off(a)},bindEvents:function(){var t=this;t.elements.outerWrapper.on("mouseenter"+a+" mouseleave"+a,function(i){e(this).toggleClass(t.classes.hover,"mouseenter"===i.type),t.options.openOnHover&&(clearTimeout(t.closeTimer),"mouseleave"===i.type?t.closeTimer=setTimeout(e.proxy(t.close,t),t.options.hoverIntentTimeout):t.open())}),t.elements.wrapper.on("click"+a,function(e){t.state.opened?t.close():t.open(e)}),t.options.nativeOnMobile&&t.utils.isMobile()||(t.$element.on("focus"+a,function(){t.elements.input.focus()}),t.elements.input.prop({tabindex:t.originalTabindex,disabled:!1}).on("keydown"+a,e.proxy(t.handleKeys,t)).on("focusin"+a,function(e){t.elements.outerWrapper.addClass(t.classes.focus),t.elements.input.one("blur",function(){t.elements.input.blur()}),t.options.openOnFocus&&!t.state.opened&&t.open(e)}).on("focusout"+a,function(){t.elements.outerWrapper.removeClass(t.classes.focus)}).on("input propertychange",function(){var i=t.elements.input.val(),n=new RegExp("^"+t.utils.escapeRegExp(i),"i");clearTimeout(t.resetStr),t.resetStr=setTimeout(function(){t.elements.input.val("")},t.options.keySearchTimeout),i.length&&e.each(t.items,function(e,i){if(!i.disabled&&n.test(i.text)||n.test(i.slug))return void t.highlight(e)})})),t.$li.on({mousedown:function(e){e.preventDefault(),e.stopPropagation()},click:function(){return t.select(e(this).data("index")),!1}})},handleKeys:function(t){var i=this,n=t.which,a=i.options.keys,s=e.inArray(n,a.previous)>-1,o=e.inArray(n,a.next)>-1,r=e.inArray(n,a.select)>-1,l=e.inArray(n,a.open)>-1,c=i.state.highlightedIdx,u=s&&0===c||o&&c+1===i.items.length,d=0;if(13!==n&&32!==n||t.preventDefault(),s||o){if(!i.options.allowWrap&&u)return;s&&(d=i.utils.previousEnabledItem(i.lookupItems,c)),o&&(d=i.utils.nextEnabledItem(i.lookupItems,c)),i.highlight(d)}if(r&&i.state.opened)return i.select(c),void(i.state.multiple&&i.options.multiple.keepMenuOpen||i.close());l&&!i.state.opened&&i.open()},refresh:function(){var e=this;e.populate(),e.activate(),e.utils.triggerCallback("Refresh",e)},setOptionsDimensions:function(){var e=this,t=e.elements.items.closest(":visible").children(":hidden").addClass(e.classes.tempshow),i=e.options.maxHeight,n=e.elements.items.outerWidth(),a=e.elements.wrapper.outerWidth()-(n-e.elements.items.width());!e.options.expandToItemText||a>n?e.finalWidth=a:(e.elements.items.css("overflow","scroll"),e.elements.outerWrapper.width(9e4),e.finalWidth=e.elements.items.width(),e.elements.items.css("overflow",""),e.elements.outerWrapper.width("")),e.elements.items.width(e.finalWidth).height()>i&&e.elements.items.height(i),t.removeClass(e.classes.tempshow)},isInViewport:function(){var e=this;if(!0===e.options.forceRenderAbove)e.elements.outerWrapper.addClass(e.classes.above);else if(!0===e.options.forceRenderBelow)e.elements.outerWrapper.addClass(e.classes.below);else{var t=i.scrollTop(),n=i.height(),a=e.elements.outerWrapper.offset().top,s=e.elements.outerWrapper.outerHeight(),o=a+s+e.itemsHeight<=t+n,r=a-e.itemsHeight>t,l=!o&&r,c=!l;e.elements.outerWrapper.toggleClass(e.classes.above,l),e.elements.outerWrapper.toggleClass(e.classes.below,c)}},detectItemVisibility:function(t){var i=this,n=i.$li.filter("[data-index]");i.state.multiple&&(t=e.isArray(t)&&0===t.length?0:t,t=e.isArray(t)?Math.min.apply(Math,t):t);var a=n.eq(t).outerHeight(),s=n[t].offsetTop,o=i.elements.itemsScroll.scrollTop(),r=s+2*a;i.elements.itemsScroll.scrollTop(r>o+i.itemsHeight?r-i.itemsHeight:s-a<o?s-a:o)},open:function(i){var s=this;if(s.options.nativeOnMobile&&s.utils.isMobile())return!1;s.utils.triggerCallback("BeforeOpen",s),i&&(i.preventDefault(),s.options.stopPropagation&&i.stopPropagation()),s.state.enabled&&(s.setOptionsDimensions(),e("."+s.classes.hideselect,"."+s.classes.open).children()[n]("close"),s.state.opened=!0,s.itemsHeight=s.elements.items.outerHeight(),s.itemsInnerHeight=s.elements.items.height(),s.elements.outerWrapper.addClass(s.classes.open),s.elements.input.val(""),i&&"focusin"!==i.type&&s.elements.input.focus(),setTimeout(function(){t.on("click"+a,e.proxy(s.close,s)).on("scroll"+a,e.proxy(s.isInViewport,s))},1),s.isInViewport(),s.options.preventWindowScroll&&t.on("mousewheel"+a+" DOMMouseScroll"+a,"."+s.classes.scroll,function(t){var i=t.originalEvent,n=e(this).scrollTop(),a=0;"detail"in i&&(a=-1*i.detail),"wheelDelta"in i&&(a=i.wheelDelta),"wheelDeltaY"in i&&(a=i.wheelDeltaY),"deltaY"in i&&(a=-1*i.deltaY),(n===this.scrollHeight-s.itemsInnerHeight&&a<0||0===n&&a>0)&&t.preventDefault()}),s.detectItemVisibility(s.state.selectedIdx),s.highlight(s.state.multiple?-1:s.state.selectedIdx),s.utils.triggerCallback("Open",s))},close:function(){var e=this;e.utils.triggerCallback("BeforeClose",e),t.off(a),e.elements.outerWrapper.removeClass(e.classes.open),e.state.opened=!1,e.utils.triggerCallback("Close",e)},change:function(){var t=this;t.utils.triggerCallback("BeforeChange",t),t.state.multiple?(e.each(t.lookupItems,function(e){t.lookupItems[e].selected=!1,t.$element.find("option").prop("selected",!1)}),e.each(t.state.selectedIdx,function(e,i){t.lookupItems[i].selected=!0,t.$element.find("option").eq(i).prop("selected",!0)}),t.state.currValue=t.state.selectedIdx,t.setLabel(),t.utils.triggerCallback("Change",t)):t.state.currValue!==t.state.selectedIdx&&(t.$element.prop("selectedIndex",t.state.currValue=t.state.selectedIdx).data("value",t.lookupItems[t.state.selectedIdx].text),t.setLabel(),t.utils.triggerCallback("Change",t))},highlight:function(e){var t=this,i=t.$li.filter("[data-index]").removeClass("highlighted");t.utils.triggerCallback("BeforeHighlight",t),e===undefined||-1===e||t.lookupItems[e].disabled||(i.eq(t.state.highlightedIdx=e).addClass("highlighted"),t.detectItemVisibility(e),t.utils.triggerCallback("Highlight",t))},select:function(t){var i=this,n=i.$li.filter("[data-index]");if(i.utils.triggerCallback("BeforeSelect",i,t),t!==undefined&&-1!==t&&!i.lookupItems[t].disabled){if(i.state.multiple){i.state.selectedIdx=e.isArray(i.state.selectedIdx)?i.state.selectedIdx:[i.state.selectedIdx];var a=e.inArray(t,i.state.selectedIdx);-1!==a?i.state.selectedIdx.splice(a,1):i.state.selectedIdx.push(t),n.removeClass("selected").filter(function(t){return-1!==e.inArray(t,i.state.selectedIdx)}).addClass("selected")}else n.removeClass("selected").eq(i.state.selectedIdx=t).addClass("selected");i.state.multiple&&i.options.multiple.keepMenuOpen||i.close(),i.change(),i.utils.triggerCallback("Select",i,t)}},destroy:function(e){var t=this;t.state&&t.state.enabled&&(t.elements.items.add(t.elements.wrapper).add(t.elements.input).remove(),e||t.$element.removeData(n).removeData("value"),t.$element.prop("tabindex",t.originalTabindex).off(a).off(t.eventTriggers).unwrap().unwrap(),t.state.enabled=!1)}},e.fn[n]=function(t){return this.each(function(){var i=e.data(this,n);i&&!i.disableOnMobile?"string"==typeof t&&i[t]?i[t]():i.init(t):e.data(this,n,new r(this,t))})},e.fn[n].defaults={onChange:function(t){e(t).change()},maxHeight:300,keySearchTimeout:500,arrowButtonMarkup:'<b class="button">&#x25be;</b>',disableOnMobile:!1,nativeOnMobile:!0,openOnFocus:!0,openOnHover:!1,hoverIntentTimeout:500,expandToItemText:!1,responsive:!1,preventWindowScroll:!0,inheritOriginalWidth:!1,allowWrap:!0,forceRenderAbove:!1,forceRenderBelow:!1,stopPropagation:!0,optionsItemBuilder:"{text}",labelBuilder:"{text}",listBuilder:!1,keys:{previous:[37,38],next:[39,40],select:[9,13,27],open:[13,32,37,38,39,40],close:[9,27]},customClass:{prefix:n,camelCase:!1},multiple:{separator:", ",keepMenuOpen:!0,maxLabelEntries:!1}}});var setCompanySitesLightbox=function(e,t,i,n){var a,s,o=$('<div id="company-popup" class="company-popup portal-popup"></div>'),r=$("<ul></ul>"),l=$('<li class="pseudo-link"><a href="#" onclick="return false;">\u0441\u0432\u0435\u0440\u043d\u0443\u0442\u044c</a></li>');for(r.append(l),s=0;s<e.length;s++)l=$("<li></li>"),l.html('<div class="title-">'+e[s]+"</div>"),a=$('<a href="'+i[s]+'">'+t[s]+"</a>"),n&&a.attr("target","_blank"),l.append(a),r.append(l);o.append(r),$("body").prepend(o),$doc.click(function(){$("#company-popup").hide()}),$(window).scroll(function(){$("#company-popup").hide()}),$("#company-popup-starter").click(function(e){if(!$(".prod-cb input:checked").length){var t=$("#company-popup"),i=$(this).offset();return this.blur(),t.show().css({left:i.left-t[0].offsetWidth+this.offsetWidth+1+"px",top:i.top-6+"px"}),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1}
alertCheckWindow("a","","#alert-message",'<div id="alert-message"><div class="alert-message clearfix"><h1 class="rate-header">\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435!</h1><div class="blue-box"><p>\u0412\u044b \u0432\u044b\u0434\u0435\u043b\u0438\u043b\u0438 \u0434\u043b\u044f \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f <strong class="amount">N.</strong></p><p>\u041f\u0440\u0438 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0435 \u043d\u0430 \u0434\u0440\u0443\u0433\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0432\u0441\u0435 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u044b.</p><p><strong>\u0412\u044b \u0442\u043e\u0447\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0439\u0442\u0438 \u0441\u043e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b?</strong></p></div><div class="spisok"><ul><li>&larr;&nbsp;<a href="#" class="return" onclick = "hidePopup(\'popup-container\'); return false;" >\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044e</a></li><li class="last"><a href="#" class="continue" onclick="mySites(); hidePopup(\'popup-container\'); return false;">\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c</a>&rarr;&nbsp;</li></ul></div></div></div>',".prod-cb input")})};app.modules.selectRegion=function(e){var t,i,n=3,a=$("<ul>").addClass("column"),s=$(),o=function(e){$.cookie("root_region",e,{domain:app.config.currentHost,expires:366,path:"/"})},r=function(e){$.cookie("region_checked",e,{domain:app.config.currentHost,path:"/"})},l=function(e){var t=$(e),n=$.extend(t.closest(".js-links-inside").data(),t.data());return i&&o(n.region),r(i?"t":"f"),!n.savePath||(location.href=location.href.replace(location.hostname,n.url),!1)},c=function(e){var t=e.closest("li"),i=e.closest(".js-links").find("li").index(t);t.addClass("active").siblings().removeClass("active"),e.closest(".js-links-inside").find(".js-hidden-block").hide().removeClass("current-country").eq(i).show().addClass("current-country"),p()},u=function(e){var t="";return e.find(".letter-").remove().end().each(function(){var e=$(this),i=$.trim(e.text());i.charAt(0)!==t&&(t=i.charAt(0),e.addClass("first-in-group").prepend($("<em>").text(t).addClass("letter-")))}),e},d=function(e){var i,s=$("<div>").addClass("regions-output js-regions-output"),o=Math.round(t/n)||1;e.parent().find(".js-regions-output").remove().end().end().hide().before(s),s=e.parent().find(".js-regions-output").append(a);for(var r=0;r<n-1;r++)i=n-1,r==n-1&&(i=t),s.append($("<ul>").addClass("column").append(a.find("li").slice(o,o*i)))},h=function(e,i){var n=app.modules.projectUtils.enRuSwitch({str:i.val(),direction:i.data("direction")}).toLocaleLowerCase();e.find("li").each(function(){var e=$(this);~e.removeClass("first-in-group").find("a").text().toLocaleLowerCase().indexOf(n)&&(a.append(e.clone(!0)),t++)})},p=function(){var e=$(".js-search-region"),i=e.parents(".select-region-box").find(".current-country .js-cities");e.length&&(a.empty(),t=0,h(i,e),u(a.find(".cl")),d(i),i.parent().find(".js-search-message").toggle(0===t))},f=function(){return $.ajax({url:app.config.ajaxRegionsPopupUrl,error:function(e,t,i){window.console&&console.log(e,t,i)}})},m=function(e){e.dialog({resizable:!1,modal:!0,width:"auto",dialogClass:"dialog-popup portal-popup region-popup"})},g=function(){var e=$("#region-popup");e.length?m(e):f().success(function(e){$("body").append(e),m($("#region-popup")),w()})},v=function(){$doc.on("click",".js-links-inside .js-links li a",function(){return c($(this)),!1}),$doc.on("mouseenter",".wrap-scroll",function(){$(".wrap-scroll").scroll(function(){var e=$(this);e.toggleClass("scrolled",e.scrollTop()>0)})}),$doc.on("keyup",".js-search-region",function(){p()}),$doc.on("openPopup:selectRegion",function(){g(),i=!1}).on("click",".js-select-another-region",function(e){g(this),i=!0,s.hide(),e.preventDefault()}).on("click",".js-accept-region",b).on("click",".js-cr-close",function(){s.hide(),r("t")}).on("click",".js-region-link",function(e){l(this)||e.preventDefault()})},b=function(){var e=$(this),t=e.data();s.hide(),o(t.region),r("t"),t.reload&&(location.href=location.href.replace(location.hostname,t.url))},y=function(){$(".js-search-region").length&&w(),s.length&&"f"===$.cookie("region_checked")&&s.show()},_=function(){$(".js-links-inside").each(function(){var e=$(this),t=e.find("li").index(e.find("li.active"));e.find(".js-links").length&&e.find(".js-hidden-block").hide().removeClass("current-country").eq(t).show().addClass("current-country")})},w=function(){this.isInit||(_(),p()),this.isInit=!0};return _listeners=function(){document.addEventListener("showRegionPopup",function(){s=$(".js-confirm-region-popup")})},e.load=function(){v(),y(),_listeners()},e}(app.modules.selectRegion||{}),app.modules.lowerPanel=function(e){function t(){$.cookie(h,n()?0:1,{path:p,domain:app.config.rootHost})}function i(){$(d.wrapper).fadeToggle(),l.toggleClass("active"),c&&c.toggleClass("active"),u&&clearTimeout(u),t()}function n(){return l.hasClass("active")}function a(){return!n()&&$.cookie(h)===m&&setTimeout(i,f)}function s(e){return e.removeClass("dn")}function o(){$doc.on("click",d.toggler,function(e){e.preventDefault(),l.length&&i()})}function r(){l=s($(d.component)),c=$(d.sideButton),u=a()}var l,c,u,d={component:".js-lower-panel",wrapper:".js-lower-panel-wrapper",toggler:".js-hide-lower-panel, .js-show-lower-panel",sideButton:".js-show-lower-panel"},h="hide_lower_panel_showcase_page",p="/",f=2e3,m="1";return $.extend(e,{load:function(){$(".js-show-lower-panel")[0]&&(r(),o())},animatePanel:i,isPanelActive:n}),e}(app.modules.lowerPanel||{}),String.prototype.shortenedString=function(e,t){var i=String(this);return this.length<=e?i:$("<span>").data("full-text",i).text(this.substr(0,e-(t||0))).append($("<span>").addClass("js-show-full-string pseudo-link").text("..."))},app.modules.user=function(e){function t(e,t){clearTimeout(o),s&&s.abort(),o=setTimeout(function(){r=/^[^@]+@[^@]+$/.test(e)?{email:e}:{phone:e},s=$.get(app.config.api.usersURL,r,function(e){i(e,t)})},l)}function i(e,t){$doc.trigger("userAuth.checkForExistence.responseFor"+t||"All",[e])}function n(e,t){$.ajax({url:"/users/password",dataType:"json",type:"POST",data:{user:{phone:e}},error:function(e,t,i){window.console&&console.log(e,t,i)},success:function(e){$doc.trigger("userAuth.passwordRestoration.response"+t||"All",[e])}})}function a(){$doc.on("userAuth.checkForExistence.send",function(e,i,n){t(i,n)}).on("userAuth.passwordRestoration.send",function(e,t,i){n(t,i)})}var s,o,r,l=300;return e.load=function(){a()},e}(app.modules.user||{}),function(e){function t(n,a,s){return this instanceof t?(this.el=void 0,this.events={},this.maskset=void 0,this.refreshValue=!1,void(!0!==s&&(e.isPlainObject(n)?a=n:(a=a||{},a.alias=n),this.opts=e.extend(!0,{},this.defaults,a),this.noMasksCache=a&&void 0!==a.definitions,this.userOptions=a||{},this.isRTL=this.opts.numericInput,i(this.opts.alias,a,this.opts)))):new t(n,a,s)}function i(n,a,s){var o=t.prototype.aliases[n];return o?(o.alias&&i(o.alias,void 0,s),e.extend(!0,s,o),e.extend(!0,s,a),!0):(null===s.mask&&(s.mask=n),!1)}function n(i,n){function a(i,a,s){if(null!==i&&""!==i){if(1===i.length&&!1===s.greedy&&0!==s.repeat&&(s.placeholder=""),s.repeat>0||"*"===s.repeat||"+"===s.repeat){var o="*"===s.repeat?0:"+"===s.repeat?1:s.repeat;i=s.groupmarker.start+i+s.groupmarker.end+s.quantifiermarker.start+o+","+s.repeat+s.quantifiermarker.end}var r;return void 0===t.prototype.masksCache[i]||!0===n?(r={mask:i,maskToken:t.prototype.analyseMask(i,s),validPositions:{},_buffer:void 0,buffer:void 0,tests:{},metadata:a,maskLength:void 0},!0!==n&&(t.prototype.masksCache[s.numericInput?i.split("").reverse().join(""):i]=r,r=e.extend(!0,{},t.prototype.masksCache[s.numericInput?i.split("").reverse().join(""):i]))):r=e.extend(!0,{},t.prototype.masksCache[s.numericInput?i.split("").reverse().join(""):i]),r}}var s;if(e.isFunction(i.mask)&&(i.mask=i.mask(i)),e.isArray(i.mask)){if(i.mask.length>1){i.keepStatic=null===i.keepStatic||i.keepStatic;var o=i.groupmarker.start;return e.each(i.numericInput?i.mask.reverse():i.mask,function(t,n){o.length>1&&(o+=i.groupmarker.end+i.alternatormarker+i.groupmarker.start),o+=void 0===n.mask||e.isFunction(n.mask)?n:n.mask}),o+=i.groupmarker.end,a(o,i.mask,i)}i.mask=i.mask.pop()}return i.mask&&(s=void 0===i.mask.mask||e.isFunction(i.mask.mask)?a(i.mask,i.mask,i):a(i.mask.mask,i.mask,i)),s}function a(i,n,s){function u(e,t,i){t=t||0;var n,a,o,r=[],l=0,c=p();-1===(U=void 0!==V?V.maxLength:void 0)&&(U=void 0);do{!0===e&&d().validPositions[l]?(o=d().validPositions[l],a=o.match,n=o.locator.slice(),r.push(!0===i?o.input:!1===i?a.nativeDef:j(l,a))):(o=g(l,n,l-1),a=o.match,n=o.locator.slice(),(!1===s.jitMasking||l<c||"number"==typeof s.jitMasking&&isFinite(s.jitMasking)&&s.jitMasking>l)&&r.push(!1===i?a.nativeDef:j(l,a))),l++}while((void 0===U||l<U)&&(null!==a.fn||""!==a.def)||t>l);return""===r[r.length-1]&&r.pop(),d().maskLength=l+1,r}function d(){return n}function h(e){var t=d();t.buffer=void 0,!0!==e&&(t._buffer=void 0,t.validPositions={},t.p=0)}function p(e,t,i){var n=-1,a=-1,s=i||d().validPositions;void 0===e&&(e=-1);for(var o in s){var r=parseInt(o);s[r]&&(t||!0!==s[r].generatedInput)&&(r<=e&&(n=r),r>=e&&(a=r))}return-1!==n&&e-n>1||a<e?n:a}function f(t,i,n,a){function o(e){var t=d().validPositions[e];if(void 0!==t&&null===t.match.fn){var i=d().validPositions[e-1],n=d().validPositions[e+1];return void 0!==i&&void 0!==n}return!1}var r,l=t,c=e.extend(!0,{},d().validPositions),u=!1;for(d().p=t,r=i-1;r>=l;r--)void 0!==d().validPositions[r]&&(!0!==n&&(!d().validPositions[r].match.optionality&&o(r)||!1===s.canClearPosition(d(),r,p(),a,s))||delete d().validPositions[r]);for(h(!0),r=l+1;r<=p();){for(;void 0!==d().validPositions[l];)l++;if(r<l&&(r=l+1),void 0===d().validPositions[r]&&P(r))r++;else{var f=g(r);!1===u&&c[l]&&c[l].match.def===f.match.def?(d().validPositions[l]=e.extend(!0,{},c[l]),d().validPositions[l].input=f.input,delete d().validPositions[r],r++):b(l,f.match.def)?!1!==C(l,f.input||j(r),!0)&&(delete d().validPositions[r],r++,u=!0):P(r)||(r++,l--),l++}}h(!0)}function m(e,t){for(var i,n=e,a=p(),o=d().validPositions[a]||y(0)[0],r=void 0!==o.alternation?o.locator[o.alternation].toString().split(","):[],l=0;l<n.length&&(i=n[l],!(i.match&&(s.greedy&&!0!==i.match.optionalQuantifier||(!1===i.match.optionality||!1===i.match.newBlockMarker)&&!0!==i.match.optionalQuantifier)&&(void 0===o.alternation||o.alternation!==i.alternation||void 0!==i.locator[o.alternation]&&k(i.locator[o.alternation].toString().split(","),r)))||!0===t&&(null!==i.match.fn||/[0-9a-bA-Z]/.test(i.match.def)));l++);return i}function g(e,t,i){return d().validPositions[e]||m(y(e,t?t.slice():t,i))}function v(e){return d().validPositions[e]?d().validPositions[e]:y(e)[0]}function b(e,t){for(var i=!1,n=y(e),a=0;a<n.length;a++)if(n[a].match&&n[a].match.def===t){i=!0;break}return i}function y(t,i,n){function a(i,n,o,r){function c(o,r,h){function m(t,i){var n=0===e.inArray(t,i.matches);return n||e.each(i.matches,function(e,a){if(!0===a.isQuantifier&&(n=m(t,i.matches[e-1])))return!1}),n}function v(t,i,n){var a,s;return(d().tests[t]||d().validPositions[t])&&e.each(d().tests[t]||[d().validPositions[t]],function(e,t){var o=void 0!==n?n:t.alternation,r=void 0!==t.locator[o]?t.locator[o].toString().indexOf(i):-1;(void 0===s||r<s)&&-1!==r&&(a=t,s=r)}),a?a.locator.slice((void 0!==n?n:a.alternation)+1):void 0!==n?v(t,i):void 0}function b(e,i){return null===e.match.fn&&null!==i.match.fn&&i.match.fn.test(e.match.def,d(),t,!1,s,!1)}if(u>1e4)throw"Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+d().mask;if(u===t&&void 0===o.matches)return p.push({match:o,locator:r.reverse(),cd:g}),!0;if(void 0!==o.matches){if(o.isGroup&&h!==o){if(o=c(i.matches[e.inArray(o,i.matches)+1],r))return!0}else if(o.isOptional){var y=o;if(o=a(o,n,r,h)){if(l=p[p.length-1].match,!m(l,y))return!0;f=!0,u=t}}else if(o.isAlternator){var _,w=o,$=[],x=p.slice(),k=r.length,C=n.length>0?n.shift():-1;if(-1===C||"string"==typeof C){var P,T=u,D=n.slice(),S=[];if("string"==typeof C)S=C.split(",");else for(P=0;P<w.matches.length;P++)S.push(P);for(var A=0;A<S.length;A++){if(P=parseInt(S[A]),p=[],n=v(u,P,k)||D.slice(),!0!==(o=c(w.matches[P]||i.matches[P],[P].concat(r),h)||o)&&void 0!==o&&S[S.length-1]<w.matches.length){var j=e.inArray(o,i.matches)+1;i.matches.length>j&&(o=c(i.matches[j],[j].concat(r.slice(1,r.length)),h))&&(S.push(j.toString()),e.each(p,function(e,t){t.alternation=r.length-1}))}_=p.slice(),u=T,p=[];for(var E=0;E<_.length;E++){var I=_[E],N=!1;I.alternation=I.alternation||k;for(var F=0;F<$.length;F++){var M=$[F];if(("string"!=typeof C||-1!==e.inArray(I.locator[I.alternation].toString(),S))&&(I.match.def===M.match.def||b(I,M))){N=I.match.nativeDef===M.match.nativeDef,I.alternation==M.alternation&&-1===M.locator[M.alternation].toString().indexOf(I.locator[I.alternation])&&(M.locator[M.alternation]=M.locator[M.alternation]+","+I.locator[I.alternation],M.alternation=I.alternation,null==I.match.fn&&(M.na=M.na||I.locator[I.alternation].toString(),-1===M.na.indexOf(I.locator[I.alternation])&&(M.na=M.na+","+I.locator[I.alternation])));break}}N||$.push(I)}}"string"==typeof C&&($=e.map($,function(t,i){if(isFinite(i)){var n=t.alternation,a=t.locator[n].toString().split(",");t.locator[n]=void 0,t.alternation=void 0;for(var s=0;s<a.length;s++)-1!==e.inArray(a[s],S)&&(void 0!==t.locator[n]?(t.locator[n]+=",",t.locator[n]+=a[s]):t.locator[n]=parseInt(a[s]),t.alternation=n);if(void 0!==t.locator[n])return t}})),p=x.concat($),u=t,f=p.length>0,n=D.slice()}else o=c(w.matches[C]||i.matches[C],[C].concat(r),h);if(o)return!0}else if(o.isQuantifier&&h!==i.matches[e.inArray(o,i.matches)-1])for(var L=o,R=n.length>0?n.shift():0;R<(isNaN(L.quantifier.max)?R+1:L.quantifier.max)&&u<=t;R++){var O=i.matches[e.inArray(L,i.matches)-1];if(o=c(O,[R].concat(r),O)){if(l=p[p.length-1].match,l.optionalQuantifier=R>L.quantifier.min-1,m(l,O)){if(R>L.quantifier.min-1){f=!0,u=t;break}return!0}return!0}}else if(o=a(o,n,r,h))return!0}else u++}for(var h=n.length>0?n.shift():0;h<i.matches.length;h++)if(!0!==i.matches[h].isQuantifier){var m=c(i.matches[h],[h].concat(o),r);if(m&&u===t)return m;if(u>t)break}}function o(t){var i=[];return e.isArray(t)||(t=[t]),t.length>0&&(void 0===t[0].alternation?(i=m(t.slice()).locator.slice(),0===i.length&&(i=t[0].locator.slice())):e.each(t,function(e,t){if(""!==t.def)if(0===i.length)i=t.locator.slice();else for(var n=0;n<i.length;n++)t.locator[n]&&-1===i[n].toString().indexOf(t.locator[n])&&(i[n]+=","+t.locator[n])})),i}function r(e){return s.keepStatic&&t>0&&e.length>1+(""===e[e.length-1].match.def?1:0)&&!0!==e[0].match.optionality&&!0!==e[0].match.optionalQuantifier&&null===e[0].match.fn&&!/[0-9a-bA-Z]/.test(e[0].match.def)?[m(e)]:e}var l,c=d().maskToken,u=i?n:0,h=i?i.slice():[0],p=[],f=!1,g=i?i.join(""):"";if(t>-1){if(void 0===i){for(var v,b=t-1;void 0===(v=d().validPositions[b]||d().tests[b])&&b>-1;)b--;void 0!==v&&b>-1&&(h=o(v),g=h.join(""),u=b)}if(d().tests[t]&&d().tests[t][0].cd===g)return r(d().tests[t]);for(var y=h.shift();y<c.length;y++){if(a(c[y],h,[y])&&u===t||u>t)break}}return(0===p.length||f)&&p.push({match:{fn:null,cardinality:0,optionality:!0,casing:null,def:"",placeholder:""},locator:[],cd:g}),void 0!==i&&d().tests[t]?r(e.extend(!0,[],p)):(d().tests[t]=e.extend(!0,[],p),r(d().tests[t]))}function _(){return void 0===d()._buffer&&(d()._buffer=u(!1,1),void 0===d().buffer&&d()._buffer.slice()),d()._buffer}function w(e){return void 0!==d().buffer&&!0!==e||(d().buffer=u(!0,p(),!0)),d().buffer}function $(e,t,i){var n;if(!0===e)h(),e=0,t=i.length;else for(n=e;n<t;n++)delete d().validPositions[n];for(n=e;n<t;n++)h(!0),i[n]!==s.skipOptionalPartCharacter&&C(n,i[n],!0,!0)}function x(e,i,n){switch(s.casing||i.casing){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break;case"title":var a=d().validPositions[n-1];e=0===n||a&&a.input===String.fromCharCode(t.keyCode.SPACE)?e.toUpperCase():e.toLowerCase()}return e}function k(t,i,n){for(var a,o=s.greedy?i:i.slice(0,1),r=!1,l=void 0!==n?n.split(","):[],c=0;c<l.length;c++)-1!==(a=t.indexOf(l[c]))&&t.splice(a,1);for(var u=0;u<t.length;u++)if(-1!==e.inArray(t[u],o)){r=!0;break}return r}function C(i,n,a,o,r){function l(e){var t=K?e.begin-e.end>1||e.begin-e.end==1&&s.insertMode:e.end-e.begin>1||e.end-e.begin==1&&s.insertMode;return t&&0===e.begin&&e.end===d().maskLength?"full":t}function c(t,n,a){var r=!1;return e.each(y(t),function(c,u){for(var m=u.match,g=n?1:0,v="",b=m.cardinality;b>g;b--)v+=S(t-(b-1));if(n&&(v+=n),w(!0),!1!==(r=null!=m.fn?m.fn.test(v,d(),t,a,s,l(i)):(n===m.def||n===s.skipOptionalPartCharacter)&&""!==m.def&&{c:j(t,m,!0)||m.def,pos:t})){var y=void 0!==r.c?r.c:n;y=y===s.skipOptionalPartCharacter&&null===m.fn?j(t,m,!0)||m.def:y;var k=t,P=w();if(void 0!==r.remove&&(e.isArray(r.remove)||(r.remove=[r.remove]),e.each(r.remove.sort(function(e,t){return t-e}),function(e,t){f(t,t+1,!0)})),void 0!==r.insert&&(e.isArray(r.insert)||(r.insert=[r.insert]),e.each(r.insert.sort(function(e,t){return e-t}),function(e,t){C(t.pos,t.c,!0,o)})),r.refreshFromBuffer){var T=r.refreshFromBuffer;if(a=!0,$(!0===T?T:T.start,T.end,P),void 0===r.pos&&void 0===r.c)return r.pos=p(),!1;if((k=void 0!==r.pos?r.pos:t)!==t)return r=e.extend(r,C(k,y,!0,o)),!1}else if(!0!==r&&void 0!==r.pos&&r.pos!==t&&(k=r.pos,$(t,k,w().slice()),k!==t))return r=e.extend(r,C(k,y,!0)),!1;return(!0===r||void 0!==r.pos||void 0!==r.c)&&(c>0&&h(!0),_(k,e.extend({},u,{input:x(y,m,k)}),o,l(i))||(r=!1),!1)}}),r}function u(t,i,n){var a,r,l,c,u,f,m,g,v=e.extend(!0,{},d().validPositions),b=!1,_=p();for(c=d().validPositions[_];_>=0;_--)if((l=d().validPositions[_])&&void 0!==l.alternation){if(a=_,r=d().validPositions[a].alternation,c.locator[l.alternation]!==l.locator[l.alternation])break;c=l}if(void 0!==r){g=parseInt(a);var w=void 0!==c.locator[c.alternation||r]?c.locator[c.alternation||r]:m[0];w.length>0&&(w=w.split(",")[0]);var $=d().validPositions[g],x=d().validPositions[g-1];e.each(y(g,x?x.locator:void 0,g-1),function(a,l){m=l.locator[r]?l.locator[r].toString().split(","):[];for(var c=0;c<m.length;c++){var y=[],_=0,x=0,k=!1;if(w<m[c]&&(void 0===l.na||-1===e.inArray(m[c],l.na.split(",")))){d().validPositions[g]=e.extend(!0,{},l);var P=d().validPositions[g].locator;for(d().validPositions[g].locator[r]=parseInt(m[c]),null==l.match.fn?($.input!==l.match.def&&(k=!0,!0!==$.generatedInput&&y.push($.input)),x++,d().validPositions[g].generatedInput=!/[0-9a-bA-Z]/.test(l.match.def),d().validPositions[g].input=l.match.def):d().validPositions[g].input=$.input,u=g+1;u<p(void 0,!0)+1;u++)f=d().validPositions[u],f&&!0!==f.generatedInput&&/[0-9a-bA-Z]/.test(f.input)?y.push(f.input):u<t&&_++,delete d().validPositions[u];for(k&&y[0]===l.match.def&&y.shift(),h(!0),b=!0;y.length>0;){var T=y.shift();if(T!==s.skipOptionalPartCharacter&&!(b=C(p(void 0,!0)+1,T,!1,o,!0)))break}if(b){d().validPositions[g].locator=P;var D=p(t)+1;for(u=g+1;u<p()+1;u++)(void 0===(f=d().validPositions[u])||null==f.match.fn)&&u<t+(x-_)&&x++;t+=x-_,b=C(t>D?D:t,i,n,o,!0)}if(b)return!1;h(),d().validPositions=e.extend(!0,{},v)}}})}return b}function v(t,i){var n=d().validPositions[i];if(n)for(var a=n.locator,s=a.length,o=t;o<i;o++)if(void 0===d().validPositions[o]&&!P(o,!0)){var r=y(o).slice(),l=m(r,!0),u=-1;""===r[r.length-1].match.def&&r.pop(),e.each(r,function(e,t){for(var i=0;i<s;i++){if(void 0===t.locator[i]||!k(t.locator[i].toString().split(","),a[i].toString().split(","),t.na)){var n=a[i],o=l.locator[i],r=t.locator[i];n-o>Math.abs(n-r)&&(l=t);break}u<i&&(u=i,l=t)}}),l=e.extend({},l,{input:j(o,l.match,!0)||l.match.def}),l.generatedInput=!0,_(o,l,!0),d().validPositions[i]=void 0,c(i,n.input,!0)}}function _(t,i,n,a){if(a||s.insertMode&&void 0!==d().validPositions[t]&&void 0===n){var o,r=e.extend(!0,{},d().validPositions),l=p(void 0,!0);for(o=t;o<=l;o++)delete d().validPositions[o];d().validPositions[t]=e.extend(!0,{},i);var c,u=!0,f=d().validPositions,m=!1,g=d().maskLength;for(o=c=t;o<=l;o++){var v=r[o];if(void 0!==v)for(var y=c;y<d().maskLength&&(null===v.match.fn&&f[o]&&(!0===f[o].match.optionalQuantifier||!0===f[o].match.optionality)||null!=v.match.fn);){if(y++,!1===m&&r[y]&&r[y].match.def===v.match.def)d().validPositions[y]=e.extend(!0,{},r[y]),d().validPositions[y].input=v.input,D(y),c=y,u=!0;else if(b(y,v.match.def)){var _=C(y,v.input,!0,!0);u=!1!==_,c=_.caret||_.insert?p():y,m=!0}else if(!(u=!0===v.generatedInput)&&y>=d().maskLength-1)break;if(d().maskLength<g&&(d().maskLength=g),u)break}if(!u)break}if(!u)return d().validPositions=e.extend(!0,{},r),h(!0),!1}else d().validPositions[t]=e.extend(!0,{},i);return h(!0),!0}function D(t){for(var i=t-1;i>-1&&!d().validPositions[i];i--);var n,a;for(i++;i<t;i++)void 0===d().validPositions[i]&&(!1===s.jitMasking||s.jitMasking>i)&&(a=y(i,g(i-1).locator,i-1).slice(),""===a[a.length-1].match.def&&a.pop(),(n=m(a))&&(n.match.def===s.radixPointDefinitionSymbol||!P(i,!0)||e.inArray(s.radixPoint,w())<i&&n.match.fn&&n.match.fn.test(j(i),d(),i,!1,s))&&!1!==(E=c(i,j(i,n.match,!0)||(null==n.match.fn?n.match.def:""!==j(i)?j(i):w()[i]),!0))&&(d().validPositions[E.pos||i].generatedInput=!0))}a=!0===a;var A=i;void 0!==i.begin&&(A=K&&!l(i)?i.end:i.begin);var E=!1,I=e.extend(!0,{},d().validPositions);if(D(A),l(i)&&(R(void 0,t.keyCode.DELETE,i),A=d().p),A<d().maskLength&&(E=c(A,n,a),(!a||!0===o)&&!1===E)){var N=d().validPositions[A];if(!N||null!==N.match.fn||N.match.def!==n&&n!==s.skipOptionalPartCharacter){if((s.insertMode||void 0===d().validPositions[T(A)])&&!P(A,!0))for(var F=A+1,M=T(A);F<=M;F++)if(!1!==(E=c(F,n,a))){v(A,void 0!==E.pos?E.pos:F),A=F;break}}else E={caret:T(A)}}return!1===E&&s.keepStatic&&!a&&!0!==r&&(E=u(A,n,a)),!0===E&&(E={pos:A}),e.isFunction(s.postValidation)&&!1!==E&&!a&&!0!==o&&(E=!!s.postValidation(w(!0),E,s)&&E),void 0===E.pos&&(E.pos=A),!1===E&&(h(!0),d().validPositions=e.extend(!0,{},I)),E}function P(e,t){var i;if(t?(i=g(e).match,""===i.def&&(i=v(e).match)):i=v(e).match,null!=i.fn)return i.fn;if(!0!==t&&e>-1){var n=y(e);return n.length>1+(""===n[n.length-1].match.def?1:0)}return!1}function T(e,t){var i=d().maskLength;if(e>=i)return i;for(var n=e;++n<i&&(!0===t&&(!0!==v(n).match.newBlockMarker||!P(n))||!0!==t&&!P(n)););return n}function D(e,t){var i,n=e;if(n<=0)return 0;for(;--n>0&&(!0===t&&!0!==v(n).match.newBlockMarker||!0!==t&&!P(n)&&(i=y(n),i.length<2||2===i.length&&""===i[1].match.def)););return n}function S(e){return void 0===d().validPositions[e]?j(e):d().validPositions[e].input}function A(t,i,n,a,o){if(a&&e.isFunction(s.onBeforeWrite)){var r=s.onBeforeWrite(a,i,n,s);if(r){if(r.refreshFromBuffer){var l=r.refreshFromBuffer;$(!0===l?l:l.start,l.end,r.buffer||i),i=w(!0)}void 0!==n&&(n=void 0!==r.caret?r.caret:n)}}t.inputmask._valueSet(i.join("")),void 0===n||void 0!==a&&"blur"===a.type?H(t,i,n):N(t,n),!0===o&&(X=!0,e(t).trigger("input"))}function j(t,i,n){if(i=i||v(t).match,void 0!==i.placeholder||!0===n)return e.isFunction(i.placeholder)?i.placeholder(s):i.placeholder;if(null===i.fn){if(t>-1&&void 0===d().validPositions[t]){var a,o=y(t),r=[];if(o.length>1+(""===o[o.length-1].match.def?1:0))for(var l=0;l<o.length;l++)if(!0!==o[l].match.optionality&&!0!==o[l].match.optionalQuantifier&&(null===o[l].match.fn||void 0===a||!1!==o[l].match.fn.test(a.match.def,d(),t,!0,s))&&(r.push(o[l]),null===o[l].match.fn&&(a=o[l]),r.length>1&&/[0-9a-bA-Z]/.test(r[0].match.def)))return s.placeholder.charAt(t%s.placeholder.length)}return i.def}return s.placeholder.charAt(t%s.placeholder.length)}function E(i,n,a,o,r,l){function c(){var e=!1,t=_().slice(m,T(m)).join("").indexOf(f);if(-1!==t&&!P(m)){e=!0;for(var i=_().slice(m,m+t),n=0;n<i.length;n++)if(" "!==i[n]){e=!1;break}}return e}var u=o.slice(),f="",m=0,v=void 0;if(h(),d().p=T(-1),!a)if(!0!==s.autoUnmask){var b=_().slice(0,T(-1)).join(""),y=u.join("").match(new RegExp("^"+t.escapeRegex(b),"g"));y&&y.length>0&&(u.splice(0,y.length*b.length),m=T(m))}else m=T(m);if(e.each(u,function(t,n){if(void 0!==n){var o=new e.Event("keypress");o.which=n.charCodeAt(0),f+=n;var r=p(void 0,!0),l=d().validPositions[r],u=g(r+1,l?l.locator.slice():void 0,r);if(!c()||a||s.autoUnmask){var b=a?t:null==u.match.fn&&u.match.optionality&&r+1<d().p?r+1:d().p;v=ee.keypressEvent.call(i,o,!0,!1,a,b),m=b+1,f=""}else v=ee.keypressEvent.call(i,o,!0,!1,!0,r+1);if(!a&&e.isFunction(s.onBeforeWrite)&&(v=s.onBeforeWrite(o,w(),v.forwardPosition,s))&&v.refreshFromBuffer){var y=v.refreshFromBuffer;$(!0===y?y:y.start,y.end,v.buffer),h(!0),v.caret&&(d().p=v.caret)}}}),n){var x=void 0,k=p();document.activeElement===i&&(r||v)&&(x=N(i).begin,r&&!1===v&&(x=T(p(x))),v&&!0!==l&&(x<k+1||-1===k)&&(x=s.numericInput&&void 0===v.caret?D(v.forwardPosition):v.forwardPosition)),A(i,w(),x,r||new e.Event("checkval"))}}function I(t){if(t){if(void 0===t.inputmask)return t.value;t.inputmask&&t.inputmask.refreshValue&&ee.setValueEvent.call(t)}var i=[],n=d().validPositions;for(var a in n)n[a].match&&null!=n[a].match.fn&&i.push(n[a].input);var o=0===i.length?"":(K?i.reverse():i).join("");if(e.isFunction(s.onUnMask)){var r=(K?w().slice().reverse():w()).join("");o=s.onUnMask(r,o,s)||o}return o}function N(e,t,i,n){function a(e){if(!0!==n&&K&&"number"==typeof e&&(!s.greedy||""!==s.placeholder)){e=w().join("").length-e}return e}var r;if("number"!=typeof t)return e.setSelectionRange?(t=e.selectionStart,i=e.selectionEnd):window.getSelection?(r=window.getSelection().getRangeAt(0),r.commonAncestorContainer.parentNode!==e&&r.commonAncestorContainer!==e||(t=r.startOffset,i=r.endOffset)):document.selection&&document.selection.createRange&&(r=document.selection.createRange(),t=0-r.duplicate().moveStart("character",-e.inputmask._valueGet().length),i=t+r.text.length),{begin:a(t),end:a(i)};t=a(t),i=a(i),i="number"==typeof i?i:t;var l=parseInt(((e.ownerDocument.defaultView||window).getComputedStyle?(e.ownerDocument.defaultView||window).getComputedStyle(e,null):e.currentStyle).fontSize)*i;if(e.scrollLeft=l>e.scrollWidth?l:0,o||!1!==s.insertMode||t!==i||i++,e.setSelectionRange)e.selectionStart=t,e.selectionEnd=i;else if(window.getSelection){if(r=document.createRange(),void 0===e.firstChild||null===e.firstChild){var c=document.createTextNode("");e.appendChild(c)}r.setStart(e.firstChild,t<e.inputmask._valueGet().length?t:e.inputmask._valueGet().length),r.setEnd(e.firstChild,i<e.inputmask._valueGet().length?i:e.inputmask._valueGet().length),r.collapse(!0);var u=window.getSelection();u.removeAllRanges(),u.addRange(r)}else e.createTextRange&&(r=e.createTextRange(),r.collapse(!0),r.moveEnd("character",i),r.moveStart("character",t),r.select());H(e,void 0,{begin:t,end:i})}function F(t){var i,n,a=w(),s=a.length,o=p(),r={},l=d().validPositions[o],c=void 0!==l?l.locator.slice():void 0;for(i=o+1;i<a.length;i++)n=g(i,c,i-1),c=n.locator.slice(),r[i]=e.extend(!0,{},n);var u=l&&void 0!==l.alternation?l.locator[l.alternation]:void 0;for(i=s-1;i>o&&(n=r[i],(n.match.optionality||n.match.optionalQuantifier||u&&(u!==r[i].locator[l.alternation]&&null!=n.match.fn||null===n.match.fn&&n.locator[l.alternation]&&k(n.locator[l.alternation].toString().split(","),u.toString().split(","))&&""!==y(i)[0].def))&&a[i]===j(i,n.match));i--)s--;return t?{l:s,def:r[s]?r[s].match:void 0}:s}function M(e){for(var t,i=F(),n=e.length;i<n&&!P(i+1)&&(t=v(i+1))&&!0!==t.match.optionality&&!0!==t.match.optionalQuantifier;)i++;for(;(t=v(i-1))&&t.match.optionality&&t.input===s.skipOptionalPartCharacter;)i--;return e.splice(i),e}function L(t){if(e.isFunction(s.isComplete))return s.isComplete(t,s);if("*"!==s.repeat){var i=!1,n=F(!0),a=D(n.l);if(void 0===n.def||n.def.newBlockMarker||n.def.optionality||n.def.optionalQuantifier){i=!0;for(var o=0;o<=a;o++){var r=g(o).match;if(null!==r.fn&&void 0===d().validPositions[o]&&!0!==r.optionality&&!0!==r.optionalQuantifier||null===r.fn&&t[o]!==j(o,r)){i=!1;break}}}return i}}function R(i,n,a,o){function r(){if(s.keepStatic){for(var t=[],n=p(-1,!0),a=e.extend(!0,{},d().validPositions),o=d().validPositions[n];n>=0;n--){var r=d().validPositions[n];if(r){if(!0!==r.generatedInput&&/[0-9a-bA-Z]/.test(r.input)&&t.push(r.input),delete d().validPositions[n],void 0!==r.alternation&&r.locator[r.alternation]!==o.locator[r.alternation])break;o=r}}if(n>-1)for(d().p=T(p(-1,!0));t.length>0;){var l=new e.Event("keypress");l.which=t.pop().charCodeAt(0),ee.keypressEvent.call(i,l,!0,!1,!1,d().p)}else d().validPositions=e.extend(!0,{},a)}}if((s.numericInput||K)&&(n===t.keyCode.BACKSPACE?n=t.keyCode.DELETE:n===t.keyCode.DELETE&&(n=t.keyCode.BACKSPACE),K)){var l=a.end;a.end=a.begin,a.begin=l}n===t.keyCode.BACKSPACE&&(a.end-a.begin<1||!1===s.insertMode)?(a.begin=D(a.begin),void 0===d().validPositions[a.begin]||d().validPositions[a.begin].input!==s.groupSeparator&&d().validPositions[a.begin].input!==s.radixPoint||a.begin--):n===t.keyCode.DELETE&&a.begin===a.end&&(a.end=P(a.end,!0)?a.end+1:T(a.end)+1,void 0===d().validPositions[a.begin]||d().validPositions[a.begin].input!==s.groupSeparator&&d().validPositions[a.begin].input!==s.radixPoint||a.end++),f(a.begin,a.end,!1,o),!0!==o&&r();var c=p(a.begin,!0);c<a.begin?d().p=T(c):!0!==o&&(d().p=a.begin)}function O(t){function i(e){var i,n=document.createElement("span");for(var a in o)isNaN(a)&&-1!==a.indexOf("font")&&(n.style[a]=o[a]);n.style.textTransform=o.textTransform,n.style.letterSpacing=o.letterSpacing,n.style.position="absolute",n.style.height="auto",n.style.width="auto",n.style.visibility="hidden",n.style.whiteSpace="nowrap",document.body.appendChild(n);var s,r=t.inputmask._valueGet(),l=0;for(i=0,s=r.length;i<=s;i++){if(n.innerHTML+=r.charAt(i)||"_",n.offsetWidth>=e){var c=e-l,u=n.offsetWidth-e;n.innerHTML=r.charAt(i),c-=n.offsetWidth/3,i=c<u?i-1:i;break}l=n.offsetWidth}return document.body.removeChild(n),i}function n(){W.style.position="absolute",W.style.top=a.top+"px",W.style.left=a.left+"px",W.style.width=parseInt(t.offsetWidth)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth)+"px",W.style.height=parseInt(t.offsetHeight)-parseInt(o.paddingTop)-parseInt(o.paddingBottom)-parseInt(o.borderTopWidth)-parseInt(o.borderBottomWidth)+"px",W.style.lineHeight=W.style.height,W.style.zIndex=isNaN(o.zIndex)?-1:o.zIndex-1,W.style.webkitAppearance="textfield",W.style.mozAppearance="textfield",W.style.Appearance="textfield"}var a=e(t).position(),o=(t.ownerDocument.defaultView||window).getComputedStyle(t,null);t.parentNode,W=document.createElement("div"),document.body.appendChild(W);for(var r in o)isNaN(r)&&"cssText"!==r&&-1==r.indexOf("webkit")&&(W.style[r]=o[r]);t.style.backgroundColor="transparent",t.style.color="transparent",t.style.webkitAppearance="caret",t.style.mozAppearance="caret",t.style.Appearance="caret",n(),e(window).on("resize",function(){a=e(t).position(),o=(t.ownerDocument.defaultView||window).getComputedStyle(t,null),n()}),e(t).on("click",function(e){return N(t,i(e.clientX)),ee.clickEvent.call(this,[e])}),e(t).on("keydown",function(e){e.shiftKey||!1===s.insertMode||setTimeout(function(){H(t)},0)})}function H(e,t,i){function n(){o||null!==l.fn&&void 0!==c.input?o&&null!==l.fn&&void 0!==c.input&&(o=!1,a+="</span>"):(o=!0,a+="<span class='im-static''>")}if(void 0!==W){t=t||w(),void 0===i?i=N(e):void 0===i.begin&&(i={begin:i,end:i});var a="",o=!1;if(""!=t){var r,l,c,u=0,h=p();do{u===i.begin&&document.activeElement===e&&(a+="<span class='im-caret' style='border-right-width: 1px;border-right-style: solid;'></span>"),d().validPositions[u]?(c=d().validPositions[u],l=c.match,r=c.locator.slice(),n(),a+=c.input):(c=g(u,r,u-1),l=c.match,r=c.locator.slice(),(!1===s.jitMasking||u<h||"number"==typeof s.jitMasking&&isFinite(s.jitMasking)&&s.jitMasking>u)&&(n(),a+=j(u,l))),u++}while((void 0===U||u<U)&&(null!==l.fn||""!==l.def)||h>u)}W.innerHTML=a}}function z(t){function i(t,i){function n(t){function n(t){if(e.valHooks&&(void 0===e.valHooks[t]||!0!==e.valHooks[t].inputmaskpatch)){var n=e.valHooks[t]&&e.valHooks[t].get?e.valHooks[t].get:function(e){return e.value},a=e.valHooks[t]&&e.valHooks[t].set?e.valHooks[t].set:function(e,t){return e.value=t,e};e.valHooks[t]={get:function(e){if(e.inputmask){if(e.inputmask.opts.autoUnmask)return e.inputmask.unmaskedvalue();var t=n(e);return-1!==p(void 0,void 0,e.inputmask.maskset.validPositions)||!0!==i.nullable?t:""}return n(e)},set:function(t,i){var n,s=e(t);return n=a(t,i),t.inputmask&&s.trigger("setvalue"),n},inputmaskpatch:!0}}}function a(){
return this.inputmask?this.inputmask.opts.autoUnmask?this.inputmask.unmaskedvalue():-1!==p()||!0!==i.nullable?document.activeElement===this&&i.clearMaskOnLostFocus?(K?M(w().slice()).reverse():M(w().slice())).join(""):r.call(this):"":r.call(this)}function s(t){l.call(this,t),this.inputmask&&e(this).trigger("setvalue")}function o(t){Z.on(t,"mouseenter",function(){var t=e(this);this.inputmask._valueGet()!==w().join("")&&t.trigger("setvalue")})}var r,l;if(!t.inputmask.__valueGet){if(!0!==i.noValuePatching){if(Object.getOwnPropertyDescriptor){"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"==typeof"test".__proto__?function(e){return e.__proto__}:function(e){return e.constructor.prototype});var c=Object.getPrototypeOf?Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t),"value"):void 0;c&&c.get&&c.set?(r=c.get,l=c.set,Object.defineProperty(t,"value",{get:a,set:s,configurable:!0})):"INPUT"!==t.tagName&&(r=function(){return this.textContent},l=function(e){this.textContent=e},Object.defineProperty(t,"value",{get:a,set:s,configurable:!0}))}else document.__lookupGetter__&&t.__lookupGetter__("value")&&(r=t.__lookupGetter__("value"),l=t.__lookupSetter__("value"),t.__defineGetter__("value",a),t.__defineSetter__("value",s));t.inputmask.__valueGet=r,t.inputmask.__valueSet=l}t.inputmask._valueGet=function(e){return K&&!0!==e?r.call(this.el).split("").reverse().join(""):r.call(this.el)},t.inputmask._valueSet=function(e,t){l.call(this.el,null===e||void 0===e?"":!0!==t&&K?e.split("").reverse().join(""):e)},void 0===r&&(r=function(){return this.value},l=function(e){this.value=e},n(t.type),o(t))}}var a=t.getAttribute("type"),s="INPUT"===t.tagName&&-1!==e.inArray(a,i.supportsInputType)||t.isContentEditable||"TEXTAREA"===t.tagName;if(!s)if("INPUT"===t.tagName){var o=document.createElement("input");o.setAttribute("type",a),s="text"===o.type,o=null}else s="partial";return!1!==s&&n(t),s}var n=i(t,s);if(!1!==n&&(V=t,q=e(V),("rtl"===V.dir||s.rightAlign)&&(V.style.textAlign="right"),("rtl"===V.dir||s.numericInput)&&(V.dir="ltr",V.removeAttribute("dir"),V.inputmask.isRTL=!0,K=!0),!0===s.colorMask&&O(V),c&&(V.hasOwnProperty("inputmode")&&(V.inputmode=s.inputmode,V.setAttribute("inputmode",s.inputmode)),"rtfm"===s.androidHack&&(!0!==s.colorMask&&O(V),V.type="password")),Z.off(V),!0===n&&(Z.on(V,"submit",ee.submitEvent),Z.on(V,"reset",ee.resetEvent),Z.on(V,"mouseenter",ee.mouseenterEvent),Z.on(V,"blur",ee.blurEvent),Z.on(V,"focus",ee.focusEvent),Z.on(V,"mouseleave",ee.mouseleaveEvent),!0!==s.colorMask&&Z.on(V,"click",ee.clickEvent),Z.on(V,"dblclick",ee.dblclickEvent),Z.on(V,"paste",ee.pasteEvent),Z.on(V,"dragdrop",ee.pasteEvent),Z.on(V,"drop",ee.pasteEvent),Z.on(V,"cut",ee.cutEvent),Z.on(V,"complete",s.oncomplete),Z.on(V,"incomplete",s.onincomplete),Z.on(V,"cleared",s.oncleared),c&&!0===s.inputEventOnly||(Z.on(V,"keydown",ee.keydownEvent),Z.on(V,"keypress",ee.keypressEvent)),Z.on(V,"compositionstart",e.noop),Z.on(V,"compositionupdate",e.noop),Z.on(V,"compositionend",e.noop),Z.on(V,"keyup",e.noop),Z.on(V,"input",ee.inputFallBackEvent),Z.on(V,"beforeinput",e.noop)),Z.on(V,"setvalue",ee.setValueEvent),_(),""!==V.inputmask._valueGet()||!1===s.clearMaskOnLostFocus||document.activeElement===V)){var a=e.isFunction(s.onBeforeMask)?s.onBeforeMask(V.inputmask._valueGet(),s)||V.inputmask._valueGet():V.inputmask._valueGet();E(V,!0,!1,a.split(""));var o=w().slice();B=o.join(""),!1===L(o)&&s.clearIncomplete&&h(),s.clearMaskOnLostFocus&&document.activeElement!==V&&(-1===p()?o=[]:M(o)),A(V,o),document.activeElement===V&&N(V,T(p()))}}n=n||this.maskset,s=s||this.opts;var B,q,U,W,G,V=this.el,K=this.isRTL,Y=!1,X=!1,Q=!1,J=!1,Z={on:function(i,n,a){var o=function(i){if(void 0===this.inputmask&&"FORM"!==this.nodeName){var n=e.data(this,"_inputmask_opts");n?new t(n).mask(this):Z.off(this)}else{if("setvalue"===i.type||"FORM"===this.nodeName||!(this.disabled||this.readOnly&&!("keydown"===i.type&&i.ctrlKey&&67===i.keyCode||!1===s.tabThrough&&i.keyCode===t.keyCode.TAB))){switch(i.type){case"input":if(!0===X)return X=!1,i.preventDefault();break;case"keydown":Y=!1,X=!1;break;case"keypress":if(!0===Y)return i.preventDefault();Y=!0;break;case"click":if(r||l){var o=this,c=arguments;return setTimeout(function(){a.apply(o,c)},0),!1}}var u=a.apply(this,arguments);return!1===u&&(i.preventDefault(),i.stopPropagation()),u}i.preventDefault()}};i.inputmask.events[n]=i.inputmask.events[n]||[],i.inputmask.events[n].push(o),-1!==e.inArray(n,["submit","reset"])?null!=i.form&&e(i.form).on(n,o):e(i).on(n,o)},off:function(t,i){if(t.inputmask&&t.inputmask.events){var n;i?(n=[],n[i]=t.inputmask.events[i]):n=t.inputmask.events,e.each(n,function(i,n){for(;n.length>0;){var a=n.pop();-1!==e.inArray(i,["submit","reset"])?null!=t.form&&e(t.form).off(i,a):e(t).off(i,a)}delete t.inputmask.events[i]})}}},ee={keydownEvent:function(i){function n(e){var t=document.createElement("input"),i="on"+e,n=i in t;return n||(t.setAttribute(i,"return;"),n="function"==typeof t[i]),t=null,n}var a=this,o=e(a),r=i.keyCode,c=N(a);if(r===t.keyCode.BACKSPACE||r===t.keyCode.DELETE||l&&r===t.keyCode.BACKSPACE_SAFARI||i.ctrlKey&&r===t.keyCode.X&&!n("cut"))i.preventDefault(),R(a,r,c),A(a,w(!0),d().p,i,a.inputmask._valueGet()!==w().join("")),a.inputmask._valueGet()===_().join("")?o.trigger("cleared"):!0===L(w())&&o.trigger("complete");else if(r===t.keyCode.END||r===t.keyCode.PAGE_DOWN){i.preventDefault();var u=T(p());s.insertMode||u!==d().maskLength||i.shiftKey||u--,N(a,i.shiftKey?c.begin:u,u,!0)}else r===t.keyCode.HOME&&!i.shiftKey||r===t.keyCode.PAGE_UP?(i.preventDefault(),N(a,0,i.shiftKey?c.begin:0,!0)):(s.undoOnEscape&&r===t.keyCode.ESCAPE||90===r&&i.ctrlKey)&&!0!==i.altKey?(E(a,!0,!1,B.split("")),o.trigger("click")):r!==t.keyCode.INSERT||i.shiftKey||i.ctrlKey?!0===s.tabThrough&&r===t.keyCode.TAB?(!0===i.shiftKey?(null===v(c.begin).match.fn&&(c.begin=T(c.begin)),c.end=D(c.begin,!0),c.begin=D(c.end,!0)):(c.begin=T(c.begin,!0),c.end=T(c.begin,!0),c.end<d().maskLength&&c.end--),c.begin<d().maskLength&&(i.preventDefault(),N(a,c.begin,c.end))):i.shiftKey||!1===s.insertMode&&(r===t.keyCode.RIGHT?setTimeout(function(){var e=N(a);N(a,e.begin)},0):r===t.keyCode.LEFT&&setTimeout(function(){var e=N(a);N(a,K?e.begin+1:e.begin-1)},0)):(s.insertMode=!s.insertMode,N(a,s.insertMode||c.begin!==d().maskLength?c.begin:c.begin-1));s.onKeyDown.call(this,i,w(),N(a).begin,s),Q=-1!==e.inArray(r,s.ignorables)},keypressEvent:function(i,n,a,o,r){var l=this,c=e(l),u=i.which||i.charCode||i.keyCode;if(!(!0===n||i.ctrlKey&&i.altKey)&&(i.ctrlKey||i.metaKey||Q))return u===t.keyCode.ENTER&&B!==w().join("")&&(B=w().join(""),setTimeout(function(){c.trigger("change")},0)),!0;if(u){46===u&&!1===i.shiftKey&&""!==s.radixPoint&&(u=s.radixPoint.charCodeAt(0));var p,f=n?{begin:r,end:r}:N(l),m=String.fromCharCode(u);d().writeOutBuffer=!0;var g=C(f,m,o);if(!1!==g&&(h(!0),p=void 0!==g.caret?g.caret:n?g.pos+1:T(g.pos),d().p=p),!1!==a){var v=this;if(setTimeout(function(){s.onKeyValidation.call(v,u,g,s)},0),d().writeOutBuffer&&!1!==g){var b=w();A(l,b,s.numericInput&&void 0===g.caret?D(p):p,i,!0!==n),!0!==n&&setTimeout(function(){!0===L(b)&&c.trigger("complete")},0)}}if(i.preventDefault(),n)return g.forwardPosition=p,g}},pasteEvent:function(t){var i,n=this,a=t.originalEvent||t,o=e(n),r=n.inputmask._valueGet(!0),l=N(n);K&&(i=l.end,l.end=l.begin,l.begin=i);var c=r.substr(0,l.begin),u=r.substr(l.end,r.length);if(c===(K?_().reverse():_()).slice(0,l.begin).join("")&&(c=""),u===(K?_().reverse():_()).slice(l.end).join("")&&(u=""),K&&(i=c,c=u,u=i),window.clipboardData&&window.clipboardData.getData)r=c+window.clipboardData.getData("Text")+u;else{if(!a.clipboardData||!a.clipboardData.getData)return!0;r=c+a.clipboardData.getData("text/plain")+u}var d=r;if(e.isFunction(s.onBeforePaste)){if(!1===(d=s.onBeforePaste(r,s)))return t.preventDefault();d||(d=r)}return E(n,!1,!1,K?d.split("").reverse():d.toString().split("")),A(n,w(),T(p()),t,B!==w().join("")),!0===L(w())&&o.trigger("complete"),t.preventDefault()},inputFallBackEvent:function(i){var n=this,a=n.inputmask._valueGet();if(w().join("")!==a){var s=N(n);if(a=a.replace(new RegExp("("+t.escapeRegex(_().join(""))+")*"),""),r){var o=a.replace(w().join(""),"");if(1===o.length){var l=new e.Event("keypress");return l.which=o.charCodeAt(0),ee.keypressEvent.call(n,l,!0,!0,!1,d().validPositions[s.begin-1]?s.begin:s.begin-1),!1}}if(s.begin>a.length&&(N(n,a.length),s=N(n)),w().length-a.length!=1||a.charAt(s.begin)===w()[s.begin]||a.charAt(s.begin+1)===w()[s.begin]||P(s.begin)){for(var c=p()+1,u=_().join("");null===a.match(t.escapeRegex(u)+"$");)u=u.slice(1);a=a.replace(u,""),a=a.split(""),E(n,!0,!1,a,i,s.begin<c),!0===L(w())&&e(n).trigger("complete")}else i.keyCode=t.keyCode.BACKSPACE,ee.keydownEvent.call(n,i);i.preventDefault()}},setValueEvent:function(){this.inputmask.refreshValue=!1;var t=this,i=t.inputmask._valueGet();E(t,!0,!1,(e.isFunction(s.onBeforeMask)?s.onBeforeMask(i,s)||i:i).split("")),B=w().join(""),(s.clearMaskOnLostFocus||s.clearIncomplete)&&t.inputmask._valueGet()===_().join("")&&t.inputmask._valueSet("")},focusEvent:function(e){var t=this,i=t.inputmask._valueGet();s.showMaskOnFocus&&(!s.showMaskOnHover||s.showMaskOnHover&&""===i)&&(t.inputmask._valueGet()!==w().join("")?A(t,w(),T(p())):!1===J&&N(t,T(p()))),!0===s.positionCaretOnTab&&ee.clickEvent.apply(t,[e,!0]),B=w().join("")},mouseleaveEvent:function(){var e=this;if(J=!1,s.clearMaskOnLostFocus&&document.activeElement!==e){var t=w().slice(),i=e.inputmask._valueGet();i!==e.getAttribute("placeholder")&&""!==i&&(-1===p()&&i===_().join("")?t=[]:M(t),A(e,t))}},clickEvent:function(t,i){function n(t){if(""!==s.radixPoint){var i=d().validPositions;if(void 0===i[t]||i[t].input===j(t)){if(t<T(-1))return!0;var n=e.inArray(s.radixPoint,w());if(-1!==n){for(var a in i)if(n<a&&i[a].input!==j(a))return!1;return!0}}}return!1}var a=this;setTimeout(function(){if(document.activeElement===a){var t=N(a);if(i&&(t.begin=t.end),t.begin===t.end)switch(s.positionCaretOnClick){case"none":break;case"radixFocus":if(n(t.begin)){var o=e.inArray(s.radixPoint,w().join(""));N(a,s.numericInput?T(o):o);break}default:var r=t.begin,l=p(r,!0),c=T(l);if(r<c)N(a,P(r)||P(r-1)?r:T(r));else{var u=j(c);(""!==u&&w()[c]!==u&&!0!==v(c).match.optionalQuantifier||!P(c)&&v(c).match.def===u)&&(c=T(c)),N(a,c)}}}},0)},dblclickEvent:function(){var e=this;setTimeout(function(){N(e,0,T(p()))},0)},cutEvent:function(i){var n=this,a=e(n),s=N(n),o=i.originalEvent||i,r=window.clipboardData||o.clipboardData,l=K?w().slice(s.end,s.begin):w().slice(s.begin,s.end);r.setData("text",K?l.reverse().join(""):l.join("")),document.execCommand&&document.execCommand("copy"),R(n,t.keyCode.DELETE,s),A(n,w(),d().p,i,B!==w().join("")),n.inputmask._valueGet()===_().join("")&&a.trigger("cleared")},blurEvent:function(t){var i=e(this),n=this;if(n.inputmask){var a=n.inputmask._valueGet(),o=w().slice();B!==o.join("")&&setTimeout(function(){i.trigger("change"),B=o.join("")},0),""!==a&&(s.clearMaskOnLostFocus&&(-1===p()&&a===_().join("")?o=[]:M(o)),!1===L(o)&&(setTimeout(function(){i.trigger("incomplete")},0),s.clearIncomplete&&(h(),o=s.clearMaskOnLostFocus?[]:_().slice())),A(n,o,void 0,t))}},mouseenterEvent:function(){var e=this;J=!0,document.activeElement!==e&&s.showMaskOnHover&&e.inputmask._valueGet()!==w().join("")&&A(e,w())},submitEvent:function(){B!==w().join("")&&q.trigger("change"),s.clearMaskOnLostFocus&&-1===p()&&V.inputmask._valueGet&&V.inputmask._valueGet()===_().join("")&&V.inputmask._valueSet(""),s.removeMaskOnSubmit&&(V.inputmask._valueSet(V.inputmask.unmaskedvalue(),!0),setTimeout(function(){A(V,w())},0))},resetEvent:function(){V.inputmask.refreshValue=!0,setTimeout(function(){q.trigger("setvalue")},0)}};if(void 0!==i)switch(i.action){case"isComplete":return V=i.el,L(w());case"unmaskedvalue":return void 0!==V&&void 0===i.value||(G=i.value,G=(e.isFunction(s.onBeforeMask)?s.onBeforeMask(G,s)||G:G).split(""),E(void 0,!1,!1,K?G.reverse():G),e.isFunction(s.onBeforeWrite)&&s.onBeforeWrite(void 0,w(),0,s)),I(V);case"mask":z(V);break;case"format":return G=(e.isFunction(s.onBeforeMask)?s.onBeforeMask(i.value,s)||i.value:i.value).split(""),E(void 0,!1,!1,K?G.reverse():G),e.isFunction(s.onBeforeWrite)&&s.onBeforeWrite(void 0,w(),0,s),i.metadata?{value:K?w().slice().reverse().join(""):w().join(""),metadata:a.call(this,{action:"getmetadata"},n,s)}:K?w().slice().reverse().join(""):w().join("");case"isValid":i.value?(G=i.value.split(""),E(void 0,!1,!0,K?G.reverse():G)):i.value=w().join("");for(var te=w(),ie=F(),ne=te.length-1;ne>ie&&!P(ne);ne--);return te.splice(ie,ne+1-ie),L(te)&&i.value===w().join("");case"getemptymask":return _().join("");case"remove":if(V){q=e(V),V.inputmask._valueSet(I(V)),Z.off(V);Object.getOwnPropertyDescriptor&&Object.getPrototypeOf?Object.getOwnPropertyDescriptor(Object.getPrototypeOf(V),"value")&&V.inputmask.__valueGet&&Object.defineProperty(V,"value",{get:V.inputmask.__valueGet,set:V.inputmask.__valueSet,configurable:!0}):document.__lookupGetter__&&V.__lookupGetter__("value")&&V.inputmask.__valueGet&&(V.__defineGetter__("value",V.inputmask.__valueGet),V.__defineSetter__("value",V.inputmask.__valueSet)),V.inputmask=void 0}return V;case"getmetadata":if(e.isArray(n.metadata)){var ae=u(!0,0,!1).join("");return e.each(n.metadata,function(e,t){if(t.mask===ae)return ae=t,!1}),ae}return n.metadata}}var s=navigator.userAgent,o=/mobile/i.test(s),r=/iemobile/i.test(s),l=/iphone/i.test(s)&&!r,c=/android/i.test(s)&&!r;t.prototype={dataAttribute:"data-inputmask",defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},alternatormarker:"|",escapeChar:"\\",mask:null,oncomplete:e.noop,onincomplete:e.noop,oncleared:e.noop,repeat:0,greedy:!0,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,alias:null,onKeyDown:e.noop,onBeforeMask:null,onBeforePaste:function(t,i){return e.isFunction(i.onBeforeMask)?i.onBeforeMask(t,i):t},onBeforeWrite:null,onUnMask:null,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:e.noop,skipOptionalPartCharacter:" ",numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",radixPointDefinitionSymbol:void 0,groupSeparator:"",keepStatic:null,positionCaretOnTab:!0,tabThrough:!1,supportsInputType:["text","tel","password"],ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123,0,229],isComplete:null,canClearPosition:e.noop,postValidation:null,staticDefinitionSymbol:void 0,jitMasking:!1,nullable:!0,inputEventOnly:!1,noValuePatching:!1,positionCaretOnClick:"lvp",casing:null,inputmode:"verbatim",colorMask:!1,androidHack:!1},definitions:{9:{validator:"[0-9]",cardinality:1,definitionSymbol:"*"},a:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",cardinality:1,definitionSymbol:"*"},"*":{validator:"[0-9A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",cardinality:1}},aliases:{},masksCache:{},mask:function(s){function o(t,n,a,s){function o(e,i){null!==(i=void 0!==i?i:t.getAttribute(s+"-"+e))&&("string"==typeof i&&(0===e.indexOf("on")?i=window[i]:"false"===i?i=!1:"true"===i&&(i=!0)),a[e]=i)}var r,l,c,u,d=t.getAttribute(s);if(d&&""!==d&&(d=d.replace(new RegExp("'","g"),'"'),l=JSON.parse("{"+d+"}")),l){c=void 0;for(u in l)if("alias"===u.toLowerCase()){c=l[u];break}}o("alias",c),a.alias&&i(a.alias,a,n);for(r in n){if(l){c=void 0;for(u in l)if(u.toLowerCase()===r.toLowerCase()){c=l[u];break}}o(r,c)}return e.extend(!0,n,a),n}var r=this;return"string"==typeof s&&(s=document.getElementById(s)||document.querySelectorAll(s)),s=s.nodeName?[s]:s,e.each(s,function(i,s){var l=e.extend(!0,{},r.opts);o(s,l,e.extend(!0,{},r.userOptions),r.dataAttribute);var c=n(l,r.noMasksCache);void 0!==c&&(void 0!==s.inputmask&&s.inputmask.remove(),s.inputmask=new t(void 0,void 0,!0),s.inputmask.opts=l,s.inputmask.noMasksCache=r.noMasksCache,s.inputmask.userOptions=e.extend(!0,{},r.userOptions),s.inputmask.isRTL=r.isRTL,s.inputmask.el=s,s.inputmask.maskset=c,e.data(s,"_inputmask_opts",l),a.call(s.inputmask,{action:"mask"}))}),s&&s[0]?s[0].inputmask||this:this},option:function(t,i){return"string"==typeof t?this.opts[t]:"object"==typeof t?(e.extend(this.userOptions,t),this.el&&!0!==i&&this.mask(this.el),this):void 0},unmaskedvalue:function(e){return this.maskset=this.maskset||n(this.opts,this.noMasksCache),a.call(this,{action:"unmaskedvalue",value:e})},remove:function(){return a.call(this,{action:"remove"})},getemptymask:function(){return this.maskset=this.maskset||n(this.opts,this.noMasksCache),a.call(this,{action:"getemptymask"})},hasMaskedValue:function(){return!this.opts.autoUnmask},isComplete:function(){return this.maskset=this.maskset||n(this.opts,this.noMasksCache),a.call(this,{action:"isComplete"})},getmetadata:function(){return this.maskset=this.maskset||n(this.opts,this.noMasksCache),a.call(this,{action:"getmetadata"})},isValid:function(e){return this.maskset=this.maskset||n(this.opts,this.noMasksCache),a.call(this,{action:"isValid",value:e})},format:function(e,t){return this.maskset=this.maskset||n(this.opts,this.noMasksCache),a.call(this,{action:"format",value:e,metadata:t})},analyseMask:function(i,n){function a(e,t,i,n){this.matches=[],this.openGroup=e||!1,this.isGroup=e||!1,this.isOptional=t||!1,this.isQuantifier=i||!1,this.isAlternator=n||!1,this.quantifier={min:1,max:1}}function s(e,i,a){var s=(n.definitions?n.definitions[i]:void 0)||t.prototype.definitions[i];a=void 0!==a?a:e.matches.length;var o=e.matches[a-1];if(s&&!v){for(var r=s.prevalidator,l=r?r.length:0,c=1;c<s.cardinality;c++){var u=l>=c?r[c-1]:[],d=u.validator,h=u.cardinality;e.matches.splice(a++,0,{fn:d?"string"==typeof d?new RegExp(d):new function(){this.test=d}:new RegExp("."),cardinality:h||1,optionality:e.isOptional,newBlockMarker:void 0===o||o.def!==(s.definitionSymbol||i),casing:s.casing,def:s.definitionSymbol||i,placeholder:s.placeholder,nativeDef:i}),o=e.matches[a-1]}e.matches.splice(a++,0,{fn:s.validator?"string"==typeof s.validator?new RegExp(s.validator):new function(){this.test=s.validator}:new RegExp("."),cardinality:s.cardinality,optionality:e.isOptional,newBlockMarker:void 0===o||o.def!==(s.definitionSymbol||i),casing:s.casing,def:s.definitionSymbol||i,placeholder:s.placeholder,nativeDef:i})}else e.matches.splice(a++,0,{fn:null,cardinality:0,optionality:e.isOptional,newBlockMarker:void 0===o||o.def!==i,casing:null,def:n.staticDefinitionSymbol||i,placeholder:void 0!==n.staticDefinitionSymbol?i:void 0,nativeDef:i}),v=!1}function o(t){t&&t.matches&&e.each(t.matches,function(e,i){var a=t.matches[e+1];(void 0===a||void 0===a.matches||!1===a.isQuantifier)&&i&&i.isGroup&&(i.isGroup=!1,s(i,n.groupmarker.start,0),!0!==i.openGroup&&s(i,n.groupmarker.end)),o(i)})}function r(){if(y.length>0){if(h=y[y.length-1],s(h,u),h.isAlternator){p=y.pop();for(var e=0;e<p.matches.length;e++)p.matches[e].isGroup=!1;y.length>0?(h=y[y.length-1],h.matches.push(p)):b.matches.push(p)}}else s(b,u)}function l(e){function t(e){return e===n.optionalmarker.start?e=n.optionalmarker.end:e===n.optionalmarker.end?e=n.optionalmarker.start:e===n.groupmarker.start?e=n.groupmarker.end:e===n.groupmarker.end&&(e=n.groupmarker.start),e}e.matches=e.matches.reverse();for(var i in e.matches)if(e.matches.hasOwnProperty(i)){var a=parseInt(i);if(e.matches[i].isQuantifier&&e.matches[a+1]&&e.matches[a+1].isGroup){var s=e.matches[i];e.matches.splice(i,1),e.matches.splice(a+1,0,s)}void 0!==e.matches[i].matches?e.matches[i]=l(e.matches[i]):e.matches[i]=t(e.matches[i])}return e}for(var c,u,d,h,p,f,m,g=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})|[^.?*+^${[]()|\\]+|./g,v=!1,b=new a,y=[],_=[];c=g.exec(i);)if(u=c[0],v)r();else switch(u.charAt(0)){case n.escapeChar:v=!0;break;case n.optionalmarker.end:case n.groupmarker.end:if(d=y.pop(),d.openGroup=!1,void 0!==d)if(y.length>0){if(h=y[y.length-1],h.matches.push(d),h.isAlternator){p=y.pop();for(var w=0;w<p.matches.length;w++)p.matches[w].isGroup=!1;y.length>0?(h=y[y.length-1],h.matches.push(p)):b.matches.push(p)}}else b.matches.push(d);else r();break;case n.optionalmarker.start:y.push(new a(!1,!0));break;case n.groupmarker.start:y.push(new a(!0));break;case n.quantifiermarker.start:var $=new a(!1,!1,!0);u=u.replace(/[{}]/g,"");var x=u.split(","),k=isNaN(x[0])?x[0]:parseInt(x[0]),C=1===x.length?k:isNaN(x[1])?x[1]:parseInt(x[1]);if("*"!==C&&"+"!==C||(k="*"===C?0:1),$.quantifier={min:k,max:C},y.length>0){var P=y[y.length-1].matches;c=P.pop(),c.isGroup||(m=new a(!0),m.matches.push(c),c=m),P.push(c),P.push($)}else c=b.matches.pop(),c.isGroup||(m=new a(!0),m.matches.push(c),c=m),b.matches.push(c),b.matches.push($);break;case n.alternatormarker:y.length>0?(h=y[y.length-1],f=h.matches.pop()):f=b.matches.pop(),f.isAlternator?y.push(f):(p=new a(!1,!1,!1,!0),p.matches.push(f),y.push(p));break;default:r()}for(;y.length>0;)d=y.pop(),b.matches.push(d);return b.matches.length>0&&(o(b),_.push(b)),n.numericInput&&l(_[0]),_}},t.extendDefaults=function(i){e.extend(!0,t.prototype.defaults,i)},t.extendDefinitions=function(i){e.extend(!0,t.prototype.definitions,i)},t.extendAliases=function(i){e.extend(!0,t.prototype.aliases,i)},t.format=function(e,i,n){return t(i).format(e,n)},t.unmask=function(e,i){return t(i).unmaskedvalue(e)},t.isValid=function(e,i){return t(i).isValid(e)},t.remove=function(t){e.each(t,function(e,t){t.inputmask&&t.inputmask.remove()})},t.escapeRegex=function(e){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];return e.replace(new RegExp("(\\"+t.join("|\\")+")","gim"),"\\$1")},t.keyCode={ALT:18,BACKSPACE:8,BACKSPACE_SAFARI:127,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91,X:88},window.Inputmask=t}(jQuery),function(e,t){void 0===e.fn.inputmask&&(e.fn.inputmask=function(i,n){var a,s=this[0];if(void 0===n&&(n={}),"string"==typeof i)switch(i){case"unmaskedvalue":return s&&s.inputmask?s.inputmask.unmaskedvalue():e(s).val();case"remove":return this.each(function(){this.inputmask&&this.inputmask.remove()});case"getemptymask":return s&&s.inputmask?s.inputmask.getemptymask():"";case"hasMaskedValue":return!(!s||!s.inputmask)&&s.inputmask.hasMaskedValue();case"isComplete":return!s||!s.inputmask||s.inputmask.isComplete();case"getmetadata":return s&&s.inputmask?s.inputmask.getmetadata():void 0;case"setvalue":e(s).val(n),s&&void 0===s.inputmask&&e(s).triggerHandler("setvalue");break;case"option":if("string"!=typeof n)return this.each(function(){if(void 0!==this.inputmask)return this.inputmask.option(n)});if(s&&void 0!==s.inputmask)return s.inputmask.option(n);break;default:return n.alias=i,a=new t(n),this.each(function(){a.mask(this)})}else{if("object"==typeof i)return a=new t(i),void 0===i.mask&&void 0===i.alias?this.each(function(){return void 0!==this.inputmask?this.inputmask.option(i):void a.mask(this)}):this.each(function(){a.mask(this)});if(void 0===i)return this.each(function(){a=new t(n),a.mask(this)})}}),e.fn.inputmask}(jQuery,Inputmask),jQuery,Inputmask,function(e,t){function i(e){return isNaN(e)||29===new Date(e,2,0).getDate()}t.extendAliases({"dd/mm/yyyy":{mask:"1/2/y",placeholder:"dd/mm/yyyy",regex:{val1pre:new RegExp("[0-3]"),val1:new RegExp("0[1-9]|[12][0-9]|3[01]"),val2pre:function(e){var i=t.escapeRegex.call(this,e);return new RegExp("((0[1-9]|[12][0-9]|3[01])"+i+"[01])")},val2:function(e){var i=t.escapeRegex.call(this,e);return new RegExp("((0[1-9]|[12][0-9])"+i+"(0[1-9]|1[012]))|(30"+i+"(0[13-9]|1[012]))|(31"+i+"(0[13578]|1[02]))")}},leapday:"29/02/",separator:"/",yearrange:{minyear:1900,maxyear:2099},isInYearRange:function(e,t,i){if(isNaN(e))return!1;var n=parseInt(e.concat(t.toString().slice(e.length))),a=parseInt(e.concat(i.toString().slice(e.length)));return!isNaN(n)&&t<=n&&n<=i||!isNaN(a)&&t<=a&&a<=i},determinebaseyear:function(e,t,i){var n=(new Date).getFullYear();if(e>n)return e;if(t<n){for(var a=t.toString().slice(0,2),s=t.toString().slice(2,4);t<a+i;)a--;var o=a+s;return e>o?e:o}if(e<=n&&n<=t){for(var r=n.toString().slice(0,2);t<r+i;)r--;var l=r+i;return l<e?e:l}return n},onKeyDown:function(i){var n=e(this);if(i.ctrlKey&&i.keyCode===t.keyCode.RIGHT){var a=new Date;n.val(a.getDate().toString()+(a.getMonth()+1).toString()+a.getFullYear().toString()),n.trigger("setvalue")}},getFrontValue:function(e,t,i){for(var n=0,a=0,s=0;s<e.length&&"2"!==e.charAt(s);s++){var o=i.definitions[e.charAt(s)];o?(n+=a,a=o.cardinality):a++}return t.join("").substr(n,a)},postValidation:function(e,t,n){var a,s,o=e.join("");return 0===n.mask.indexOf("y")?(s=o.substr(0,4),a=o.substr(4,11)):(s=o.substr(6,11),a=o.substr(0,6)),t&&(a!==n.leapday||i(s))},definitions:{1:{validator:function(e,t,i,n,a){var s=a.regex.val1.test(e);return n||s||e.charAt(1)!==a.separator&&-1==="-./".indexOf(e.charAt(1))||!(s=a.regex.val1.test("0"+e.charAt(0)))?s:(t.buffer[i-1]="0",{refreshFromBuffer:{start:i-1,end:i},pos:i,c:e.charAt(0)})},cardinality:2,prevalidator:[{validator:function(e,t,i,n,a){var s=e;isNaN(t.buffer[i+1])||(s+=t.buffer[i+1]);var o=1===s.length?a.regex.val1pre.test(s):a.regex.val1.test(s);if(!n&&!o){if(o=a.regex.val1.test(e+"0"))return t.buffer[i]=e,t.buffer[++i]="0",{pos:i,c:"0"};if(o=a.regex.val1.test("0"+e))return t.buffer[i]="0",i++,{pos:i}}return o},cardinality:1}]},2:{validator:function(e,t,i,n,a){var s=a.getFrontValue(t.mask,t.buffer,a);-1!==s.indexOf(a.placeholder[0])&&(s="01"+a.separator);var o=a.regex.val2(a.separator).test(s+e);return n||o||e.charAt(1)!==a.separator&&-1==="-./".indexOf(e.charAt(1))||!(o=a.regex.val2(a.separator).test(s+"0"+e.charAt(0)))?o:(t.buffer[i-1]="0",{refreshFromBuffer:{start:i-1,end:i},pos:i,c:e.charAt(0)})},cardinality:2,prevalidator:[{validator:function(e,t,i,n,a){isNaN(t.buffer[i+1])||(e+=t.buffer[i+1]);var s=a.getFrontValue(t.mask,t.buffer,a);-1!==s.indexOf(a.placeholder[0])&&(s="01"+a.separator);var o=1===e.length?a.regex.val2pre(a.separator).test(s+e):a.regex.val2(a.separator).test(s+e);return n||o||!(o=a.regex.val2(a.separator).test(s+"0"+e))?o:(t.buffer[i]="0",i++,{pos:i})},cardinality:1}]},y:{validator:function(e,t,i,n,a){return a.isInYearRange(e,a.yearrange.minyear,a.yearrange.maxyear)},cardinality:4,prevalidator:[{validator:function(e,t,i,n,a){var s=a.isInYearRange(e,a.yearrange.minyear,a.yearrange.maxyear);if(!n&&!s){var o=a.determinebaseyear(a.yearrange.minyear,a.yearrange.maxyear,e+"0").toString().slice(0,1);if(s=a.isInYearRange(o+e,a.yearrange.minyear,a.yearrange.maxyear))return t.buffer[i++]=o.charAt(0),{pos:i};if(o=a.determinebaseyear(a.yearrange.minyear,a.yearrange.maxyear,e+"0").toString().slice(0,2),s=a.isInYearRange(o+e,a.yearrange.minyear,a.yearrange.maxyear))return t.buffer[i++]=o.charAt(0),t.buffer[i++]=o.charAt(1),{pos:i}}return s},cardinality:1},{validator:function(e,t,i,n,a){var s=a.isInYearRange(e,a.yearrange.minyear,a.yearrange.maxyear);if(!n&&!s){var o=a.determinebaseyear(a.yearrange.minyear,a.yearrange.maxyear,e).toString().slice(0,2);if(s=a.isInYearRange(e[0]+o[1]+e[1],a.yearrange.minyear,a.yearrange.maxyear))return t.buffer[i++]=o.charAt(1),{pos:i};if(o=a.determinebaseyear(a.yearrange.minyear,a.yearrange.maxyear,e).toString().slice(0,2),s=a.isInYearRange(o+e,a.yearrange.minyear,a.yearrange.maxyear))return t.buffer[i-1]=o.charAt(0),t.buffer[i++]=o.charAt(1),t.buffer[i++]=e.charAt(0),{refreshFromBuffer:{start:i-3,end:i},pos:i}}return s},cardinality:2},{validator:function(e,t,i,n,a){return a.isInYearRange(e,a.yearrange.minyear,a.yearrange.maxyear)},cardinality:3}]}},insertMode:!1,autoUnmask:!1},"mm/dd/yyyy":{placeholder:"mm/dd/yyyy",alias:"dd/mm/yyyy",regex:{val2pre:function(e){var i=t.escapeRegex.call(this,e);return new RegExp("((0[13-9]|1[012])"+i+"[0-3])|(02"+i+"[0-2])")},val2:function(e){var i=t.escapeRegex.call(this,e);return new RegExp("((0[1-9]|1[012])"+i+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+i+"30)|((0[13578]|1[02])"+i+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},leapday:"02/29/",onKeyDown:function(i){var n=e(this);if(i.ctrlKey&&i.keyCode===t.keyCode.RIGHT){var a=new Date;n.val((a.getMonth()+1).toString()+a.getDate().toString()+a.getFullYear().toString()),n.trigger("setvalue")}}},"yyyy/mm/dd":{mask:"y/1/2",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",leapday:"/02/29",onKeyDown:function(i){var n=e(this);if(i.ctrlKey&&i.keyCode===t.keyCode.RIGHT){var a=new Date;n.val(a.getFullYear().toString()+(a.getMonth()+1).toString()+a.getDate().toString()),n.trigger("setvalue")}}},"dd.mm.yyyy":{mask:"1.2.y",placeholder:"dd.mm.yyyy",leapday:"29.02.",separator:".",alias:"dd/mm/yyyy"},"dd-mm-yyyy":{mask:"1-2-y",placeholder:"dd-mm-yyyy",leapday:"29-02-",separator:"-",alias:"dd/mm/yyyy"},"mm.dd.yyyy":{mask:"1.2.y",placeholder:"mm.dd.yyyy",leapday:"02.29.",separator:".",alias:"mm/dd/yyyy"},"mm-dd-yyyy":{mask:"1-2-y",placeholder:"mm-dd-yyyy",leapday:"02-29-",separator:"-",alias:"mm/dd/yyyy"},"yyyy.mm.dd":{mask:"y.1.2",placeholder:"yyyy.mm.dd",leapday:".02.29",separator:".",alias:"yyyy/mm/dd"},"yyyy-mm-dd":{mask:"y-1-2",placeholder:"yyyy-mm-dd",leapday:"-02-29",separator:"-",alias:"yyyy/mm/dd"},datetime:{mask:"1/2/y h:s",placeholder:"dd/mm/yyyy hh:mm",alias:"dd/mm/yyyy",regex:{hrspre:new RegExp("[012]"),hrs24:new RegExp("2[0-4]|1[3-9]"),hrs:new RegExp("[01][0-9]|2[0-4]"),ampm:new RegExp("^[a|p|A|P][m|M]"),mspre:new RegExp("[0-5]"),ms:new RegExp("[0-5][0-9]")},timeseparator:":",hourFormat:"24",definitions:{h:{validator:function(e,t,i,n,a){if("24"===a.hourFormat&&24===parseInt(e,10))return t.buffer[i-1]="0",t.buffer[i]="0",{refreshFromBuffer:{start:i-1,end:i},c:"0"};var s=a.regex.hrs.test(e);if(!n&&!s&&(e.charAt(1)===a.timeseparator||-1!=="-.:".indexOf(e.charAt(1)))&&(s=a.regex.hrs.test("0"+e.charAt(0))))return t.buffer[i-1]="0",t.buffer[i]=e.charAt(0),i++,{refreshFromBuffer:{start:i-2,end:i},pos:i,c:a.timeseparator};if(s&&"24"!==a.hourFormat&&a.regex.hrs24.test(e)){var o=parseInt(e,10);return 24===o?(t.buffer[i+5]="a",t.buffer[i+6]="m"):(t.buffer[i+5]="p",t.buffer[i+6]="m"),o-=12,o<10?(t.buffer[i]=o.toString(),t.buffer[i-1]="0"):(t.buffer[i]=o.toString().charAt(1),t.buffer[i-1]=o.toString().charAt(0)),{refreshFromBuffer:{start:i-1,end:i+6},c:t.buffer[i]}}return s},cardinality:2,prevalidator:[{validator:function(e,t,i,n,a){var s=a.regex.hrspre.test(e);return n||s||!(s=a.regex.hrs.test("0"+e))?s:(t.buffer[i]="0",i++,{pos:i})},cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:function(e,t,i,n,a){var s=a.regex.mspre.test(e);return n||s||!(s=a.regex.ms.test("0"+e))?s:(t.buffer[i]="0",i++,{pos:i})},cardinality:1}]},t:{validator:function(e,t,i,n,a){return a.regex.ampm.test(e+"m")},casing:"lower",cardinality:1}},insertMode:!1,autoUnmask:!1},datetime12:{mask:"1/2/y h:s t\\m",placeholder:"dd/mm/yyyy hh:mm xm",alias:"datetime",hourFormat:"12"},"mm/dd/yyyy hh:mm xm":{mask:"1/2/y h:s t\\m",placeholder:"mm/dd/yyyy hh:mm xm",alias:"datetime12",regex:{val2pre:function(e){var i=t.escapeRegex.call(this,e);return new RegExp("((0[13-9]|1[012])"+i+"[0-3])|(02"+i+"[0-2])")},val2:function(e){var i=t.escapeRegex.call(this,e);return new RegExp("((0[1-9]|1[012])"+i+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+i+"30)|((0[13578]|1[02])"+i+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},leapday:"02/29/",onKeyDown:function(i){var n=e(this);if(i.ctrlKey&&i.keyCode===t.keyCode.RIGHT){var a=new Date;n.val((a.getMonth()+1).toString()+a.getDate().toString()+a.getFullYear().toString()),n.trigger("setvalue")}}},"hh:mm t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:s t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm:ss":{mask:"h:s:s",placeholder:"hh:mm:ss",alias:"datetime",autoUnmask:!1},"hh:mm":{mask:"h:s",placeholder:"hh:mm",alias:"datetime",autoUnmask:!1},date:{alias:"dd/mm/yyyy"},"mm/yyyy":{mask:"1/y",placeholder:"mm/yyyy",leapday:"donotuse",separator:"/",alias:"mm/dd/yyyy"},shamsi:{regex:{val2pre:function(e){var i=t.escapeRegex.call(this,e);return new RegExp("((0[1-9]|1[012])"+i+"[0-3])")},val2:function(e){var i=t.escapeRegex.call(this,e);return new RegExp("((0[1-9]|1[012])"+i+"(0[1-9]|[12][0-9]))|((0[1-9]|1[012])"+i+"30)|((0[1-6])"+i+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},yearrange:{minyear:1300,maxyear:1499},mask:"y/1/2",leapday:"/12/30",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",clearIncomplete:!0},"yyyy-mm-dd hh:mm:ss":{mask:"y-1-2 h:s:s",placeholder:"yyyy-mm-dd hh:mm:ss",alias:"datetime",separator:"-",leapday:"-02-29",regex:{val2pre:function(e){var i=t.escapeRegex.call(this,e)
;return new RegExp("((0[13-9]|1[012])"+i+"[0-3])|(02"+i+"[0-2])")},val2:function(e){var i=t.escapeRegex.call(this,e);return new RegExp("((0[1-9]|1[012])"+i+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+i+"30)|((0[13578]|1[02])"+i+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},onKeyDown:function(){}}})}(jQuery,Inputmask),function(e,t){t.extendDefinitions({A:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",cardinality:1,casing:"upper"},"&":{validator:"[0-9A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",cardinality:1,casing:"upper"},"#":{validator:"[0-9A-Fa-f]",cardinality:1,casing:"upper"}}),t.extendAliases({url:{definitions:{i:{validator:".",cardinality:1}},mask:"(\\http://)|(\\http\\s://)|(ftp://)|(ftp\\s://)i{+}",insertMode:!1,autoUnmask:!1,inputmode:"url"},ip:{mask:"i[i[i]].i[i[i]].i[i[i]].i[i[i]]",definitions:{i:{validator:function(e,t,i){return i-1>-1&&"."!==t.buffer[i-1]?(e=t.buffer[i-1]+e,e=i-2>-1&&"."!==t.buffer[i-2]?t.buffer[i-2]+e:"0"+e):e="00"+e,new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]").test(e)},cardinality:1}},onUnMask:function(e){return e},inputmode:"numeric"},email:{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,63}]@-{1,63}.-{1,63}[.-{1,63}][.-{1,63}]",greedy:!1,onBeforePaste:function(e){return e=e.toLowerCase(),e.replace("mailto:","")},definitions:{"*":{validator:"[0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"},"-":{validator:"[0-9A-Za-z-]",cardinality:1,casing:"lower"}},onUnMask:function(e){return e},inputmode:"email"},mac:{mask:"##:##:##:##:##:##"},vin:{mask:"V{13}9{4}",definitions:{V:{validator:"[A-HJ-NPR-Za-hj-npr-z\\d]",cardinality:1,casing:"upper"}},clearIncomplete:!0,autoUnmask:!0}})}(jQuery,Inputmask),function(e,t){t.extendAliases({numeric:{mask:function(e){function i(t){for(var i="",n=0;n<t.length;n++)i+=e.definitions[t.charAt(n)]||e.optionalmarker.start===t.charAt(n)||e.optionalmarker.end===t.charAt(n)||e.quantifiermarker.start===t.charAt(n)||e.quantifiermarker.end===t.charAt(n)||e.groupmarker.start===t.charAt(n)||e.groupmarker.end===t.charAt(n)||e.alternatormarker===t.charAt(n)?"\\"+t.charAt(n):t.charAt(n);return i}if(0!==e.repeat&&isNaN(e.integerDigits)&&(e.integerDigits=e.repeat),e.repeat=0,e.groupSeparator===e.radixPoint&&("."===e.radixPoint?e.groupSeparator=",":","===e.radixPoint?e.groupSeparator=".":e.groupSeparator="")," "===e.groupSeparator&&(e.skipOptionalPartCharacter=void 0),e.autoGroup=e.autoGroup&&""!==e.groupSeparator,e.autoGroup&&("string"==typeof e.groupSize&&isFinite(e.groupSize)&&(e.groupSize=parseInt(e.groupSize)),isFinite(e.integerDigits))){var n=Math.floor(e.integerDigits/e.groupSize),a=e.integerDigits%e.groupSize;e.integerDigits=parseInt(e.integerDigits)+(0===a?n-1:n),e.integerDigits<1&&(e.integerDigits="*")}e.placeholder.length>1&&(e.placeholder=e.placeholder.charAt(0)),"radixFocus"===e.positionCaretOnClick&&""===e.placeholder&&!1===e.integerOptional&&(e.positionCaretOnClick="lvp"),e.definitions[";"]=e.definitions["~"],e.definitions[";"].definitionSymbol="~",!0===e.numericInput&&(e.positionCaretOnClick="radixFocus"===e.positionCaretOnClick?"lvp":e.positionCaretOnClick,e.digitsOptional=!1,isNaN(e.digits)&&(e.digits=2),e.decimalProtect=!1);var s="[+]";if(s+=i(e.prefix),s+=!0===e.integerOptional?"~{1,"+e.integerDigits+"}":"~{"+e.integerDigits+"}",void 0!==e.digits){e.radixPointDefinitionSymbol=e.decimalProtect?":":e.radixPoint;var o=e.digits.toString().split(",");isFinite(o[0]&&o[1]&&isFinite(o[1]))?s+=e.radixPointDefinitionSymbol+";{"+e.digits+"}":(isNaN(e.digits)||parseInt(e.digits)>0)&&(s+=e.digitsOptional?"["+e.radixPointDefinitionSymbol+";{1,"+e.digits+"}]":e.radixPointDefinitionSymbol+";{"+e.digits+"}")}return s+=i(e.suffix),s+="[-]",e.greedy=!1,null!==e.min&&(e.min=e.min.toString().replace(new RegExp(t.escapeRegex(e.groupSeparator),"g"),""),","===e.radixPoint&&(e.min=e.min.replace(e.radixPoint,"."))),null!==e.max&&(e.max=e.max.toString().replace(new RegExp(t.escapeRegex(e.groupSeparator),"g"),""),","===e.radixPoint&&(e.max=e.max.replace(e.radixPoint,"."))),s},placeholder:"",greedy:!1,digits:"*",digitsOptional:!0,radixPoint:".",positionCaretOnClick:"radixFocus",groupSize:3,groupSeparator:"",autoGroup:!1,allowPlus:!0,allowMinus:!0,negationSymbol:{front:"-",back:""},integerDigits:"+",integerOptional:!0,prefix:"",suffix:"",rightAlign:!0,decimalProtect:!0,min:null,max:null,step:1,insertMode:!0,autoUnmask:!1,unmaskAsNumber:!1,inputmode:"numeric",postFormat:function(i,n,a){!0===a.numericInput&&(i=i.reverse(),isFinite(n)&&(n=i.join("").length-n-1));var s,o;n=n>=i.length?i.length-1:n<0?0:n;var r=i[n],l=i.slice();r===a.groupSeparator&&n>a.prefix.length&&n<i.length-a.suffix.length&&(l.splice(n--,1),r=l[n]);var c=l.join("").match(new RegExp("^"+t.escapeRegex(a.negationSymbol.front)));c=null!==c&&1===c.length,n>(c?a.negationSymbol.front.length:0)+a.prefix.length&&n<l.length-a.suffix.length&&(l[n]="!");var u=l.join(""),d=l.join();if(c&&(u=u.replace(new RegExp("^"+t.escapeRegex(a.negationSymbol.front)),""),u=u.replace(new RegExp(t.escapeRegex(a.negationSymbol.back)+"$"),"")),u=u.replace(new RegExp(t.escapeRegex(a.suffix)+"$"),""),u=u.replace(new RegExp("^"+t.escapeRegex(a.prefix)),""),u.length>0&&a.autoGroup||-1!==u.indexOf(a.groupSeparator)){var h=t.escapeRegex(a.groupSeparator);u=u.replace(new RegExp(h,"g"),"");var p=u.split(r===a.radixPoint?"!":a.radixPoint);if(u=""===a.radixPoint?u:p[0],r!==a.negationSymbol.front&&(u=u.replace("!","?")),u.length>a.groupSize)for(var f=new RegExp("([-+]?[\\d?]+)([\\d?]{"+a.groupSize+"})");f.test(u)&&""!==a.groupSeparator;)u=u.replace(f,"$1"+a.groupSeparator+"$2"),u=u.replace(a.groupSeparator+a.groupSeparator,a.groupSeparator);u=u.replace("?","!"),""!==a.radixPoint&&p.length>1&&(u+=(r===a.radixPoint?"!":a.radixPoint)+p[1])}u=a.prefix+u+a.suffix,c&&(u=a.negationSymbol.front+u+a.negationSymbol.back);var m=d!==u.split("").join(),g=e.inArray("!",u);if(-1===g&&(g=n),m){for(i.length=u.length,s=0,o=u.length;s<o;s++)i[s]=u.charAt(s);i[g]=r}return g=a.numericInput&&isFinite(n)?i.join("").length-g-1:g,a.numericInput&&(i=i.reverse(),e.inArray(a.radixPoint,i)<g&&i.join("").length-a.suffix.length!==g&&(g-=1)),{pos:g,refreshFromBuffer:m,buffer:i,isNegative:c}},onBeforeWrite:function(i,n,a,s){var o;if(i&&("blur"===i.type||"checkval"===i.type||"keydown"===i.type)){var r=s.numericInput?n.slice().reverse().join(""):n.join(""),l=r.replace(s.prefix,"");l=l.replace(s.suffix,""),l=l.replace(new RegExp(t.escapeRegex(s.groupSeparator),"g"),""),","===s.radixPoint&&(l=l.replace(s.radixPoint,"."));var c=l.match(new RegExp("[-"+t.escapeRegex(s.negationSymbol.front)+"]","g"));if(c=null!==c&&1===c.length,l=l.replace(new RegExp("[-"+t.escapeRegex(s.negationSymbol.front)+"]","g"),""),l=l.replace(new RegExp(t.escapeRegex(s.negationSymbol.back)+"$"),""),isNaN(s.placeholder)&&(l=l.replace(new RegExp(t.escapeRegex(s.placeholder),"g"),"")),""!==(l=l===s.negationSymbol.front?l+"0":l)&&isFinite(l)){var u=parseFloat(l),d=c?-1*u:u;if("blur"===i.type&&(null!==s.min&&isFinite(s.min)&&d<parseFloat(s.min)?(u=Math.abs(s.min),c=s.min<0,r=void 0):null!==s.max&&isFinite(s.max)&&d>parseFloat(s.max)&&(u=Math.abs(s.max),c=s.max<0,r=void 0)),l=u.toString().replace(".",s.radixPoint).split(""),isFinite(s.digits)){var h=e.inArray(s.radixPoint,l),p=e.inArray(s.radixPoint,r);-1===h&&(l.push(s.radixPoint),h=l.length-1);for(var f=1;f<=s.digits;f++)s.digitsOptional||void 0!==l[h+f]&&l[h+f]!==s.placeholder.charAt(0)?-1!==p&&void 0!==r[p+f]&&(l[h+f]=l[h+f]||r[p+f]):l[h+f]="0";l[l.length-1]===s.radixPoint&&delete l[l.length-1]}if(u.toString()!==l&&u.toString()+"."!==l||c)return l=(s.prefix+l.join("")).split(""),!c||0===u&&"blur"===i.type||(l.unshift(s.negationSymbol.front),l.push(s.negationSymbol.back)),s.numericInput&&(l=l.reverse()),o=s.postFormat(l,s.numericInput?a:a-1,s),o.buffer&&(o.refreshFromBuffer=o.buffer.join("")!==n.join("")),o}}if(s.autoGroup)return o=s.postFormat(n,s.numericInput?a:a-1,s),o.caret=a<(o.isNegative?s.negationSymbol.front.length:0)+s.prefix.length||a>o.buffer.length-(o.isNegative?s.negationSymbol.back.length:0)?o.pos:o.pos+1,o},regex:{integerPart:function(e){return new RegExp("["+t.escapeRegex(e.negationSymbol.front)+"+]?\\d+")},integerNPart:function(e){return new RegExp("[\\d"+t.escapeRegex(e.groupSeparator)+t.escapeRegex(e.placeholder.charAt(0))+"]+")}},signHandler:function(e,t,i,n,a){if(!n&&a.allowMinus&&"-"===e||a.allowPlus&&"+"===e){var s=t.buffer.join("").match(a.regex.integerPart(a));if(s&&s[0].length>0)return t.buffer[s.index]===("-"===e?"+":a.negationSymbol.front)?"-"===e?""!==a.negationSymbol.back?{pos:0,c:a.negationSymbol.front,remove:0,caret:i,insert:{pos:t.buffer.length-1,c:a.negationSymbol.back}}:{pos:0,c:a.negationSymbol.front,remove:0,caret:i}:""!==a.negationSymbol.back?{pos:0,c:"+",remove:[0,t.buffer.length-1],caret:i}:{pos:0,c:"+",remove:0,caret:i}:t.buffer[0]===("-"===e?a.negationSymbol.front:"+")?"-"===e&&""!==a.negationSymbol.back?{remove:[0,t.buffer.length-1],caret:i-1}:{remove:0,caret:i-1}:"-"===e?""!==a.negationSymbol.back?{pos:0,c:a.negationSymbol.front,caret:i+1,insert:{pos:t.buffer.length,c:a.negationSymbol.back}}:{pos:0,c:a.negationSymbol.front,caret:i+1}:{pos:0,c:e,caret:i+1}}return!1},radixHandler:function(t,i,n,a,s){if(!a&&!0!==s.numericInput&&t===s.radixPoint&&void 0!==s.digits&&(isNaN(s.digits)||parseInt(s.digits)>0)){var o=e.inArray(s.radixPoint,i.buffer),r=i.buffer.join("").match(s.regex.integerPart(s));if(-1!==o&&i.validPositions[o])return i.validPositions[o-1]?{caret:o+1}:{pos:r.index,c:r[0],caret:o+1};if(!r||"0"===r[0]&&r.index+1!==n)return i.buffer[r?r.index:n]="0",{pos:(r?r.index:n)+1,c:s.radixPoint}}return!1},leadingZeroHandler:function(t,i,n,a,s,o){if(!a){var r=n,l=!0===s.numericInput?i.buffer.slice("").reverse():i.buffer.slice("");s.numericInput&&(n=l.join("").length-n-1),l.splice(0,s.prefix.length),l.splice(l.length-s.suffix.length,s.suffix.length),n-=s.prefix.length;var c=e.inArray(s.radixPoint,l),u=l.slice(0,-1!==c?c:void 0).join("").match(s.regex.integerNPart(s));if(u&&(-1===c||n<=c||s.numericInput)){var d=-1===c?0:parseInt(l.slice(c+1).join("")),h=0===u[0].indexOf(""!==s.placeholder?s.placeholder.charAt(0):"0");if(s.numericInput){if(h&&0!==d&&!0!==o)return i.buffer.splice(l.length-u.index-1+s.suffix.length,1),{pos:r,remove:l.length-u.index-1+s.suffix.length}}else{if(h&&(u.index+1===n||!0!==o&&0===d))return i.buffer.splice(u.index+s.prefix.length,1),{pos:u.index+s.prefix.length,remove:u.index+s.prefix.length};if("0"===t&&n<=u.index&&u[0]!==s.groupSeparator)return!1}}}return!0},definitions:{"~":{validator:function(i,n,a,s,o,r){var l=o.signHandler(i,n,a,s,o);if(!l&&!(l=o.radixHandler(i,n,a,s,o))&&!0===(l=s?new RegExp("[0-9"+t.escapeRegex(o.groupSeparator)+"]").test(i):new RegExp("[0-9]").test(i))&&!0===(l=o.leadingZeroHandler(i,n,a,s,o,r))&&!0!==o.numericInput){var c=e.inArray(o.radixPoint,n.buffer);l=-1!==c&&(!1===o.digitsOptional||n.validPositions[a])&&!0!==o.numericInput&&a>c&&!s?{pos:a,remove:a}:{pos:a}}return l},cardinality:1},"+":{validator:function(e,t,i,n,a){var s=a.signHandler(e,t,i,n,a);return!s&&(n&&a.allowMinus&&e===a.negationSymbol.front||a.allowMinus&&"-"===e||a.allowPlus&&"+"===e)&&(s=!(!n&&"-"===e)||(""!==a.negationSymbol.back?{pos:i,c:"-"===e?a.negationSymbol.front:"+",caret:i+1,insert:{pos:t.buffer.length,c:a.negationSymbol.back}}:{pos:i,c:"-"===e?a.negationSymbol.front:"+",caret:i+1})),s},cardinality:1,placeholder:""},"-":{validator:function(e,t,i,n,a){var s=a.signHandler(e,t,i,n,a);return!s&&n&&a.allowMinus&&e===a.negationSymbol.back&&(s=!0),s},cardinality:1,placeholder:""},":":{validator:function(e,i,n,a,s){var o=s.signHandler(e,i,n,a,s);if(!o){var r="["+t.escapeRegex(s.radixPoint)+"]";(o=new RegExp(r).test(e))&&i.validPositions[n]&&i.validPositions[n].match.placeholder===s.radixPoint&&(o={caret:n+1})}return o},cardinality:1,placeholder:function(e){return e.radixPoint}}},onUnMask:function(e,i,n){if(""===i&&!0===n.nullable)return i;var a=e.replace(n.prefix,"");return a=a.replace(n.suffix,""),a=a.replace(new RegExp(t.escapeRegex(n.groupSeparator),"g"),""),n.unmaskAsNumber?(""!==n.radixPoint&&-1!==a.indexOf(n.radixPoint)&&(a=a.replace(t.escapeRegex.call(this,n.radixPoint),".")),Number(a)):a},isComplete:function(e,i){var n=e.join(""),a=e.slice();if(i.postFormat(a,0,i),a.join("")!==n)return!1;var s=n.replace(i.prefix,"");return s=s.replace(i.suffix,""),s=s.replace(new RegExp(t.escapeRegex(i.groupSeparator),"g"),""),","===i.radixPoint&&(s=s.replace(t.escapeRegex(i.radixPoint),".")),isFinite(s)},onBeforeMask:function(e,i){if(e=e.toString(),!0===i.numericInput&&(e=e.split("").reverse().join("")),""!==i.radixPoint&&isFinite(e)){var n=e.split("."),a=""!==i.groupSeparator?parseInt(i.groupSize):0;2===n.length&&(n[0].length>a||n[1].length>a)&&(e=e.replace(".",i.radixPoint))}var s=e.match(/,/g),o=e.match(/\./g);if(o&&s?o.length>s.length?(e=e.replace(/\./g,""),e=e.replace(",",i.radixPoint)):s.length>o.length?(e=e.replace(/,/g,""),e=e.replace(".",i.radixPoint)):e=e.indexOf(".")<e.indexOf(",")?e.replace(/\./g,""):e=e.replace(/,/g,""):e=e.replace(new RegExp(t.escapeRegex(i.groupSeparator),"g"),""),0===i.digits&&(-1!==e.indexOf(".")?e=e.substring(0,e.indexOf(".")):-1!==e.indexOf(",")&&(e=e.substring(0,e.indexOf(",")))),""!==i.radixPoint&&isFinite(i.digits)&&-1!==e.indexOf(i.radixPoint)){var r=e.split(i.radixPoint),l=r[1].match(new RegExp("\\d*"))[0];if(parseInt(i.digits)<l.toString().length){var c=Math.pow(10,parseInt(i.digits));e=e.replace(t.escapeRegex(i.radixPoint),"."),e=Math.round(parseFloat(e)*c)/c,e=e.toString().replace(".",i.radixPoint)}}return!0===i.numericInput&&(e=e.split("").reverse().join("")),e},canClearPosition:function(e,t,i,n,a){var s=e.validPositions[t].input;return s!==a.radixPoint||null!==e.validPositions[t].match.fn&&!1===a.decimalProtect||isFinite(s)||t===i||s===a.groupSeparator||s===a.negationSymbol.front||s===a.negationSymbol.back},onKeyDown:function(i,n,a,s){var o=e(this);if(i.ctrlKey)switch(i.keyCode){case t.keyCode.UP:o.val(parseFloat(this.inputmask.unmaskedvalue())+parseInt(s.step)),o.trigger("setvalue");break;case t.keyCode.DOWN:o.val(parseFloat(this.inputmask.unmaskedvalue())-parseInt(s.step)),o.trigger("setvalue")}}},currency:{prefix:"$ ",groupSeparator:",",alias:"numeric",placeholder:"0",autoGroup:!0,digits:2,digitsOptional:!1,clearMaskOnLostFocus:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:0,radixPoint:""},percentage:{alias:"numeric",digits:2,radixPoint:".",placeholder:"0",autoGroup:!1,min:0,max:100,suffix:" %",allowPlus:!1,allowMinus:!1}})}(jQuery,Inputmask),function(e,t){function i(e,t){var i=(e.mask||e).replace(/#/g,"9").replace(/\)/,"9").replace(/[+()#-]/g,""),n=(t.mask||t).replace(/#/g,"9").replace(/\)/,"9").replace(/[+()#-]/g,""),a=(e.mask||e).split("#")[0],s=(t.mask||t).split("#")[0];return 0===s.indexOf(a)?-1:0===a.indexOf(s)?1:i.localeCompare(n)}var n=t.prototype.analyseMask;t.prototype.analyseMask=function(t,i){function a(e,i,n){i=i||"",n=n||o,""!==i&&(n[i]={});for(var s="",r=n[i]||n,l=e.length-1;l>=0;l--)t=e[l].mask||e[l],s=t.substr(0,1),r[s]=r[s]||[],r[s].unshift(t.substr(1)),e.splice(l,1);for(var c in r)r[c].length>500&&a(r[c].slice(),c,r)}function s(t){var n="",a=[];for(var o in t)e.isArray(t[o])?1===t[o].length?a.push(o+t[o]):a.push(o+i.groupmarker.start+t[o].join(i.groupmarker.end+i.alternatormarker+i.groupmarker.start)+i.groupmarker.end):a.push(o+s(t[o]));return n+=1===a.length?a[0]:i.groupmarker.start+a.join(i.groupmarker.end+i.alternatormarker+i.groupmarker.start)+i.groupmarker.end}var o={};return i.phoneCodes&&(i.phoneCodes&&i.phoneCodes.length>1e3&&(t=t.substr(1,t.length-2),a(t.split(i.groupmarker.end+i.alternatormarker+i.groupmarker.start)),t=s(o)),t=t.replace(/9/g,"\\9")),n.call(this,t,i)},t.extendAliases({abstractphone:{groupmarker:{start:"<",end:">"},countrycode:"",phoneCodes:[],mask:function(e){return e.definitions={"#":t.prototype.definitions[9]},e.phoneCodes.sort(i)},keepStatic:!0,onBeforeMask:function(e,t){var i=e.replace(/^0{1,2}/,"").replace(/[\s]/g,"");return(i.indexOf(t.countrycode)>1||-1===i.indexOf(t.countrycode))&&(i="+"+t.countrycode+i),i},onUnMask:function(e,t){return t},inputmode:"tel"}})}(jQuery,Inputmask),function(e,t){t.extendAliases({Regex:{mask:"r",greedy:!1,repeat:"*",regex:null,regexTokens:null,tokenizer:/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,quantifierFilter:/[0-9]+[^,]/,isComplete:function(e,t){return new RegExp(t.regex).test(e.join(""))},definitions:{r:{validator:function(t,i,n,a,s){function o(e,t){this.matches=[],this.isGroup=e||!1,this.isQuantifier=t||!1,this.quantifier={min:1,max:1},this.repeaterPart=void 0}function r(){var e,t,i=new o,n=[];for(s.regexTokens=[];e=s.tokenizer.exec(s.regex);)switch(t=e[0],t.charAt(0)){case"(":n.push(new o(!0));break;case")":u=n.pop(),n.length>0?n[n.length-1].matches.push(u):i.matches.push(u);break;case"{":case"+":case"*":var a=new o(!1,!0);t=t.replace(/[{}]/g,"");var r=t.split(","),l=isNaN(r[0])?r[0]:parseInt(r[0]),c=1===r.length?l:isNaN(r[1])?r[1]:parseInt(r[1]);if(a.quantifier={min:l,max:c},n.length>0){var d=n[n.length-1].matches;e=d.pop(),e.isGroup||(u=new o(!0),u.matches.push(e),e=u),d.push(e),d.push(a)}else e=i.matches.pop(),e.isGroup||(u=new o(!0),u.matches.push(e),e=u),i.matches.push(e),i.matches.push(a);break;default:n.length>0?n[n.length-1].matches.push(t):i.matches.push(t)}i.matches.length>0&&s.regexTokens.push(i)}function l(t,i){var n=!1;i&&(h+="(",f++);for(var a=0;a<t.matches.length;a++){var s=t.matches[a];if(!0===s.isGroup)n=l(s,!0);else if(!0===s.isQuantifier){var o=e.inArray(s,t.matches),r=t.matches[o-1],u=h;if(isNaN(s.quantifier.max)){for(;s.repeaterPart&&s.repeaterPart!==h&&s.repeaterPart.length>h.length&&!(n=l(r,!0)););n=n||l(r,!0),n&&(s.repeaterPart=h),h=u+s.quantifier.max}else{for(var d=0,p=s.quantifier.max-1;d<p&&!(n=l(r,!0));d++);h=u+"{"+s.quantifier.min+","+s.quantifier.max+"}"}}else if(void 0!==s.matches)for(var m=0;m<s.length&&!(n=l(s[m],i));m++);else{var g;if("["==s.charAt(0)){g=h,g+=s;for(var v=0;v<f;v++)g+=")";var b=new RegExp("^("+g+")$");n=b.test(c)}else for(var y=0,_=s.length;y<_;y++)if("\\"!==s.charAt(y)){g=h,g+=s.substr(0,y+1),g=g.replace(/\|$/,"");for(var v=0;v<f;v++)g+=")";var b=new RegExp("^("+g+")$");if(n=b.test(c))break}h+=s}if(n)break}return i&&(h+=")",f--),n}var c,u,d=i.buffer.slice(),h="",p=!1,f=0;null===s.regexTokens&&r(),d.splice(n,0,t),c=d.join("");for(var m=0;m<s.regexTokens.length;m++){var g=s.regexTokens[m];if(p=l(g,g.isGroup))break}return p},cardinality:1}}}})}(jQuery,Inputmask),app.modules.signForms=function(){function e(e){return $.ajax({url:app.config.api.updateUserURL.replace("_id_",app.config.currentUser.id),method:"PUT",data:{id:app.config.currentUser.id,email:e}})}function t(e){return $.get(app.config.api.usersURL,{email:e})}return{checkEmail:t,saveEmail:e}}(app.modules.signForms),app.modules.quickForm=function(e){function t(){$doc.on("click",".js-close-quick-popup",closeAllPopup)}return e.load=function(){t()},e}(app.modules.quickForm||{}),Object.keys||(Object.keys=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=i.length;return function(a){if("object"!=typeof a&&("function"!=typeof a||null===a))throw new TypeError("Object.keys called on non-object");var s,o,r=[];for(s in a)e.call(a,s)&&r.push(s);if(t)for(o=0;o<n;o++)e.call(a,i[o])&&r.push(i[o]);return r}}());var swfobject=function(){function e(){if(!q){try{var e=M.getElementsByTagName("body")[0].appendChild(g("span"));e.parentNode.removeChild(e)}catch(e){return}q=!0;for(var t=O.length,i=0;i<t;i++)O[i]()}}function t(e){q?e():O[O.length]=e}function i(e){if(typeof F.addEventListener!=D)F.addEventListener("load",e,!1);else if(typeof M.addEventListener!=D)M.addEventListener("load",e,!1);else if(typeof F.attachEvent!=D)v(F,"onload",e);else if("function"==typeof F.onload){var t=F.onload;F.onload=function(){t(),e()}}else F.onload=e}function n(){R?a():s()}function a(){var e=M.getElementsByTagName("body")[0],t=g(S);t.setAttribute("type",E);var i=e.appendChild(t);if(i){var n=0;!function(){if(typeof i.GetVariable!=D){var a=i.GetVariable("$version");a&&(a=a.split(" ")[1].split(","),G.pv=[parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)])}else if(n<10)return n++,void setTimeout(arguments.callee,10);e.removeChild(t),i=null,s()}()}else s()}function s(){var e=H.length;if(e>0)for(var t=0;t<e;t++){var i=H[t].id,n=H[t].callbackFn,a={success:!1,id:i};if(G.pv[0]>0){var s=m(i);if(s)if(!b(H[t].swfVersion)||G.wk&&G.wk<312)if(H[t].expressInstall&&r()){var u={};u.data=H[t].expressInstall,u.width=s.getAttribute("width")||"0",u.height=s.getAttribute("height")||"0",s.getAttribute("class")&&(u.styleclass=s.getAttribute("class")),s.getAttribute("align")&&(u.align=s.getAttribute("align"));for(var d={},h=s.getElementsByTagName("param"),p=h.length,f=0;f<p;f++)"movie"!=h[f].getAttribute("name").toLowerCase()&&(d[h[f].getAttribute("name")]=h[f].getAttribute("value"));l(u,d,i,n)}else c(s),n&&n(a);else _(i,!0),n&&(a.success=!0,a.ref=o(i),n(a))}else if(_(i,!0),n){var g=o(i);g&&typeof g.SetVariable!=D&&(a.success=!0,a.ref=g),n(a)}}}function o(e){var t=null,i=m(e);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=D)t=i;else{var n=i.getElementsByTagName(S)[0];n&&(t=n)}return t}function r(){return!U&&b("6.0.65")&&(G.win||G.mac)&&!(G.wk&&G.wk<312)}function l(e,t,i,n){U=!0,k=n||null,C={success:!1,id:i};var a=m(i);if(a){"OBJECT"==a.nodeName?($=u(a),x=null):($=a,x=i),e.id=I,(typeof e.width==D||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==D||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),M.title=M.title.slice(0,47)+" - Flash Player Installation";var s=G.ie&&G.win?"ActiveX":"PlugIn",o="MMredirectURL="+F.location.toString().replace(/&/g,"%26")+"&MMplayerType="+s+"&MMdoctitle="+M.title;if(typeof t.flashvars!=D?t.flashvars+="&"+o:t.flashvars=o,G.ie&&G.win&&4!=a.readyState){var r=g("div");i+="SWFObjectNew",r.setAttribute("id",i),a.parentNode.insertBefore(r,a),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}d(e,t,i)}}function c(e){if(G.ie&&G.win&&4!=e.readyState){var t=g("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(u(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(u(e),e)}function u(e){var t=g("div");if(G.win&&G.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(S)[0];if(i){var n=i.childNodes;if(n)for(var a=n.length,s=0;s<a;s++)1==n[s].nodeType&&"PARAM"==n[s].nodeName||8==n[s].nodeType||t.appendChild(n[s].cloneNode(!0))}}return t}function d(e,t,i){var n,a=m(i);if(G.wk&&G.wk<312)return n;if(a)if(typeof e.id==D&&(e.id=i),G.ie&&G.win){var s="";for(var o in e)e[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?t.movie=e[o]:"styleclass"==o.toLowerCase()?s+=' class="'+e[o]+'"':"classid"!=o.toLowerCase()&&(s+=" "+o+'="'+e[o]+'"'));var r="";for(var l in t)t[l]!=Object.prototype[l]&&(r+='<param name="'+l+'" value="'+t[l]+'" />');a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+s+">"+r+"</object>",z[z.length]=e.id,n=m(e.id)}else{var c=g(S);c.setAttribute("type",E);for(var u in e)e[u]!=Object.prototype[u]&&("styleclass"==u.toLowerCase()?c.setAttribute("class",e[u]):"classid"!=u.toLowerCase()&&c.setAttribute(u,e[u]));for(var d in t)t[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&h(c,d,t[d]);a.parentNode.replaceChild(c,a),n=c}return n}function h(e,t,i){var n=g("param");n.setAttribute("name",t),n.setAttribute("value",i),e.appendChild(n)}function p(e){var t=m(e);t&&"OBJECT"==t.nodeName&&(G.ie&&G.win?(t.style.display="none",function(){4==t.readyState?f(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function f(e){var t=m(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}function m(e){var t=null;try{t=M.getElementById(e)}catch(e){}return t}function g(e){return M.createElement(e)}function v(e,t,i){e.attachEvent(t,i),B[B.length]=[e,t,i]}function b(e){var t=G.pv,i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]}function y(e,t,i,n){if(!G.ie||!G.mac){var a=M.getElementsByTagName("head")[0];if(a){var s=i&&"string"==typeof i?i:"screen";if(n&&(P=null,T=null),!P||T!=s){var o=g("style");o.setAttribute("type","text/css"),o.setAttribute("media",s),P=a.appendChild(o),G.ie&&G.win&&typeof M.styleSheets!=D&&M.styleSheets.length>0&&(P=M.styleSheets[M.styleSheets.length-1]),T=s}G.ie&&G.win?P&&typeof P.addRule==S&&P.addRule(e,t):P&&typeof M.createTextNode!=D&&P.appendChild(M.createTextNode(e+" {"+t+"}"))}}}function _(e,t){if(W){var i=t?"visible":"hidden";q&&m(e)?m(e).style.visibility=i:y("#"+e,"visibility:"+i)}}function w(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=D?encodeURIComponent(e):e}var $,x,k,C,P,T,D="undefined",S="object",A="Shockwave Flash",j="ShockwaveFlash.ShockwaveFlash",E="application/x-shockwave-flash",I="SWFObjectExprInst",N="onreadystatechange",F=window,M=document,L=navigator,R=!1,O=[n],H=[],z=[],B=[],q=!1,U=!1,W=!0,G=function(){var e=typeof M.getElementById!=D&&typeof M.getElementsByTagName!=D&&typeof M.createElement!=D,t=L.userAgent.toLowerCase(),i=L.platform.toLowerCase(),n=i?/win/.test(i):/win/.test(t),a=i?/mac/.test(i):/mac/.test(t),s=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o=!1,r=[0,0,0],l=null;if(typeof L.plugins!=D&&typeof L.plugins[A]==S)!(l=L.plugins[A].description)||typeof L.mimeTypes!=D&&L.mimeTypes[E]&&!L.mimeTypes[E].enabledPlugin||(R=!0,o=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),r[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),r[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),r[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof F.ActiveXObject!=D)try{var c=new ActiveXObject(j);c&&(l=c.GetVariable("$version"))&&(o=!0,l=l.split(" ")[1].split(","),r=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)])}catch(e){}return{w3:e,pv:r,wk:s,ie:o,win:n,mac:a}}();(function(){G.w3&&((typeof M.readyState!=D&&"complete"==M.readyState||typeof M.readyState==D&&(M.getElementsByTagName("body")[0]||M.body))&&e(),q||(typeof M.addEventListener!=D&&M.addEventListener("DOMContentLoaded",e,!1),G.ie&&G.win&&(M.attachEvent(N,function(){"complete"==M.readyState&&(M.detachEvent(N,arguments.callee),e())}),F==top&&function(){if(!q){try{M.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}e()}}()),G.wk&&function(){if(!q)/loaded|complete/.test(M.readyState)?e():setTimeout(arguments.callee,0)}(),i(e)))})(),function(){G.ie&&G.win&&window.attachEvent("onunload",function(){for(var e=B.length,t=0;t<e;t++)B[t][0].detachEvent(B[t][1],B[t][2]);for(var i=z.length,n=0;n<i;n++)p(z[n]);for(var a in G)G[a]=null;G=null;for(var s in swfobject)swfobject[s]=null;swfobject=null})}();return{registerObject:function(e,t,i,n){if(G.w3&&e&&t){var a={};a.id=e,a.swfVersion=t,a.expressInstall=i,a.callbackFn=n,H[H.length]=a,_(e,!1)}else n&&n({success:!1,id:e})},getObjectById:function(e){if(G.w3)return o(e)},embedSWF:function(e,i,n,a,s,o,c,u,h,p){var f={success:!1,id:i};G.w3&&!(G.wk&&G.wk<312)&&e&&i&&n&&a&&s?(_(i,!1),t(function(){n+="",a+="";var t={};if(h&&typeof h===S)for(var m in h)t[m]=h[m];t.data=e,t.width=n,t.height=a;var g={};if(u&&typeof u===S)for(var v in u)g[v]=u[v];if(c&&typeof c===S)for(var y in c)typeof g.flashvars!=D?g.flashvars+="&"+y+"="+c[y]:g.flashvars=y+"="+c[y];if(b(s)){var w=d(t,g,i);t.id==i&&_(i,!0),f.success=!0,f.ref=w}else{if(o&&r())return t.data=o,void l(t,g,i,p);_(i,!0)}p&&p(f)})):p&&p(f)},switchOffAutoHideShow:function(){W=!1},ua:G,getFlashPlayerVersion:function(){return{major:G.pv[0],minor:G.pv[1],release:G.pv[2]}},hasFlashPlayerVersion:b,createSWF:function(e,t,i){return G.w3?d(e,t,i):undefined},showExpressInstall:function(e,t,i,n){G.w3&&r()&&l(e,t,i,n)},removeSWF:function(e){G.w3&&p(e)},createCSS:function(e,t,i,n){G.w3&&y(e,t,i,n)},addDomLoadEvent:t,addLoadEvent:i,getQueryParamValue:function(e){var t=M.location.search||M.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return w(t);for(var i=t.split("&"),n=0;n<i.length;n++)if(i[n].substring(0,i[n].indexOf("="))==e)return w(i[n].substring(i[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(U){var e=m(I);e&&$&&(e.parentNode.replaceChild($,e),x&&(_(x,!0),G.ie&&G.win&&($.style.display="block")),k&&k(C)),U=!1}}}}();(function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["barmen_client/showcase"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a,s;return"<div class='showcase'>\n  <h3 class='sc-header ov'>\n    <a class='js-showcase-link' href='"+this.escapeExpression((s=null!=(s=t.url||(null!=e?e.url:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"url",hash:{},data:n}):s))+"'>"+this.escapeExpression((s=null!=(s=t.name||(null!=e?e.name:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"name",hash:{},data:n}):s))+"</a>\n  </h3>\n  <div class='sc-c'>\n    <div class='scc-i'>\n      <a class='scci-i js-showcase-link' href='"+this.escapeExpression((s=null!=(s=t.url||(null!=e?e.url:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"url",hash:{},data:n}):s))+"' target='_blank'>\n        <img alt='' class='sc-img' src='"+this.escapeExpression(this.lambda(null!=(a=null!=e?e.banner_shape_image:e)?a.public_url:a,e))+"'>\n      </a>\n    </div>\n    <div class='scc-d scc-wi'>\n      <div class='sccd-t'>"+this.escapeExpression((s=null!=(s=t.content||(null!=e?e.content:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"content",hash:{},data:n}):s))+"</div>\n      <div class='sccd-contacts'>\n        <div class='sccd-c'>\n          <a class='js-showcase-link' href='"+this.escapeExpression((s=null!=(s=t.url||(null!=e?e.url:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"url",hash:{},data:n}):s))+"' target='_blank'>"+this.escapeExpression((s=null!=(s=t.company_name||(null!=e?e.company_name:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"company_name",hash:{},data:n}):s))+"</a>\n        </div>\n        <div class='sccd-p'>\n          <div class='sccdp-i'>"+this.escapeExpression((s=null!=(s=t.phone||(null!=e?e.phone:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"phone",hash:{},data:n}):s))+"</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>"},useData:!0}),this.HandlebarsTemplates["barmen_client/showcase"]}).call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["barmen_client/showcase_mobile"]=Handlebars.template({1:function(){return"cap"},3:function(e){var t;return"          <img alt='' class='ibb-img' src='"+this.escapeExpression(this.lambda(null!=(t=null!=e?e.banner_shape_image:e)?t.public_url:t,e))+"'>\n"},5:function(){return"          <div class='ibb-img'></div>\n"},7:function(e,t,i,n){var a;return"    <li class='spl-item company'>"+this.escapeExpression((a=null!=(a=t.company_name||(null!=e?e.company_name:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"company_name",hash:{},data:n}):a))+"</li>\n"},9:function(e,t,i,n){var a;return"    <li class='spl-item phone'>"+this.escapeExpression((a=null!=(a=t.phone||(null!=e?e.phone:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"phone",hash:{},data:n}):a))+"</li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a,s;return"<a href='"+this.escapeExpression((s=null!=(s=t.url||(null!=e?e.url:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"url",hash:{},data:n}):s))+"' target='_blank'>\n  <ul class='short-products-list'>\n    <li class='spl-item'>\n      <div class='img-block "+(null!=(a=t.unless.call(e,null!=(a=null!=e?e.banner_shape_image:e)?a.public_url:a,{name:"unless",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"'>\n        <div class='ib-body'>\n"+(null!=(a=t["if"].call(e,null!=(a=null!=e?e.banner_shape_image:e)?a.public_url:a,{name:"if",hash:{},fn:this.program(3,n,0),inverse:this.program(5,n,0),data:n}))?a:"")+"        </div>\n      </div>\n    </li>\n    <li class='spl-item'>\n      <p class='spl-title'>"+this.escapeExpression((s=null!=(s=t.name||(null!=e?e.name:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"name",hash:{},data:n
}):s))+"</p>\n    </li>\n    <li class='spl-item content'>\n      <p>"+this.escapeExpression((s=null!=(s=t.content||(null!=e?e.content:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"content",hash:{},data:n}):s))+"</p>\n    </li>\n"+(null!=(a=t["if"].call(e,null!=e?e.company_name:e,{name:"if",hash:{},fn:this.program(7,n,0),inverse:this.noop,data:n}))?a:"")+(null!=(a=t["if"].call(e,null!=e?e.phone:e,{name:"if",hash:{},fn:this.program(9,n,0),inverse:this.noop,data:n}))?a:"")+"  </ul>\n</a>"},useData:!0}),this.HandlebarsTemplates["barmen_client/showcase_mobile"]}.call(this),app.config.gaIds={"RAD-140-1":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f_\u041e\u0442\u0437\u044b\u0432\u044b_\u043e \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438_\u041f\u041a\u0422",gaAction:"01_\u041f\u043e\u043a\u0430\u0437\u044b_\u041f\u041a\u0422_\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c_\u0432\u0441\u0435_\u043e\u0442\u0437\u044b\u0432\u044b",gaLabel:"01_\u041f\u043e\u043a\u0430\u0437\u044b_\u041f\u041a\u0422_\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c_\u0432\u0441\u0435_\u043e\u0442\u0437\u044b\u0432\u044b"},"RAD-140-2":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f_\u041e\u0442\u0437\u044b\u0432\u044b_\u043e \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438_\u041f\u041a\u0422",gaAction:"02_\u041a\u043b\u0438\u043a\u0438_\u041f\u041a\u0422_\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c_\u0432\u0441\u0435_\u043e\u0442\u0437\u044b\u0432\u044b",gaLabel:"02_\u041a\u043b\u0438\u043a\u0438_\u041f\u041a\u0422_\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c_\u0432\u0441\u0435_\u043e\u0442\u0437\u044b\u0432\u044b"},"RAD-161-1":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f_\u041e\u0442\u0437\u044b\u0432\u044b",gaAction:"01_\u0412\u0438\u0434\u0435\u043e\u043e\u0442\u0437\u044b\u0432\u044b_\u041f\u043e\u043a\u0430\u0437\u044b_\u0424\u041e",gaLabel:"01_\u0412\u0438\u0434\u0435\u043e\u043e\u0442\u0437\u044b\u0432\u044b_\u041f\u043e\u043a\u0430\u0437\u044b_\u0424\u041e"},"RAD-161-2":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f_\u041e\u0442\u0437\u044b\u0432\u044b",gaAction:"02_\u0412\u0438\u0434\u0435\u043e\u043e\u0442\u0437\u044b\u0432\u044b_\u041a\u043b\u0438\u043a_\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c_\u0432\u0438\u0434\u0435\u043e",gaLabel:"02_\u0412\u0438\u0434\u0435\u043e\u043e\u0442\u0437\u044b\u0432\u044b_\u041a\u043b\u0438\u043a_\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c_\u0432\u0438\u0434\u0435\u043e"},"RAD-161-3":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f_\u041e\u0442\u0437\u044b\u0432\u044b",gaAction:"03_\u0412\u0438\u0434\u0435\u043e\u043e\u0442\u0437\u044b\u0432\u044b_\u0412\u0432\u043e\u0434",gaLabel:"03_\u0412\u0438\u0434\u0435\u043e\u043e\u0442\u0437\u044b\u0432\u044b_\u0412\u0432\u043e\u0434"},"RAD-161-4":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f_\u041e\u0442\u0437\u044b\u0432\u044b",gaAction:"04_\u0412\u0438\u0434\u0435\u043e\u043e\u0442\u0437\u044b\u0432\u044b_\u041e\u0448\u0438\u0431\u043a\u0430",gaLabel:"04_\u0412\u0438\u0434\u0435\u043e\u043e\u0442\u0437\u044b\u0432\u044b_\u041e\u0448\u0438\u0431\u043a\u0430"},"RAD-161-5":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f_\u041e\u0442\u0437\u044b\u0432\u044b",gaAction:"04_\u0412\u0438\u0434\u0435\u043e\u043e\u0442\u0437\u044b\u0432\u044b_\u041e\u0448\u0438\u0431\u043a\u0430",gaLabel:"04_\u0412\u0438\u0434\u0435\u043e\u043e\u0442\u0437\u044b\u0432\u044b_\u041e\u0448\u0438\u0431\u043a\u0430"},"RAD-161-1-\u041f\u041a\u0422":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u041f\u041e\u041b\u042c\u0417\u041e\u0412\u0410\u0422\u0415\u041b\u042f \u043d\u0430 \u041f\u041a\u0422",gaAction:"\u041f\u041a\u0422_\u041e\u0442\u0437\u044b\u0432\u044b_\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",gaLabel:"\u041f\u041a\u0422_\u041e\u0442\u0437\u044b\u0432\u044b_\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c_\u043a\u043b\u0438\u043a"},"RAD-161-1-\u041a\u0422":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u041f\u041e\u041b\u042c\u0417\u041e\u0412\u0410\u0422\u0415\u041b\u042f \u043d\u0430 \u041a\u0422",gaAction:"\u041a\u0422_\u041e\u0442\u0437\u044b\u0432\u044b_\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",gaLabel:"\u041a\u0422_\u041e\u0442\u0437\u044b\u0432\u044b_\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c_\u043a\u043b\u0438\u043a"},"RAD-161-1-\u041f\u041a\u041e":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f_\u041e\u0442\u0437\u044b\u0432\u044b_\u041f\u041a\u041e_\u0434\u0435\u0441\u043a\u0442\u043e\u043f",gaAction:"\u041a\u043b\u0438\u043a_\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432_\u041f\u041a\u041e_\u0434\u0435\u0441\u043a\u0442\u043e\u043f",gaLabel:"\u041a\u043b\u0438\u043a_\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432_\u041f\u041a\u041e_\u0434\u0435\u0441\u043a\u0442\u043e\u043f"},"RAD-161-1-\u041f\u041a\u041e-\u043c\u043e\u0431":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f_\u041e\u0442\u0437\u044b\u0432\u044b_\u041f\u041a\u041e_\u043c\u043e\u0431\u0438\u043b",gaAction:"\u041a\u043b\u0438\u043a_\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432_\u041f\u041a\u041e_\u043c\u043e\u0431\u0438\u043b",gaLabel:"\u041a\u043b\u0438\u043a_\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432_\u041f\u041a\u041e_\u043c\u043e\u0431\u0438\u043b"},"RAD-161-1-\u0421\u041a-\u0434\u0435\u0441\u043a-\u041d\u0410\u041f":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f_\u041e\u0442\u0437\u044b\u0432\u044b_\u0421\u041a_\u0434\u0435\u0441\u043a\u0442\u043e\u043f",gaAction:"\u041a\u043b\u0438\u043a_\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432_\u0421\u041a_\u0434\u0435\u0441\u043a\u0442\u043e\u043f_\u041d\u0410\u041f",gaLabel:"\u041a\u043b\u0438\u043a_\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432_\u0421\u041a_\u0434\u0435\u0441\u043a\u0442\u043e\u043f_\u041d\u0410\u041f"},"RAD-161-1-\u0421\u041a-\u0434\u0435\u0441\u043a-\u0410\u041f":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f_\u041e\u0442\u0437\u044b\u0432\u044b_\u0421\u041a_\u0434\u0435\u0441\u043a\u0442\u043e\u043f",gaAction:"\u041a\u043b\u0438\u043a_\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432_\u0421\u041a_\u0434\u0435\u0441\u043a\u0442\u043e\u043f_\u0410\u041f",gaLabel:"\u041a\u043b\u0438\u043a_\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432_\u0421\u041a_\u0434\u0435\u0441\u043a\u0442\u043e\u043f_\u0410\u041f"},"RAD-161-1-\u0421\u041a-\u043c\u043e\u0431-\u041d\u0410\u041f":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f_\u041e\u0442\u0437\u044b\u0432\u044b_\u0421\u041a_\u043c\u043e\u0431\u0438\u043b",gaAction:"\u041a\u043b\u0438\u043a_\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432_\u0421\u041a_\u043c\u043e\u0431\u0438\u043b_\u041d\u0410\u041f",gaLabel:"\u041a\u043b\u0438\u043a_\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432_\u0421\u041a_\u043c\u043e\u0431\u0438\u043b_\u041d\u0410\u041f"},"RAD-161-1-\u0421\u041a-\u043c\u043e\u0431-\u0410\u041f":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f_\u041e\u0442\u0437\u044b\u0432\u044b_\u0421\u041a_\u043c\u043e\u0431\u0438\u043b",gaAction:"\u041a\u043b\u0438\u043a_\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432_\u0421\u041a_\u043c\u043e\u0431\u0438\u043b_\u0410\u041f",gaLabel:"\u041a\u043b\u0438\u043a_\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432_\u0421\u041a_\u043c\u043e\u0431\u0438\u043b_\u0410\u041f"},"RAD-586-5":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f_\u041e\u0442\u0437\u044b\u0432\u044b_\u0421\u041a_\u0434\u0435\u0441\u043a\u0442\u043e\u043f",gaAction:"\u041a\u043b\u0438\u043a_\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c_\u043a\u043e\u043c\u043c\u0435\u043d\u0442_\u0421\u041a_\u0434\u0435\u0441\u043a\u0442\u043e\u043f_\u0410\u041f",gaLabel:"\u041a\u043b\u0438\u043a_\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c_\u043a\u043e\u043c\u043c\u0435\u043d\u0442_\u0421\u041a_\u0434\u0435\u0441\u043a\u0442\u043e\u043f_\u0410\u041f"},"RAD-586-6":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f_\u041e\u0442\u0437\u044b\u0432\u044b_\u0421\u041a_\u043c\u043e\u0431\u0438\u043b",gaAction:"\u041a\u043b\u0438\u043a_\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c_\u043a\u043e\u043c\u043c\u0435\u043d\u0442_\u0421\u041a_\u043c\u043e\u0431\u0438\u043b_\u0410\u041f",gaLabel:"\u041a\u043b\u0438\u043a_\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c_\u043a\u043e\u043c\u043c\u0435\u043d\u0442_\u0421\u041a_\u043c\u043e\u0431\u0438\u043b_\u0410\u041f"},"CK-1461-1":{gaCategory:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440 \u0441\u0430\u0439\u0442\u0430",gaAction:"\u0420\u0430\u0441\u043a\u0440\u044b\u0442\u0438\u0435 \u043c\u0435\u043d\u044e",gaLabel:"\u0421\u044d\u043d\u0434\u0432\u0438\u0447-\u043c\u0435\u043d\u044e"},"CK-1461-2":{gaCategory:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440 \u0441\u0430\u0439\u0442\u0430",gaAction:"\u0421\u043a\u0440\u044b\u0442\u0438\u0435 \u043c\u0435\u043d\u044e",gaLabel:"\u0421\u044d\u043d\u0434\u0432\u0438\u0447-\u043c\u0435\u043d\u044e"},"CK-1432":{gaCategory:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440 \u0441\u0430\u0439\u0442\u0430",gaAction:"\u041e\u0442\u043a\u0440\u044b\u0442\u0438\u0435 \u043f\u043e\u043f\u0430\u043f\u0430",gaLabel:"\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430"},"RAD-633-1":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f_\u041e\u0442\u0437\u044b\u0432\u044b_\u0434\u0435\u0441\u043a\u0442\u043e\u043f",gaAction:"\u041a\u043b\u0438\u043a_\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c_\u041b\u041a",gaLabel:"\u041a\u043b\u0438\u043a_\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c_\u041b\u041a"},"CK-1393-1":{gaCategory:"\u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u0421\u041a",gaAction:"\u041f\u043e\u043a\u0430\u0437 \u0431\u043b\u043e\u043a\u0430",gaLabel:"\u0424\u0438\u043b\u044c\u0442\u0440\u044b \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u044b\u0435"},"CK-1393-2":{gaCategory:"\u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u0421\u041a",gaAction:"\u041e\u0442\u043a\u0440\u044b\u0442\u0438\u0435 \u043f\u043e\u043f\u0430\u043f\u0430 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439",gaLabel:"\u0424\u0438\u043b\u044c\u0442\u0440\u044b \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u044b\u0435"},"CK-1393-3":{gaCategory:"\u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u0421\u041a",gaAction:"\u041e\u0442\u043c\u0435\u0442\u043a\u0430 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f",gaLabel:"\u0424\u0438\u043b\u044c\u0442\u0440\u044b \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u044b\u0435"},"CK-1393-4":{gaCategory:"\u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u0421\u041a",gaAction:"\u041a\u043d\u043e\u043f\u043a\u0430 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c",gaLabel:"\u0424\u0438\u043b\u044c\u0442\u0440\u044b \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u044b\u0435"},"BPC-12760-1":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u041d\u0422\u0410_\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438_\u0421\u0442\u0430\u0440\u0442\u043e\u0432\u0430\u044f",gaAction:"01_\u041f\u043e\u043a\u0430\u0437\u044b_\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b",gaLabel:"01_\u041f\u043e\u043a\u0430\u0437\u044b_\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b"},"BPC-12760-2":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u041d\u0422\u0410_\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438_\u0421\u0442\u0430\u0440\u0442\u043e\u0432\u0430\u044f",gaAction:"02_\u041a\u043b\u0438\u043a\u0438_\u0441\u0441\u044b\u043b\u043a\u0430_\u043f\u0430\u0440\u043e\u043b\u044c",gaLabel:"02_\u041a\u043b\u0438\u043a\u0438_\u0441\u0441\u044b\u043b\u043a\u0430_\u043f\u0430\u0440\u043e\u043b\u044c"},"BPC-12760-3":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u041d\u0422\u0410_\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438_\u0421\u0442\u0430\u0440\u0442\u043e\u0432\u0430\u044f",gaAction:"03_\u041a\u043b\u0438\u043a\u0438_\u043a\u043d\u043e\u043f\u043a\u0430",gaLabel:"03_\u041a\u043b\u0438\u043a\u0438_\u043a\u043d\u043e\u043f\u043a\u0430"},"BPC-12760-4":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u041d\u0422\u0410_\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438_\u0421\u0442\u0430\u0440\u0442\u043e\u0432\u0430\u044f",gaAction:"04_\u041a\u043b\u0438\u043a\u0438_\u0441\u0441\u044b\u043b\u043a\u0430_\u0440\u0435\u0433\u0438\u043e\u043d",gaLabel:"04_\u041a\u043b\u0438\u043a\u0438_\u0441\u0441\u044b\u043b\u043a\u0430_\u0440\u0435\u0433\u0438\u043e\u043d"},"BPC-12760-1-STEP-1":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u041d\u0422\u0410_\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438_\u0428\u0430\u0433_1",gaAction:"01_\u041f\u043e\u043a\u0430\u0437\u044b_\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b",gaLabel:"01_\u041f\u043e\u043a\u0430\u0437\u044b_\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b"},"BPC-12760-2-STEP-1":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u041d\u0422\u0410_\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438_\u0428\u0430\u0433_1",gaAction:"02_\u041a\u043b\u0438\u043a\u0438_\u043a\u043d\u043e\u043f\u043a\u0430",gaLabel:"02_\u041a\u043b\u0438\u043a\u0438_\u043a\u043d\u043e\u043f\u043a\u0430"},"PC4-22458-1":{gaCategory:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u044f",gaAction:"01_\u0421\u043f\u0440\u043e\u0441_\u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u0435_\u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438_\u041b\u041a",gaLabel:"01_\u0421\u043f\u0440\u043e\u0441_\u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u0435_\u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438_\u041b\u041a"},"PC4-22892-1":1698,"PC4-22892-2":1699,"PC4-17123-32":1453,"PC4-14973-1":1266},app.modules.externalAnalyticsCommon=function(e){function t(e){ga("blizkoru.send","event",e.gaCategory,e.gaAction,e.gaLabel)}function i(e){return app.config.gaIds[e]}function n(e,t){var i="yaCounter"+e;window[i]&&window[i].reachGoal("Event_"+t)}function a(e){n(app.config.defaultYmCounterId,e),app.config.customerYmCounterId&&n(app.config.customerYmCounterId,e),dataLayer&&dataLayer.push({event:"Event_"+e})}function s(){$doc.on("click",".js-ga-link",function(){var e=$(this),n=e.data();"single"===n.gaType&&e.removeClass("js-ga-link"),n.gaId?n.gaId.split(" ").map(function(e){e&&t($.extend(i(e),n.gaParams))}):t($.extend({gaCategory:n.gaCategory,gaAction:n.gaAction,gaLabel:n.gaLabel},n.gaParams))}).on("send:googleAnalytics",function(e,n){n&&t(i(n))}).on("send:externalAnalytics",function(e,t){t&&a(t)})}return e.load=function(){s()},e}(app.modules.externalAnalyticsCommon||{}),app.modules.offerPopup=function(e){function t(){$doc.on("click",".js-edit-offer",function(e){e.preventDefault(),i($(this))})}function i(e){var t=e.data("copy-offer-href"),i=e.data("new-offer-href");n.html(HandlebarsTemplates["offers/offer_edit_popup"]({copyOfferHref:t,newOfferHref:i})).dialog({modal:!0,resizable:!1,width:350,minHeight:100,dialogClass:"dialog-popup simple offer-edit-popup"})}var n;return e.load=function(){n=$(".js-offer-edit-popup"),t()},e}(app.modules.offerPopup||{}),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["offers/offer_edit_popup"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<p>\n  \u0412\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0430\u043a\u0446\u0438\u044e,\n  <br>\n  \u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043d\u043d\u0443\u044e \u0431\u043e\u043b\u0435\u0435 7 \u0434\u043d\u0435\u0439 \u043d\u0430\u0437\u0430\u0434.\n</p>\n<p>\n  \u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043d\u043e\u0432\u0443\u044e \u0438\u043b\u0438 \u043f\u043e\u0445\u043e\u0436\u0443\u044e \u0430\u043a\u0446\u0438\u044e,\n  <br>\n  \u0441\u043a\u043e\u043f\u0438\u0440\u0443\u0439\u0442\u0435 \u0435\u0451 \u0438 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u0435 \u043d\u0443\u0436\u043d\u044b\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f.\n</p>\n<a href='"+this.escapeExpression((a=null!=(a=t.copyOfferHref||(null!=e?e.copyOfferHref:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"copyOfferHref",hash:{},data:n}):a))+"'>\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0430\u043a\u0446\u0438\u044e</a>\n<a class='button fr' href='"+this.escapeExpression((a=null!=(a=t.newOfferHref||(null!=e?e.newOfferHref:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"newOfferHref",hash:{},data:n}):a))+"'>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0430\u043a\u0446\u0438\u044e</a>"},useData:!0}),this.HandlebarsTemplates["offers/offer_edit_popup"]}.call(this),app.modules.sendUtmAnalytics=function(e){function t(){return location.search.substring(1).split("&").reduce(function(e,t){var i=t.split("=");return e[i[0]]=i[1],e},{})}function i(e,t){return e.reduce(function(e,i,n){return e[i]=t[n],e},{})}function n(e,t){var n={};return $.each(t,function(t,a){if(0===String(a).lastIndexOf("utm_")){if(!(a=e[a]))return;if(-1!==String(t).indexOf("&")&&-1!==String(a).indexOf("_"))return $.extend(n,i(t.split("&"),a.split("_")))}n[t]=a}),t.requiredParams&&$.each(t.requiredParams,function(e,t){n[t]||(n[t]=0)}),n}function a(e,t){$.ajax({url:t,data:e,declineCredentials:e.declineCredentials})}function s(e,i){var s=t();$.each(e,function(e,t){s[t.utmActionPlace]===e&&a(n(s,t),i)})}function o(){$doc.on("send:utmAnalytics",function(e,t,i){s(t,i)})}return e.load=function(){o()},e}(app.modules.sendUtmAnalytics||{}),app.modules.utmAnalytics=function(e){var t={email:{utmActionPlace:"utm_medium","entity_id&dispatch_id":"utm_campaign","user_id&company_id":"utm_term",date:"utm_content",entity_type:"Apress::Notifications::Delivery",event:"follow",url:location.href,requiredParams:["user_id","company_id"]}};return e.load=function(){location.search&&app.config.analyticsCollectURL&&$doc.trigger("send:utmAnalytics",[t,app.config.analyticsCollectURL])},e}(app.modules.utmAnalytics||{}),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["search/hint"]=Handlebars.template({1:function(e,t,i,n){var a,s;return"<a class='sr-item js-sr-item' href='"+this.escapeExpression((s=null!=(s=t.url||(null!=e?e.url:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"url",hash:{},data:n}):s))+"'>\n  "+this.escapeExpression((s=null!=(s=t.prefix||(null!=e?e.prefix:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"prefix",hash:{},data:n}):s))+"\n  <span class='special-'>\n    "+(null!=(s=null!=(s=t.title||(null!=e?e.title:e))?s:t.helperMissing,a="function"==typeof s?s.call(e,{name:"title",hash:{},data:n}):s)?a:"")+"\n  </span>\n  <span class='count'>"+this.escapeExpression((s=null!=(s=t.items_count||(null!=e?e.items_count:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"items_count",hash:{},data:n}):s))+"</span>\n</a>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return null!=(a=t.each.call(e,null!=e?e.hints:e,{name:"each",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:""},useData:!0}),this.HandlebarsTemplates["search/hint"]}.call(this),app.modules.autocompleteSearch=function(e){function t(){p=$(".js-searching-results")}function i(){p.html("").removeClass("visible")}function n(e){for(var t in e)if("search_url"!==t){var i=e[t];i.length>0&&(p.append(HandlebarsTemplates["search/hint"]({hints:i})),p.addClass("visible"))}}function a(e){return $.get(app.config.portalSearchHintsUrl,{query:e.trim(),page:$(".js-search-types-item.active").data("page")},function(e){i(),n(e),d=e.search_url,_=!1})}function s(e){clearTimeout(u),_=!0,c&&c.abort(),e.length>=g&&(u=setTimeout(function(){c=a(e)},f))}function o(e){var t=p.find(".js-sr-item"),i=p.find(".js-sr-item.active");e!==b||i.is(t.last())||(h=i.length?i.next().addClass("active"):p.find(t.first()).addClass("active"),i.removeClass("active")),e===v&&i.length&&(h=i.prev().addClass("active"),i.removeClass("active"))}function r(){var e=$(this),t=e.data(),i=$(".js-portal-search-form");e.closest(".js-search-types").find(".js-search-types-item").removeClass("active").end().end().addClass("active"),$.cookie("search",t.type,{expires:7,path:"/"}),i.attr("action",t.value),$(".js-search-query").val()&&i.submit()}function l(){$doc.on("click",".js-search-types-item",r).on("input paste",".js-psfss-input",function(){s($(this).val())}).on("blur",".js-psfss-input",function(){setTimeout(function(){i()},m)}).on("keydown",".js-psfss-input",function(e){var t=e.keyCode;if(t!==v&&t!==b||(e.preventDefault(),o(t)),t===y&&p.hasClass("visible")){var i=h&&h.length;if(_)return;e.preventDefault(),location.href=i?h.attr("href"):d}}).on("mouseover",".js-sr-item",function(){var e=$(this);h&&h.removeClass("active"),h=e.addClass("active")}).on("mouseleave",".js-searching-results",function(){h&&h.removeClass("active")})}var c,u,d,h,p,f=300,m=250,g=3,v=38,b=40,y=13,_=!1;return e.load=function(){t(),l()},e}(app.modules.autocompleteSearch||{}),app.modules.mainProductsRubricator=function(e){function t(){$win.on("scroll",function(){$(".js-main-products-rubricator-toggler").each(function(e,t){var i=t.getBoundingClientRect().top;i>0&&i<190&&(n=t)}),$(".js-main-products-rubricator-item").removeClass("active"),$(".js-main-products-rubricator").find("."+$(n).attr("id")).addClass("active")})}function i(){$win.one("scroll",function(){$(".js-main-products-rubricator").stick({top:50,zIndex:150,stickerClassName:"js-fixed-rubricator",wrapperClassName:"js-fixed-rubricator-dummy"})}),$win.resize(function(){$(".js-fixed-rubricator, .js-fixed-rubricator-dummy").width($(".js-wrapper").width())})}var n;return e.load=function(){t(),i()},e}(app.modules.mainProductsRubricator||{}),function(){Handlebars.registerPartial("shared/_geo_filters_block",Handlebars.template({1:function(e,t,i,n,a,s){var o;return"<div class='traits-block geo-filter-values js-geo-filter-values "+(null!=(o=t.unless.call(e,null!=e?e.is_current:e,{name:"unless",hash:{},fn:this.program(2,n,0,a,s),inverse:this.noop,data:n}))?o:"")+"' data-type='"+this.escapeExpression(this.lambda(null!=e?e.type:e,e))+"'>\n  <div class='filter-list-'>\n    <ul class='facet-list'>\n"+(null!=(o=t.each.call(e,null!=e?e.values:e,{name:"each",hash:{},fn:this.program(4,n,0,a,s),inverse:this.noop,data:n}))?o:"")+"    </ul>\n  </div>\n</div>\n"},2:function(){return"dn"},4:function(e,t,i,n,a,s){var o;return"      <li class='fl-item'>\n        <label class='fli-label js-fli-label'>\n"+(null!=(o=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=e?e.is_current_item:e,"===",!0,{name:"ifCond",hash:{},fn:this.program(5,n,0,a,s),inverse:this.noop,data:n}))?o:"")+(null!=(o=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=e?e.is_current_item:e,"===",!1,{name:"ifCond",hash:{},fn:this.program(7,n,0,a,s),inverse:this.noop,data:n}))?o:"")+"          <a class='flil-link js-flil-link' href='"+this.escapeExpression(this.lambda(null!=e?e.faceted_url:e,e))+"'>\n            "+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"\n          </a>\n        </label>\n      </li>\n"},5:function(e,t,i,n,a,s){return"          <input checked class='flil-check js-gfv-value' data-filter-attrs='"+this.escapeExpression(this.lambda(null!=e?e.filter_attrs:e,e))+"' data-left-filter='"+this.escapeExpression(this.lambda(null!=s[1]?s[1].type:s[1],e))+"' data-name='"+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"' data-type='"+this.escapeExpression(this.lambda(null!=s[1]?s[1].type:s[1],e))+"' name='geo' type='radio' value='"+this.escapeExpression(this.lambda(null!=e?e.base_url:e,e))+"'>\n"},7:function(e,t,i,n,a,s){return"          <input class='flil-check js-gfv-value' data-filter-attrs='"+this.escapeExpression(this.lambda(null!=e?e.filter_attrs:e,e))+"' data-left-filter='"+this.escapeExpression(this.lambda(null!=s[1]?s[1].type:s[1],e))+"' data-name='"+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"' data-type='"+this.escapeExpression(this.lambda(null!=s[1]?s[1].type:s[1],e))+"' name='geo' type='radio' value='"+this.escapeExpression(this.lambda(null!=e?e.base_url:e,e))+"'>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n,a,s){var o;return null!=(o=t.each.call(e,null!=e?e.data:e,{name:"each",hash:{},fn:this.program(1,n,0,a,s),inverse:this.noop,data:n}))?o:""},useData:!0,useDepths:!0}))}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["shared/geo_filters"]=Handlebars.template({1:function(e,t,i,n){var a;return null!=(a=t["if"].call(e,null!=e?e.is_current:e,{name:"if",hash:{},fn:this.program(2,n,0),inverse:this.noop,data:n}))?a:""},2:function(e){return"        "+this.escapeExpression(this.lambda(null!=e?e.label:e,e))+"\n"},4:function(e){return"        <li class='js-gft-item' data-left-filter='"+this.escapeExpression(this.lambda(null!=e?e.label:e,e))+"' data-type='"+this.escapeExpression(this.lambda(null!=e?e.type:e,e))+"'>\n          "+this.escapeExpression(this.lambda(null!=e?e.label:e,e))+"\n        </li>\n"},6:function(e,t,i,n){var a;return(null!=(a=this.invokePartial(i["shared/_geo_filters_block"],e,{name:"shared/_geo_filters_block",hash:{data:null!=e?e.dataCut:e},data:n,indent:"  ",helpers:t,partials:i}))?a:"")+"  <span class='open-hidden-results js-toggle-switcher' data-off='\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435' data-on='\u0421\u043a\u0440\u044b\u0442\u044c'>\n    \u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435\n  </span>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='geo-filters'>\n  <div class='tb-wrapper-'>\n    <div class='trate-dropdown js-geo-filter-titles js-trait-dropdown'>\n      <span class='title- js-gft-current js-trait-dropdown-title'>\n"+(null!=(a=t.each.call(e,null!=e?e.data:e,{name:"each",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"      </span>\n      <ul class='filter-list-'>\n"+(null!=(a=t.each.call(e,null!=e?e.data:e,{name:"each",hash:{},fn:this.program(4,n,0),inverse:this.noop,data:n}))?a:"")+"      </ul>\n    </div>\n  </div>\n"+(null!=(a=this.invokePartial(i["shared/_geo_filters_block"],e,{name:"shared/_geo_filters_block",hash:{data:null!=e?e.data:e},data:n,indent:"  ",helpers:t,partials:i}))?a:"")+(null!=(a=t["if"].call(e,null!=e?e.dataCut:e,{name:"if",hash:{},fn:this.program(6,n,0),inverse:this.noop,data:n}))?a:"")+"</div>"},usePartial:!0,useData:!0}),this.HandlebarsTemplates["shared/geo_filters"]}.call(this),function(e){var t={},i={content:"Here may be anything what you want",position:"top",delay:600,animation:300,tipBoxSelector:"",autoshow:!1},n={position:"absolute",top:0,left:0},a=function(t){var i,a,s,o,r=t.data("options"),l=e("<div>").addClass("inside-opens-block").html(r.content).css(n),c=t,u={top:0,left:0};switch(r.tipBoxSelector&&(c=c.find(r.tipBoxSelector)),c.find(".inside-opens-block").length||c.append(l),r.position){case"bottom":u.top=c.height(),u.left=0,a=-l.outerHeight(!0),i=0,o=0,s=c.width();break;case"left":u.top=c.height()-l.outerHeight(!0),u.left=-l.outerWidth(!0),i=c.outerWidth(!0),a=0,o=-c.width(),s=c.width();break;case"top":u.top=-l.outerHeight(!0),a=l.outerHeight(!0),s=c.width(),o=0}c.css({overflow:"hidden",position:"relative",display:"block"}).data({position_top:u.top,position_left:u.left,verticalOffsetOf:a,horizontalOffsetOf:i,defaultLeft:o}),l.css({width:s,marginTop:u.top,marginLeft:u.left,left:o})},s=function(e,t,i){function n(){r=c+(u||0),l=d,e.addClass("is-animate"),s.stop().delay(o.delay).animate({marginTop:r,marginLeft:l},o.animation)}function a(){r=c,l=0,s.stop(!0,!0).delay(o.delay).animate({marginTop:r,marginLeft:l},o.animation,function(){e.removeClass("is-animate")})}var s=e.find(".inside-opens-block"),o=e.data("options"),r=0,l=0,c=parseInt(t.data("position_top")),u=(parseInt(t.data("position_left")),parseInt(t.data("verticalOffsetOf"))),d=parseInt(t.data("horizontalOffsetOf"));"show"!=i||e.hasClass("is-animate")?"hide"==i&&a():(o.autoshow||a(),n())},o=function(i){i.each(function(){var n=e(this);if(!n.data("tipIsInit")){n.data("options",e.extend({},t));var o=n.data("options"),r=i;o.tipBoxSelector&&(r=n.find(o.tipBoxSelector)),a(i),o.autoshow?s(i,r,"show"):(n.mouseenter(function(){s(n,r.addClass("active"),"show")}),n.mouseleave(function(){s(i,r.removeClass("active"),"hide")}))}n.data("tipIsInit",!0)})},r={init:function(n){return t={},e.extend(t,i,n),o(this),this}};e.fn.floatingTip=function(t){return"object"!=typeof t&&t?r[t]?r[t].apply(this,Array.prototype.slice.call(arguments,1)):void e.error("\u041c\u0435\u0442\u043e\u0434 "+t+" \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 jQuery.floatingTip"):r.init.apply(this,arguments)}}(jQuery),app.modules.onReadyCommon=function(e){function t(){$doc.on("click",".js-open-auth-popup",function(e){$doc.trigger("show:dynamicAuthComponent",["sign-in-popup"]),e.preventDefault()}).on("click",".js-closable-tip .js-close-tip",n),$win.one("scroll",function(){var e,t=$(".js-main-toolbar"),i=$(".js-stop-stick").first();(e=$(".js-floating-b-b-item:last")).length&&e.stick({top:10,topElement:t,bottom:0,bottomElement:i,zIndex:50,wrapperClassName:"js-fixed-b-b-item-wrapper"}).find(".barmen").trigger("barmen:refresh"),(e=$(".js-portal-col-1 .js-floating-b-b-item").last()).length&&e.stick({top:10,topElement:t,bottom:40,bottomElement:i,zIndex:50})}).on("resize",function(){$(".js-fixed-b-b-item-wrapper, .js-fixed-b-b-item-wrapper > div").each(function(){var e=$(this);e.width(e.closest(".js-b-b-items-wrapper").width())})})}function i(){app.config.authComponent.wrappers.dynamic["sign-in-popup"]={type:"form",contentType:"sign-in",simpleRegistration:!0,withSocialRegistration:!0,newSocialRegistrationSchema:!0,orientation:"vertical",containerName:"signIn",cache:!1,toggleContent:!0,actionOnSuccess:"reload",withMultipleField:!0,fields:{set:["email","phone"],required:["email"],withoutPlaceholder:!0},buttonClass:"full-width-button medium",popup:{dialogClass:"dialog-popup sign-in-popup js-sign-in-popup"}}}function n(){var e=$(this),t=e.data("cookie");t&&$.cookie(t,!0,{path:"/"}),e.closest(".js-closable-tip").slideUp()}function a(){i(),
$.lazyload&&$(".js-ppli-lazy").lazyload({threshold:400}),$.fn.toggler&&$(".js-toggle").toggler()}return e.load=function(){t(),a()},e}(app.modules.onReadyCommon||{}),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["moveup/panel"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return"<div class='move-up js-move-up-wrapper dn'>\n  <div class='mu-button js-move-up-button'>\n    <span class='mu-text'>\u041d\u0430\u0432\u0435\u0440\u0445</span>\n  </div>\n</div>"},useData:!0}),this.HandlebarsTemplates["moveup/panel"]}.call(this),app.modules.moveUp=function(e){function t(){$("html, body").animate({scrollTop:0},500)}function i(){var e=$win.scrollTop()>s.offset().top;o.toggleClass("dn",!e)}function n(){$win.on("scroll resize",function(){i()}),$doc.on("click",".js-move-up-wrapper, .js-move-up-button",t)}function a(){s=$(".js-get-move-up"),s.append(HandlebarsTemplates["moveup/panel"]()),o=$(".js-move-up-wrapper"),r=$(".js-move-up-button")}var s,o,r;return e.load=function(){a(),s.length&&n()},e}(app.modules.moveUp||{}),$doc.on("click",".ui-widget-overlay",function(){$(".ui-dialog-content").dialog("close")}),app.modules.companyWizardPopup=function(e){function t(e,t){var i=$("<ul>").addClass("ap-list"),n=_.template($("#ap-item-template").html()),a=e;$.ajax({type:"GET",url:a.data("url"),dataType:"JSON",error:function(e,t,i){window.console&&console.log(e,t,i)},success:function(e){1===e.length?location.href=e[0].action_link:e.length?($.each(e,function(e,t){i.append(n(t))}),showDialogPopup(a,$("<div>").append(i.before($("<div>").addClass("ap-head").text(t))))):location.href=a.attr("href")}})}function i(){$("[data-placeholder]").each(function(){$(this).placeholder()}),$doc.on("click",".js-add-products",function(e){t($(this),"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0430\u0439\u0442, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440:"),e.preventDefault()}),$doc.on("click",".js-add-showcase",function(e){t($(this),"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0430\u0439\u0442, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0430\u043a\u0446\u0438\u044e:"),e.preventDefault()})}return e.load=function(){i()},e}(app.modules.companyWizardPopup||{}),function(){function e(t,i,n){if(t===i)return 0!==t||1/t==1/i;if(null==t||null==i)return t===i;if(t._chain&&(t=t._wrapped),i._chain&&(i=i._wrapped),t.isEqual&&x.isFunction(t.isEqual))return t.isEqual(i);if(i.isEqual&&x.isFunction(i.isEqual))return i.isEqual(t);var a=c.call(t);if(a!=c.call(i))return!1;switch(a){case"[object String]":return t==String(i);case"[object Number]":return t!=+t?i!=+i:0==t?1/t==1/i:t==+i;case"[object Date]":case"[object Boolean]":return+t==+i;case"[object RegExp]":return t.source==i.source&&t.global==i.global&&t.multiline==i.multiline&&t.ignoreCase==i.ignoreCase}if("object"!=typeof t||"object"!=typeof i)return!1;for(var s=n.length;s--;)if(n[s]==t)return!0;n.push(t);var o=0,r=!0;if("[object Array]"==a){if(o=t.length,r=o==i.length)for(;o--&&(r=o in t==o in i&&e(t[o],i[o],n)););}else{if("constructor"in t!="constructor"in i||t.constructor!=i.constructor)return!1;for(var l in t)if(x.has(t,l)&&(o++,!(r=x.has(i,l)&&e(t[l],i[l],n))))break;if(r){for(l in i)if(x.has(i,l)&&!o--)break;r=!o}}return n.pop(),r}var t=this,i=t._,n={},a=Array.prototype,s=Object.prototype,o=Function.prototype,r=a.slice,l=a.unshift,c=s.toString,u=s.hasOwnProperty,d=a.forEach,h=a.map,p=a.reduce,f=a.reduceRight,m=a.filter,g=a.every,v=a.some,b=a.indexOf,y=a.lastIndexOf,_=Array.isArray,w=Object.keys,$=o.bind,x=function(e){return new A(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):t._=x,x.VERSION="1.3.1";var k=x.each=x.forEach=function(e,t,i){if(null!=e)if(d&&e.forEach===d)e.forEach(t,i);else if(e.length===+e.length){for(var a=0,s=e.length;a<s;a++)if(a in e&&t.call(i,e[a],a,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(i,e[o],o,e)===n)return};x.map=x.collect=function(e,t,i){var n=[];return null==e?n:h&&e.map===h?e.map(t,i):(k(e,function(e,a,s){n[n.length]=t.call(i,e,a,s)}),e.length===+e.length&&(n.length=e.length),n)},x.reduce=x.foldl=x.inject=function(e,t,i,n){var a=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return n&&(t=x.bind(t,n)),a?e.reduce(t,i):e.reduce(t);if(k(e,function(e,s,o){a?i=t.call(n,i,e,s,o):(i=e,a=!0)}),!a)throw new TypeError("Reduce of empty array with no initial value");return i},x.reduceRight=x.foldr=function(e,t,i,n){var a=arguments.length>2;if(null==e&&(e=[]),f&&e.reduceRight===f)return n&&(t=x.bind(t,n)),a?e.reduceRight(t,i):e.reduceRight(t);var s=x.toArray(e).reverse();return n&&!a&&(t=x.bind(t,n)),a?x.reduce(s,t,i,n):x.reduce(s,t)},x.find=x.detect=function(e,t,i){var n;return C(e,function(e,a,s){if(t.call(i,e,a,s))return n=e,!0}),n},x.filter=x.select=function(e,t,i){var n=[];return null==e?n:m&&e.filter===m?e.filter(t,i):(k(e,function(e,a,s){t.call(i,e,a,s)&&(n[n.length]=e)}),n)},x.reject=function(e,t,i){var n=[];return null==e?n:(k(e,function(e,a,s){t.call(i,e,a,s)||(n[n.length]=e)}),n)},x.every=x.all=function(e,t,i){var a=!0;return null==e?a:g&&e.every===g?e.every(t,i):(k(e,function(e,s,o){if(!(a=a&&t.call(i,e,s,o)))return n}),a)};var C=x.some=x.any=function(e,t,i){t||(t=x.identity);var a=!1;return null==e?a:v&&e.some===v?e.some(t,i):(k(e,function(e,s,o){if(a||(a=t.call(i,e,s,o)))return n}),!!a)};x.include=x.contains=function(e,t){var i=!1;return null==e?i:b&&e.indexOf===b?-1!=e.indexOf(t):i=C(e,function(e){return e===t})},x.invoke=function(e,t){var i=r.call(arguments,2);return x.map(e,function(e){return(x.isFunction(t)?t||e:e[t]).apply(e,i)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.max=function(e,t,i){if(!t&&x.isArray(e))return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var n={computed:-Infinity};return k(e,function(e,a,s){var o=t?t.call(i,e,a,s):e;o>=n.computed&&(n={value:e,computed:o})}),n.value},x.min=function(e,t,i){if(!t&&x.isArray(e))return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var n={computed:Infinity};return k(e,function(e,a,s){var o=t?t.call(i,e,a,s):e;o<n.computed&&(n={value:e,computed:o})}),n.value},x.shuffle=function(e){var t,i=[];return k(e,function(e,n){0==n?i[0]=e:(t=Math.floor(Math.random()*(n+1)),i[n]=i[t],i[t]=e)}),i},x.sortBy=function(e,t,i){return x.pluck(x.map(e,function(e,n,a){return{value:e,criteria:t.call(i,e,n,a)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;return i<n?-1:i>n?1:0}),"value")},x.groupBy=function(e,t){var i={},n=x.isFunction(t)?t:function(e){return e[t]};return k(e,function(e,t){var a=n(e,t);(i[a]||(i[a]=[])).push(e)}),i},x.sortedIndex=function(e,t,i){i||(i=x.identity);for(var n=0,a=e.length;n<a;){var s=n+a>>1;i(e[s])<i(t)?n=s+1:a=s}return n},x.toArray=function(e){return e?e.toArray?e.toArray():x.isArray(e)?r.call(e):x.isArguments(e)?r.call(e):x.values(e):[]},x.size=function(e){return x.toArray(e).length},x.first=x.head=function(e,t,i){return null==t||i?e[0]:r.call(e,0,t)},x.initial=function(e,t,i){return r.call(e,0,e.length-(null==t||i?1:t))},x.last=function(e,t,i){return null==t||i?e[e.length-1]:r.call(e,Math.max(e.length-t,0))},x.rest=x.tail=function(e,t,i){return r.call(e,null==t||i?1:t)},x.compact=function(e){return x.filter(e,function(e){return!!e})},x.flatten=function(e,t){return x.reduce(e,function(e,i){return x.isArray(i)?e.concat(t?i:x.flatten(i)):(e[e.length]=i,e)},[])},x.without=function(e){return x.difference(e,r.call(arguments,1))},x.uniq=x.unique=function(e,t,i){var n=i?x.map(e,i):e,a=[];return x.reduce(n,function(i,n,s){return 0!=s&&(!0===t?x.last(i)==n:x.include(i,n))||(i[i.length]=n,a[a.length]=e[s]),i},[]),a},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=x.intersect=function(e){var t=r.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=x.flatten(r.call(arguments,1));return x.filter(e,function(e){return!x.include(t,e)})},x.zip=function(){for(var e=r.call(arguments),t=x.max(x.pluck(e,"length")),i=new Array(t),n=0;n<t;n++)i[n]=x.pluck(e,""+n);return i},x.indexOf=function(e,t,i){if(null==e)return-1;var n,a;if(i)return n=x.sortedIndex(e,t),e[n]===t?n:-1;if(b&&e.indexOf===b)return e.indexOf(t);for(n=0,a=e.length;n<a;n++)if(n in e&&e[n]===t)return n;return-1},x.lastIndexOf=function(e,t){if(null==e)return-1;if(y&&e.lastIndexOf===y)return e.lastIndexOf(t);for(var i=e.length;i--;)if(i in e&&e[i]===t)return i;return-1},x.range=function(e,t,i){arguments.length<=1&&(t=e||0,e=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/i),0),a=0,s=new Array(n);a<n;)s[a++]=e,e+=i;return s};var P=function(){};x.bind=function(e,t){var i,n;if(e.bind===$&&$)return $.apply(e,r.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=r.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(r.call(arguments)));P.prototype=e.prototype;var a=new P,s=e.apply(a,n.concat(r.call(arguments)));return Object(s)===s?s:a}},x.bindAll=function(e){var t=r.call(arguments,1);return 0==t.length&&(t=x.functions(e)),k(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var i={};return t||(t=x.identity),function(){var n=t.apply(this,arguments);return x.has(i,n)?i[n]:i[n]=e.apply(this,arguments)}},x.delay=function(e,t){var i=r.call(arguments,2);return setTimeout(function(){return e.apply(e,i)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(r.call(arguments,1)))},x.throttle=function(e,t){var i,n,a,s,o,r=x.debounce(function(){o=s=!1},t);return function(){i=this,n=arguments;var l=function(){a=null,o&&e.apply(i,n),r()};a||(a=setTimeout(l,t)),s?o=!0:e.apply(i,n),r(),s=!0}},x.debounce=function(e,t){var i;return function(){var n=this,a=arguments,s=function(){i=null,e.apply(n,a)};clearTimeout(i),i=setTimeout(s,t)}},x.once=function(e){var t,i=!1;return function(){return i?t:(i=!0,t=e.apply(this,arguments))}},x.wrap=function(e,t){return function(){var i=[e].concat(r.call(arguments,0));return t.apply(this,i)}},x.compose=function(){var e=arguments;return function(){for(var t=arguments,i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},x.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},x.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var i in e)x.has(e,i)&&(t[t.length]=i);return t},x.values=function(e){return x.map(e,x.identity)},x.functions=x.methods=function(e){var t=[];for(var i in e)x.isFunction(e[i])&&t.push(i);return t.sort()},x.extend=function(e){return k(r.call(arguments,1),function(t){for(var i in t)e[i]=t[i]}),e},x.defaults=function(e){return k(r.call(arguments,1),function(t){for(var i in t)null==e[i]&&(e[i]=t[i])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e},x.isEqual=function(t,i){return e(t,i,[])},x.isEmpty=function(e){if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!(!e||1!=e.nodeType)},x.isArray=_||function(e){return"[object Array]"==c.call(e)},x.isObject=function(e){return e===Object(e)},x.isArguments=function(e){return"[object Arguments]"==c.call(e)},x.isArguments(arguments)||(x.isArguments=function(e){return!(!e||!x.has(e,"callee"))}),x.isFunction=function(e){return"[object Function]"==c.call(e)},x.isString=function(e){return"[object String]"==c.call(e)},x.isNumber=function(e){return"[object Number]"==c.call(e)},x.isNaN=function(e){return e!==e},x.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==c.call(e)},x.isDate=function(e){return"[object Date]"==c.call(e)},x.isRegExp=function(e){return"[object RegExp]"==c.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return void 0===e},x.has=function(e,t){return u.call(e,t)},x.noConflict=function(){return t._=i,this},x.identity=function(e){return e},x.times=function(e,t,i){for(var n=0;n<e;n++)t.call(i,n)},x.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},x.mixin=function(e){k(x.functions(e),function(t){E(t,x[t]=e[t])})};var T=0;x.uniqueId=function(e){var t=T++;return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var D=/.^/,S=function(e){return e.replace(/\\\\/g,"\\").replace(/\\'/g,"'")};x.template=function(e,t){var i=x.templateSettings,n="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(i.escape||D,function(e,t){return"',_.escape("+S(t)+"),'"}).replace(i.interpolate||D,function(e,t){return"',"+S(t)+",'"}).replace(i.evaluate||D,function(e,t){return"');"+S(t).replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",a=new Function("obj","_",n);return t?a(t,x):function(e){return a.call(this,e,x)}},x.chain=function(e){return x(e).chain()};var A=function(e){this._wrapped=e};x.prototype=A.prototype;var j=function(e,t){return t?x(e).chain():e},E=function(e,t){A.prototype[e]=function(){var e=r.call(arguments);return l.call(e,this._wrapped),j(t.apply(x,e),this._chain)}};x.mixin(x),k(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=a[e];A.prototype[e]=function(){var i=this._wrapped;t.apply(i,arguments);var n=i.length;return"shift"!=e&&"splice"!=e||0!==n||delete i[0],j(i,this._chain)}}),k(["concat","join","slice"],function(e){var t=a[e];A.prototype[e]=function(){return j(t.apply(this._wrapped,arguments),this._chain)}}),A.prototype.chain=function(){return this._chain=!0,this},A.prototype.value=function(){return this._wrapped}}.call(this),app.modules.instantRegistration=function(e){function t(){$doc.on("change","#registration_terms",function(){$(".js-terms-needed-for-registration").prop("disabled",!$(this).prop("checked"))})}return e.load=function(){t()},e}(app.modules.instantRegistration||{}),app.modules.commonBase=function(e){function t(e){$.cookie("prefer_mobile_view",e.data("mobile"),{path:"/",domain:app.config.currentHost}),window.history&&history.pushState&&history.pushState(null,null,location.href.replace(/#.*/,"")),location.reload(!0)}function i(){$(".js-toggle-version").click(function(e){t($(this)),e.preventDefault()})}return e.load=function(){i()},e}(app.modules.commonBase||{}),function(){Handlebars.registerPartial("portal_rubrics_switcher/_list",Handlebars.template({1:function(e,t,i,n){var a;return"  <li class='lm-lvl-3-item'><a class='lm-lvl-3-link"+(null!=(a=t["if"].call(e,null!=e?e.marked:e,{name:"if",hash:{},fn:this.program(2,n,0),inverse:this.noop,data:n}))?a:"")+"' href='"+this.escapeExpression(this.lambda(null!=e?e.url:e,e))+"'>"+this.escapeExpression(this.lambda(null!=e?e.title:e,e))+"</a></li>\n"},2:function(){return" active"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<ul class='lm-lvl-3'>\n"+(null!=(a=t.each.call(e,null!=e?e.children:e,{name:"each",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"</ul>"},useData:!0}))}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["portal_rubrics_switcher/wrapper"]=Handlebars.template({1:function(e,t,i,n){var a;return"  <div class='vertical-menu-sublevels js-vertical-menu'>\n    <ul class='lm-lvl-2 js-timeout-menu'>\n"+(null!=(a=t.each.call(e,null!=e?e.rubrics:e,{name:"each",hash:{},fn:this.program(2,n,0),inverse:this.noop,data:n}))?a:"")+"    </ul>\n  </div>\n"},2:function(e,t,i,n){var a;return"      <li class='lm-lvl-2-item"+(null!=(a=t["if"].call(e,null!=e?e.children:e,{name:"if",hash:{},fn:this.program(3,n,0),inverse:this.noop,data:n}))?a:"")+(null!=(a=t["if"].call(e,null!=e?e.opened:e,{name:"if",hash:{},fn:this.program(5,n,0),inverse:this.noop,data:n}))?a:"")+" js-timeout-menu-item'><a class='lm-lvl-2-link' href='"+this.escapeExpression(this.lambda(null!=e?e.url:e,e))+"'>"+this.escapeExpression(this.lambda(null!=e?e.title:e,e))+"</a>"+(null!=(a=t["if"].call(e,null!=e?e.children:e,{name:"if",hash:{},fn:this.program(7,n,0),inverse:this.noop,data:n}))?a:"")+"      </li>\n"},3:function(){return" ws"},5:function(){return" first-active"},7:function(e,t,i,n){var a;return"\n        <div class='children- js-vertical-menu-level-3'>\n"+(null!=(a=this.invokePartial(i["portal_rubrics_switcher/_list"],e,{name:"portal_rubrics_switcher/_list",data:n,indent:"          ",helpers:t,partials:i}))?a:"")+"        </div>\n"},9:function(){return"  <div class='mt10 mb10'>\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u043d\u0435\u0442 \u0430\u043a\u0446\u0438\u0439</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a,s;return"<div class='content- active js-prs-content' data-type='"+this.escapeExpression((s=null!=(s=t.type||(null!=e?e.type:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"type",hash:{},data:n}):s))+"'>\n"+(null!=(a=t["if"].call(e,null!=e?e.rubrics:e,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.program(9,n,0),data:n}))?a:"")+"</div>"},usePartial:!0,useData:!0}),this.HandlebarsTemplates["portal_rubrics_switcher/wrapper"]}.call(this),app.modules.rubricsSwitcher=function(e){function t(){var e,t=$(this),n=t.data();t.hasClass("active")||(o.removeClass("active"),t.addClass("active"),e=s.find(".js-prs-content[data-type="+n.type+"]"),e.length?(r.removeClass("active"),e.addClass("active")):$.get(n.url,function(e){i(e,n.type),l.length&&$doc.trigger("init:timeoutMenu",[l])}))}function i(e,t){r.removeClass("active"),s.append(HandlebarsTemplates["portal_rubrics_switcher/wrapper"]({rubrics:e.length&&e,type:t})),r=s.find(".js-prs-content"),l=$(".js-prs-content.active .js-timeout-menu"),e.length&&app.modules.timeoutMenu.load()}function n(){s=$(".js-portal-rubrics-switcher"),o=s.find(".js-prsl-item"),r=s.find(".js-prs-content")}function a(){$doc.on("click",".js-prsl-item",t)}var s,o,r,l;return e.load=function(){n(),a()},e}(app.modules.rubricsSwitcher||{}),$doc.on("click",".call-button",function(){var e=$(this),t=e.data("url"),i=e.data("image");return $.ajax({type:"GET",url:t,beforeSend:function(){u_showLoading()},error:function(){alert("\u041e\u0448\u0438\u0431\u043a\u0430.")},complete:function(){u_reRenderPopup()},success:function(e){var t=$("#popup-content");t.html(e).show(),i&&t.find(".js-request-call-image").prop({src:i}),$("#create_phone_call_form").bind("ajax:success",function(){var e=$(this);e.find('input, input[type="text"], input[type="file"]').val(""),e.find("div.validation-error").empty(),hidePopup($("#popup-container")),alert("\u0412\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e!")}).bind("ajax:complete",function(){formSubmitter.enableButtons("#create_phone_call_form")}).bind("ajax:error",function(e,t,i,n){var a,s,o=$(this);try{a=$.parseJSON(t.responseText)}catch(e){a={message:"Please reload the page and try again"}}s="<ul>";for(n in a)s+="<li>"+n.replace("code","\u041a\u043e\u0434").replace("phone","\u041d\u043e\u043c\u0435\u0440")+": "+a[n][0]+"</li> ";s+="</ul>",o.find("div.validation-error").html(s),u_reRenderPopup()})}}),!1}),Maps=function(){function e(e,t){setTimeout(function(){window.ymaps.ready(function(){$doc.trigger("openBalloon:toggleMap",t)})},e)}function t(){var t=$(this).data("index"),i=$(".js-contacts-map").length&&$(".js-contacts-map");i.is("toggle-off")||i.addClass("toggle-off"),$("html, body").animate({scrollTop:i.offset().top-50},1e3),-1!==t?e(200,t):$doc.trigger("closeBalloon:toggleMap",t)}function i(e,t,i){var n,a,s,o=$("<div>"),r=app.config.mapBalloonAdditionalClass||"";return e.hasClass("js-map-simple")?(o.append(e.html()),'<div class="balloon-company-box- '+r+'">'+o.html()+"</div>"):(a=$("<div>").addClass("right-col").append(e.find(".js-cli-title").clone(),t||e.find(".js-cli-address").clone(),i||e.find(".js-cli-phone").clone()),s=$("<div>").addClass("left-col").append(e.find(".js-cli-order").clone(),e.find(".js-cli-stats").clone()),o.append(a,s),n=o.find("img"),n.data("original")&&n.removeAttr("style").attr({src:n.data("original")}),a.html()||s.html()?'<div class="balloon-company-box- '+r+'">'+o.html()+"</div>":void 0)}function n(e){var t=e.center||null,n=e.$container||null,a=e.preset||null,o=e.hint||null,r=e.address||null,l=e.phone&&e.phone.length?e.phone:null,c=n?n.find(".js-cli-title").text()||n.find(".js-ga-content-cl-company-title").text()||o:o,u=new ymaps.Placemark(t,{hintContent:c,id:n?n.data("id"):null,contentLoad:n?!!n.html():null},{preset:a,zIndex:n&&n.hasClass("leader")?100:1,hideIconOnBallon:!1,openEmptyBalloon:!0,balloonPanelMaxMapArea:0}),d='<div class="simple-balloon">'+o+"</div>";return n&&(d=$(".js-map-firm").length?i(n,r,l)||d:s(n.data("id"))),u.events.add("balloonopen",function(){u.properties.set("balloonContent",d),$(u.properties.get("balloonContent")).find(".lazy").removeAttr("style").lazyload()}),u}function a(){var e,t,i,a,s=[],o=$(".js-map-firm"),r=[];if(o.length)o.each(function(){var e=$(this);(D.hiddenOtherGeoObject?e.find(".js-coordinates:visible"):e.find(".js-coordinates")).each(function(t,i){var n,a,s=$(i),o=parseFloat(s.data("lat")),l=parseFloat(s.data("lon")),c=s.data("hint")||null,u=s.find(".js-coordinates-cli-address").clone(),d=s.find(".js-coordinates-cli-phone").clone();u.length||(u=null),d.length||(d=null),o&&l&&(s.data("index",T++),n=o.toString()+l.toString(),r[n]||(r[n]=[]),a=e.hasClass("unpaid")&&k||e.hasClass("paid")&&x||e.hasClass("filial")&&_||e.hasClass("contacts")&&w||e.hasClass("leader")&&y||b,a=!j&&0===t&&e.hasClass("filial")&&C||a,r[n].push({element:s,lat:o,lon:l,name:c,item:e.hasClass("filial")?s:e,preset:a,address:u,phone:d}))})});else if("undefined"!=typeof companyPoints)for(i in companyPoints){var l=$("<div>").data("id",i);for(companyPoints[i].leader&&l.addClass("leader"),e=0;e<companyPoints[i].coordinates.length;e++){var c,u=parseFloat(companyPoints[i].coordinates[e].lat),d=parseFloat(companyPoints[i].coordinates[e].lon);u&&d&&(c=u.toString()+d.toString(),r[c]||(r[c]=[]),r[c].push({lat:u,lon:d,item:l,preset:companyPoints[i].leader?y:b,name:companyPoints[i].name,productGeopoint:companyPoints[i].product_geopoint}))}}for(e in r)if(r[e].length>1){var h=parseFloat(r[e][0].lat),p=parseFloat(r[e][0].lon),f=r[e].length;for(t=0;t<f;t++)r[e][t].lat=Math.cos(2*Math.PI*t/f)*P+h,r[e][t].lon=Math.sin(2*Math.PI*t/f)*P+p,a=s.push(n({center:[r[e][t].lat,r[e][t].lon],$container:r[e][t].item,preset:r[e][t].preset,hint:r[e][t].name})),r[e][t].element&&r[e][t].element.data("index",a-1)}else a=s.push(n({center:[r[e][0].lat,r[e][0].lon],$container:r[e][0].item,preset:r[e][0].preset,hint:r[e][0].name,address:r[e][0].address,phone:r[e][0].phone})),r[e][0].element&&r[e][0].element.data("index",a-1);return app.config.reverseMapObjects?s.reverse():s}function s(e){var t,n="undefined"!=typeof companyPoints&&companyPoints[e].product_geopoint,a=n?"product_id":"cid",s=$(".js-catalogue-item[data-"+a+'="'+e+'"]:eq(0)');if(s.length){var o=s.find(".js-balloon-img").clone().addClass("image"),r=o.find(".lazy"),l=s.find(".js-balloon-title").clone().addClass("title"),c=s.find(".js-balloon-price").clone().addClass("price"),u=s.find(".js-balloon-order-link").clone().addClass("order");return r&&r.attr({src:r.data("original")}),$("<div>").append($("<div>").append(o,l,c,u).addClass("balloon-product")).html()}return $.ajax({url:"/ajax/company_baloon",data:{company_id:e},dataType:"html",async:!1,success:function(e){t=$("<div>").append(i($("<div>").html(e))).html()}}).fail(function(){t=null}),t}function o(){A=a(),$(A).each(function(e){f.geoObjects.add(A[e])})}function r(){D.building?D.address:D.hint;f=new ymaps.Map($(g)[0],{center:S,zoom:D.zoom,behaviors:["default"],type:"yandex#map",controls:[]},{balloonMinWidth:100,balloonMaxWidth:"100%"}),f.controls.add("rulerControl").add("geolocationControl").add("zoomControl"),f.events.add("click",function(){f.balloon.isOpen()&&f.balloon.close()}).add("balloonopen",function(){spanToLinks(),$doc.trigger("unlock:seoLinks"),$(".js-toggle").toggler()}),$(g).mouseenter(function(){v=setTimeout(function(){f.behaviors.enable("scrollZoom")},D.delayScroll)}),$(g).mouseleave(function(){clearTimeout(v),f.behaviors.disable("scrollZoom")}),!D.address&&o(),D.zoomallgeo&&f.setBounds(f.geoObjects.getBounds()),$doc.on("click",".js-show-other-addresses",function(){$(this).hide(),$(".js-other-addresses-list").show(),D.hiddenOtherGeoObject&&o()})}function l(){m=ymaps.geocode(D.address),m.then(function(e){e.geoObjects.getLength()?(S=e.geoObjects.get(0).geometry.getCoordinates(),$doc.trigger("center.map")):$(".show-map, #js-map-container, .js-show-map").hide()},function(e){console.error("\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: "+e.message)})}function c(){var e,t,i=[],n=[],a={},s=D.hiddenOtherGeoObject?$(".js-coordinates[data-lat]:visible"):$(".js-coordinates[data-lat]");if("undefined"!=typeof companyPoints&&p(companyPoints))for(t in companyPoints)for(e=0;e<companyPoints[t].coordinates.length;e++)parseFloat(companyPoints[t].coordinates[e].lat)&&parseFloat(companyPoints[t].coordinates[e].lon)&&n.push({x:parseFloat(companyPoints[t].coordinates[e].lat),y:parseFloat(companyPoints[t].coordinates[e].lon),"delete":0});else s.each(function(){var e=$(this);n.push({x:parseFloat(e.data("lat")),y:parseFloat(e.data("lon")),"delete":0})});return n.length?(i=u(n),a=ymaps.util.bounds.getCenterAndZoom(i,[$(g).width(),$(g).height()]),a.zoom<D.zoom&&(D.zoom=a.zoom),a.center):[]}function u(e){var t,i=Math.floor(e.length/2),n={},a=[],s=[],o=[],r=360,l=360,c=0;if(1==e.length)return[[parseFloat(e[0].x)-.01,parseFloat(e[0].y)-.01],[parseFloat(e[0].x)+.01,parseFloat(e[0].y)+.01]];for(t=0;t<i;t++)n=d(e),e[n.min.indexX]["delete"]=e[n.min.indexY]["delete"]=e[n.max.indexX]["delete"]=e[n.max.indexY]["delete"]=1,a.push({x:n.max.x-n.min.x,y:n.max.y-n.min.y,index:{minX:n.min.indexX,minY:n.min.indexY,maxX:n.max.indexX,maxY:n.max.indexY}});return $.each(a,function(t){if(this.x<r&&this.y<l&&(r=this.x,l=this.y,c=t),this.x<.5&&this.y<.5)return s[0]=e[this.index.minX].x,s[1]=e[this.index.minY].y,o[0]=e[this.index.maxX].x,o[1]=e[this.index.maxY].y,!1}),s.length||o.length||(s[0]=e[a[c].index.minX].x,s[1]=e[a[c].index.minY].y,o[0]=e[a[c].index.maxX].x,o[1]=e[a[c].index.maxY].y),[s,o]}function d(e){var t={min:{x:360,y:360,indexX:0,indexY:0},max:{x:0,y:0,indexX:0,indexY:0}};return $.each(e,function(e){this["delete"]||(this.x<t.min.x&&(t.min.x=this.x,t.min.indexX=e),this.y<t.min.y&&(t.min.y=this.y,t.min.indexY=e),this.x>t.max.x&&(t.max.x=this.x,t.max.indexX=e),this.y>t.max.y&&(t.max.y=this.y,t.max.indexY=e))}),t}function h(){g=D.mapid||"#YMapsID",$doc.on("center.map",function(){r()}).on("reload:listingSwitcher",function(){$.each(A,function(e){f.geoObjects.remove(A[e])}),o()}).on("openBalloon:toggleMap",function(e,t){A[t].balloon.open()}).on("closeBalloon:toggleMap",function(){f.balloon.close()}).on("click",".js-show-map-point",t),ymaps.ready(function(){D.latitude&&D.longitude?(S=[D.latitude,D.longitude],$doc.trigger("center.map")):!D.address||"undefined"!=typeof companyPoints&&p(companyPoints)?(j=!0,S=D.centerCoordLat&&D.centerCoordLon?[D.centerCoordLat,D.centerCoordLon]:c(),S.length?$doc.trigger("center.map"):(D.address=$.trim($("#select-region-link").html()),l())):l()})}function p(e){var t,i=0;for(t in e)i++;return i}var f,m,g,v,b="islands#grayIcon",y="islands#blueIcon",_="islands#redIcon",w="islands#blueIcon",x="islands#blueIcon",k="islands#grayIcon",C="islands#redDotIcon",P=1e-4,T=0,D={},S=[],A=[],j=!1;return{init:function(e){D=e,h()},getMap:function(){return f}}}(),app.modules.initYandexMap=function(e){function t(e){Maps.init(e.data())}function i(){$doc.on("showYandexMap",function(e,i){var a=$(i);n(a).then(function(){t(a)})})}function n(e){return $.getScript(e.data("apipath"))}return e.load=function(){var e=$(".js-yandex-map:eq(0)");i(),e.length&&n(e).then(function(){t(e)})},e.init=function(){$(".js-yandex-map:visible").each(function(){t($(this))})},e}(app.modules.initYandexMap||{}),app.modules.imagesHelper=function(e){function t(e){var t=e,i=t.find("img").attr("title");$(".js-zoom-preview").attr({href:t.data("bigimage"),title:i}).data({index:t.data("index")}).find("img").attr({src:t.attr("href"),title:i,alt:i}),t.closest("li").addClass("active").siblings().removeClass("active"),ZoomImage.reload()}function i(){var e=app.config.imagePreviews||4;e<$(".js-image-previews .js-thumb").length&&$(".js-image-previews").contentslider({classBlock:"contentslider-preview contentslider-block",countView:e,countSlide:e,showScroll:!1,animate:300,wheelMouse:!0,autoResize:!0}),window.ZoomImage&&ZoomImage.init({selector:".js-zoom-preview",bigClass:"big-block",zoomClass:"mouse-trap",zoomSizeMode:"lens"})}function n(){$doc.on("click",".js-thumb",function(e){t($(this)),e.preventDefault()})}return e.load=function(){i(),n()},e}(app.modules.imagesHelper||{}),app.modules.complaint=function(e){var t=function(e){var t=e.parent().find(".js-complaint-block");t.length?t.closest(".js-complaint-link-block").addClass("active"):$.ajax({url:e.data("url"),data:{product_id:e.data("id")},success:function(t){var i=$(t);e.after(i),setTimeout(function(){e.closest(".js-complaint-link-block").addClass("active")},10)}})},i=function(e){e.closest(".js-complaint-block").find(".cb-popup, .cb-form").slideToggle(300)},n=function(e,t){return e.addClass("disabled"),$.ajax({data:{id:e.data("id"),type:t,message:e.closest(".js-complaint-block").find("textarea").val()},type:"post",url:app.config.complaintMessageUrl,success:function(){s(e)}})},a=function(e){var t=e.closest(".cb-form"),i=""!==$("textarea",t).val();return t.find(".js-cbf-text").toggle(!i),i},s=function(e){var t=e.closest(".js-catalogue-item"),i=$("<span>").text("\u0421\u043f\u0430\u0441\u0438\u0431\u043e, \u0432\u0441\u0435 \u0438\u0441\u043f\u0440\u0430\u0432\u0438\u043c");t.length?t.find(".js-complaint-link-block").html(i):e.closest(".js-complaint-link-block").html(i)},o=function(){$doc.on("click",function(e){if($(e.target).closest(".js-complaint-link-block").length)return!1;$(".js-complaint-link-block").removeClass("active")}),$doc.on("click",".js-complaint-link",function(e){$doc.trigger("complaintsList.hideAll"),t($(this)),e.preventDefault()}),$doc.on("click",".js-cbf-send-form",function(e){var t=$(this),i=t.closest(".js-complaint-block"),o=i.data("type");if("other"===o&&!a(t))return!1;n(i,o).success(function(){s(t)}),e.preventDefault()}),$doc.on("click",".js-cbf-close-form",function(){return $doc.trigger("complaintsList.hideAll"),i($(this)),!1}),$doc.on("complaintsList.hideAll",function(){$(".js-complaint-link-block").removeClass("active")}),$doc.on("click",".js-cb-companies-list",function(e){var t=$(e.target).closest("li"),a=t.data("type"),s=t.closest(".js-complaint-block");if("other"===a||"do_not_call"===a)return i(t),s.data("type",a).find("textarea").attr("placeholder","do_not_call"===a?"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0412\u0430\u0448 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430":""),!1;n(s,a),e.preventDefault()})};return e.load=function(){o()},e}(app.modules.complaint||{}),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["show_phone/default"]=Handlebars.template({1:function(e,t,i,n){var a,s;return"<a href='tel:"+this.escapeExpression((s=null!=(s=t.nativePhone||(null!=e?e.nativePhone:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"nativePhone",hash:{},data:n}):s))+"'>\n  "+this.escapeExpression(this.lambda(null!=(a=null!=e?e.item:e)?a.phone:a,e))+"\n</a>\n"+(null!=(a=t["if"].call(e,null!=(a=null!=e?e.item:e)?a.comment:a,{name:"if",hash:{},fn:this.program(2,n,0),inverse:this.noop,data:n}))?a:"")},2:function(e){var t;return"<span class='comment-'>\n  "+this.escapeExpression(this.lambda(null!=(t=null!=e?e.item:e)?t.comment:t,e))+"\n</span>\n"},4:function(){return"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return null!=(a=t["if"].call(e,null!=e?e.nativePhone:e,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.program(4,n,0),data:n}))?a:""},useData:!0}),
this.HandlebarsTemplates["show_phone/default"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["show_phone/list"]=Handlebars.template({1:function(e,t,i,n){var a,s;return"  <a href='tel:"+this.escapeExpression((s=null!=(s=t.nativePhone||(null!=e?e.nativePhone:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"nativePhone",hash:{},data:n}):s))+"'>"+this.escapeExpression((s=null!=(s=t.phone||(null!=e?e.phone:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"phone",hash:{},data:n}):s))+"</a>\n"+(null!=(a=t["if"].call(e,null!=e?e.comment:e,{name:"if",hash:{},fn:this.program(2,n,0),inverse:this.noop,data:n}))?a:"")},2:function(e,t,i,n){var a;return"  <span class='comment-'>\n    "+this.escapeExpression((a=null!=(a=t.comment||(null!=e?e.comment:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"comment",hash:{},data:n}):a))+"\n  </span>\n"},4:function(e,t,i,n){var a;return"  "+this.escapeExpression((a=null!=(a=t.phone||(null!=e?e.phone:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"phone",hash:{},data:n}):a))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<li class='phone-'>\n"+(null!=(a=t["if"].call(e,null!=e?e.nativePhone:e,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.program(4,n,0),data:n}))?a:"")+"</li>"},useData:!0}),this.HandlebarsTemplates["show_phone/list"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["show_phone/toggle_list"]=Handlebars.template({1:function(e,t,i,n){var a;return"    <a href='tel:"+this.escapeExpression(this.lambda(null!=(a=null!=e?e.phone:e)?a["native"]:a,e))+"'>\n      "+this.escapeExpression(this.lambda(null!=(a=null!=e?e.phone:e)?a.phone:a,e))+"\n    </a>\n"+(null!=(a=t["if"].call(e,null!=e?e.showSwitcher:e,{name:"if",hash:{},fn:this.program(2,n,0),inverse:this.noop,data:n}))?a:"")},2:function(){return"    <span class='show-all- js-toggle-switcher'>\n      \u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u044b\n    </span>\n"},4:function(e){var t;return"    "+this.escapeExpression(this.lambda(null!=(t=null!=e?e.phone:e)?t.phone:t,e))+"\n"},6:function(e,t,i,n){var a;return"  <li class='tel js-toggle-content hidden'>\n"+(null!=(a=t["if"].call(e,null!=e?e["native"]:e,{name:"if",hash:{},fn:this.program(7,n,0),inverse:this.program(9,n,0),data:n}))?a:"")+"  </li>\n"},7:function(e){return"    <a href='tel:"+this.escapeExpression(this.lambda(null!=e?e["native"]:e,e))+"'>\n      "+this.escapeExpression(this.lambda(null!=e?e.phone:e,e))+"\n    </a>\n"},9:function(e){return"    "+this.escapeExpression(this.lambda(null!=e?e.phone:e,e))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<ul class='phones js-toggle' data-effect='slide'>\n  <li class='tel main'>\n"+(null!=(a=t["if"].call(e,null!=(a=null!=e?e.phone:e)?a["native"]:a,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.program(4,n,0),data:n}))?a:"")+"  </li>\n"+(null!=(a=t.each.call(e,null!=e?e.phones:e,{name:"each",hash:{},fn:this.program(6,n,0),inverse:this.noop,data:n}))?a:"")+"</ul>"},useData:!0}),this.HandlebarsTemplates["show_phone/toggle_list"]}.call(this),app.modules.asyncPhoneNumber=function(e){function t(e){return e.replace(/[^+\d]/g,"")}function i(){$.ajax({url:c.data("phones"),dataType:"json",error:function(e,t,i){window.console&&console.log(e,t,i)},success:n})}function n(e){switch(c.data("type")){case"toggle_list":o(e);break;case"list":case"thematic":r(e);break;case"neighbor":s(e);break;default:c.html(a(e))}c.addClass("phone-loaded")}function a(e){var i=e.length&&e[0];return HandlebarsTemplates["show_phone/default"]({nativePhone:i&&t(i.phone),item:i})}function s(e){app.config.isMobile||c.hide(),$(c.data("neighbor")).html(a(e))}function o(e){var i=[],n={phone:e[0].phone,"native":t(e[0].phone)},a=e.length>1;$.each(e.splice(1,1).reverse(),function(e,n){i.push({phone:n.phone,"native":t(n.phone)})}),c.after(HandlebarsTemplates["show_phone/toggle_list"]({phone:n,phones:i,showSwitcher:a})),c.remove(),a&&$(".js-toggle").toggler()}function r(e){$.each(e.reverse(),function(e,i){c.after(HandlebarsTemplates["show_phone/list"]({nativePhone:t(i.phone),phone:i.phone,comment:i.comment||""}))}),c.remove()}function l(){$doc.on("click",".js-show-phone-number",function(){c=$(this),c.hasClass("phone-loaded")||(i(),$doc.trigger("send:externalAnalytics",app.config.analyticsCfg.showHiddenPhonesEvent))}).on("click",".js-show-full-string",function(){var e=$(this).parent();e.html(e.data("full-text"))})}var c;return e.load=function(){l()},e}(app.modules.asyncPhoneNumber||{}),app.modules.productCard=function(e){function t(){$(".js-"+app.config.traitClass+" br").before($("<span>").addClass("js-show-more-traits show-more-traits").html("..."))}function i(e){var t=e.length?e:r;o.tabs("option","active",1),$("html, body").stop().animate({scrollTop:t.offset().top-$(".js-main-toolbar, .js-company-toolbar").height()-c},500)}function n(){$(".js-review-tip").each(function(){var e=$(this);qtipMessage(e.attr("id"),e.data("text"),"bottomLeftHover")})}function a(){$doc.on("click",".js-show-more-traits",function(){$(this).closest(".js-"+app.config.traitClass).toggleClass("expanded")}).on("initTraitDots",function(){t()}).on("click",".js-show-reviews, .js-opinions-tab",function(e){location.hash="opinions",i(r),e.preventDefault()}),r.length&&app.config.companyName&&$win.on("scroll",function(){$win.height()+$win.scrollTop()>r.offset().top&&$doc.trigger("openReviews:productCard")})}function s(){app.config.traitClass&&$doc.trigger("initTraitDots"),l.html(l.text().shortenedString(66,3)),o=$(".js-product-tab-box").tabs(),/opinions|reviews/.test(location.hash)&&i($(location.hash)),n()}var o,r,l,c=70;return e.load=function(){l=$(".js-address-comment"),r=$("#reviews-list"),a(),s()},e}(app.modules.productCard||{}),function(e){e.fn.numeric=function(t,i){"boolean"==typeof t&&(t={decimal:t}),t=t||{},"undefined"==typeof t.negative&&(t.negative=!0);var n=!1===t.decimal?"":t.decimal||".",a=!0===t.negative;return i="function"==typeof i?i:function(){},this.data("numeric.decimal",n).data("numeric.negative",a).data("numeric.callback",i).keypress(e.fn.numeric.keypress).keyup(e.fn.numeric.keyup).blur(e.fn.numeric.blur)},e.fn.numeric.keypress=function(t){var i=e.data(this,"numeric.decimal"),n=e.data(this,"numeric.negative"),a=t.charCode?t.charCode:t.keyCode?t.keyCode:0;if(13==a&&"input"==this.nodeName.toLowerCase())return!0;if(13==a)return!1;var s=!1;if(t.ctrlKey&&97==a||t.ctrlKey&&65==a)return!0;if(t.ctrlKey&&120==a||t.ctrlKey&&88==a)return!0;if(t.ctrlKey&&99==a||t.ctrlKey&&67==a)return!0;if(t.ctrlKey&&122==a||t.ctrlKey&&90==a)return!0;if(t.ctrlKey&&118==a||t.ctrlKey&&86==a||t.shiftKey&&45==a)return!0;if(a<48||a>57){var o=e(this).val();if(0!==o.indexOf("-")&&n&&45==a&&(0===o.length||0===parseInt(e.fn.getSelectionStart(this),10)))return!0;i&&a==i.charCodeAt(0)&&-1!=o.indexOf(i)&&(s=!1),8!=a&&9!=a&&13!=a&&35!=a&&36!=a&&37!=a&&39!=a&&46!=a?s=!1:"undefined"!=typeof t.charCode&&(t.keyCode==t.which&&0!==t.which?(s=!0,46==t.which&&(s=!1)):0!==t.keyCode&&0===t.charCode&&0===t.which&&(s=!0)),i&&a==i.charCodeAt(0)&&(s=-1==o.indexOf(i))}else s=!0;return s},e.fn.numeric.keyup=function(){var t=e(this).val();if(t&&t.length>0){var i=e.fn.getSelectionStart(this),n=e.fn.getSelectionEnd(this),a=e.data(this,"numeric.decimal"),s=e.data(this,"numeric.negative");if(""!==a&&null!==a){var o=t.indexOf(a);0===o&&(this.value="0"+t),1==o&&"-"==t.charAt(0)&&(this.value="-0"+t.substring(1)),t=this.value}for(var r=[0,1,2,3,4,5,6,7,8,9,"-",a],l=t.length,c=l-1;c>=0;c--){var u=t.charAt(c);0!==c&&"-"==u?t=t.substring(0,c)+t.substring(c+1):0!==c||s||"-"!=u||(t=t.substring(1));for(var d=!1,h=0;h<r.length;h++)if(u==r[h]){d=!0;break}d&&" "!=u||(t=t.substring(0,c)+t.substring(c+1))}var p=t.indexOf(a);if(p>0)for(var f=l-1;f>p;f--){var m=t.charAt(f);m==a&&(t=t.substring(0,f)+t.substring(f+1))}this.value=t,e.fn.setSelection(this,[i,n])}},e.fn.numeric.blur=function(){var t=e.data(this,"numeric.decimal"),i=e.data(this,"numeric.callback"),n=this.value;if(""!==n){new RegExp("^\\d+$|^\\d*"+t+"\\d+$").exec(n)||i.apply(this)}},e.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).unbind("keypress",e.fn.numeric.keypress).unbind("blur",e.fn.numeric.blur)},e.fn.getSelectionStart=function(e){if(e.createTextRange){var t=document.selection.createRange().duplicate();return t.moveEnd("character",e.value.length),""===t.text?e.value.length:e.value.lastIndexOf(t.text)}return e.selectionStart},e.fn.getSelectionEnd=function(e){if(e.createTextRange){var t=document.selection.createRange().duplicate();return t.moveStart("character",-e.value.length),t.text.length}return e.selectionEnd},e.fn.setSelection=function(e,t){if("number"==typeof t&&(t=[t,t]),t&&t.constructor==Array&&2==t.length)if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveStart("character",t[0]),i.moveEnd("character",t[1]),i.select()}else e.setSelectionRange&&(e.focus(),e.setSelectionRange(t[0],t[1]))}}(jQuery),app.modules.onlineStoresRequestsFilter=function(e){function t(){$doc.on("click",".js-os-link",function(){var e=$(this);e.hasClass("js-os-disabled-link")||setTimeout(function(){e.removeClass("js-os-disabled-link")},5e3),e.addClass("js-os-disabled-link")}).on("click",".js-os-disabled-link",function(){return!1})}return e.load=function(){t()},e}(app.modules.onlineStoresRequestsFilter||{}),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["order_to_tender/form"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a,s;return"<div class='order-to-tender'>\n  <span class='qtip-icon js-qtip-icon' data-content='"+(null!=(s=null!=(s=t.qtip||(null!=e?e.qtip:e))?s:t.helperMissing,a="function"==typeof s?s.call(e,{name:"qtip",hash:{},data:n}):s)?a:"")+"' data-show='{\"event\":\"click mousemove\"}' data-style='{\"classes\":\"qtip-light\"}'></span>\n  <span class='ott-title'>\n    \u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443 \u0432\u0441\u0435\u043c \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044f\u043c \u0441 \u043f\u043e\u0445\u043e\u0436\u0438\u043c\u0438 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f\u043c\u0438?\n  </span>\n  <label class='radio mr15'>\n    <input class='ott-radio js-ott-options' name='extra_params[create_tender]' type='radio' value='1'>\n    <span class='ott-label'>\u0434\u0430</span>\n  </label>\n  <label class='radio'>\n    <input checked class='ott-radio js-ott-options' name='extra_params[create_tender]' type='radio' value='0'>\n    <span class='ott-label'>\u043d\u0435\u0442</span>\n  </label>\n</div>"},useData:!0}),this.HandlebarsTemplates["order_to_tender/form"]}.call(this),app.modules.orderToTender=function(e){function t(){s=$(".js-order-to-tender"),s.html(HandlebarsTemplates["order_to_tender/form"]({qtip:s.data("qtip")}))}function i(){s.removeClass("dn")}function n(){t(),s.length&&i(),$doc.trigger("init:initQtip")}function a(){$doc.on("orderForm.init",n)}var s;return e.load=function(){n(),a()},e}(app.modules.orderToTender||{}),app.modules.visitedProducts=app.modules.visitedProducts||{},app.modules.visitedProducts.render=function(e){var t=app.config.visitedProducts.visibleItems||5,i=$(".js-visited-products");if(!e)return void i.remove();$win.on("scroll",function(){$(".js-visited-products:empty").length&&$win.height()+$win.scrollTop()>i.offset().top&&(i.html(HandlebarsTemplates["visited_products/list"]({products:e.products})),$(".js-visited-products-slider").contentslider({showScroll:e.products.length>t,countView:t,countSlide:t}))})},function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["visited_products/list"]=Handlebars.template({1:function(e,t,i,n){var a;return"      <li class='psb-item'>\n        <div class='product-small-brick'>\n          <div class='aci-wrap'>\n            <a class='aci-cell"+(null!=(a=t["if"].call(e,null!=e?e.image_url:e,{name:"if",hash:{},fn:this.program(2,n,0),inverse:this.program(4,n,0),data:n}))?a:"")+"' href='"+this.escapeExpression(this.lambda(null!=e?e.url:e,e))+"' target='_blank' title='"+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"'>\n"+(null!=(a=t["if"].call(e,null!=e?e.image_url:e,{name:"if",hash:{},fn:this.program(6,n,0),inverse:this.noop,data:n}))?a:"")+"            </a>\n          </div>\n          <a class='title-' href='"+this.escapeExpression(this.lambda(null!=e?e.url:e,e))+"'>"+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"</a>\n          <div class='price-'>"+(null!=(a=this.lambda(null!=e?e.price:e,e))?a:"")+"</div>\n        </div>\n      </li>\n"},2:function(){return""},4:function(){return" no-photo"},6:function(e){return"              <img alt='"+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"' class='aci-img' src='"+this.escapeExpression(this.lambda(null!=e?e.image_url:e,e))+"'>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='portal-slider-box'>\n  <div class='psb-head card'>\n    \u0412\u044b \u0441\u043c\u043e\u0442\u0440\u0435\u043b\u0438\n  </div>\n  <div class='psb-wrapper'>\n    <ul class='js-visited-products-slider psb-list'>\n"+(null!=(a=t.each.call(e,null!=e?e.products:e,{name:"each",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"    </ul>\n  </div>\n</div>"},useData:!0}),this.HandlebarsTemplates["visited_products/list"]}.call(this),ga("blizkoru.send","event","\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u041f\u0418\u0421\u0410\u0422\u0415\u041b\u042f _\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0441 \u0422\u041b","02_\u041f\u043e\u043a\u0430\u0437\u044b_\u0422\u0435\u043a\u0441\u0442 \u0437\u043e\u043d\u0430_\u041f\u041a\u0422","02_\u041f\u043e\u043a\u0430\u0437\u044b \u0422\u0417_\u041f\u041a\u0422");var eventCategory=app.config.googleAnalytics.addProductsType?"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u041d\u0422\u0410_\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u044b":"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u041f\u0418\u0421\u0410\u0422\u0415\u041b\u042f _\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0441 \u0422\u041b",eventCategoryForEmptySearch=app.config.googleAnalytics.addProductsType?"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u041d\u0422\u0410 __\u0422\u043e\u0432\u0430\u0440\u044b \u0441 \u043f\u043e\u0438\u0441\u043a\u0430":"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u041f\u0418\u0421\u0410\u0422\u0415\u041b\u042f _\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0441 \u043f\u043e\u0438\u0441\u043a\u0430_\u0422\u043e\u0432\u0430\u0440\u044b";app.config.googleAnalytics.catalogueInlistPromo&&ga("blizkoru.send","event",eventCategory,"02_\u041f\u043e\u043a\u0430\u0437\u044b_\u041f\u0440\u043e\u043c\u043e-\u0437\u043e\u043d\u0430_\u0422\u041b","02_\u041f\u043e\u043a\u0430\u0437\u044b \u041f\u0417_\u0422\u041b"),$doc.on("click",".js-ga-goods-list-empty-promo-zone",function(){ga("blizkoru.send","event",eventCategoryForEmptySearch,"02_\u041a\u043b\u0438\u043a\u0438_\u041f\u0440\u043e\u043c\u043e-\u0437\u043e\u043d\u0430_\u0422\u041b","02_\u041a\u043b\u0438\u043a\u0438 \u041f\u0417_\u0422\u041b")}).on("click",".js-ga-add-company-block-in-list",function(){ga("blizkoru.send","event",eventCategory,"02_\u041a\u043b\u0438\u043a\u0438_\u041f\u0440\u043e\u043c\u043e-\u0437\u043e\u043d\u0430_\u0422\u041b","02_\u041a\u043b\u0438\u043a\u0438 \u041f\u0417_\u0422\u041b")}).on("click",".js-ga-add-company-block-out-list",function(){ga("blizkoru.send","event",eventCategory,"03_\u041a\u043b\u0438\u043a\u0438_\u0422\u0435\u043a\u0441\u0442 \u0437\u043e\u043d\u0430_\u0422\u041b","03_\u041a\u043b\u0438\u043a\u0438\u0422\u0417_\u0422\u041b")}),$(".js-ga-add-company-block-out-list").length&&ga("blizkoru.send","event",app.config.googleAnalytics.addProductsType?"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u041d\u0422\u0410_\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u044b":"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u041f\u0418\u0421\u0410\u0422\u0415\u041b\u042f _\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0441 \u0422\u041b","03_\u041f\u043e\u043a\u0430\u0437\u044b_\u0422\u0435\u043a\u0441\u0442 \u0437\u043e\u043d\u0430_\u0422\u041b","03_\u041f\u043e\u043a\u0430\u0437\u044b \u0422\u0417_\u0422\u041b"),$(".js-ga-showcase").length&&ga("blizkoru.send","event","\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u0427\u0418\u0422\u0410\u0422\u0415\u041b\u042f_\u0431\u0430\u043d\u043d\u0435\u0440 \u0432 \u0430\u043a\u0446\u0438\u0438_\u0442\u043e\u0432\u0430\u0440\u044b","01_\u041f\u043e\u043a\u0430\u0437\u044b_\u0431\u0430\u043d\u043d\u0435\u0440_\u0430\u043a\u0446\u0438\u0438_\u0422","01_\u041f\u043e\u043a\u0430\u0437\u044b_\u041f\u0410\u0422"),app.modules.eighteenConfirmation=function(e){var t,i=function(){t.dialog({width:"410",modal:!0,resizable:!1,dialogClass:"dialog-popup simple eighteen-confirmation-popup",open:function(){$(".ui-widget-overlay").addClass("o0-9")},close:function(){$.cookie("eighteenConfirmation")?$(".ui-widget-overlay").removeClass("o0-9"):location.href="/"}})},n=function(){i()},a=function(){$doc.on("click",".js-ecp-true",function(){$.cookie("eighteenConfirmation",1,{path:"/",domain:"."+app.config.shortHost}),t.dialog("close")}).on("click",".js-ecp-false",function(){location.href="/"})};return e.load=function(){t=$(".js-eighteen-popup"),t.length&&!$.cookie("eighteenConfirmation")&&(n(),a())},e}(app.modules.eighteenConfirmation||{}),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["paginate/paginator"]=Handlebars.template({1:function(){return"disabled"},3:function(e,t,i,n){var a;return"  <a class='pli-link- js-navigate' href='"+this.escapeExpression((a=null!=(a=t.prev||(null!=e?e.prev:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"prev",hash:{},data:n}):a))+"'></a>\n"},5:function(){return"  <span class='pli-link-'></span>\n"},7:function(e){var t;return"  "+(null!=(t=this.lambda(e,e))?t:"")+"\n"},9:function(e,t,i,n){var a;return"  <a class='pli-link- js-navigate' href='"+this.escapeExpression((a=null!=(a=t.next||(null!=e?e.next:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"next",hash:{},data:n}):a))+"'></a>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a;return"<div class='pl-item- prev js-prev "+(null!=(a=t.unless.call(e,null!=e?e.prev:e,{name:"unless",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"' title='\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f'>\n"+(null!=(a=t["if"].call(e,null!=e?e.prev:e,{name:"if",hash:{},fn:this.program(3,n,0),inverse:this.program(5,n,0),data:n}))?a:"")+"</div>\n<ul class='p-list- js-paginate-list'>\n"+(null!=(a=t.each.call(e,null!=e?e.current_list:e,{name:"each",hash:{},fn:this.program(7,n,0),inverse:this.noop,data:n}))?a:"")+"</ul>\n<div class='pl-item- next js-next "+(null!=(a=t.unless.call(e,null!=e?e.next:e,{name:"unless",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?a:"")+"' title='\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f'>\n"+(null!=(a=t["if"].call(e,null!=e?e.next:e,{name:"if",hash:{},fn:this.program(9,n,0),inverse:this.program(5,n,0),data:n}))?a:"")+"</div>"},useData:!0}),this.HandlebarsTemplates["paginate/paginator"]}.call(this),Paginate=function(){var e={},t=function(e){var t=location.search.replace(/\&page=[\d]+/gi,"").replace(/\?page=[\d]+/gi,"?").replace(/\?\&/,"?"),i={length:10,cur:1,itemWidth:36,tmpl_1st:location.pathname+("?"!=t?t:""),tmpl:"?page=#page#"},n=null,a=1,s=1,o=0;""!=location.search.replace(/(^\?(?![^&]+)|&|\?)?page=[\d]+&?/,"")&&(i.tmpl=i.tmpl_1st+"&"+i.tmpl.substr(1));var r=function(){(o=n.width())&&(a=Math.floor(o/i.itemWidth),o=a*i.itemWidth,i.length>a?s=i.cur+a<=i.length?i.cur:i.length-a+1:(s=1,a=i.length),c(),l())},l=function(){n.find(".js-plink").each(function(){$(this).attr("href",i.tmpl.replace("#page#",$(this).html()))})},c=function(){for(var e=[],t=s;t<s+a;t++)e[e.length]=t===i.cur?'<li class="pl-item- pli-current">'+t+"</li>":'<li class="pl-item-"><a href="#" class="pli-link- js-plink">'+t+"</a></li>";n.html(HandlebarsTemplates["paginate/paginator"]({current_list:e,prev:i.cur>1&&i.tmpl.replace("#page#",i.cur-1),next:i.cur<i.length&&i.tmpl.replace("#page#",i.cur+1)})),n.parent(".js-pagination").html(n)};return{init:function(t){if(n=$("#paginate-container-"+e),!n.length)throw"DOM-elements for page list are not found";if(t)for(var a in t)i[a]="undefined"!=typeof i[a]?t[a]:i[a];$(window).resize(function(){r()}),r()}}};return{get:function(i,n){return(n||"undefined"==typeof e[i])&&(e[i]=t(i)),e[i]}}}(),app.modules.paginate=app.modules.paginate||{},app.modules.paginate.load=function(e){paginateRender(e&&e.needToCreateNew)},app.modules.\u0441atalogueTraitsSort=function(e){var t=[],i=function(e,t,i){var n=[],a=[];return e.each(function(){var e=$(this),s=$.trim($.trim(e.find("."+i).text()).split("\n")[0]),o=e.find("input");o.prop("checked",!1),t.filter("#"+o.attr("id")).length?a.push([s,e]):n.push([s,e])}),n=n.sort(naturalSort),a=a.sort(naturalSort),$.each(n,function(){a.push(this)}),$.each(a,function(e,t){n[e]=$("<div>").append(t[1].first().clone()).html()}),$("<ul>").addClass("facet-list js-facet-list").attr({"data-position":e.parent().data("position")}).append(n.join(""))},n=function(e){var n=e.find(".js-fl-item"),a=e.find(".js-filter-list"),s=n.find(":checked"),o=e.find(".js-traits-filter"),r=o.find(".js-traits-filter-input"),l=e.find(".js-f-name"),c=l.text();a.empty(),t[c]=i(n,s,"js-flil-link"),a.append(t[c]),l.after(o.show()),r.focus().val(""),s.each(function(){var e=$(this).attr("id");a.find("#"+e).prop("checked",!0)})},a=function(e,t){var i=0;return e.each(function(){var e=$(this);e.find(".js-flil-link").text().toLowerCase().search(t)>=0&&!e.hasClass("js-disable-trait")?(e.show(),i++):e.hide()}),i},s=function(e){e.each(function(){$(this).show()})},o=function(){var e=$(this),t=e.val().toLowerCase().replace(/(?:^\s+|\s+$)/g,""),i=new RegExp(".*"+t+".*"),n=e.closest(".js-facet"),o=n.find(".js-fl-item"),r=n.find(".js-traits-empty"),l=n.find(".js-clear-filter");e.val().length?l.show():l.hide(),e.val().length>1?a(o,i)?r.hide():r.show():(s(o),r.hide())},r=function(){$(".js-facet").find(".js-traits-filter-input").each(function(){$(this).trigger("input")})},l=function(){$(this).closest(".js-facet").find(".js-traits-filter-input").val("").trigger("input").focus()},c=function(){$doc.on("input",".js-traits-filter-input",o).on("click",".js-clear-filter",l).on("coreTraits:updateLockedFacets",r).on("click",".js-open-hidden-facets",function(){n($(this).closest(".js-facet"))})};return e.load=function(){c()},e}(app.modules.\u0441atalogueTraitsSort||{}),Facets=function(){function e(){$(".js-flil-check:checked").prop({checked:!1})}function t(e){var t=e.val(),i=e.data("maxlength");if(t.length>i)return e.val(t.substr(0,i))}function i(e){var t=e.data("geofilters-url"),i=[];return $.ajax({url:t,success:function(t){t.length>7&&(i=t.slice(7),t=t.slice(0,7)),t.length&&e.replaceWith($(HandlebarsTemplates["shared/geo_filters"]({data:t,dataCut:i}))),t.length||e.remove()}})}function n(e){var t=e.data("facets-url");return $.ajax({url:t,success:function(t){t&&e.replaceWith($(t))}})}function a(t){$(".js-filters-loading").length||c||(s=t,o=$(".js-gfv-value:checked").val()||s.rubric_url,c=!0,$.fn.toggler&&$(".js-toggle").toggler(),f(),d(),$(".js-numeric").numeric({negative:!1}),app.config.clearCheckedTraits&&e())}var s,o,r,l,c,u=function(e,t){return e.each(function(){$("#trait-filter_"+$(this).val()).prop("checked",t)}),$("#trait-filter_"+e.eq(0).val()).prop("checked",!t).click(),!0},d=function(){$(".facet-list-top").each(function(){var e=$(this);e.multiselect({header:!1,selectedList:1,width:"auto",height:"auto",classes:"traits-top js-traits-top",noneSelectedText:e.data("title"),uncheckAllText:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c",checkAllText:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435",selectedText:"\u0412\u044b\u0431\u0440\u0430\u043d\u043e: #",click:function(e,t){var i=$("#trait-filter_"+t.value);i.prop("checked",t.checked),M(i),app.config.topFacetsMultiselect=e.currentTarget},checkAll:function(){u($(this).children("option"),!0)},uncheckAll:function(){u($(this).children("option"),!1)},close:function(){setTimeout(function(){B()},200)}})})},h=function(e){var t=e.find(".js-flil-check:checked"),i=[];t.each(function(e,t){i.push($(t).next(".js-flil-link").text())}),e.find(".js-fl-selected").text(i.reverse().join(", "))},p=function(e){var t=(e.attr("id"),$(".js-tl-sub-header")),i=e.prop("checked");e.hasClass("js-fli-checked");t.hasClass("invisible")&&t.removeClass("invisible"),$(".js-facet-list-top").length&&$('.js-facet-list-top option[value="'+e.data("id")+'"]').prop({selected:i}).parent().multiselect("refresh"),M(e),h(e.closest(".js-facet"))},f=function(){$(".js-f-name").click(function(){var e=$(this),t=e.parent().find(".js-facet-sort"),i=e.closest(".js-facet").hasClass("hide-facet-list");e.toggleClass("f-name-pressed",!i).closest(".js-facet").toggleClass("hide-facet-list",!i),t.length&&t.toggle()}),$doc.on("click",".js-flil-link",function(e){var t=$(this),i=t.hasClass("disable-check"),n=t.closest(".js-fli-label").find(".js-flil-check, .js-gfv-value");(i||app.config.isMobile)&&e.preventDefault(),!i&&app.config.asyncLoadFacetedList&&(n.prop({checked:!0}).change(),E(),e.preventDefault()),!i&&app.config.isMobile&&p(n.prop({checked:!n.prop("checked")}))}),$doc.on("change",".js-flil-check[data-slug="+app.config.discountFacetSlug+"]",function(){$(".js-top-facet-checkbox[data-slug="+app.config.discountFacetSlug+"]").prop("checked",$(this).prop("checked"))}),$doc.on("change",".js-flil-check",function(){p($(this))}),$doc.on("click",".js-gfv-value, .js-gfv-top-value, .js-cur-region",function(){var e=$(this);M(e)}),$(".js-trait-top").css({visibility:"visible"}),$doc.on("balloonFacetsInit",function(){if(!app.config.topFacetsMultiselect)return!1;var e=$(app.config.topFacetsMultiselect),t=$('.fli-filter-link [data-id="'+e.val()+'"]:eq(0)').closest(".fli-filter-link").clone().addClass("js-balloon-clone").css({opacity:1}).appendTo("body"),i=e.offset();t.css({top:i.top-e.height()/2,left:i.left+e.closest("label").outerWidth(!0)}).show(),app.config.topFacetsMultiselect=!1}),$doc.on("click",B).on("change",".js-top-facet-checkbox",function(){var e=$(this),t=$("#trait-filter_"+e.data("id"));t.prop({checked:e.prop("checked")}),Facets.loadDataFilter(t),app.config.topFacetsMultiselect=e}).on("click",".js-trait-dropdown-title",function(e){var t=$(this).closest(".js-trait-dropdown");t.hasClass("active")?t.removeClass("active"):(m(),$(e.target).hasClass("js-trait-dropdown-reset")||t.addClass("active"))}).on("click",function(e){$(e.target).closest(".js-trait-dropdown").hasClass("active")||m()}).on("click",".js-b-order-button-facet",function(e){E(),e.preventDefault()}).on("click",".js-gft-item",v).on("change",".js-gfv-value",b).on("change",".js-gfv-top-value",y).on("keyup",".js-price-min, .js-price-max",function(e){var i=$(this);!!l&&clearTimeout(l),t(i)||(l=setTimeout(function(){M(i),F()},1500)),13===(e.which||e.keyCode)&&i.val().length>0&&E()}).on("openTraitsPopup:popups",function(){app.config.isMobile&&$(".js-facet").each(function(e,t){h($(t))})}).on("click",".js-plink",function(e){app.config.asyncLoadFacetedList&&(A($(this).attr("href")),e.preventDefault())})},m=function(){$(".js-trait-dropdown").removeClass("active")},g=function(){return app.config.currentCompanyId?$(".js-traits-top input:checked").length:$(".js-fli-label input:not(.js-fli-checked):checked").length||$(".js-price-max, .js-price-min").length},v=function(e){var t=e.length?e:$(this);$(".js-geo-filter-values").addClass("dn"),$('.js-geo-filter-values[data-type="'+t.data("type")+'"]').removeClass("dn"),m(),$(".js-gft-current").text(t.data("left-filter"))},b=function(){var e=$(this);o=e.prop("checked")?e.val():s.rubric_url,$('.js-gfv-top-value[value="'+o+'"]').prop({checked:e.prop("checked")}),$(".js-trait-dropdown-title").each(function(){var e=$(this);e.text(e.data("name"))}),$('.js-trait-dropdown-title[data-type="'+e.data("type")+'"]').text(e.data("name")),g()?(I(),F()):$(".js-b-order-button-facet").prop({disabled:!0}).off("click")},y=function(){var e=$(this);v(e),$('.js-gfv-value[value="'+e.val()+'"]').prop({checked:e.prop("checked")}).change(),m()},_=function(e){var t,i={},n=$(".js-price-min").val(),a=$(".js-price-max").val(),o=$(".js-gfv-value:checked").data("filter-attrs");return $(".js-cur-region").prop("checked")&&(i.current_region=!0),s.usePriceRange&&(n||a)&&(n!==parseFloat(s.minPrice)&&(i.price_min=n),a!==parseFloat(s.maxPrice)&&(i.price_max=a)),e.withFacets&&(t=S())&&(i.facets=t),!e.withoutGeo&&o&&$.extend(i,o),e.changeListInfo&&(i.change_list_info=!0),i=$.param(i)},w=function(e,t){return Number(e.position)-Number(t.position)},x=function(e,t){return Number(e.traitId)-Number(t.traitId)},k=function(e,t){var i=[];return $.each(e,function(){i.push(this.id)}),i.join(t)},C=function(e){for(var t={},i=[],n=0;n<e.length;n++){t[e[n].id]=!0}return Object.keys(t).forEach(function(e){i.push({id:e})}),i},P=function(e){var t=Number(e[0].traitId),i=[];return e.forEach(function(n,a){var s=Number(a)+1;i.push({id:t+"_"+k(e.filter(function(e){var i=Number(e.traitId);return t===i}).sort(w),"|"),position:$("[value="+t+"]").closest(".js-fl-item").data("position")}),t=e.length>s?e[s].traitId:n.traitId}),C(i)},T=function(e){var t,i=[],n=[],a=[],s=[],o=[];return $.extend(i,e.sort(x)),t=i[1].traitId,i[0].traitId===t?($.extend(s,i.filter(function(e){return e.traitId===t}).sort(w).splice(0,2)),$.extend(n,P(s))):(s.push(i.splice(0,1)[0]),s.push(i.filter(function(e){return e.traitId===t}).sort(w).splice(0,1)[0]),$.extend(n,P(s))),$.extend(a,P(i.filter(function(e){var t=0;return s.forEach(function(i){t=e.traitId===i.traitId&&e.position===i.position?t+1:t}),!t}))),o.push(n),o.push(a),o},D=function(e){var t=[],i=[];return e.forEach(function(i,n){t.push({id:n+"_"+k(e[n].sort(w),"|"),position:n})}),i.push(t),i},S=function(e){var t=[],i=[],n=$(".js-facet input:checked"),a=e&&e.withTraitsParam&&n.length>2;return n.each(function(e,i){var n=$(i),s=Number(n.attr("value")),o={id:n.data("slug"),position:n.closest(".js-fl-item").data("position"),traitId:s};a?t.push(o):t[s]?t[s].push(o):t[s]=[o]}),t.length>0&&(i=a?T(t):D(t)),i.length>1?k(i[0],"&")+"?traits="+k(i[1],":"):i.length>0&&k(i[0].sort(w),"&")},A=function(e){var t=$(".js-facet-result-container");$("html, body").animate({scrollTop:$(".js-facets-scroll-top").offset().top},500),t.addClass("loading"),$.get(e).then(function(i){t.removeClass("loading").html(i),window.history.replaceState({},"",e),B(),spanToLinks(),app.modules.barmen.load(),$doc.trigger("reload:facets").trigger("mark:findMark").trigger("unlock:seoLinks"),$(".js-facet input:checked").addClass("js-fli-checked"),app.config.cataloguePageHeader&&app.config.cataloguePageHeader.length&&$(".js-catalogue-page-header").text(app.config.cataloguePageHeader),app.config.usedTraitsList&&$(".js-used-traits-filter").replaceWith(app.config.usedTraitsList),$(".js-catalogue-list-stats").html(app.config.catalogueListStats),$(".js-catalogue-pagination").html(app.config.cataloguePaginator),app.config.cataloguePaginator&&app.config.cataloguePaginator.length&&app.modules.paginate.load({needToCreateNew:!0})})},j=function(e){var t,i,n=o;return t=s.usePriceRange&&_({withoutGeo:!0,changeListInfo:e&&e.changeListInfo}),i=S({withTraitsParam:e&&e.withTraitsParam}),i&&(i="f:"+i,-1!=n.indexOf("?")?n=n.replace("?","/"+i+"?"):n+="/"+i),t&&(n=n+(-1!=n.indexOf("?")?"&":"?")+t),n},E=function(){app.config.asyncLoadFacetedList?A(j({changeListInfo:!0,withTraitsParam:!0})):location.href=j()},I=function(){$(".js-b-order-button-facet").removeClass("disable-btn").prop({disabled:!1})},N=function(){return $(".js-flil-check:checked").length+$(".js-gfv-value:checked").length+$(".js-price-max").val().length+$(".js-price-min").val().length+$(".js-cur-region:checked").length},F=function(){$(".js-traits-clear").prop({disabled:!N})},M=function(e){B(),$(".js-b-order-button-facet").addClass("disable-btn").prop("disabled",!0).off("click"),$.ajax({url:s.clean_ajax_traits_filter_url,type:"POST",data:_({withFacets:!0}),dataType:"json",success:function(t){s.isMobile?L(e,t):O(e,t)}})
},L=function(e,t){var i=$(".js-click-show-facets"),n=e.closest(".js-facet"),a=t.traits,s=t.traitables.count,o=!$(".js-flil-check:checked").length&&!$(".js-cur-region:checked").length&&!($(".js-price-max").val()||$(".js-price-min").val());R(n),s?(i.one("click",function(){return E(),!1}),H(a,n)):i.off("click"),i.toggleClass("disabled",o||!s),$(".js-traits-clear").toggleClass("disabled",o),$(".js-facets-with-result").toggleClass("dn",o).find(".js-facets-result").html(s),$(".js-first-traits-list").toggleClass("filtered",!o),$(".js-facet").each(function(e,t){var i=$(t),n=!i.find(".js-fli-label").length||!i.find(".js-flil-check:not(.disable-check)").length;i.toggleClass("empty-",n&&!i.hasClass("price"))})},R=function(e){e.find(".disable-check:visible").length||e.data("intersect")||e.addClass("non-blocking"),$(".js-facet:not(.non-blocking) .js-flil-check").addClass("disable-check").attr({disabled:app.config.isMobile}),$(".js-facet:not(.non-blocking) .js-flil-link").addClass("disable-check"),$(".js-facet:not(.non-blocking) .js-fl-item").addClass("js-disable-trait")},O=function(e,t){var i,n,a=t.traits,s=e.closest(".js-facet");R(s),t.traitables.count?(i=$('<a href="#" class="js-click-show-facets">\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c </a>'),$doc.off("click","a.js-click-show-facets"),$doc.on("click","a.js-click-show-facets",function(){return E(),!1}),g()?(I(),F()):$(".js-b-order-button-facet").prop({disabled:!0}).off("click"),n=$('<div data-id="'+e.data("id")+'">').html(i).append(t.traitables.count),z(e,n),H(a,s)):(z(e,'<div data-id="'+e.data("id")+'">\u0412\u044b\u0431\u0440\u0430\u043d\u043e: 0</div>'),$(".js-b-order-button-facet").addClass("disable-btn").prop("disabled",!0).off("click"))},H=function(e,t){for(var i in e)$(".js-facet input[data-id='"+i+"']").removeClass("disable-check").attr({disabled:!1}).parent().find(".js-flil-link").removeClass("disable-check").closest(".js-fl-item").removeClass("js-disable-trait");t.removeClass("non-blocking"),$doc.trigger("coreTraits:updateLockedFacets")},z=function(e,t){var i=!1;e.is(":visible")||(i=!0),e.parents().is(".js-price-facet")&&(e=$(".js-price-facet")),B(),r=e,e.showBalloon({tipSize:0,hideDuration:0,showDuration:0,hideAnimation:null,position:"right",contents:t,classname:"fli-filter-link",offsetX:(e.is(".js-price-facet")?0:e.parent().width())+7,css:{height:26,padding:0,borderRadius:0,paddingRight:5,paddingLeft:8,border:"1px solid #bfbfbf",boxShadow:"none",color:"#08c",background:"none repeat scroll 0 0 #fff",opacity:i||!e.is(":visible")?0:1,textAlign:"left"}}),$doc.trigger("balloonFacetsInit")},B=function(){r&&$(".fli-filter-link").hide()};return{init:function(e){var t=$(".js-ajax-geofilters"),s=$(".js-ajax-facets");t.length&&i(t).then(function(){a(e)}).fail(function(t,i,n){a(e),console.error("AjaxGeoFilters: "+n)}),s.length&&s.each(function(){n($(this)).then(function(){a(e)}).fail(function(t,i,n){a(e),console.error("AjaxFacets: "+n)})}),a(e)},loadDataFilter:function(e){M(e)},showBalloon:function(e,t){z(e,t)},hideBalloon:function(){B()}}}(),function(e){var t=0,i=e(document);e.widget("ech.multiselect",{options:{header:!0,height:175,minWidth:225,classes:"",checkAllText:"Check all",uncheckAllText:"Uncheck all",noneSelectedText:"Select options",selectedText:"# selected",selectedList:0,show:null,hide:null,autoOpen:!1,multiple:!0,position:{}},_create:function(){var i=this.element.hide(),n=this.options;this.speed=e.fx.speeds._default,this._isOpen=!1,this._namespaceID=this.eventNamespace||"multiselect"+t;var a=(this.button=e('<button type="button"><span class="ui-icon ui-icon-triangle-1-s"></span></button>')).addClass("ui-multiselect ui-widget ui-state-default ui-corner-all").addClass(n.classes).attr({title:i.attr("title"),"aria-haspopup":!0,tabIndex:i.attr("tabIndex")}).insertAfter(i),s=((this.buttonlabel=e("<span />")).html(n.noneSelectedText).appendTo(a),(this.menu=e("<div />")).addClass("ui-multiselect-menu ui-widget ui-widget-content ui-corner-all").addClass(n.classes).appendTo(document.body)),o=(this.header=e("<div />")).addClass("ui-widget-header ui-corner-all ui-multiselect-header ui-helper-clearfix").appendTo(s);(this.headerLinkContainer=e("<ul />")).addClass("ui-helper-reset").html(function(){return!0===n.header?'<li><a class="ui-multiselect-all" href="#"><span class="ui-icon ui-icon-check"></span><span>'+n.checkAllText+'</span></a></li><li><a class="ui-multiselect-none" href="#"><span class="ui-icon ui-icon-closethick"></span><span>'+n.uncheckAllText+"</span></a></li>":"string"==typeof n.header?"<li>"+n.header+"</li>":""}).append('<li class="ui-multiselect-close"><a href="#" class="ui-multiselect-close"><span class="ui-icon ui-icon-circle-close"></span></a></li>').appendTo(o),(this.checkboxContainer=e("<ul />")).addClass("ui-multiselect-checkboxes ui-helper-reset").appendTo(s);this._bindEvents(),this.refresh(!0),n.multiple||s.addClass("ui-multiselect-single"),t++},_init:function(){!1===this.options.header&&this.header.hide(),this.options.multiple||this.headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none").hide(),this.options.autoOpen&&this.open(),this.element.is(":disabled")&&this.disable()},refresh:function(i){var n=this.element,a=this.options,s=this.menu,o=this.checkboxContainer,r=[],l="",c=n.attr("id")||t;n.find("option").each(function(t){var i,n=(e(this),this.parentNode),s=this.innerHTML,o=this.title,u=this.value,d="ui-multiselect-"+(this.id||c+"-option-"+t),h=this.disabled,p=this.selected,f=["ui-corner-all"],m=(h?"ui-multiselect-disabled ":" ")+this.className;"OPTGROUP"===n.tagName&&(i=n.getAttribute("label"),-1===e.inArray(i,r)&&(l+='<li class="ui-multiselect-optgroup-label '+n.className+'"><a href="#">'+i+"</a></li>",r.push(i))),h&&f.push("ui-state-disabled"),p&&!a.multiple&&f.push("ui-state-active"),l+='<li class="'+m+'">',l+='<label for="'+d+'" title="'+o+'" class="'+f.join(" ")+'">',l+='<input id="'+d+'" name="multiselect_'+c+'" type="'+(a.multiple?"checkbox":"radio")+'" value="'+u+'" title="'+s+'"',p&&(l+=' checked="checked"',l+=' aria-selected="true"'),h&&(l+=' disabled="disabled"',l+=' aria-disabled="true"'),l+=" /><span>"+s+"</span></label></li>"}),o.html(l),this.labels=s.find("label"),this.inputs=this.labels.children("input"),this._setButtonWidth(),this._setMenuWidth(),this.button[0].defaultValue=this.update(),i||this._trigger("refresh")},update:function(){var t,i=this.options,n=this.inputs,a=n.filter(":checked"),s=a.length;return t=0===s?i.noneSelectedText:e.isFunction(i.selectedText)?i.selectedText.call(this,s,n.length,a.get()):/\d/.test(i.selectedList)&&i.selectedList>0&&s<=i.selectedList?a.map(function(){return e(this).next().html()}).get().join(", "):i.selectedText.replace("#",s).replace("#",n.length),this._setButtonValue(t),t},_setButtonValue:function(e){this.buttonlabel.text(e)},_bindEvents:function(){function t(){return n[n._isOpen?"close":"open"](),!1}var n=this,a=this.button;a.find("span").bind("click.multiselect",t),a.bind({click:t,keypress:function(e){switch(e.which){case 27:case 38:case 37:n.close();break;case 39:case 40:n.open()}},mouseenter:function(){a.hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")},mouseleave:function(){e(this).removeClass("ui-state-hover")},focus:function(){a.hasClass("ui-state-disabled")||e(this).addClass("ui-state-focus")},blur:function(){e(this).removeClass("ui-state-focus")}}),this.header.delegate("a","click.multiselect",function(t){e(this).hasClass("ui-multiselect-close")?n.close():n[e(this).hasClass("ui-multiselect-all")?"checkAll":"uncheckAll"](),t.preventDefault()}),this.menu.delegate("li.ui-multiselect-optgroup-label a","click.multiselect",function(t){t.preventDefault();var i=e(this),a=i.parent().nextUntil("li.ui-multiselect-optgroup-label").find("input:visible:not(:disabled)"),s=a.get(),o=i.parent().text();!1!==n._trigger("beforeoptgrouptoggle",t,{inputs:s,label:o})&&(n._toggleChecked(a.filter(":checked").length!==a.length,a),n._trigger("optgrouptoggle",t,{inputs:s,label:o,checked:s[0].checked}))}).delegate("label","mouseenter.multiselect",function(){e(this).hasClass("ui-state-disabled")||(n.labels.removeClass("ui-state-hover"),e(this).addClass("ui-state-hover").find("input").focus())}).delegate("label","keydown.multiselect",function(t){switch(t.preventDefault(),t.which){case 9:case 27:n.close();break;case 38:case 40:case 37:case 39:n._traverse(t.which,this);break;case 13:e(this).find("input")[0].click()}}).delegate('input[type="checkbox"], input[type="radio"]',"click.multiselect",function(t){var i=e(this),a=this.value,s=this.checked,o=n.element.find("option");if(this.disabled||!1===n._trigger("click",t,{value:a,text:this.title,checked:s}))return void t.preventDefault();i.focus(),i.attr("aria-selected",s),o.each(function(){this.value===a?this.selected=s:n.options.multiple||(this.selected=!1)}),n.options.multiple||(n.labels.removeClass("ui-state-active"),i.closest("label").toggleClass("ui-state-active",s),n.close()),n.element.trigger("change"),setTimeout(e.proxy(n.update,n),10)}),i.bind("mousedown."+this._namespaceID,function(t){!n._isOpen||e.contains(n.menu[0],t.target)||e.contains(n.button[0],t.target)||t.target===n.button[0]||n.close()}),e(this.element[0].form).bind("reset.multiselect",function(){setTimeout(e.proxy(n.refresh,n),10)})},_setButtonWidth:function(){var e=this.element.outerWidth(),t=this.options;/\d/.test(t.minWidth)&&e<t.minWidth&&(e=t.minWidth),this.button.outerWidth(e)},_setMenuWidth:function(){this.menu.outerWidth(this.button.outerWidth())},_traverse:function(t,i){var n=e(i),a=38===t||37===t;if($next=n.parent()[a?"prevAll":"nextAll"]("li:not(.ui-multiselect-disabled, .ui-multiselect-optgroup-label)")[a?"last":"first"](),$next.length)$next.find("label").trigger("mouseover");else{var s=this.menu.find("ul").last();this.menu.find("label")[a?"last":"first"]().trigger("mouseover"),s.scrollTop(a?s.height():0)}},_toggleState:function(e,t){return function(){this.disabled||(this[e]=t),t?this.setAttribute("aria-selected",!0):this.removeAttribute("aria-selected")}},_toggleChecked:function(t,i){var n=i&&i.length?i:this.inputs,a=this;n.each(this._toggleState("checked",t)),n.eq(0).focus(),this.update();var s=n.map(function(){return this.value}).get();this.element.find("option").each(function(){!this.disabled&&e.inArray(this.value,s)>-1&&a._toggleState("selected",t).call(this)}),n.length&&this.element.trigger("change")},_toggleDisabled:function(t){this.button.attr({disabled:t,"aria-disabled":t})[t?"addClass":"removeClass"]("ui-state-disabled");var i=this.menu.find("input"),n="ech-multiselect-disabled";i=t?i.filter(":enabled").data(n,!0):i.filter(function(){return!0===e.data(this,n)}).removeData(n),i.attr({disabled:t,"arial-disabled":t}).parent()[t?"addClass":"removeClass"]("ui-state-disabled"),this.element.attr({disabled:t,"aria-disabled":t})},open:function(){var t=this,i=this.button,n=this.menu,a=this.speed,s=this.options,o=[];if(!1!==this._trigger("beforeopen")&&!i.hasClass("ui-state-disabled")&&!this._isOpen){var r=n.find("ul").last(),l=s.show;e.isArray(s.show)&&(l=s.show[0],a=s.show[1]||t.speed),l&&(o=[l,a]),r.scrollTop(0).height(s.height),this.position(),e.fn.show.apply(n,o),this.labels.eq(0).trigger("mouseover").trigger("mouseenter").find("input").trigger("focus"),i.addClass("ui-state-active"),this._isOpen=!0,this._trigger("open")}},close:function(){if(!1!==this._trigger("beforeclose")){var t=this.options,i=t.hide,n=this.speed,a=[];e.isArray(t.hide)&&(i=t.hide[0],n=t.hide[1]||this.speed),i&&(a=[i,n]),e.fn.hide.apply(this.menu,a),this.button.removeClass("ui-state-active").trigger("blur").trigger("mouseleave"),this._isOpen=!1,this._trigger("close")}},enable:function(){this._toggleDisabled(!1)},disable:function(){this._toggleDisabled(!0)},checkAll:function(){this._toggleChecked(!0),this._trigger("checkAll")},uncheckAll:function(){this._toggleChecked(!1),this._trigger("uncheckAll")},getChecked:function(){return this.menu.find("input").filter(":checked")},destroy:function(){return e.Widget.prototype.destroy.call(this),i.unbind(this._namespaceID),this.button.remove(),this.menu.remove(),this.element.show(),this},isOpen:function(){return this._isOpen},widget:function(){return this.menu},getButton:function(){return this.button},position:function(){var t=this.options;if(e.ui.position&&!e.isEmptyObject(t.position))t.position.of=t.position.of||button,this.menu.show().position(t.position).hide();else{var i=this.button.offset();this.menu.css({top:i.top+this.button.outerHeight(),left:i.left})}},_setOption:function(t,i){var n=this.menu;switch(t){case"header":n.find("div.ui-multiselect-header")[i?"show":"hide"]();break;case"checkAllText":n.find("a.ui-multiselect-all span").eq(-1).text(i);break;case"uncheckAllText":n.find("a.ui-multiselect-none span").eq(-1).text(i);break;case"height":n.find("ul").last().height(parseInt(i,10));break;case"minWidth":this.options[t]=parseInt(i,10),this._setButtonWidth(),this._setMenuWidth();break;case"selectedText":case"selectedList":case"noneSelectedText":this.options[t]=i,this.update();break;case"classes":n.add(this.button).removeClass(this.options.classes).addClass(i);break;case"multiple":n.toggleClass("ui-multiselect-single",!i),this.options.multiple=i,this.element[0].multiple=i,this.refresh();break;case"position":this.position()}e.Widget.prototype._setOption.apply(this,arguments)}})}(jQuery),function(e){function t(){this.initialize.apply(this,arguments)}function i(i,n,s){function o(e,t,i,n,a){var s=Math.round(n/1.7320508);t.inactive()["setBorder"+i.camel.pos.f](n)["setBorder"+i.camel.pos.c1](s)["setBorder"+i.camel.pos.c2](s)["set"+i.camel.pos.p1](i.isTopLeft?-n:e.inner[i.size.p])["set"+i.camel.pos.c1](e.inner[i.size.c]/2-s).active().$.css("border-"+i.pos.f+"-color",a)}n.stop(!0,!0);var r,l,c={position:"absolute",height:"0",width:"0",border:"solid 0 transparent"},u=new t(i),d=new t(n);if(d.setTop(-s.offsetY+(s.position&&s.position.indexOf("top")>=0?u.top-d.height:s.position&&s.position.indexOf("bottom")>=0?u.bottom:u.center.top-d.height/2)),d.setLeft(s.offsetX+(s.position&&s.position.indexOf("left")>=0?u.left-d.width:s.position&&s.position.indexOf("right")>=0?u.right:u.center.left-d.width/2)),s.tipSize>0){n.data("outerTip")&&(n.data("outerTip").remove(),n.removeData("outerTip")),n.data("innerTip")&&(n.data("innerTip").remove(),n.removeData("innerTip")),r=new t(e("<div>").css(c).appendTo(n)),l=new t(e("<div>").css(c).appendTo(n));for(var h,p=0;p<a.pos.length;p++){if(h=a.getRelativeNames(p),d.center[h.pos.c1]>=u[h.pos.c1]&&d.center[h.pos.c1]<=u[h.pos.c2])if(p%2==0){if(d[h.pos.o]>=u[h.pos.o]&&d[h.pos.f]>=u[h.pos.f])break}else if(d[h.pos.o]<=u[h.pos.o]&&d[h.pos.f]<=u[h.pos.f])break;h=null}h?(d["set"+h.camel.pos.p1](d[h.pos.p1]+(h.isTopLeft?1:-1)*(s.tipSize-d["border"+h.camel.pos.o])),o(d,r,h,s.tipSize,n.css("border-"+h.pos.o+"-color")),o(d,l,h,s.tipSize-2*d["border"+h.camel.pos.o],n.css("background-color")),n.data("outerTip",r.$).data("innerTip",l.$)):e.each([r.$,l.$],function(){this.remove()})}}function n(t,i){var n=t.data("balloon")&&t.data("balloon").get(0);return!(n&&(n==i.relatedTarget||e.contains(n,i.relatedTarget)))}var a={};a.pos=e.extend(["top","bottom","left","right"],{camel:["Top","Bottom","Left","Right"]}),a.size=e.extend(["height","width"],{camel:["Height","Width"]}),a.getRelativeNames=function(e){var t={pos:{o:e,f:e%2==0?e+1:e-1,p1:e%2==0?e:e-1,p2:e%2==0?e+1:e,c1:e<2?2:0,c2:e<2?3:1},size:{p:e<2?0:1,c:e<2?1:0}},i={};for(var n in t){i[n]||(i[n]={});for(var s in t[n])i[n][s]=a[n][t[n][s]],i.camel||(i.camel={}),i.camel[n]||(i.camel[n]={}),i.camel[n][s]=a[n].camel[t[n][s]]}return i.isTopLeft=i.pos.o==i.pos.p1,i},function(){function i(e,t){if(t==undefined)return i(e,!0),i(e,!1);var n=a.getRelativeNames(t?0:2);return e[n.size.p]=e.$["outer"+n.camel.size.p](),e[n.pos.f]=e[n.pos.o]+e[n.size.p],e.center[n.pos.o]=e[n.pos.o]+e[n.size.p]/2,e.inner[n.pos.o]=e[n.pos.o]+e["border"+n.camel.pos.o],e.inner[n.size.p]=e.$["inner"+n.camel.size.p](),e.inner[n.pos.f]=e.inner[n.pos.o]+e.inner[n.size.p],e.inner.center[n.pos.o]=e.inner[n.pos.f]+e.inner[n.size.p]/2,e}var n={setBorder:function(e,t){return function(n){return this.$.css("border-"+e.toLowerCase()+"-width",n+"px"),this["border"+e]=n,this.isActive?i(this,t):this}},setPosition:function(e,t){return function(n){return this.$.css(e.toLowerCase(),n+"px"),this[e.toLowerCase()]=n,this.isActive?i(this,t):this}}};t.prototype={initialize:function(t){this.$=t,e.extend(!0,this,this.$.offset(),{center:{},inner:{center:{}}});for(var i=0;i<a.pos.length;i++)this["border"+a.pos.camel[i]]=parseInt(this.$.css("border-"+a.pos[i]+"-width"))||0;this.active()},active:function(){return this.isActive=!0,i(this),this},inactive:function(){return this.isActive=!1,this}};for(var s=0;s<a.pos.length;s++)t.prototype["setBorder"+a.pos.camel[s]]=n.setBorder(a.pos.camel[s],s<2),s%2==0&&(t.prototype["set"+a.pos.camel[s]]=n.setPosition(a.pos.camel[s],s<2))}(),e.fn.balloon=function(t){return t=e.extend(!0,{},e.balloon.defaults,t),this.one("mouseenter",function(){var i=e(this),a=this,s=i.unbind("mouseenter",arguments.callee).showBalloon(t).mouseenter(function(e){n(i,e)&&i.showBalloon()}).data("balloon");s&&s.mouseleave(function(t){a==t.relatedTarget||e.contains(a,t.relatedTarget)||i.hideBalloon()}).mouseenter(function(){i.showBalloon()})}).mouseleave(function(t){var i=e(this);n(i,t)&&i.hideBalloon()})},e.fn.showBalloon=function(t){var n,a,s;return e.balloon.defaults.css||(e.balloon.defaults.css={}),!t&&this.data("options")||this.data("options",e.extend(!0,{},e.balloon.defaults,t)),t=this.data("options"),this.each(function(){n=e(this),(s=n.data("offTimer"))&&clearTimeout(s);var o=e.isFunction(t.contents)?t.contents():t.contents||n.attr("title"),r=!(a=n.data("balloon"));r&&(a=e("<div>").append(o)),(t.url||a&&""!=a.html())&&(!r&&o&&o!=a.html()&&a.empty().append(o),n.removeAttr("title"),t.url&&a.load(e.isFunction(t.url)?t.url(this):t.url,function(e,s,o){t.ajaxComplete&&t.ajaxComplete(e,s,o),i(n,a,t)}),r?(a.addClass(t.classname).css(t.css).css({visibility:"hidden",position:"absolute"}).appendTo("body"),n.data("balloon",a),i(n,a,t),a.hide().css("visibility","visible")):i(n,a,t),n.data("onTimer",setTimeout(function(){t.showAnimation?t.showAnimation.apply(a.stop(!0,!0),[t.showDuration]):a.show(t.showDuration,function(){this.style.removeAttribute&&this.style.removeAttribute("filter")})},t.delay)))})},e.fn.hideBalloon=function(){var t,i,n=this.data("options");return this.each(function(){var a=e(this);(t=a.data("onTimer"))&&clearTimeout(t),(i=a.data("offTimer"))&&clearTimeout(i),a.data("offTimer",setTimeout(function(){var e=a.data("balloon");n.hideAnimation?e&&n.hideAnimation.apply(e.stop(!0,!0),[n.hideDuration]):e&&e.stop(!0,!0).hide(n.hideDuration)},n.minLifetime))})},e.balloon={defaults:{contents:null,url:null,ajaxComplete:null,classname:null,position:"top",offsetX:0,offsetY:0,tipSize:12,delay:0,minLifetime:200,showDuration:100,showAnimation:null,hideDuration:80,hideAnimation:function(e){this.fadeOut(e)},css:{minWidth:"20px",padding:"5px",borderRadius:"6px",border:"solid 1px #777",boxShadow:"4px 4px 4px #555",color:"#666",backgroundColor:"#efefef",opacity:e.support.opacity?"0.85":null,zIndex:"32767",textAlign:"left"}}}}(jQuery),app.modules.rankingFactors=function(e){var t=function(){$doc.on("contextmenu","h1",function(e){e.preventDefault(),$doc.on("click","h1",function(){i()}),setTimeout(function(){$doc.off("contextmenu","h1"),$doc.off("click","h1")},1e3)})},i=function(){var e=app.config.listingRankingFactors||{};$(".js-catalogue-item").each(function(){var t=$(this),i=e[t.data("product_id")];i&&t.append($("<div>").addClass("cp-factor").text(i))})};return e.load=function(){t()},e}(app.modules.rankingFactors||{}),app.modules.listingSwitcher=function(e){function t(){return r.addClass("loading"),$.get(location.href,{listing_style:l.listingStyle,listing_sort:l.listingSort})}function i(e,t){var i,n=[location.protocol,"//",location.host,location.pathname].join(""),a=document.location.search,s=e+"="+t,o="?"+s;a&&(i=new RegExp(e+"[^&]*"),o=a.match(i)?a.replace(i,s):a+"&"+s),window.history.replaceState({},"",n+o)}function n(){var e;"undefined"!==$.type(l.listingSort)&&(e=s.hasClass("asc")?"desc":"asc",o.find(".js-listing-switcher-item.sort").removeClass("asc desc"),s.addClass(e),(s.hasClass("price")||s.hasClass("name"))&&s.data({listingSort:l.sortMethod+"_"+e})),l.listingStyle&&(o.find(".js-listing-switcher-item.style").removeClass("active"),s.addClass("active")),i("listing_sort",l.listingSort)}function a(){$doc.on("click",".js-listing-switcher-item",function(){if(s=$(this),o=s.closest(".js-listing-switcher"),r=$(o.data("listing-container")),l=s.data(),s.is(".rating.asc"))return!1;n(),t().then(function(e){r.removeClass("loading").html(e),spanToLinks(),$(".lazy").lazyload(),app.modules.barmen.load(),$doc.trigger("reload:listingSwitcher").trigger("mark:findMark").trigger("unlock:seoLinks")})})}var s,o,r,l;return e.load=function(){a()},e}(app.modules.listingSwitcher||{}),app.modules.pagePredl=function(e){function t(){var e,t=$(".js-products-list-scroll");$win.scroll(function(){clearTimeout(e),t.addClass("disable-hover"),e=setTimeout(function(){t.removeClass("disable-hover")},200)})}return e.load=function(){t()},e}(app.modules.pagePredl||{}),app.modules.toggleMap=function(e){function t(){var e=$(this);e.addClass("inactive").next(".js-toggle-map").removeClass("inactive").addClass("active"),$doc.trigger("showYandexMap",[e.data("map-selector")]),IStorage.set("mapOpen",!0)}function i(e){var t=e.closest(".js-toggle-map");t.toggleClass("active"),IStorage.set("mapOpen",t.hasClass("active")||""),Maps.getMap().container.fitToViewport()}function n(){app.config.toggleMap={},IStorage.get("mapOpen",function(e){!!e&&setTimeout(function(){t.call(r)},10)})}function a(e,t){setTimeout(function(){ymaps.ready(function(){$doc.trigger("openBalloon:toggleMap",t)})},e)}function s(){var e=$(this).closest(".js-company-box, .cl-item").find(".js-coordinates"),n=e.length&&void 0!==e.data("index")?e.data("index"):-1,s=200,o=$(".js-toggle-map");o.is(".inactive")?(t.call(r),s=500):!o.is(".active")&&i($(".js-toggle-map-toggler")),$("html, body").animate({scrollTop:o.offset().top-50},1e3),-1!==n?a(s,n):$doc.trigger("closeBalloon:toggleMap",n)}function o(){$doc.on("click",".js-show-toggle-map",t).on("click",".js-toggle-map-toggler",function(){i($(".js-toggle-map-toggler"))}).on("click",".js-clir-map",s)}var r;return e.load=function(){r=$(".js-show-toggle-map"),r.length&&n(),o()},e}(app.modules.toggleMap||{}),app.modules.findMark=function(e){function t(){var t=$(".js-search-query");t.length&&(e.turnOn(t.val()),$(".lazy").lazyload({threshold:600}))}function i(){$doc.on("mark:findMark",t)}var n=".js-search-results",a="span",s="mark-search-text",o=function(e){return"<"+a+" class='"+s+"'>"+e+"</"+a+">"},r=function(){return $(n).find(a+"."+s)};return e={setContainerSelector:function(e){n=e},setClassMark:function(e){s=e},setMarkTag:function(e){a=e},turnOn:function(e){var t=$(n);if(""!=e&&t.length){e=e.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),e=e.replace(/<\$#\$>/g,"");var i=new RegExp(e+(e.split(" ").length>1?"|"+e.split(" ").join("|"):""),"img");t.each(function(){var e=($(this).html(),0),t=[],n=$(this).html().replace(/<[^>]*>/gim,function(i){return t[e++]=i,"<$#$>"});n=n.replace(i,function(e){return 0==e.length?e:o(e)});var a=0;n=n.replace(/<\$#\$>/gim,function(){return t[a++]}),$(this).html(n)})}},off:function(){var e=r();$.each(e,function(){$(this).replaceWith($(this).text())})},load:function(){t(),i()}}}(app.modules.findMark||{}),app.modules.gnomsGA=function(e){function t(){n.forEach(function(e){ga("blizkoru.send","event","\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0427\u0438\u0442\u0430\u0442\u0435\u043b\u044f _\u0413\u041d\u041e\u041c\u0421_\u0421\u043f\u0435\u0446\u0440\u0430\u0437\u0434\u0435\u043b","01_\u041f\u043e\u043a\u0430\u0437\u044b_\u0413\u041d\u041e\u041c\u0421_"+e,"01_\u041f\u043e\u043a\u0430\u0437\u044b_\u0413\u041d\u041e\u041c\u0421_"+e)})}function i(){$doc.on("itemActivated:gnoms",function(e,i){n.length||i.find(".js-ga-gnoms-special-rubric").each(function(e,t){n.push($(t).data("rubric-name"))}),t()})}var n=[];return e.load=function(){i()},e}(app.modules.gnomsGA||{}),app.modules.conversionEventLog=function(e){function t(e,t){if(app.config.loggingData.requestUrl){t=t||{};var i=$(this),n=app.config.loggingData.itemsPayload||{},a=app.config.loggingData.commonPayload||{},s=t.type||i.data("eventType")||0,o=t.productId||i.data("eventItem")||0;n[o]&&$.ajax({method:"POST",url:app.config.loggingData.requestUrl,data:{conversion_type:s,product_id:o,payload:JSON.stringify($.extend(a,n[o],t.userId?{user_id:t.userId}:{}))}})}}function i(){$doc.on("click",".js-conversion-event",t).on("conversionEventLog:send",t).on("add:ordersItem",function(e,i,n){t(e,{type:"cart",productId:n.subject_id})})}return e.load=function(){app.config.loggingData&&i()},e}(app.modules.conversionEventLog||{}),app.modules.callBackBtn=function(e){function t(){$doc.on("click",".js-callback-hide",function(){$.cookie("closed_callback_btn",1),$(".js-callback-panel").hide()})}return e.load=function(){t()},e}(app.modules.callBackBtn||{}),app.modules.reviewsFiltersControls=function(e){function t(){s&&(s.order&&i(s.order),s.official_comments&&n(s.official_comments))}function i(e){var t,i,n=e;n=n.replace(/,-.*|-/g,""),i=$(".js-reviews-filter-button[name="+n+"]"),(t=i.data("order"))===n&&i.addClass("active").data({order:e}).attr({checked:-1!==i.data("order").indexOf("-")})}function n(e){$(".js-reviews-filter-with-answers").prop({checked:!!e})}function a(){$doc.on("click",".js-reviews-filter-reset",function(){$(this).trigger("removeParamsURL:reviewsFilter")}).on("change",".js-reviews-filter-button",function(){var e=$(this),t=e.data("order"),i=!!t.match(/^-/);e.addClass("active"),o.order=i?t.slice(1):"-"+t,"rating"===t&&(o.order=o.order+",-created_at"),$(this).trigger("setFilterParams:reviewsFilter",o)}).on("change",".js-reviews-filter-with-answers",function(){var e=$(this);e.is(":checked")?o.official_comments=!0:delete o.official_comments,e.trigger("setFilterParams:reviewsFilter",o)})}var s=app.config.urlParams,o=$.extend({},s);return e.load=function(){t(),a()},e}(app.modules.reviewsFiltersControls||{}),app.modules.couponForm=function(e){function t(){var e=$(this),t=e.data();$(".js-cof-type-switcher").removeClass("active"),e.addClass("active"),app.config.orderFormSendType=t.type,$(".js-cof-send-type").html(HandlebarsTemplates["customer_orders/coupon_"+t.type](t)),$(".js-of-terms-submit").removeClass("hidden")}function i(e){var t=e.find(".js-input-email-auth"),i=e.find(".js-input-phone-auth"),n=e.find(".js-cof-send-type-field");t.length?(n.val("email"),app.config.orderFormSendType="email"):i.length?(n.val("phone"),app.config.orderFormSendType="phone"):n.val("")}function n(e,t,i){e.find(".js-cof-"+t).addClass("error-on "+i),!app.config.isMobile&&u_reRenderPopup(),formSubmitter.enableButtons(e[0])}function a(e){var t=e.find(".js-cof-email:visible").removeClass("error-on other exist empty"),i=e.find(".js-cof-phone:visible").removeClass("error-on other"),a=0;return t&&t.length&&!t.val().length?(a++,n(e,"email","empty")):i&&i.length&&!i.val().match(/^(?:\+7|7|8)?\s?\(?[0-9]{3,5}\)?[0-9-\s]{5,}$/)&&(a++,n(e,"phone","other")),!a}function s(e){var t=e.find(".js-cof-email:visible").val();if(!(app.config.currentUser.email||app.config.currentUser.phone)&&i(e),!app.config.isUserSigned||a(e))return app.config.isUserSigned&&t&&t.length?void app.modules.signForms.checkEmail(t).fail(function(){n(e,"email","other")}).done(function(i){i.users.length?n(e,"email","exist"):app.modules.signForms.saveEmail(t).fail(function(){n(e,"email","other")}).done(function(){app.modules.orderForm.submit(e)})}):void app.modules.orderForm.submit(e)}function o(){$doc.on("click",".js-cof-type-switcher",t)}return e.prepare=function(e){return s(e)},e.load=function(){o()},e}(app.modules.couponForm||{}),app.modules.loadMore=function(e){function t(e,t,i){var n=t.closest(".js-load-more-wrapper"),a=i.page,s=i.totalPages;t.data({page:a}),n.find(".js-load-more-content").append(e).find(".lazy").lazyload(),a===s&&(t.remove(),document.dispatchEvent(new Event("contentLoaded:isLastPage")))}function i(e){var t=new URLSearchParams(window.location.search);t.set("page",e),history.pushState("","","?"+t.toString())}function n(e){var n=e.closest(".js-load-more-wrapper"),a=e.data();n.addClass("loading"),a.page=a.page+1,$.ajax({url:a.url,data:a,cache:!a.disableAjaxCache,success:function(n){t(n,e,a),i(a.page),$doc.trigger("contentLoaded:loadMore",a.id)},complete:function(){n.removeClass("loading")}})}function a(){$doc.on("click",".js-load-more",function(e){e.preventDefault(),n($(this))})}return e.load=function(){a()},e}(app.modules.loadMore||{}),app.modules.onReadyProject=app.modules.onReadyProject||{},app.modules.onReadyProject.load=function(){$(".js-toggle").toggler(),initFloatToolbar(),"undefined"!=typeof AdManager&&AdManager.init(),$doc.one("mousemove",function(){addFloatingTip()})},app.modules.myCompany=function(e){function t(e,t){$.ajax({type:e,url:t,dataType:"html",error:function(e,t,i){window.console&&console.log(e,t,i)},success:function(e){$(".js-dialog-popup-box").html(e).dialog({modal:!0,resizable:!1,height:"auto",width:300,minHeight:100,dialogClass:"dialog-popup my-company-popup",close:function(){!a&&app.config.currentUser.email&&location.reload(!0)}}),app.config.currentUser.email||app.modules.staticAuthComponent.rerender()}})}function i(){app.config.authComponent.wrappers["static"]["my-company"]={simpleRegistration:!0,crossDomainAuth:app.config.crossDomainAuth,withSocialRegistration:!1,orientation:"vertical",containerName:"myCompany",withoutSpinner:!0,cache:!1,fields:{set:["email"],required:["email"],hiddenByDefault:["password"]}}}function n(){$doc.on("click",".js-my-company-link",function(){t("GET",$(this).data("href"))}).on("submit",".js-my-company-form",function(e){var i=$(this);app.config.currentUser.email?t("POST",i.attr("action")):app.modules.authComponent.processUserData.apply(i),e.preventDefault()})}var a;return e.load=function(){a=app.config.currentUser.email||!1,a||i(),n()},e}(app.modules.myCompany||{});